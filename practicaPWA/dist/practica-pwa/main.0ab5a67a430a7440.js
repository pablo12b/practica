"use strict";(self.webpackChunkpracticaPWA=self.webpackChunkpracticaPWA||[]).push([[179],{932:(bi,wn,Me)=>{Me.d(wn,{$:()=>tg,A:()=>ie,G:()=>pt,K:()=>Cv,L:()=>Po,N:()=>Vr,P:()=>mc,R:()=>Cg,U:()=>Ie,V:()=>Rd,W:()=>Ju,X:()=>pi,Y:()=>ki,Z:()=>Fr,_:()=>Oo,a:()=>Ui,a0:()=>Nd,a1:()=>rc,a2:()=>Ld,a3:()=>sg,a4:()=>Pv,a5:()=>Un,a6:()=>Fo,a7:()=>og,a8:()=>Ua,a9:()=>Mv,aA:()=>Ke,aB:()=>It,aC:()=>te,aD:()=>$i,aE:()=>W,aF:()=>Oe,aG:()=>Qa,aH:()=>Pg,aI:()=>qo,aJ:()=>Qt,aN:()=>fn,aQ:()=>Yi,aa:()=>fe,ab:()=>Bt,ac:()=>gi,ad:()=>Jn,ae:()=>Lo,af:()=>Ue,ag:()=>ag,ah:()=>hn,ak:()=>Ba,al:()=>vs,am:()=>Ji,ap:()=>ng,aq:()=>ja,as:()=>d0,at:()=>m0,au:()=>Vt,av:()=>me,aw:()=>k,ax:()=>Xe,ay:()=>Zo,az:()=>Og,b:()=>xv,c:()=>Es,d:()=>Rg,e:()=>qv,f:()=>Zv,g:()=>jn,h:()=>dt,i:()=>fc,j:()=>Bi,k:()=>zg,l:()=>Hv,m:()=>aI,p:()=>Nt,r:()=>zv,s:()=>Ag,u:()=>xt});var T=Me(861),q=Me(58),x=Me(534),De=Me(879),ft=Me(582),Wt=Me(537);const Nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Tn=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new De.Yd("@firebase/auth");function qt(f,...c){Fe.logLevel<=De.in.ERROR&&Fe.error(`Auth (${x.SDK_VERSION}): ${f}`,...c)}function Xe(f,...c){throw qe(f,...c)}function It(f,...c){return qe(f,...c)}function Sr(f,c,d){const p=Object.assign(Object.assign({},Tn()),{[c]:d});return new q.LL("auth","Firebase",p).create(c,{appName:f.name})}function pn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&Xe(f,"argument-error"),Sr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return nt.create(f,...c)}function te(f,c,...d){if(!f)throw qe(c,...d)}function st(f){const c="INTERNAL ASSERTION FAILED: "+f;throw qt(c),new Error(c)}function Vt(f,c){f||st(c)}function rn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function cn(){return"http:"===ui()||"https:"===ui()}function ui(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Rr{constructor(c,d){this.shortDelay=c,this.longDelay=d,Vt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function ci(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(cn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Si(f,c){Vt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j=new Rr(3e4,6e4);function V(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,T.Z)(function*(f,c,d,p,_={}){return ue(f,_,(0,T.Z)(function*(){let E={},P={};p&&("GET"===c?P=p:E={body:JSON.stringify(p)});const F=(0,q.xO)(Object.assign({key:f.config.apiKey},P)).slice(1),X=yield f._getAdditionalHeaders();return X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode),L.fetch()(ut(f,f.config.apiHost,d,F),Object.assign({method:c,headers:X,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ue(f,c,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,T.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},$),c);try{const _=new bt(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const P=yield E.json();if("needConfirmation"in P)throw Gt(f,"account-exists-with-different-credential",P);if(E.ok&&!("errorMessage"in P))return P;{const F=E.ok?P.errorMessage:P.error.message,[X,_e]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Gt(f,"credential-already-in-use",P);if("EMAIL_EXISTS"===X)throw Gt(f,"email-already-in-use",P);if("USER_DISABLED"===X)throw Gt(f,"user-disabled",P);const Pe=p[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(_e)throw Sr(f,Pe,_e);Xe(f,Pe)}}catch(_){if(_ instanceof q.ZR)throw _;Xe(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function ge(f,c,d,p){return Se.apply(this,arguments)}function Se(){return(Se=(0,T.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&Xe(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function ut(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Si(f.config,_):`${f.config.apiScheme}://${_}`}function Lt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(It(this.auth,"network-request-failed")),j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=It(f,c,p);return _.customData._tokenResponse=d,_}function Dn(f){return void 0!==f&&void 0!==f.getResponse}function Cn(f){return void 0!==f&&void 0!==f.enterprise}class Vn{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Lt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function li(){return(li=(0,T.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ri(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,T.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",V(f,c))})).apply(this,arguments)}function Mi(){return(Mi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function hi(){return(hi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Pr(){return(Pr=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Mr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Et(){return(Et=(0,T.Z)(function*(f,c=!1){const d=(0,q.m9)(f),p=yield d.getIdToken(c),_=ln(p);te(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,P=E?.sign_in_provider;return{claims:_,token:p,authTime:Mr(xr(_.auth_time)),issuedAtTime:Mr(xr(_.iat)),expirationTime:Mr(xr(_.exp)),signInProvider:P||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function xr(f){return 1e3*Number(f)}function ln(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return qt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,q.tV)(d);return _?JSON.parse(_):(qt("Failed to decode base64 JWT payload"),null)}catch(_){return qt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Zt(f,c){return dn.apply(this,arguments)}function dn(){return(dn=(0,T.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof q.ZR&&function Ni({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class xi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,T.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class fi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mr(this.lastLoginAt),this.creationTime=Mr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function An(f){return gn.apply(this,arguments)}function gn(){return gn=(0,T.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Zt(f,function Zn(f,c){return Pr.apply(this,arguments)}(d,{idToken:p}));te(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const P=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function hs(f){return f.map(c=>{var{providerId:d}=c,p=(0,ft._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],F=function Ro(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,P),Pe=!!f.isAnonymous&&!(f.email&&E.passwordHash||F?.length),it={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:F,metadata:new fi(E.createdAt,E.lastLoginAt),isAnonymous:Pe};Object.assign(f,it)}),gn.apply(this,arguments)}function Or(){return(Or=(0,T.Z)(function*(f){const c=(0,q.m9)(f);yield An(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Oi(){return(Oi=(0,T.Z)(function*(f,c){const d=yield ue(f,{},(0,T.Z)(function*(){const p=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,P=ut(f,_,"/v1/token",`key=${E}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(P,{method:"POST",headers:F,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,T.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",V(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Oa(f){const c=ln(f);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,T.Z)(function*(){return te(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,T.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:P}=yield function Hs(f,c){return Oi.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(P))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,P=new I;return p&&(te("string"==typeof p,"internal-error",{appName:c}),P.refreshToken=p),_&&(te("string"==typeof _,"internal-error",{appName:c}),P.accessToken=_),E&&(te("number"==typeof E,"internal-error",{appName:c}),P.expirationTime=E),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return st("not implemented")}}function w(f,c){te("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,ft._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new fi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,T.Z)(function*(){const p=yield Zt(d,d.stsTokenManager.getToken(d.auth,c));return te(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Fn(f){return Et.apply(this,arguments)}(this,c)}reload(){return function Kn(f){return Or.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,T.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield An(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.Z)(function*(){const d=yield c.getIdToken();return yield Zt(c,function Pi(f,c){return Mi.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,P,F,X,_e,Pe;const it=null!==(p=d.displayName)&&void 0!==p?p:void 0,dr=null!==(_=d.email)&&void 0!==_?_:void 0,ts=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,tu=null!==(P=d.photoURL)&&void 0!==P?P:void 0,qg=null!==(F=d.tenantId)&&void 0!==F?F:void 0,Yo=null!==(X=d._redirectEventId)&&void 0!==X?X:void 0,Ts=null!==(_e=d.createdAt)&&void 0!==_e?_e:void 0,Gg=null!==(Pe=d.lastLoginAt)&&void 0!==Pe?Pe:void 0,{uid:Rc,emailVerified:mh,isAnonymous:Jo,providerData:_h,stsTokenManager:er}=d;te(Rc&&er,c,"internal-error");const dI=I.fromJSON(this.name,er);te("string"==typeof Rc,c,"internal-error"),w(it,c.name),w(dr,c.name),te("boolean"==typeof mh,c,"internal-error"),te("boolean"==typeof Jo,c,"internal-error"),w(ts,c.name),w(tu,c.name),w(qg,c.name),w(Yo,c.name),w(Ts,c.name),w(Gg,c.name);const bn=new v({uid:Rc,auth:c,email:dr,emailVerified:mh,displayName:it,isAnonymous:Jo,photoURL:tu,phoneNumber:ts,tenantId:qg,stsTokenManager:dI,createdAt:Ts,lastLoginAt:Gg});return _h&&Array.isArray(_h)&&(bn.providerData=_h.map(yh=>Object.assign({},yh))),Yo&&(bn._redirectEventId=Yo),bn}static _fromIdTokenResponse(c,d,p=!1){return(0,T.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield An(E),E})()}}const A=new Map;function W(f){Vt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Vt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const Ie=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,T.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,T.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Oe(f,c,d){return`firebase:${f}:${c}:${d}`}class lt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Oe(this.userKey,_.apiKey,E),this.fullPersistenceKey=Oe("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,T.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,T.Z)(function*(){if(!d.length)return new lt(W(Ie),c,p);const _=(yield Promise.all(d.map(function(){var _e=(0,T.Z)(function*(Pe){if(yield Pe._isAvailable())return Pe});return function(Pe){return _e.apply(this,arguments)}}()))).filter(_e=>_e);let E=_[0]||W(Ie);const P=Oe(p,c.config.apiKey,c.name);let F=null;for(const _e of d)try{const Pe=yield _e._get(P);if(Pe){const it=v._fromJSON(c,Pe);_e!==E&&(F=it),E=_e;break}}catch{}const X=_.filter(_e=>_e._shouldAllowMigration);return E._shouldAllowMigration&&X.length?(E=X[0],F&&(yield E._set(P,F.toJSON())),yield Promise.all(d.map(function(){var _e=(0,T.Z)(function*(Pe){if(Pe!==E)try{yield Pe._remove(P)}catch{}});return function(Pe){return _e.apply(this,arguments)}}())),new lt(E,c,p)):new lt(E,c,p)})()}}function he(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(zs(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Ct(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(R(c))return"Blackberry";if(ee(c))return"Webos";if(Ce(c))return"Safari";if((c.includes("chrome/")||xn(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Ct(f=(0,q.z$)()){return/firefox\//i.test(f)}function Ce(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function xn(f=(0,q.z$)()){return/crios\//i.test(f)}function zs(f=(0,q.z$)()){return/iemobile/i.test(f)}function k(f=(0,q.z$)()){return/android/i.test(f)}function R(f=(0,q.z$)()){return/blackberry/i.test(f)}function ee(f=(0,q.z$)()){return/webos/i.test(f)}function me(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ke(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function Kt(f=(0,q.z$)()){return me(f)||k(f)||ee(f)||R(f)||/windows phone/i.test(f)||zs(f)}function Qe(f,c=[]){let d;switch(f){case"Browser":d=he((0,q.z$)());break;case"Worker":d=`${he((0,q.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${x.SDK_VERSION}/${p}`}class ka{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((P,F)=>{try{P(c(E))}catch(X){F(X)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,T.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function _d(){return(_d=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",V(f,c))})).apply(this,arguments)}class kr{constructor(c){var d,p,_,E;const P=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=P.minPasswordLength)&&void 0!==d?d:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,P,F;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(d=X.meetsMinPasswordLength)||void 0===d||d),X.isValid&&(X.isValid=null===(p=X.meetsMaxPasswordLength)||void 0===p||p),X.isValid&&(X.isValid=null===(_=X.containsLowercaseLetter)||void 0===_||_),X.isValid&&(X.isValid=null===(E=X.containsUppercaseLetter)||void 0===E||E),X.isValid&&(X.isValid=null===(P=X.containsNumericCharacter)||void 0===P||P),X.isValid&&(X.isValid=null===(F=X.containsNonAlphanumericCharacter)||void 0===F||F),X}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class t0{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ev(this),this.idTokenSubscription=new Ev(this),this.beforeStateQueue=new ka(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,T.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield lt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,T.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,P=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,X=E?._redirectEventId,_e=yield d.tryRedirectSignIn(c);(!F||F===X)&&_e?.user&&(E=_e.user,P=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(P)try{yield d.beforeStateQueue.runMiddleware(E)}catch(F){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,T.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,T.Z)(function*(){try{yield An(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,T.Z)(function*(){const p=c?(0,q.m9)(c):null;return p&&te(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return c&&te(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,T.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,T.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.Z)(function*(){const d=yield function e0(f){return _d.apply(this,arguments)}(c),p=new kr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,T.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function S(f,c){return C.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,T.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,T.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;te(p,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,T.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,T.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,T.Z)(function*(){if(c===d.currentUser)return d.queue((0,T.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let P=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(F,this,"internal-error"),F.then(()=>{P||E(this.currentUser)}),"function"==typeof d){const X=c.addObserver(d,p,_);return()=>{P=!0,X()}}{const X=c.addObserver(d);return()=>{P=!0,X()}}}directlySetCurrentUser(c){var d=this;return(0,T.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Qe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,T.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Nn(f,...c){Fe.logLevel<=De.in.WARN&&Fe.warn(`Auth (${x.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Qt(f){return(0,q.m9)(f)}class Ev{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qp(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=It("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function Ws(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function wv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Dv{constructor(c){this.type="recaptcha-enterprise",this.auth=Qt(c)}verify(c="verify",d=!1){var p=this;return(0,T.Z)(function*(){function E(){return E=(0,T.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var X=(0,T.Z)(function*(_e,Pe){Ri(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(it=>{if(void 0!==it.recaptchaKey){const dr=new Vn(it);return null==F.tenantId?F._agentRecaptchaConfig=dr:F._tenantRecaptchaConfigs[F.tenantId]=dr,_e(dr.siteKey)}Pe(new Error("recaptcha Enterprise site key undefined"))}).catch(it=>{Pe(it)})});return function(_e,Pe){return X.apply(this,arguments)}}())}),E.apply(this,arguments)}function P(F,X,_e){const Pe=window.grecaptcha;Cn(Pe)?Pe.enterprise.ready(()=>{Pe.enterprise.execute(F,{action:c}).then(it=>{X(it)}).catch(()=>{X("NO_RECAPTCHA")})}):_e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,X)=>{(function _(F){return E.apply(this,arguments)})(p.auth).then(_e=>{if(!d&&Cn(window.grecaptcha))P(_e,F,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));qp("https://www.google.com/recaptcha/enterprise.js?render="+_e).then(()=>{P(_e,F,X)}).catch(Pe=>{X(Pe)})}}).catch(_e=>{X(_e)})})})()}}function Gp(f,c,d){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,T.Z)(function*(f,c,d,p=!1){const _=new Dv(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const P=Object.assign({},c);return Object.assign(P,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Qn(f,c,d,p){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,T.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Gp(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,T.Z)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield Gp(f,c,d,"getOobCode"===d);return p(f,F)}return Promise.reject(P)});return function(P){return E.apply(this,arguments)}}())}),Ne.apply(this,arguments)}function Cv(f,c,d){const p=Qt(f);te(p._canInitEmulator,p,"emulator-config-failed"),te(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=ar(c),{host:P,port:F}=function Hu(f){const c=ar(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:Qp(p.substr(E.length+1))}}{const[E,P]=p.split(":");return{host:E,port:Qp(P)}}}(c);p.config.emulator={url:`${E}//${P}${null===F?"":`:${F}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:P,port:F,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Yp(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function ar(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Qp(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Po{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return st("not implemented")}_getIdTokenResponse(c){return st("not implemented")}_linkToIdToken(c,d){return st("not implemented")}_getReauthenticationResolver(c){return st("not implemented")}}function Va(f,c){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",V(f,c))})).apply(this,arguments)}function zu(){return(zu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Av(f,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Wu(){return(Wu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",V(f,c))})).apply(this,arguments)}function vr(f,c){return qu.apply(this,arguments)}function qu(){return(qu=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPassword",V(f,c))})).apply(this,arguments)}function Ed(f,c){return At.apply(this,arguments)}function At(){return(At=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",V(f,c))})).apply(this,arguments)}function Jp(){return(Jp=(0,T.Z)(function*(f,c){return Ed(f,c)})).apply(this,arguments)}function ce(f,c){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,T.Z)(function*(f,c){return Ed(f,c)})).apply(this,arguments)}function wd(f,c){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,T.Z)(function*(f,c){return Ed(f,c)})).apply(this,arguments)}function Dd(){return(Dd=(0,T.Z)(function*(f,c){return Ed(f,c)})).apply(this,arguments)}function Xp(){return(Xp=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}function eg(){return(eg=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}class Zu extends Po{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Zu(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Zu(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,T.Z)(function*(){switch(d.signInMethod){case"password":return Qn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vr);case"emailLink":return function Cd(f,c){return Xp.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:Xe(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return Qn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Av);case"emailLink":return function u0(f,c){return eg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:Xe(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function fs(f,c){return qs.apply(this,arguments)}function qs(){return(qs=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithIdp",V(f,c))})).apply(this,arguments)}class Vr extends Po{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Vr(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):Xe("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,ft._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const P=new Vr(p,_);return P.idToken=E.idToken||void 0,P.accessToken=E.accessToken||void 0,P.secret=E.secret,P.nonce=E.nonce,P.pendingToken=E.pendingToken||null,P}_getIdTokenResponse(c){return fs(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,fs(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,fs(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,q.xO)(d)}return c}}function bd(){return(bd=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",V(f,c))})).apply(this,arguments)}function Ku(){return(Ku=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c))})).apply(this,arguments)}function Sd(){return(Sd=(0,T.Z)(function*(f,c){const d=yield ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c));if(d.temporaryProof)throw Gt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ps={USER_NOT_FOUND:"user-not-found"};function oe(){return(oe=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),ps)})).apply(this,arguments)}class gs extends Po{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new gs({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new gs({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Sv(f,c){return Ku.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function No(f,c){return Sd.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Rv(f,c){return oe.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new gs({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Gs{constructor(c){var d,p,_,E,P,F;const X=(0,q.zd)((0,q.pd)(c)),_e=null!==(d=X.apiKey)&&void 0!==d?d:null,Pe=null!==(p=X.oobCode)&&void 0!==p?p:null,it=function we(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=X.mode)&&void 0!==_?_:null);te(_e&&Pe&&it,"argument-error"),this.apiKey=_e,this.operation=it,this.code=Pe,this.continueUrl=null!==(E=X.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(P=X.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(F=X.tenantId)&&void 0!==F?F:null}static parseLink(c){const d=function Qu(f){const c=(0,q.zd)((0,q.pd)(f)).link,d=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,p=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(p?(0,q.zd)((0,q.pd)(p)).link:null)||p||d||c||f}(c);try{return new Gs(d)}catch{return null}}}let Rd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Zu._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Gs.parseLink(p);return te(_,"argument-error"),Zu._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Qi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class xo extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Fr extends xo{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return te("providerId"in d&&"signInMethod"in d,"argument-error"),Vr._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),Vr._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Fr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Fr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:P,providerId:F}=c;if(!p&&!_&&!d&&!E||!F)return null;try{return new Fr(F)._credential({idToken:d,accessToken:p,nonce:P,pendingToken:E})}catch{return null}}}let Ju=(()=>{class f extends xo{constructor(){super("facebook.com")}static credential(d){return Vr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),pi=(()=>{class f extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return Vr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),ki=(()=>{class f extends xo{constructor(){super("github.com")}static credential(d){return Vr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Yi extends Po{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return fs(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,fs(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,fs(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new Yi(p,E):null}static _create(c,d){return new Yi(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oo extends Qi{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Oo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Oo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Yi.fromJSON(c);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return Yi._create(p,d)}catch{return null}}}let tg=(()=>{class f extends xo{constructor(){super("twitter.com")}static credential(d,p){return Vr._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Vi(f,c){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signUp",V(f,c))})).apply(this,arguments)}class Lr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,T.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),P=Md(p);return new Lr({user:E,providerId:P,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,T.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Md(p);return new Lr({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Md(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Nd(f){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,T.Z)(function*(f){var c;const d=Qt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Lr({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Vi(d,{returnSecureToken:!0}),_=yield Lr._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class La extends q.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,La.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new La(c,d,p,_)}}function ko(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?La._fromErrorAndOperation(f,E,c,p):E})}function xd(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ng(f,c){return Od.apply(this,arguments)}function Od(){return Od=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);yield tc(!0,d,c);const{providerUserInfo:p}=yield function di(f,c){return hi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=xd(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Od.apply(this,arguments)}function ec(f,c){return kd.apply(this,arguments)}function kd(){return(kd=(0,T.Z)(function*(f,c,d=!1){const p=yield Zt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Lr._forOperation(f,"link",p)})).apply(this,arguments)}function tc(f,c,d){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,T.Z)(function*(f,c,d){yield An(c);const _=!1===f?"provider-already-linked":"no-such-provider";te(xd(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function rg(f,c){return nc.apply(this,arguments)}function nc(){return(nc=(0,T.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Zt(f,ko(p,_,c,f),d);te(E.idToken,p,"internal-error");const P=ln(E.idToken);te(P,p,"internal-error");const{sub:F}=P;return te(f.uid===F,p,"user-mismatch"),Lr._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&Xe(p,"user-mismatch"),E}})).apply(this,arguments)}function ig(f,c){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,T.Z)(function*(f,c,d=!1){const p="signIn",_=yield ko(f,p,c),E=yield Lr._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function rc(f,c){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,T.Z)(function*(f,c){return ig(Qt(f),c)})).apply(this,arguments)}function Ld(f,c){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);return yield tc(!1,d,c.providerId),ec(d,c)})).apply(this,arguments)}function sg(f,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,T.Z)(function*(f,c){return rg((0,q.m9)(f),c)})).apply(this,arguments)}function $d(){return($d=(0,T.Z)(function*(f,c){return ge(f,"POST","/v1/accounts:signInWithCustomToken",V(f,c))})).apply(this,arguments)}function Pv(f,c){return jd.apply(this,arguments)}function jd(){return jd=(0,T.Z)(function*(f,c){const d=Qt(f),p=yield function Vo(f,c){return $d.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Lr._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),jd.apply(this,arguments)}class Ln{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Hd._fromServerResponse(c,d):"totpInfo"in d?ic._fromServerResponse(c,d):Xe(c,"internal-error")}}class Hd extends Ln{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Hd(d)}}class ic extends Ln{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new ic(d)}}function xe(f,c,d){var p;te((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Yn(f){return rt.apply(this,arguments)}function rt(){return(rt=(0,T.Z)(function*(f){const c=Qt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Un(f,c,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,T.Z)(function*(f,c,d){const p=Qt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xe(p,_,d),yield Qn(p,_,"getOobCode",ce)})).apply(this,arguments)}function Fo(f,c,d){return ur.apply(this,arguments)}function ur(){return ur=(0,T.Z)(function*(f,c,d){yield Va((0,q.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Yn(f),_});return function(_){return p.apply(this,arguments)}}())}),ur.apply(this,arguments)}function og(f,c){return sc.apply(this,arguments)}function sc(){return sc=(0,T.Z)(function*(f,c){yield function Id(f,c){return Wu.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),sc.apply(this,arguments)}function Ua(f,c){return zd.apply(this,arguments)}function zd(){return(zd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),p=yield Va(d,{oobCode:c}),_=p.requestType;switch(te(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(p.mfaInfo,d,"internal-error");default:te(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Ln._fromServerResponse(Qt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function Mv(f,c){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,T.Z)(function*(f,c){const{data:d}=yield Ua((0,q.m9)(f),c);return d.email})).apply(this,arguments)}function fe(f,c,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,T.Z)(function*(f,c,d){const p=Qt(f),P=yield Qn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vi).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&Yn(f),X}),F=yield Lr._fromIdTokenResponse(p,"signIn",P);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}function Bt(f,c,d){return rc((0,q.m9)(f),Rd.credential(c,d)).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&Yn(f),_});return function(_){return p.apply(this,arguments)}}())}function gi(f,c,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,T.Z)(function*(f,c,d){const p=Qt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(P,F){te(F.handleCodeInApp,p,"argument-error"),F&&xe(p,P,F)})(_,d),yield Qn(p,_,"getOobCode",wd)})).apply(this,arguments)}function Jn(f,c){const d=Gs.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function Lo(f,c,d){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=Rd.credentialWithLink(c,d||rn());return te(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),rc(p,_)})).apply(this,arguments)}function _s(){return(_s=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",V(f,c))})).apply(this,arguments)}function Ue(f,c){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,T.Z)(function*(f,c){const p={identifier:c,continueUri:cn()?rn():"http://localhost"},{signinMethods:_}=yield function ms(f,c){return _s.apply(this,arguments)}((0,q.m9)(f),p);return _||[]}),Qs.apply(this,arguments)}function ag(f,c){return ys.apply(this,arguments)}function ys(){return ys=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&xe(d.auth,_,c);const{email:E}=yield function a0(f,c){return Jp.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),ys.apply(this,arguments)}function hn(f,c,d){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&xe(p.auth,E,d);const{email:P}=yield function Td(f,c){return Dd.apply(this,arguments)}(p.auth,E);P!==f.email&&(yield f.reload())}),Ys.apply(this,arguments)}function Jr(){return(Jr=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ba(f,c){return oc.apply(this,arguments)}function oc(){return oc=(0,T.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,q.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},P=yield Zt(p,function Uo(f,c){return Jr.apply(this,arguments)}(p.auth,E));p.displayName=P.displayName||null,p.photoURL=P.photoUrl||null;const F=p.providerData.find(({providerId:X})=>"password"===X);F&&(F.displayName=p.displayName,F.photoURL=p.photoURL),yield p._updateTokensIfNecessary(P)}),oc.apply(this,arguments)}function vs(f,c){return Bo((0,q.m9)(f),c,null)}function Ji(f,c){return Bo((0,q.m9)(f),null,c)}function Bo(f,c,d){return Js.apply(this,arguments)}function Js(){return Js=(0,T.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const P=yield Zt(f,function vd(f,c){return zu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(P,!0)}),Js.apply(this,arguments)}class $a{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class ac extends $a{constructor(c,d,p,_){super(c,d,p),this.username=_}}class ug extends $a{constructor(c,d){super(c,"facebook.com",d)}}class Fi extends ac{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class uc extends $a{constructor(c,d){super(c,"google.com",d)}}class $o extends ac{constructor(c,d,p){super(c,"twitter.com",d,p)}}function ja(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function tt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const P=null===(d=null===(c=ln(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(P)return new $a(E,"anonymous"!==P&&"custom"!==P?P:null)}if(!p)return null;switch(p){case"facebook.com":return new ug(E,_);case"github.com":return new Fi(E,_);case"google.com":return new uc(E,_);case"twitter.com":return new $o(E,_,f.screenName||null);case"custom":case"anonymous":return new $a(E,null);default:return new $a(E,p,_)}}(d)}class eo{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new eo("enroll",c,d)}static _fromMfaPendingCredential(c){return new eo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return eo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return eo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class lg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Qt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(F=>Ln._fromServerResponse(p,F));te(_.mfaPendingCredential,p,"internal-error");const P=eo._fromMfaPendingCredential(_.mfaPendingCredential);return new lg(P,E,function(){var F=(0,T.Z)(function*(X){const _e=yield X._process(p,P);delete _.mfaInfo,delete _.mfaPendingCredential;const Pe=Object.assign(Object.assign({},_),{idToken:_e.idToken,refreshToken:_e.refreshToken});switch(d.operationType){case"signIn":const it=yield Lr._fromIdTokenResponse(p,d.operationType,Pe);return yield p._updateCurrentUser(it.user),it;case"reauthenticate":return te(d.user,p,"internal-error"),Lr._forOperation(d.user,d.operationType,Pe);default:Xe(p,"internal-error")}});return function(X){return F.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,T.Z)(function*(){return d.signInResolver(c)})()}}function d0(f,c){var d;const p=(0,q.m9)(f),_=c;return te(c.customData.operationType,p,"argument-error"),te(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),lg._fromError(p,_)}class dg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Ln._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new dg(c)}getSession(){var c=this;return(0,T.Z)(function*(){return eo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,T.Z)(function*(){const _=c,E=yield p.getSession(),P=yield Zt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(P),p.user.reload()})()}unenroll(c){var d=this;return(0,T.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Zt(d.user,function g0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",V(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:P})=>P!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const hg=new WeakMap;function m0(f){const c=(0,q.m9)(f);return hg.has(c)||hg.set(c,dg._fromUser(c)),hg.get(c)}const Zd="__sak";class Nv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const xv=(()=>{class f extends Nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fg(){const f=(0,q.z$)();return Ce(f)||me(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((F,X,_e)=>{this.notifyListeners(F,_e)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(_);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const F=this.storage.getItem(_);!p&&this.localCache[_]===F||this.notifyListeners(_,F)},P=this.storage.getItem(_);!function H(){return(0,q.w1)()&&10===document.documentMode}()||P===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,T.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,T.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,T.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Ui=(()=>{class f extends Nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let v0=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,T.Z)(function*(){const _=d,{eventId:E,eventType:P,data:F}=_.data,X=p.handlersMap[P];if(!X?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:P});const _e=Array.from(X).map(function(){var it=(0,T.Z)(function*(dr){return dr(_.origin,F)});return function(dr){return it.apply(this,arguments)}}()),Pe=yield function y0(f){return Promise.all(f.map(function(){var c=(0,T.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(_e);_.ports[0].postMessage({status:"done",eventId:E,eventType:P,response:Pe})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function fn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class cc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,T.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let P,F;return new Promise((X,_e)=>{const Pe=fn("",20);E.port1.start();const it=setTimeout(()=>{_e(new Error("unsupported_event"))},p);F={messageChannel:E,onMessage(dr){const ts=dr;if(ts.data.eventId===Pe)switch(ts.data.status){case"ack":clearTimeout(it),P=setTimeout(()=>{_e(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),X(ts.data.response);break;default:clearTimeout(it),clearTimeout(P),_e(new Error("invalid_response"))}}},_.handlers.add(F),E.port1.addEventListener("message",F.onMessage),_.target.postMessage({eventType:c,eventId:Pe,data:d},[E.port2])}).finally(()=>{F&&_.removeMessageHandler(F)})})()}}function yt(){return window}function lc(){return typeof yt().WorkerGlobalScope<"u"&&"function"==typeof yt().importScripts}function dc(){return(dc=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hc="firebaseLocalStorageDb",Ha="firebaseLocalStorage",Yd="fbase_key";class Ho{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function to(f,c){return f.transaction([Ha],c?"readwrite":"readonly").objectStore(Ha)}function Is(){const f=indexedDB.open(hc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(Ha,{keyPath:Yd})}catch(_){d(_)}}),f.addEventListener("success",(0,T.Z)(function*(){const p=f.result;p.objectStoreNames.contains(Ha)?c(p):(p.close(),yield function za(){const f=indexedDB.deleteDatabase(hc);return new Ho(f).toPromise()}(),c(yield Is()))}))})}function Jd(f,c,d){return yg.apply(this,arguments)}function yg(){return(yg=(0,T.Z)(function*(f,c,d){const p=to(f,!0).put({[Yd]:c,value:d});return new Ho(p).toPromise()})).apply(this,arguments)}function vg(){return(vg=(0,T.Z)(function*(f,c){const d=to(f,!1).get(c),p=yield new Ho(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Ig(f,c){const d=to(f,!0).delete(c);return new Ho(d).toPromise()}const fc=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.Z)(function*(){return d.db||(d.db=yield Is()),d.db})()}_withRetries(d){var p=this;return(0,T.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.Z)(function*(){return lc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.Z)(function*(){d.receiver=v0._getInstance(function _g(){return lc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,T.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,T.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function mg(){return dc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new cc(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,T.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Kd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Is();return yield Jd(d,Zd,"1"),yield Ig(d,Zd),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,T.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,T.Z)(function*(){return _._withPendingWrite((0,T.Z)(function*(){return yield _._withRetries(E=>Jd(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=yield p._withRetries(E=>function I0(f,c){return vg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,T.Z)(function*(){return p._withPendingWrite((0,T.Z)(function*(){return yield p._withRetries(_=>Ig(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.Z)(function*(){const p=yield d._withRetries(P=>{const F=to(P,!1).getAll();return new Ho(F).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;for(const{fbase_key:P,value:F}of p)E.add(P),JSON.stringify(d.localCache[P])!==JSON.stringify(F)&&(d.notifyListeners(P,F),_.push(P));for(const P of Object.keys(d.localCache))d.localCache[P]&&!E.has(P)&&(d.notifyListeners(P,null),_.push(P));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Wa=1e12;class Eg{constructor(c){this.auth=c,this.counter=Wa,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new Lv(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Wa;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Wa))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,T.Z)(function*(){var p;return null===(p=d._widgets.get(c||Wa))||void 0===p||p.execute(),""})()}}class Lv{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;te(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Uv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eh=wv("rcb"),wg=new Rr(3e4,6e4);class Tg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=yt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return te(function $v(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Dn(yt().grecaptcha)?Promise.resolve(yt().grecaptcha):new Promise((p,_)=>{const E=yt().setTimeout(()=>{_(It(c,"network-request-failed"))},wg.get());yt()[eh]=()=>{yt().clearTimeout(E),delete yt()[eh];const F=yt().grecaptcha;if(!F||!Dn(F))return void _(It(c,"internal-error"));const X=F.render;F.render=(_e,Pe)=>{const it=X(_e,Pe);return this.counter++,it},this.hostLanguage=d,p(F)},qp(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:eh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(It(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=yt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class D0{load(c){return(0,T.Z)(function*(){return new Eg(c)})()}clearedOneInstance(){}}const Dg="recaptcha",Xr={theme:"light",type:"image"};class Cg{constructor(c,d,p=Object.assign({},Xr)){this.parameters=p,this.type=Dg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qt(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;te(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D0:new Tg,this.validateStartingState()}verify(){var c=this;return(0,T.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const P=F=>{F&&(c.tokenChangeListeners.delete(P),E(F))};c.tokenChangeListeners.add(P),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=yt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.Z)(function*(){te(cn()&&!lc(),c.auth,"internal-error"),yield function jv(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function yr(f){return li.apply(this,arguments)}(c.auth);te(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class th{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=gs._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Ag(f,c,d){return pc.apply(this,arguments)}function pc(){return(pc=(0,T.Z)(function*(f,c,d){const p=Qt(f),_=yield Ga(p,c,(0,q.m9)(d));return new th(_,E=>rc(p,E))})).apply(this,arguments)}function Hv(f,c,d){return qa.apply(this,arguments)}function qa(){return(qa=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);yield tc(!1,p,"phone");const _=yield Ga(p.auth,c,(0,q.m9)(d));return new th(_,E=>Ld(p,E))})).apply(this,arguments)}function zv(f,c,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=yield Ga(p.auth,c,(0,q.m9)(d));return new th(_,E=>sg(p,E))})).apply(this,arguments)}function Ga(f,c,d){return gc.apply(this,arguments)}function gc(){return gc=(0,T.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(te("string"==typeof _,f,"argument-error"),te(d.type===Dg,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const P=E.session;if("phoneNumber"in E)return te("enroll"===P.type,f,"internal-error"),(yield function h0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",V(f,c))}(f,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{te("signin"===P.type,f,"internal-error");const F=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return te(F,f,"missing-multi-factor-info"),(yield function Vv(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",V(f,c))}(f,{mfaPendingCredential:P.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function bv(f,c){return bd.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return P}}finally{d._reset()}}),gc.apply(this,arguments)}function xt(f,c){return Za.apply(this,arguments)}function Za(){return(Za=(0,T.Z)(function*(f,c){yield ec((0,q.m9)(f),c)})).apply(this,arguments)}let mc=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Qt(d)}verifyPhoneNumber(d,p){return Ga(this.auth,d,(0,q.m9)(p))}static credential(d,p){return gs._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?gs._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function mn(f,c){return c?W(c):(te(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class nh extends Po{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return fs(c,this._buildIdpRequest())}_linkToIdToken(c,d){return fs(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return fs(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function bg(f){return ig(f.auth,new nh(f),f.bypassAuthState)}function zo(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),rg(d,new nh(f),f.bypassAuthState)}function $r(f){return rh.apply(this,arguments)}function rh(){return(rh=(0,T.Z)(function*(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),ec(d,new nh(f),f.bypassAuthState)})).apply(this,arguments)}class Sg{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,T.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,T.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:P,error:F,type:X}=c;if(F)return void d.reject(F);const _e={auth:d.auth,requestUri:p,sessionId:_,tenantId:P||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(X)(_e))}catch(Pe){d.reject(Pe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return bg;case"linkViaPopup":case"linkViaRedirect":return $r;case"reauthViaPopup":case"reauthViaRedirect":return zo;default:Xe(this.auth,"internal-error")}}resolve(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wv=new Rr(2e3,1e4);function Es(f,c,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,T.Z)(function*(f,c,d){const p=Qt(f);pn(f,c,Qi);const _=mn(p,d);return new ih(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function qv(f,c,d){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Qi);const _=mn(p.auth,d);return new ih(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Rg(f,c,d){return vc.apply(this,arguments)}function vc(){return(vc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Qi);const _=mn(p.auth,d);return new ih(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let ih=(()=>{class f extends Sg{constructor(d,p,_,E,P){super(d,p,E,P),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.Z)(function*(){const p=yield d.execute();return te(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,T.Z)(function*(){Vt(1===d.filter.length,"Popup operations only handle one event");const p=fn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(It(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Wv.get())};d()}}return f.currentPopupAction=null,f})();const ke="pendingRedirect",Wo=new Map;class C0 extends Sg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,T.Z)(function*(){let p=Wo.get(d.auth._key());if(!p){try{const E=(yield function Gv(f,c){return sh.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Wo.set(d.auth._key(),p)}return d.bypassAuthState||Wo.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,T.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function sh(){return(sh=(0,T.Z)(function*(f,c){const d=Ng(c),p=Mg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function oh(f,c){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,T.Z)(function*(f,c){return Mg(f)._set(Ng(c),"true")})).apply(this,arguments)}function qo(){Wo.clear()}function Pg(f,c){Wo.set(f._key(),c)}function Mg(f){return W(f._redirectPersistence)}function Ng(f){return Oe(ke,f.config.apiKey,f.name)}function Zv(f,c,d){return function Kv(f,c,d){return Y.apply(this,arguments)}(f,c,d)}function Y(){return(Y=(0,T.Z)(function*(f,c,d){const p=Qt(f);pn(f,c,Qi),yield p._initializationPromise;const _=mn(p,d);return yield oh(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function dt(f,c,d){return function Qv(f,c,d){return ah.apply(this,arguments)}(f,c,d)}function ah(){return(ah=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Qi),yield p.auth._initializationPromise;const _=mn(p.auth,d);yield oh(_,p.auth);const E=yield Yv(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function jn(f,c,d){return function xg(f,c,d){return no.apply(this,arguments)}(f,c,d)}function no(){return(no=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);pn(p.auth,c,Qi),yield p.auth._initializationPromise;const _=mn(p.auth,d);yield tc(!1,p,c.providerId),yield oh(_,p.auth);const E=yield Yv(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function Bi(f,c){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,T.Z)(function*(f,c){return yield Qt(f)._initializationPromise,Qa(f,c,!1)})).apply(this,arguments)}function Qa(f,c){return uh.apply(this,arguments)}function uh(){return(uh=(0,T.Z)(function*(f,c,d=!1){const p=Qt(f),_=mn(p,c),P=yield new C0(p,_,d).execute();return P&&!d&&(delete P.user._redirectEventId,yield p._persistUserIfCurrent(P.user),yield p._setRedirectUser(null,c)),P})).apply(this,arguments)}function Yv(f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,T.Z)(function*(f){const c=fn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class $i{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Xi(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ro(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!ro(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(It(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ch(c))}saveEventToCache(c){this.cachedEventUids.add(ch(c)),this.lastProcessedEventTime=Date.now()}}function ch(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function ro({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Og(f){return wc.apply(this,arguments)}function wc(){return(wc=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Jv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xv=/^https?/;function Ya(){return(Ya=(0,T.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Og(f);for(const d of c)try{if(kg(d))return}catch{}Xe(f,"unauthorized-domain")})).apply(this,arguments)}function kg(f){const c=rn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const P=new URL(f);return""===P.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&P.hostname===p}if(!Xv.test(d))return!1;if(Jv.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const dh=new Rr(3e4,6e4);function Vg(){const f=yt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Go=null;const Ug=new Rr(5e3,15e3),Bg="__/auth/iframe",$g="emulator/auth/iframe",hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tI(f){const c=f.config;te(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Si(c,$g):`https://${f.config.authDomain}/${Bg}`,p={apiKey:c.apiKey,appName:f.name,v:x.SDK_VERSION},_=eI.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,q.xO)(p).slice(1)}`}function es(){return es=(0,T.Z)(function*(f){const c=yield function Lg(f){return Go=Go||function Fg(f){return new Promise((c,d)=>{var p,_,E;function P(){Vg(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Vg(),d(It(f,"network-request-failed"))},timeout:dh.get()})}if(null!==(_=null===(p=yt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=yt().gapi)||void 0===E||!E.load){const F=wv("iframefcb");return yt()[F]=()=>{gapi.load?P():d(It(f,"network-request-failed"))},qp(`https://apis.google.com/js/api.js?onload=${F}`).catch(X=>d(X))}P()}}).catch(c=>{throw Go=null,c})}(f),Go}(f),d=yt().gapi;return te(d,f,"internal-error"),c.open({where:document.body,url:tI(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hh,dontclear:!0},p=>new Promise(function(){var _=(0,T.Z)(function*(E,P){yield p.restyle({setHideOnLeave:!1});const F=It(f,"network-request-failed"),X=yt().setTimeout(()=>{P(F)},Ug.get());function _e(){yt().clearTimeout(X),E(p)}p.ping(_e).then(_e,()=>{P(F)})});return function(E,P){return _.apply(this,arguments)}}()))}),es.apply(this,arguments)}const Jt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ws="__/auth/handler",oI="emulator/auth/handler",Dc=encodeURIComponent("fac");function Zo(f,c,d,p,_,E){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,T.Z)(function*(f,c,d,p,_,E){te(f.config.authDomain,f,"auth-domain-config-required"),te(f.config.apiKey,f,"invalid-api-key");const P={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:x.SDK_VERSION,eventId:_};if(c instanceof Qi){c.setDefaultLanguage(f.languageCode),P.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(P.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Pe,it]of Object.entries(E||{}))P[Pe]=it}if(c instanceof xo){const Pe=c.getScopes().filter(it=>""!==it);Pe.length>0&&(P.scopes=Pe.join(","))}f.tenantId&&(P.tid=f.tenantId);const F=P;for(const Pe of Object.keys(F))void 0===F[Pe]&&delete F[Pe];const X=yield f._getAppCheckToken(),_e=X?`#${Dc}=${encodeURIComponent(X)}`:"";return`${function ph({config:f}){return f.emulator?Si(f,oI):`https://${f.authDomain}/${ws}`}(f)}?${(0,q.xO)(F).slice(1)}${_e}`})).apply(this,arguments)}const Cc="webStorageSupport",zg=class Hg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ui,this._completeRedirectFn=Qa,this._overrideRedirectResult=Pg}_openPopup(c,d,p,_){var E=this;return(0,T.Z)(function*(){var P;Vt(null===(P=E.eventManagers[c._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const F=yield Zo(c,d,p,rn(),_);return function jg(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),P=Math.max((window.screen.availWidth-p)/2,0).toString();let F="";const X=Object.assign(Object.assign({},Jt),{width:p.toString(),height:_.toString(),top:E,left:P}),_e=(0,q.z$)().toLowerCase();d&&(F=xn(_e)?"_blank":d),Ct(_e)&&(c=c||"http://localhost",X.scrollbars="yes");const Pe=Object.entries(X).reduce((dr,[ts,tu])=>`${dr}${ts}=${tu},`,"");if(function et(f=(0,q.z$)()){var c;return me(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(_e)&&"_self"!==F)return function Tc(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",F),new fh(null);const it=window.open(c||"",F,Pe);te(it,f,"popup-blocked");try{it.focus()}catch{}return new fh(it)}(c,F,fn())})()}_openRedirect(c,d,p,_){var E=this;return(0,T.Z)(function*(){return yield E._originValidation(c),function gg(f){yt().location.href=f}(yield Zo(c,d,p,rn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Vt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,T.Z)(function*(){const p=yield function lr(f){return es.apply(this,arguments)}(c),_=new $i(c);return p.register("authEvent",E=>(te(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Cc,{type:Cc},_=>{var E;const P=null===(E=_?.[0])||void 0===E?void 0:E[Cc];void 0!==P&&d(!!P),Xe(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function lh(f){return Ya.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Kt()||Ce()||me()}};class Qo{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return st("unexpected MultiFactorSessionType")}}}class io extends Qo{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new io(c)}_finalizeEnroll(c,d,p){return function f0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",V(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function Xd(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",V(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let aI=(()=>{class f{constructor(){}static assertion(d){return io._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Wg="@firebase/auth";class A0{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,T.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function Xa(f){(0,x._registerComponent)(new Wt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:P,authDomain:F}=p.options;te(P&&!P.includes(":"),"invalid-api-key",{appName:p.name});const X={apiKey:P,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qe(f)},_e=new t0(p,_,E,X);return function Re(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(_e,d),_e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new Wt.wA("auth-internal",c=>{const d=Qt(c.getProvider("auth").getImmediate());return new A0(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(Wg,"1.5.0",function gh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,x.registerVersion)(Wg,"1.5.0","esm2017")}("Browser")},58:(bi,wn,Me)=>{Me.d(wn,{BH:()=>Sr,G6:()=>Si,L:()=>at,LL:()=>K,P0:()=>qt,Pz:()=>It,Sg:()=>pn,UG:()=>st,ZB:()=>Te,ZR:()=>Q,aH:()=>Xe,b$:()=>cn,eu:()=>$,hl:()=>L,jU:()=>Vt,m9:()=>Oi,ne:()=>Pr,pd:()=>hi,r3:()=>Cn,ru:()=>rn,tV:()=>Z,uI:()=>te,vZ:()=>Ri,w1:()=>ci,xO:()=>Mi,xb:()=>yr,z$:()=>qe,zd:()=>di});const De=function(S){const C=[];let I=0;for(let w=0;w<S.length;w++){let v=S.charCodeAt(w);v<128?C[I++]=v:v<2048?(C[I++]=v>>6|192,C[I++]=63&v|128):55296==(64512&v)&&w+1<S.length&&56320==(64512&S.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++w)),C[I++]=v>>18|240,C[I++]=v>>12&63|128,C[I++]=v>>6&63|128,C[I++]=63&v|128):(C[I++]=v>>12|224,C[I++]=v>>6&63|128,C[I++]=63&v|128)}return C},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,C){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=C?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<S.length;v+=3){const A=S[v],W=v+1<S.length,ye=W?S[v+1]:0,Ie=v+2<S.length,Oe=Ie?S[v+2]:0;let Ct=(15&ye)<<2|Oe>>6,Ce=63&Oe;Ie||(Ce=64,W||(Ct=64)),w.push(I[A>>2],I[(3&A)<<4|ye>>4],I[Ct],I[Ce])}return w.join("")},encodeString(S,C){return this.HAS_NATIVE_SUPPORT&&!C?btoa(S):this.encodeByteArray(De(S),C)},decodeString(S,C){return this.HAS_NATIVE_SUPPORT&&!C?atob(S):function(S){const C=[];let I=0,w=0;for(;I<S.length;){const v=S[I++];if(v<128)C[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=S[I++];C[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const Ie=((7&v)<<18|(63&S[I++])<<12|(63&S[I++])<<6|63&S[I++])-65536;C[w++]=String.fromCharCode(55296+(Ie>>10)),C[w++]=String.fromCharCode(56320+(1023&Ie))}else{const A=S[I++],W=S[I++];C[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return C.join("")}(this.decodeStringToByteArray(S,C))},decodeStringToByteArray(S,C){this.init_();const I=C?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<S.length;){const A=I[S.charAt(v++)],ye=v<S.length?I[S.charAt(v)]:0;++v;const Oe=v<S.length?I[S.charAt(v)]:64;++v;const he=v<S.length?I[S.charAt(v)]:64;if(++v,null==A||null==ye||null==Oe||null==he)throw new un;w.push(A<<2|ye>>4),64!==Oe&&(w.push(ye<<4&240|Oe>>2),64!==he&&w.push(Oe<<6&192|he))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class un extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(S){return function(S){const C=De(S);return Wt.encodeByteArray(C,!0)}(S).replace(/\./g,"")},Z=function(S){try{return Wt.decodeString(S,!0)}catch(C){console.error("base64Decode failed: ",C)}return null};function Te(S,C){if(!(C instanceof Object))return C;switch(C.constructor){case Date:return new Date(C.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return C}for(const I in C)!C.hasOwnProperty(I)||!je(I)||(S[I]=Te(S[I],C[I]));return S}function je(S){return"__proto__"!==S}const Fe=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const C=S&&Z(S[1]);return C&&JSON.parse(C)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},qt=S=>{const C=(S=>{var C,I;return null===(I=null===(C=Fe())||void 0===C?void 0:C.emulatorHosts)||void 0===I?void 0:I[S]})(S);if(!C)return;const I=C.lastIndexOf(":");if(I<=0||I+1===C.length)throw new Error(`Invalid host ${C} with no separate hostname and port!`);const w=parseInt(C.substring(I+1),10);return"["===C[0]?[C.substring(1,I-1),w]:[C.substring(0,I),w]},Xe=()=>{var S;return null===(S=Fe())||void 0===S?void 0:S.config},It=S=>{var C;return null===(C=Fe())||void 0===C?void 0:C[`_${S}`]};class Sr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((C,I)=>{this.resolve=C,this.reject=I})}wrapCallback(C){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof C&&(this.promise.catch(()=>{}),1===C.length?C(I):C(I,w))}}}function pn(S,C){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=C||"demo-project",v=S.iat||0,A=S.sub||S.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},S);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(W)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function st(){var S;const C=null===(S=Fe())||void 0===S?void 0:S.forceEnvironment;if("node"===C)return!0;if("browser"===C)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Vt(){return"object"==typeof self&&self.self===self}function rn(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function cn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ci(){const S=qe();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Si(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((S,C)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),S(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;C((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){C(I)}})}class Q extends Error{constructor(C,I,w){super(I),this.code=C,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(C,I,w){this.service=C,this.serviceName=I,this.errors=w}create(C,...I){const w=I[0]||{},v=`${this.service}/${C}`,A=this.errors[C],W=A?function ue(S,C){return S.replace(Je,(I,w)=>{const v=C[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Je=/\{\$([^}]+)}/g;function Cn(S,C){return Object.prototype.hasOwnProperty.call(S,C)}function yr(S){for(const C in S)if(Object.prototype.hasOwnProperty.call(S,C))return!1;return!0}function Ri(S,C){if(S===C)return!0;const I=Object.keys(S),w=Object.keys(C);for(const v of I){if(!w.includes(v))return!1;const A=S[v],W=C[v];if(ct(A)&&ct(W)){if(!Ri(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function ct(S){return null!==S&&"object"==typeof S}function Mi(S){const C=[];for(const[I,w]of Object.entries(S))Array.isArray(w)?w.forEach(v=>{C.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):C.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return C.length?"&"+C.join("&"):""}function di(S){const C={};return S.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");C[decodeURIComponent(v)]=decodeURIComponent(A)}}),C}function hi(S){const C=S.indexOf("?");if(!C)return"";const I=S.indexOf("#",C);return S.substring(C,I>0?I:void 0)}function Pr(S,C){const I=new Mr(S,C);return I.subscribe.bind(I)}class Mr{constructor(C,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{C(this)}).catch(w=>{this.error(w)})}next(C){this.forEachObserver(I=>{I.next(C)})}error(C){this.forEachObserver(I=>{I.error(C)}),this.close(C)}complete(){this.forEachObserver(C=>{C.complete()}),this.close()}subscribe(C,I,w){let v;if(void 0===C&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Fn(S,C){if("object"!=typeof S||null===S)return!1;for(const I of C)if(I in S&&"function"==typeof S[I])return!0;return!1}(C,["next","error","complete"])?C:{next:C,error:I,complete:w},void 0===v.next&&(v.next=Et),void 0===v.error&&(v.error=Et),void 0===v.complete&&(v.complete=Et);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(C){void 0===this.observers||void 0===this.observers[C]||(delete this.observers[C],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(C){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,C)}sendOne(C,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[C])try{I(this.observers[C])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(C){this.finalized||(this.finalized=!0,void 0!==C&&(this.finalError=C),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Et(){}function Oi(S){return S&&S._delegate?S._delegate:S}},272:(bi,wn,Me)=>{function T(t){return"function"==typeof t}function q(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const x=q(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function De(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(s){e=s instanceof x?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nt(s)}catch(o){e=e??[],o instanceof x?e=[...e,...o.errors]:e.push(o)}}if(e)throw new x(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nt(e);else{if(e instanceof ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&De(n,e)}remove(e){const{_finalizers:n}=this;n&&De(n,e),e instanceof ft&&e._removeParent(this)}}ft.EMPTY=(()=>{const t=new ft;return t.closed=!0,t})();const Wt=ft.EMPTY;function un(t){return t instanceof ft||t&&"closed"in t&&T(t.remove)&&T(t.add)&&T(t.unsubscribe)}function Nt(t){T(t)?t():t.unsubscribe()}const at={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Z.setTimeout(()=>{const{onUnhandledError:e}=at;if(!e)throw t;e(t)})}function Te(){}const je=nt("C",void 0,void 0);function nt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function Fe(t){if(at.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class qt extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,un(e)&&e.add(this)):this.destination=Vt}static create(e,n,r){return new pn(e,n,r)}next(e){this.isStopped?st(function Tn(t){return nt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?st(function pt(t){return nt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?st(je,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function It(t,e){return Xe.call(t,e)}class Sr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class pn extends qt{constructor(e,n,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&at.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&It(e.next,s),error:e.error&&It(e.error,s),complete:e.complete&&It(e.complete,s)}):i=e}this.destination=new Sr(i)}}function qe(t){at.useDeprecatedSynchronousErrorHandling?function Nn(t){at.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):ie(t)}function st(t,e){const{onStoppedNotification:n}=at;n&&Z.setTimeout(()=>n(t,e))}const Vt={closed:!0,next:Te,error:function te(t){throw t},complete:Te},rn="function"==typeof Symbol&&Symbol.observable||"@@observable";function cn(t){return t}function ci(t){return 0===t.length?cn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function L(t){return t&&t instanceof qt||function Si(t){return t&&T(t.next)&&T(t.error)&&T(t.complete)}(t)&&un(t)}(n)?n:new pn(n,r,i);return Fe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Rr(r))((i,s)=>{const o=new pn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[rn](){return this}pipe(...n){return ci(n)(this)}toPromise(n){return new(n=Rr(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Rr(t){var e;return null!==(e=t??at.Promise)&&void 0!==e?e:Promise}const $=q(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new V(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Wt:(this.currentObservers=null,s.push(n),new ft(()=>{this.currentObservers=null,De(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new V(e,n),t})();class V extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Wt}}function Q(t){return T(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Je(t,e,n,r,i)}class Je extends qt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ge(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var Se=Me(582);const ut=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Lt(t){return T(t?.then)}function bt(t){return T(t[rn])}function Gt(t){return Symbol.asyncIterator&&T(t?.[Symbol.asyncIterator])}function Dn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vn=function Cn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yr(t){return T(t?.[Vn])}function li(t){return(0,Se.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Se.qq)(n.read());if(i)return yield(0,Se.qq)(void 0);yield yield(0,Se.qq)(r)}}finally{n.releaseLock()}})}function Ri(t){return T(t?.getReader)}function ct(t){if(t instanceof We)return t;if(null!=t){if(bt(t))return function Pi(t){return new We(e=>{const n=t[rn]();if(T(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ut(t))return function Mi(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Lt(t))return function di(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Gt(t))return Zn(t);if(yr(t))return function hi(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ri(t))return function Pr(t){return Zn(li(t))}(t)}throw Dn(t)}function Zn(t){return new We(e=>{(function Mr(t,e){var n,r,i,s;return(0,Se.mG)(this,void 0,void 0,function*(){try{for(n=(0,Se.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Nr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Et(t,e,n=1/0){return T(e)?Et((r,i)=>ge((s,o)=>e(r,s,i,o))(ct(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function Fn(t,e,n,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=b=>l<r?D(b):u.push(b),D=b=>{s&&e.next(b),l++;let M=!1;ct(n(b,h++)).subscribe(ue(e,U=>{i?.(U),s?y(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const U=u.shift();o?Nr(e,o,()=>D(U)):D(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ue(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function xr(t=1/0){return Et(cn,t)}const ln=new We(t=>t.complete());function Ni(t){return t[t.length-1]}function xi(t){return T(Ni(t))?t.pop():void 0}function fi(t){return function dn(t){return t&&T(t.schedule)}(Ni(t))?t.pop():void 0}function gn(t,e=0){return K((n,r)=>{n.subscribe(ue(r,i=>Nr(r,t,()=>r.next(i),e),()=>Nr(r,t,()=>r.complete(),e),i=>Nr(r,t,()=>r.error(i),e)))})}function Kn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Oi(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Nr(n,e,()=>{const r=t[Symbol.asyncIterator]();Nr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function C(t,e){if(null!=t){if(bt(t))return function Or(t,e){return ct(t).pipe(Kn(e),gn(e))}(t,e);if(ut(t))return function hs(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Lt(t))return function Ro(t,e){return ct(t).pipe(Kn(e),gn(e))}(t,e);if(Gt(t))return Oi(t,e);if(yr(t))return function Hs(t,e){return new We(n=>{let r;return Nr(n,e,()=>{r=t[Vn](),Nr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(t,e);if(Ri(t))return function S(t,e){return Oi(li(t),e)}(t,e)}throw Dn(t)}(t,e):ct(t)}function w(...t){const e=fi(t),n=function An(t,e){return"number"==typeof Ni(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ct(r[0]):xr(n)(I(r,e)):ln}class v extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,fi(t))}function W(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,h=g=!1},D=()=>{const b=o;y(),b?.unsubscribe()};return K((b,M)=>{l++,!g&&!h&&m();const U=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=ye(D,i))}),U.subscribe(M),!o&&l>0&&(o=new pn({next:N=>U.next(N),error:N=>{g=!0,m(),a=ye(y,n,N),U.error(N)},complete:()=>{h=!0,m(),a=ye(y,r),U.complete()}}),ct(b).subscribe(o))})(s)}}function ye(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new pn({next:()=>{r.unsubscribe(),t()}});return ct(e(...n)).subscribe(r)}function Ie(t,e){return K((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0;const h=s++;ct(t(u,h)).subscribe(i=ue(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Oe(t,e=cn){return t=t??lt,K((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lt(t,e){return t===e}function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function Ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ce(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ce).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function xn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const zs=he({__forward_ref__:he});function k(t){return t.__forward_ref__=k,t.toString=function(){return Ce(this())},t}function R(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(zs)&&t.__forward_ref__===k}function me(t){return t&&!!t.\u0275providers}const et="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function Kt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function yd(t,e){throw new H(-201,!1)}function Qn(t,e){null==t&&function Ne(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ar(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hu(t){return Yp(t,Mo)||Yp(t,zu)}function Yp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Va(t){return t&&(t.hasOwnProperty(vd)||t.hasOwnProperty(Av))?t[vd]:null}const Mo=he({\u0275prov:he}),vd=he({\u0275inj:he}),zu=he({ngInjectableDef:he}),Av=he({ngInjectorDef:he});var Ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ye||{});let Id;function vr(t){const e=Id;return Id=t,e}function qu(t,e,n){const r=Hu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ye.Optional?null:void 0!==e?e:void yd(Ce(t))}const At=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qs={},Ad="__NG_DI_FLAG__",Vr="ngTempTokenPath",bd=/\n/gm,Ku="__source";let No;function ps(t){const e=No;return No=t,e}function Rv(t,e=Ye.Default){if(void 0===No)throw new H(-203,!1);return null===No?qu(t,void 0,e):No.get(t,e&Ye.Optional?null:void 0,e)}function oe(t,e=Ye.Default){return(function Wu(){return Id}()||Rv)(R(t),e)}function we(t,e=Ye.Default){return oe(t,Qu(e))}function Qu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Gs(t){const e=[];for(let n=0;n<t.length;n++){const r=R(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,s=Ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Rd(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function Yu(t,e){return t[Ad]=e,t.prototype[Ad]=e,t}function Rd(t){return t[Ad]}function Fr(t){return{toString:t}.toString()}var Ju=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ju||{}),pi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pi||{});const ki={},gt=[],Yi=he({\u0275cmp:he}),Pd=he({\u0275dir:he}),Oo=he({\u0275pipe:he}),tg=he({\u0275mod:he}),Vi=he({\u0275fac:he}),Zs=he({__NG_ELEMENT_ID__:he}),Lr=he({__NG_ENV_ID__:he});function Md(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Nd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];La(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Xu(t){return 3===t||4===t||6===t}function La(t){return 64===t.charCodeAt(0)}function ko(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||xd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function xd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const ng="ng-template";function Od(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Md(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ec(t){return 4===t.type&&t.value!==ng}function kd(t,e,n){return e===(4!==t.type||n?t.value:ng)}function tc(t,e,n){let r=4;const i=t.attrs||[],s=function Vd(t){for(let e=0;e<t.length;e++)if(Xu(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!kd(t,u,n)||""===u&&1===e.length){if(Ur(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Od(t.attrs,l,n)){if(Ur(r))return!1;o=!0}continue}const g=rg(8&r?"class":u,i,ec(t),n);if(-1===g){if(Ur(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Md(y,l,0)||2&r&&l!==m){if(Ur(r))return!1;o=!0}}}}else{if(!o&&!Ur(r)&&!Ur(u))return!1;if(o&&Ur(u))continue;o=!1,r=u|1&r}}return Ur(r)||o}function Ur(t){return 0==(1&t)}function rg(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function rc(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function nc(t,e,n=!1){for(let r=0;r<e.length;r++)if(tc(t,e[r],n))return!0;return!1}function Ld(t,e){return t?":not("+e.trim()+")":e}function Ud(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ur(o)&&(e+=Ld(s,i),i=""),r=o,s=s||!Ur(r);n++}return""!==i&&(e+=Ld(s,i)),e}function Vo(t){return Fr(()=>{const e=og(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ju.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pi.Emulated,styles:t.styles||gt,_:null,schemas:t.schemas||null,tView:null,id:""};sc(n);const r=t.dependencies;return n.directiveDefs=Ua(r,!1),n.pipeDefs=Ua(r,!0),n.id=function Mv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Pv(t){return rt(t)||Un(t)}function jd(t){return null!==t}function Ln(t){return Fr(()=>({type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ic(t,e){if(null==t)return ki;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function xe(t){return Fr(()=>{const e=og(t);return sc(e),e})}function Yn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function rt(t){return t[Yi]||null}function Un(t){return t[Pd]||null}function Bn(t){return t[Oo]||null}function ur(t,e){const n=t[tg]||null;if(!n&&!0===e)throw new Error(`Type ${Ce(t)} does not have '\u0275mod' property.`);return n}function og(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ki,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ic(t.inputs,e),outputs:ic(t.outputs)}}function sc(t){t.features?.forEach(e=>e(t))}function Ua(t,e){if(!t)return null;const n=e?Bn:Pv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(jd)}const Ut=0,fe=1,Le=2,Bt=3,gi=4,Ks=5,Jn=6,Lo=7,Yt=8,ms=9,_s=10,Ue=11,Qs=12,ag=13,ys=14,hn=15,Ys=16,Uo=17,Jr=18,Ba=19,oc=20,vs=21,Ji=22,Bo=23,Js=24,tt=25,ac=1,ug=2,Fi=7,$o=9,Xn=11;function Br(t){return Array.isArray(t)&&"object"==typeof t[ac]}function $n(t){return Array.isArray(t)&&!0===t[ac]}function Wd(t){return 0!=(4&t.flags)}function Xs(t){return t.componentOffset>-1}function qd(t){return 1==(1&t.flags)}function Li(t){return!!t.template}function cg(t){return 0!=(512&t[Le])}function jo(t,e){return t.hasOwnProperty(Vi)?t[Vi]:null}let fn=null,cc=!1;function yt(t){const e=fn;return fn=t,e}const gg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function mg(t){if(!za(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ha(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function _g(t){t.dirty=!0,function dc(t){if(void 0===t.liveConsumerNode)return;const e=cc;cc=!0;try{for(const n of t.liveConsumerNode)n.dirty||_g(n)}finally{cc=e}}(t),t.consumerMarkedDirty?.(t)}function hc(t){return t&&(t.nextProducerIndex=0),yt(t)}function Qd(t,e){if(yt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(za(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)to(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ha(t){Is(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mg(n),r!==n.version))return!0}return!1}function Yd(t){if(Is(t),za(t))for(let e=0;e<t.producerNode.length;e++)to(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function to(t,e){if(function Jd(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Is(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)to(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Is(i),i.producerIndexOfThis[r]=e}}function za(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Is(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let kv=null;function wg(t){const e=yt(null);try{return t()}finally{yt(e)}}const Tg=()=>{},$v=(()=>({...gg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Tg}))();class Dg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Xr(){return Cg}function Cg(t){return t.type.prototype.ngOnChanges&&(t.setInput=th),jv}function jv(){const t=pc(this),e=t?.current;if(e){const n=t.previous;if(n===ki)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function th(t,e,n,r){const i=this.declaredInputs[n],s=pc(t)||function Hv(t,e){return t[Ag]=e}(t,{previous:ki,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Dg(u&&u.currentValue,e,a===ki),t[r]=e}Xr.ngInherit=!0;const Ag="__ngSimpleChanges__";function pc(t){return t[Ag]||null}const ei=function(t,e,n){};function xt(t){for(;Array.isArray(t);)t=t[Ut];return t}function mc(t,e){return xt(e[t])}function mn(t,e){return xt(e[t.index])}function bg(t,e){return t.data[e]}function $r(t,e){const n=e[t];return Br(n)?n:n[Ut]}function Es(t,e){return null==e?null:t[e]}function _c(t){t[Uo]=0}function qv(t){1024&t[Le]||(t[Le]|=1024,Rg(t,1))}function yc(t){1024&t[Le]&&(t[Le]&=-1025,Rg(t,-1))}function Rg(t,e){let n=t[Bt];if(null===n)return;n[Ks]+=e;let r=n;for(n=n[Bt];null!==n&&(1===e&&1===r[Ks]||-1===e&&0===r[Ks]);)n[Ks]+=e,r=n,n=n[Bt]}const ke={lFrame:Ug(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ic(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function dt(){return ke.lFrame.tView}function jn(){let t=xg();for(;null!==t&&64===t.type;)t=t.parent;return t}function xg(){return ke.lFrame.currentTNode}function Bi(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function Ka(){return ke.lFrame.isParent}function ro(){return ke.lFrame.bindingIndex++}function Jv(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,lh(e)}function lh(t){ke.lFrame.currentDirectiveIndex=t}function dh(t){ke.lFrame.currentQueryIndex=t}function Vg(t){const e=t[fe];return 2===e.type?e.declTNode:1===e.type?t[Jn]:null}function Fg(t,e,n){if(n&Ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ye.Host||(i=Vg(s),null===i||(s=s[ys],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ke.lFrame=Lg();return r.currentTNode=e,r.lView=t,!0}function Go(t){const e=Lg(),n=t[fe];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Lg(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?Ug(t):e}function Ug(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Bg(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $g=Bg;function hh(){const t=Bg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lr(){return ke.lFrame.selectedIndex}function es(t){ke.lFrame.selectedIndex=t}function Jt(){const t=ke.lFrame;return bg(t.tView,t.selectedIndex)}let jg=!0;function Tc(){return jg}function ws(t){jg=t}function Dc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Zo(t,e,n){Cc(t,e,3,n)}function Ko(t,e,n,r){(3&t[Le])===n&&Cc(t,e,n,r)}function ph(t,e){let n=t[Le];(3&n)===e&&(n&=8191,n+=1,t[Le]=n)}function Cc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Uo]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Uo]+=65536),(a<s||-1==s)&&(zg(t,n,e,u),t[Uo]=(4294901760&t[Uo])+u+2),u++}function Hg(t,e){ei(4,t,e);const n=yt(null);try{e.call(t)}finally{yt(n),ei(5,t,e)}}function zg(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Le]>>13<t[Uo]>>16&&(3&t[Le])===e&&(t[Le]+=8192,Hg(a,s)):Hg(a,s)}const Qo=-1;class io{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function gh(t){return t!==Qo}function Xa(t){return 32767&t}function eu(t,e){let n=function lI(t){return t>>16}(t),r=e;for(;n>0;)r=r[ys],n--;return r}let bc=!0;function Sc(t){const e=bc;return bc=t,e}const f=255,c=5;let d=0;const p={};function E(t,e){const n=F(t,e);if(-1!==n)return n;const r=e[fe];r.firstCreatePass&&(t.injectorIndex=e.length,P(r.data,t),P(e,null),P(r.blueprint,null));const i=X(t,e),s=t.injectorIndex;if(gh(i)){const o=Xa(i),a=eu(i,e),u=a[fe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function P(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function X(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=b0(i),null===r)return Qo;if(n++,i=i[ys],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Qo}function _e(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Zs)&&(r=n[Zs]),null==r&&(r=n[Zs]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function it(t,e,n){if(n&Ye.Optional||void 0!==t)return t;yd()}function dr(t,e,n,r){if(n&Ye.Optional&&void 0===r&&(r=null),!(n&(Ye.Self|Ye.Host))){const i=t[ms],s=vr(void 0);try{return i?i.get(e,r,n&Ye.Optional):qu(e,r,n&Ye.Optional)}finally{vr(s)}}return it(r,0,n)}function ts(t,e,n,r=Ye.Default,i){if(null!==t){if(2048&e[Le]&&!(r&Ye.Self)){const o=function U2(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Le]&&!(512&o[Le]);){const a=tu(s,o,n,r|Ye.Self,p);if(a!==p)return a;let u=s.parent;if(!u){const l=o[oc];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=b0(o),o=o[ys]}s=u}return i}(t,e,n,r,p);if(o!==p)return o}const s=tu(t,e,n,r,p);if(s!==p)return s}return dr(e,n,r,i)}function tu(t,e,n,r,i){const s=function Gg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Zs)?t[Zs]:void 0;return"number"==typeof e?e>=0?e&f:dI:e}(n);if("function"==typeof s){if(!Fg(e,t,r))return r&Ye.Host?it(i,0,r):dr(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ye.Optional)return o;yd()}finally{$g()}}else if("number"==typeof s){let o=null,a=F(t,e),u=Qo,l=r&Ye.Host?e[hn][Jn]:null;for((-1===a||r&Ye.SkipSelf)&&(u=-1===a?X(t,e):e[a+8],u!==Qo&&mh(r,!1)?(o=e[fe],a=Xa(u),e=eu(u,e)):a=-1);-1!==a;){const h=e[fe];if(Rc(s,a,h.data)){const g=qg(a,e,n,o,r,l);if(g!==p)return g}u=e[a+8],u!==Qo&&mh(r,e[fe].data[a+8]===l)&&Rc(s,a,e)?(o=h,a=Xa(u),e=eu(u,e)):a=-1}}return i}function qg(t,e,n,r,i,s){const o=e[fe],a=o.data[t+8],h=function Yo(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,h=s>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const D=o[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){const y=o[u];if(y&&Li(y)&&y.type===n)return u}return null}(a,o,n,null==r?Xs(a)&&bc:r!=o&&0!=(3&a.type),i&Ye.Host&&s===a);return null!==h?Ts(e,o,h,a):p}function Ts(t,e,n,r){let i=t[n];const s=e.data;if(function aI(t){return t instanceof io}(i)){const o=i;o.resolving&&function ka(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Sc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?vr(o.injectImpl):null;Fg(t,r,Ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function oI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Cg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&vr(l),Sc(a),o.resolving=!1,$g()}}return i}function Rc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function mh(t,e){return!(t&Ye.Self||t&Ye.Host&&e)}class er{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ts(this._tNode,this._lView,e,Qu(r),n)}}function dI(){return new er(jn(),Y())}function bn(t){return Fr(()=>{const e=t.prototype.constructor,n=e[Vi]||yh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Vi]||yh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function yh(t){return ee(t)?()=>{const e=yh(R(t));return e&&e()}:jo(t)}function b0(t){const e=t[fe],n=e.type;return 2===n?e.declTNode:1===n?t[Jn]:null}const Mc="__parameters__";function xc(t,e,n){return Fr(()=>{const r=function hI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(Mc)?u[Mc]:Object.defineProperty(u,Mc,{value:[]})[Mc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function kc(t,e){t.forEach(n=>Array.isArray(n)?kc(n,e):e(n))}function R0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kg(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mi(t,e,n){let r=Vc(t,e);return r>=0?t[1|r]=n:(r=~r,function q2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function fI(t,e){const n=Vc(t,e);if(n>=0)return t[1|n]}function Vc(t,e){return function P0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const _i=Yu(xc("Optional"),8),Yg=Yu(xc("SkipSelf"),4);function nm(t){return 128==(128&t.flags)}var Xo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xo||{});const yI=new Map;let mU=0;const II="__ngContext__";function Ir(t,e){Br(e)?(t[II]=e[Ba],function yU(t){yI.set(t[Ba],t)}(e)):t[II]=e}let EI;function wI(t,e){return EI(t,e)}function Th(t){const e=t[Bt];return $n(e)?e[Bt]:e}function Q0(t){return J0(t[Qs])}function Y0(t){return J0(t[gi])}function J0(t){for(;null!==t&&!$n(t);)t=t[gi];return t}function Uc(t,e,n,r,i){if(null!=r){let s,o=!1;$n(r)?s=r:Br(r)&&(o=!0,r=r[Ut]);const a=xt(r);0===t&&null!==n?null==i?nb(e,n,a):nu(e,n,a,i||null,!0):1===t&&null!==n?nu(e,n,a,i||null,!0):2===t?function cm(t,e,n){const r=am(t,e);r&&function FU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function BU(t,e,n,r,i){const s=n[Fi];s!==xt(n)&&Uc(e,t,r,s,i);for(let a=Xn;a<n.length;a++){const u=n[a];Ch(u[fe],u,t,e,r,s)}}(e,t,s,n,i)}}function sm(t,e,n){return t.createElement(e,n)}function eb(t,e){const n=t[$o],r=n.indexOf(e);yc(e),n.splice(r,1)}function om(t,e){if(t.length<=Xn)return;const n=Xn+e,r=t[n];if(r){const i=r[Ys];null!==i&&i!==t&&eb(i,r),e>0&&(t[n-1][gi]=r[gi]);const s=Kg(t,Xn+e);!function RU(t,e){Ch(t,e,e[Ue],2,null,null),e[Ut]=null,e[Jn]=null}(r[fe],r);const o=s[Jr];null!==o&&o.detachView(s[fe]),r[Bt]=null,r[gi]=null,r[Le]&=-129}return r}function DI(t,e){if(!(256&e[Le])){const n=e[Ue];e[Bo]&&Yd(e[Bo]),e[Js]&&Yd(e[Js]),n.destroyNode&&Ch(t,e,n,3,null,null),function NU(t){let e=t[Qs];if(!e)return CI(t[fe],t);for(;e;){let n=null;if(Br(e))n=e[Qs];else{const r=e[Xn];r&&(n=r)}if(!n){for(;e&&!e[gi]&&e!==t;)Br(e)&&CI(e[fe],e),e=e[Bt];null===e&&(e=t),Br(e)&&CI(e[fe],e),n=e&&e[gi]}e=n}}(e)}}function CI(t,e){if(!(256&e[Le])){e[Le]&=-129,e[Le]|=256,function VU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof io)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ei(4,a,u);try{u.call(a)}finally{ei(5,a,u)}}else{ei(4,i,s);try{s.call(i)}finally{ei(5,i,s)}}}}}(t,e),function kU(t,e){const n=t.cleanup,r=e[Lo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Lo]=null);const i=e[vs];if(null!==i){e[vs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[fe].type&&e[Ue].destroy();const n=e[Ys];if(null!==n&&$n(e[Bt])){n!==e[Bt]&&eb(n,e);const r=e[Jr];null!==r&&r.detachView(t)}!function vU(t){yI.delete(t[Ba])}(e)}}function AI(t,e,n){return function tb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Ut];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===pi.None||s===pi.Emulated)return null}return mn(r,n)}}(t,e.parent,n)}function nu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function nb(t,e,n){t.appendChild(e,n)}function rb(t,e,n,r,i){null!==r?nu(t,e,n,r,i):nb(t,e,n)}function am(t,e){return t.parentNode(e)}let bI,MI,dm,ob=function sb(t,e,n){return 40&t.type?mn(t,n):null};function um(t,e,n,r){const i=AI(t,r,e),s=e[Ue],a=function ib(t,e,n){return ob(t,e,n)}(r.parent||e[Jn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)rb(s,i,n[u],a,!1);else rb(s,i,n,a,!1);void 0!==bI&&bI(s,r,e,n,i)}function Dh(t,e){if(null!==e){const n=e.type;if(3&n)return mn(e,t);if(4&n)return SI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Dh(t,r);{const i=t[e.index];return $n(i)?SI(-1,i):xt(i)}}if(32&n)return wI(e,t)()||xt(t[e.index]);{const r=ub(t,e);return null!==r?Array.isArray(r)?r[0]:Dh(Th(t[hn]),r):Dh(t,e.next)}}return null}function ub(t,e){return null!==e?t[hn][Jn].projection[e.projection]:null}function SI(t,e){const n=Xn+t+1;if(n<e.length){const r=e[n],i=r[fe].firstChild;if(null!==i)return Dh(r,i)}return e[Fi]}function RI(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Ir(xt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)RI(t,e,n.child,r,i,s,!1),Uc(e,t,i,a,s);else if(32&u){const l=wI(n,r);let h;for(;h=l();)Uc(e,t,i,h,s);Uc(e,t,i,a,s)}else 16&u?lb(t,e,r,n,i,s):Uc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ch(t,e,n,r,i,s){RI(n,r,t.firstChild,e,i,s,!1)}function lb(t,e,n,r,i,s){const o=n[hn],u=o[Jn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Uc(e,t,i,u[l],s);else{let l=u;const h=o[Bt];nm(r)&&(l.flags|=128),RI(t,e,l,h,i,s,!0)}}function db(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function hb(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Nd(t,e,r),null!==i&&db(t,e,i),null!==s&&function jU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function gb(t){return function NI(){if(void 0===dm&&(dm=null,At.trustedTypes))try{dm=At.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return dm}()?.createScriptURL(t)||t}class mb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${et})`}}function ea(t){return t instanceof mb?t.changingThisBreaksApplicationSecurity:t}function Ah(t,e){const n=function JU(t){return t instanceof mb&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${et})`)}return n===e}const nB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var jc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(jc||{});function Tb(t){const e=Sh();return e?e.sanitize(jc.URL,t)||"":Ah(t,"URL")?ea(t):function xI(t){return(t=String(t)).match(nB)?t:"unsafe:"+t}(Ee(t))}function Db(t){const e=Sh();if(e)return gb(e.sanitize(jc.RESOURCE_URL,t)||"");if(Ah(t,"ResourceURL"))return gb(ea(t));throw new H(904,!1)}function Sh(){const t=Y();return t&&t[_s].sanitizer}const Rh=new ce("ENVIRONMENT_INITIALIZER"),Ab=new ce("INJECTOR",-1),bb=new ce("INJECTOR_DEF_TYPES");class FI{get(e,n=qs){if(n===qs){const r=new Error(`NullInjectorError: No provider for ${Ce(e)}!`);throw r.name="NullInjectorError",r}return n}}function gB(...t){return{\u0275providers:Rb(0,t),\u0275fromNgModule:!0}}function Rb(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return kc(e,o=>{const a=o;fm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Pb(i,s),n}function Pb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];LI(i,s=>{e(s,r)})}}function fm(t,e,n,r){if(!(t=R(t)))return!1;let i=null,s=Va(t);const o=!s&&rt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Va(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)fm(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{kc(s.imports,h=>{fm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Pb(l,e)}if(!a){const l=jo(i)||(()=>new i);e({provide:i,useFactory:l,deps:gt},i),e({provide:bb,useValue:i,multi:!0},i),e({provide:Rh,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;LI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function LI(t,e){for(let n of t)me(n)&&(n=n.\u0275providers),Array.isArray(n)?LI(n,e):e(n)}const mB=he({provide:String,useValue:he});function UI(t){return null!==t&&"object"==typeof t&&mB in t}function ru(t){return"function"==typeof t}const BI=new ce("Set Injector scope."),pm={},yB={};let $I;function gm(){return void 0===$I&&($I=new FI),$I}class Hi{}class Hc extends Hi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,HI(e,o=>this.processProvider(o)),this.records.set(Ab,zc(void 0,this)),i.has("environment")&&this.records.set(Hi,zc(void 0,this));const s=this.records.get(BI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bb.multi,gt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ps(this),r=vr(void 0);try{return e()}finally{ps(n),vr(r)}}get(e,n=qs,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lr))return e[Lr](this);r=Qu(r);const s=ps(this),o=vr(void 0);try{if(!(r&Ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function TB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&Hu(e);u=l&&this.injectableDefInScope(l)?zc(jI(e),pm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ye.Self?gm():this.parent).get(e,n=r&Ye.Optional&&n===qs?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Vr]=a[Vr]||[]).unshift(Ce(e)),s)throw a;return function Qi(t,e,n,r){const i=t[Vr];throw e[Ku]&&i.unshift(e[Ku]),t.message=function xo(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ce(e);if(Array.isArray(e))i=e.map(Ce).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ce(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(bd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Vr]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{vr(o),ps(s)}}resolveInjectorInitializers(){const e=ps(this),n=vr(void 0);try{const i=this.get(Rh.multi,gt,Ye.Self);for(const s of i)s()}finally{ps(e),vr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ce(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=ru(e=R(e))?e:R(e&&e.provide);const r=function IB(t){return UI(t)?zc(void 0,t.useValue):zc(xb(t),pm)}(e);if(ru(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zc(void 0,pm,!0),i.factory=()=>Gs(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===pm&&(n.value=yB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function wB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=R(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function jI(t){const e=Hu(t),n=null!==e?e.factory:jo(t);if(null!==n)return n;if(t instanceof ce)throw new H(204,!1);if(t instanceof Function)return function vB(t){const e=t.length;if(e>0)throw function Ih(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new H(204,!1);const n=function Po(t){return t&&(t[Mo]||t[zu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function xb(t,e,n){let r;if(ru(t)){const i=R(t);return jo(i)||jI(i)}if(UI(t))r=()=>R(t.useValue);else if(function Nb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Gs(t.deps||[]));else if(function Mb(t){return!(!t||!t.useExisting)}(t))r=()=>oe(R(t.useExisting));else{const i=R(t&&(t.useClass||t.provide));if(!function EB(t){return!!t.deps}(t))return jo(i)||jI(i);r=()=>new i(...Gs(t.deps))}return r}function zc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function HI(t,e){for(const n of t)Array.isArray(n)?HI(n,e):n&&me(n)?HI(n.\u0275providers,e):e(n)}const mm=new ce("AppId",{providedIn:"root",factory:()=>DB}),DB="ng",Ob=new ce("Platform Initializer"),oo=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kb=new ce("CSP nonce",{providedIn:"root",factory:()=>function $c(){if(void 0!==MI)return MI;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Vb=(t,e,n)=>null;function YI(t,e,n=!1){return Vb(t,e,n)}class OB{}class Ub{}class VB{resolveComponentFactory(e){throw function kB(t){const e=Error(`No component factory found for ${Ce(t)}.`);return e.ngComponent=t,e}(e)}}let wm=(()=>{class t{static#e=this.NULL=new VB}return t})();function FB(){return Gc(jn(),Y())}function Gc(t,e){return new yi(mn(t,e))}let yi=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=FB}return t})();class $b{}let ao=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function UB(){const t=Y(),n=$r(jn().index,t);return(Br(n)?n:t)[Ue]}()}return t})(),BB=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>null})}return t})();class Zc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const jb=new Zc("16.2.12"),eE={};function qb(t,e=null,n=null,r){const i=Gb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Gb(t,e=null,n=null,r,i=new Set){const s=[n||gt,gB(t)];return r=r||("object"==typeof t?void 0:Ce(t)),new Hc(s,e||gm(),r||null,i)}let jr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=qs;static#t=this.NULL=new FI;static create(n,r){if(Array.isArray(n))return qb({name:""},r,n,"");{const i=n.name??"";return qb({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Re({token:t,providedIn:"any",factory:()=>oe(Ab)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function nE(t){return t.ngOriginalError}class uo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nE(e);for(;n&&nE(n);)n=nE(n);return n||null}}function iE(t){return e=>{setTimeout(t,void 0,e)}}const _n=class GB extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=iE(s),i&&(i=iE(i)),o&&(o=iE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ft&&e.add(a),a}};function Kb(...t){}class vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ZB(){const t="function"==typeof At.requestAnimationFrame;let e=At[t?"requestAnimationFrame":"setTimeout"],n=At[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function YB(t){const e=()=>{!function QB(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,oE(t),t.isCheckStableRunning=!0,sE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),oE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function XB(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return Qb(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Yb(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Qb(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Yb(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,oE(t),sE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vt.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(vt.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,KB,Kb,Kb);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const KB={};function sE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function oE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Qb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Yb(t){t._nesting--,sE(t)}class JB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const Jb=new ce("",{providedIn:"root",factory:Xb});function Xb(){const t=we(vt);let e=!0;return w(new We(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new We(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{vt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function co(t){return t instanceof Function?t():t}let aE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nh(t){for(;t;){t[Le]|=64;const e=Th(t);if(cg(t)&&!e)return t;t=e}return null}const iS=new ce("",{providedIn:"root",factory:()=>!1});let Dm=null;function uS(t,e){return t[e]??dS()}function cS(t,e){const n=dS();n.producerNode?.length&&(t[e]=Dm,n.lView=t,Dm=lS())}const c$={...gg,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Nh(t.lView)},lView:null};function lS(){return Object.create(c$)}function dS(){return Dm??=lS(),Dm}const ze={};function Ds(t){hS(dt(),Y(),lr()+t,!1)}function hS(t,e,n,r){if(!r)if(3==(3&e[Le])){const s=t.preOrderCheckHooks;null!==s&&Zo(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Ko(e,s,0,n)}es(n)}function re(t,e=Ye.Default){const n=Y();return null===n?oe(t,e):ts(jn(),n,R(t),e)}function Cm(t,e,n,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[Ut]=i,g[Le]=140|r,(null!==l||t&&2048&t[Le])&&(g[Le]|=2048),_c(g),g[Bt]=g[ys]=t,g[Yt]=n,g[_s]=o||t&&t[_s],g[Ue]=a||t&&t[Ue],g[ms]=u||t&&t[ms]||null,g[Jn]=s,g[Ba]=function _U(){return mU++}(),g[Ji]=h,g[oc]=l,g[hn]=2==e.type?t[hn]:g,g}function Yc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function uE(t,e,n,r,i){const s=xg(),o=Ka(),u=t.data[e]=function _$(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function qo(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Og(){return ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function no(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Bi(s,!0),s}function xh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function pS(t,e,n,r,i){const s=uS(e,Bo),o=lr(),a=2&r;try{es(-1),a&&e.length>tt&&hS(t,e,tt,!1),ei(a?2:0,i);const l=a?s:null,h=hc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Qd(l,h)}}finally{a&&null===e[Bo]&&cS(e,Bo),es(o),ei(a?3:1,i)}}function cE(t,e,n){if(Wd(e)){const r=yt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{yt(r)}}}function lE(t,e,n){Ic()&&(function D$(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Xs(n)&&function M$(t,e,n){const r=mn(e,t),i=gS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Am(t,Cm(t,i,null,o,r,e,null,t[_s].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||E(n,e),Ir(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=Ts(e,t,a,n);Ir(l,e),null!==o&&N$(0,a-i,l,u,0,o),Li(u)&&($r(n.index,e)[Yt]=Ts(e,t,a,n))}}(t,e,n,mn(n,e)),64==(64&n.flags)&&IS(t,e,n))}function dE(t,e,n=mn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function gS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=hE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hE(t,e,n,r,i,s,o,a,u,l,h){const g=tt+r,m=g+i,y=function d$(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ze);return n}(g,m),D="function"==typeof l?l():l;return y[fe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}let mS=t=>null;function _S(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?yS(n,e,i,s):r.hasOwnProperty(i)&&yS(n,e,r[i],s)}return n}function yS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function vi(t,e,n,r,i,s,o,a){const u=mn(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(_E(t,n,h,r,i),Xs(e)&&function I$(t,e){const n=$r(e,t);16&n[Le]||(n[Le]|=64)}(n,e.index)):3&e.type&&(r=function v$(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function fE(t,e,n,r){if(Ic()){const i=null===r?null:{"":-1},s=function A$(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(nc(e,o.selectors,!1))if(r||(r=[]),Li(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),pE(t,e,a.length)}else r.unshift(o),pE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&vS(t,e,n,o,i,a),i&&function b$(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new H(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=ko(n.mergedAttrs,n.attrs)}function vS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)_e(E(n,e),t,r[l].type);!function R$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=xh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=ko(n.mergedAttrs,h.hostAttrs),P$(t,n,e,u,h),S$(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function y$(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=n?n.get(g):null,D=m?m.outputs:null;u=_S(g.inputs,h,u,m?m.inputs:null),l=_S(g.outputs,h,l,D);const b=null===u||null===o||ec(e)?null:x$(u,h,o);a.push(b)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function IS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Xv(){return ke.lFrame.currentDirectiveIndex}();try{es(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];lh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&C$(u,l)}}finally{es(-1),lh(o)}}function C$(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function pE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function S$(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Li(e)&&(n[""]=t)}}function P$(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=jo(i.type)),o=new io(s,Li(i),re);t.blueprint[r]=o,n[r]=o,function w$(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function T$(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,xh(t,n,i.hostVars,ze),i)}function Cs(t,e,n,r,i,s){const o=mn(t,e);!function gE(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Ue],o,s,t.value,n,r,i)}function N$(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)ES(r,n,o[a++],o[a++],o[a++])}function ES(t,e,n,r,i){const s=yt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{yt(s)}}function x$(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function wS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function TS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];dh(n[r]),o.contentQueries(2,e[s],s)}}}function Am(t,e){return t[Qs]?t[ag][gi]=e:t[Qs]=e,t[ag]=e,e}function mE(t,e,n){dh(0);const r=yt(null);try{e(t,n)}finally{yt(r)}}function bS(t,e){const n=t[ms],r=n?n.get(uo,null):null;r&&r.handleError(e)}function _E(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];ES(t.data[o],e[o],r,a,i)}}function O$(t,e){const n=$r(e,t),r=n[fe];!function k$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Ut];null!==i&&null===n[Ji]&&(n[Ji]=YI(i,n[ms])),yE(r,n,n[Yt])}function yE(t,e,n){Go(e);try{const r=t.viewQuery;null!==r&&mE(1,r,n);const i=t.template;null!==i&&pS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&TS(t,e),t.staticViewQueries&&mE(2,t.viewQuery,n);const s=t.components;null!==s&&function V$(t,e){for(let n=0;n<e.length;n++)O$(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Le]&=-5,hh()}}let SS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Bv(t,e,n){const r=Object.create($v);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>_g(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Ha(r))return;r.hasRun=!0;const o=hc(r);try{r.cleanupFn(),r.cleanupFn=Tg,r.fn(i)}finally{Qd(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function bm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=xn(i,a):2==s&&(r=xn(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Oh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(xt(s)),$n(s)&&RS(s,r);const o=n.type;if(8&o)Oh(t,e,n.child,r);else if(32&o){const a=wI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=ub(e,n);if(Array.isArray(a))r.push(...a);else{const u=Th(e[hn]);Oh(u[fe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function RS(t,e){for(let n=Xn;n<t.length;n++){const r=t[n],i=r[fe].firstChild;null!==i&&Oh(r[fe],r,i,e)}t[Fi]!==t[Ut]&&e.push(t[Fi])}function Sm(t,e,n,r=!0){const i=e[_s],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{PS(t,e,t.template,n)}catch(u){throw r&&bS(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function PS(t,e,n,r){const i=e[Le];if(256!=(256&i)){e[_s].effectManager?.flush(),Go(e);try{_c(e),function ch(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&pS(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Zo(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Ko(e,l,0,null),ph(e,0)}if(function U$(t){for(let e=Q0(t);null!==e;e=Y0(e)){if(!e[ug])continue;const n=e[$o];for(let r=0;r<n.length;r++){qv(n[r])}}}(e),MS(e,2),null!==t.contentQueries&&TS(t,e),o){const l=t.contentCheckHooks;null!==l&&Zo(e,l)}else{const l=t.contentHooks;null!==l&&Ko(e,l,1),ph(e,1)}!function l$(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=uS(e,Js);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)es(~s);else{const o=s,a=n[++i],u=n[++i];Jv(a,o),r.dirty=!1;const l=hc(r);try{u(2,e[o])}finally{Qd(r,l)}}}}finally{null===e[Js]&&cS(e,Js),es(-1)}}(t,e);const a=t.components;null!==a&&xS(e,a,0);const u=t.viewQuery;if(null!==u&&mE(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Zo(e,l)}else{const l=t.viewHooks;null!==l&&Ko(e,l,2),ph(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Le]&=-73,yc(e)}finally{hh()}}}function MS(t,e){for(let n=Q0(t);null!==n;n=Y0(n))for(let r=Xn;r<n.length;r++)NS(n[r],e)}function B$(t,e,n){NS($r(e,t),n)}function NS(t,e){if(!function Sg(t){return 128==(128&t[Le])}(t))return;const n=t[fe],r=t[Le];if(80&r&&0===e||1024&r||2===e)PS(n,t,n.template,t[Yt]);else if(t[Ks]>0){MS(t,1);const i=n.components;null!==i&&xS(t,i,1)}}function xS(t,e,n){for(let r=0;r<e.length;r++)B$(t,e[r],n)}class kh{get rootNodes(){const e=this._lView,n=e[fe];return Oh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yt]}set context(e){this._lView[Yt]=e}get destroyed(){return 256==(256&this._lView[Le])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Bt];if($n(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(om(e,r),Kg(n,r))}this._attachedToViewContainer=!1}DI(this._lView[fe],this._lView)}onDestroy(e){!function vc(t,e){if(256==(256&t[Le]))throw new H(911,!1);null===t[vs]&&(t[vs]=[]),t[vs].push(e)}(this._lView,e)}markForCheck(){Nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Le]&=-129}reattach(){this._lView[Le]|=128}detectChanges(){Sm(this._lView[fe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function MU(t,e){Ch(t,e,e[Ue],2,null,null)}(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e}}class $$ extends kh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Sm(e[fe],e,e[Yt],!1)}checkNoChanges(){}get context(){return null}}class OS extends wm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=rt(e);return new Vh(n,this.ngModule)}}function kS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class H${constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Qu(r);const i=this.injector.get(e,eE,r);return i!==eE||n===eE?i:this.parentInjector.get(e,n,r)}}class Vh extends Ub{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=kS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return kS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function sg(t){return t.map(Ud).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Hi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new H$(e,s):e,a=o.get($b,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:o.get(BB,null),effectManager:o.get(SS,null),afterRenderEventManager:o.get(aE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?function h$(t,e,n,r){const s=r.get(iS,!1)||n===pi.ShadowDom,o=t.selectRootElement(e,s);return function f$(t){mS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):sm(m,y,function j$(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let N=null;null!==D&&(N=YI(D,o,!0));const z=hE(0,null,null,1,0,null,null,null,null,null,null),se=Cm(null,z,null,U,null,null,g,m,o,null,N);let de,$e;Go(se);try{const Dt=this.componentDef;let Gn,Wp=null;Dt.findHostDirectiveDefs?(Gn=[],Wp=new Map,Dt.findHostDirectiveDefs(Dt,Gn,Wp),Gn.push(Dt)):Gn=[Dt];const Iv=function W$(t,e){const n=t[fe],r=tt;return t[r]=e,Yc(n,r,2,"#host",null)}(se,D),bJ=function q$(t,e,n,r,i,s,o){const a=i[fe];!function G$(t,e,n,r){for(const i of t)e.mergedAttrs=ko(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(bm(e,e.mergedAttrs,!0),null!==n&&hb(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=YI(e,i[ms]));const l=s.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=Cm(i,gS(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&pE(a,t,r.length-1),Am(i,g),i[t.index]=g}(Iv,D,Dt,Gn,se,g,m);$e=bg(z,tt),D&&function K$(t,e,n,r){if(r)Nd(t,n,["ng-version",jb.full]);else{const{attrs:i,classes:s}=function Bd(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ur(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Nd(t,n,i),s&&s.length>0&&db(t,n,s.join(" "))}}(m,Dt,D,r),void 0!==n&&function Q$(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}($e,this.ngContentSelectors,n),de=function Z$(t,e,n,r,i,s){const o=jn(),a=i[fe],u=mn(o,i);vS(a,i,o,n,null,r);for(let h=0;h<n.length;h++)Ir(Ts(i,a,o.directiveStart+h,o),i);IS(a,i,o),u&&Ir(u,i);const l=Ts(i,a,o.directiveStart+o.componentOffset,o);if(t[Yt]=i[Yt]=l,null!==s)for(const h of s)h(l,e);return cE(a,o,t),l}(bJ,Dt,Gn,Wp,se,[Y$]),yE(z,se,null)}finally{hh()}return new z$(this.componentType,de,Gc($e,se),se,$e)}}class z$ extends OB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $$(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;_E(s[fe],s,i,e,n),this.previousInputValues.set(e,n),Nh($r(this._tNode.index,s))}}get injector(){return new er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Y$(){const t=jn();Dc(Y()[fe],t)}function St(t){let e=function VS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Li(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Rm(t.inputs),o.inputTransforms=Rm(t.inputTransforms),o.declaredInputs=Rm(t.declaredInputs),o.outputs=Rm(t.outputs);const a=i.hostBindings;a&&tj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&X$(t,u),l&&ej(t,l),Ct(t.inputs,i.inputs),Ct(t.declaredInputs,i.declaredInputs),Ct(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Ct(o.inputTransforms,i.inputTransforms)),Li(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===St&&(n=!1)}}e=Object.getPrototypeOf(e)}!function J$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ko(i.hostAttrs,n=ko(n,i.hostAttrs))}}(r)}function Rm(t){return t===ki?{}:t===gt?[]:t}function X$(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function ej(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function tj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function BS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Pm(t){return!!function vE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Er(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bs(t,e,n,r){const i=Y();return Er(i,ro(),e)&&(dt(),Cs(Jt(),i,t,e,n,r)),bs}function Xc(t,e,n,r){return Er(t,ro(),n)?e+Ee(n)+r:ze}function CE(t,e,n,r,i,s,o,a){const u=Y(),l=dt(),h=t+tt,g=l.firstCreatePass?function Aj(t,e,n,r,i,s,o,a,u){const l=e.consts,h=Yc(e,t,4,o||null,Es(l,a));fE(e,n,h,Es(l,u)),Dc(e,h);const g=h.tView=hE(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,s,o):l.data[h];Bi(g,!1);const m=XS(l,u,g,t);Tc()&&um(l,u,m,g),Ir(m,u),Am(u,u[h]=wS(m,u,m,g)),qd(g)&&lE(l,u,g),null!=o&&dE(u,g,a)}let XS=function eR(t,e,n,r){return ws(!0),e[Ue].createComment("")};function su(t,e,n){const r=Y();return Er(r,ro(),e)&&vi(dt(),Jt(),r,t,e,r[Ue],n,!1),su}function AE(t,e,n,r,i){const o=i?"class":"style";_E(t,n,e.inputs[o],o,r)}function tr(t,e,n,r){const i=Y(),s=dt(),o=tt+t,a=i[Ue],u=s.firstCreatePass?function Mj(t,e,n,r,i,s){const o=e.consts,u=Yc(e,t,2,r,Es(o,i));return fE(e,n,u,Es(o,s)),null!==u.attrs&&bm(u,u.attrs,!1),null!==u.mergedAttrs&&bm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=tR(s,i,u,a,e,t);i[o]=l;const h=qd(u);return Bi(u,!0),hb(a,l,u),32!=(32&u.flags)&&Tc()&&um(s,i,l,u),0===function Gv(){return ke.lFrame.elementDepthCount}()&&Ir(l,i),function sh(){ke.lFrame.elementDepthCount++}(),h&&(lE(s,i,u),cE(s,u,i)),null!==r&&dE(i,u),tr}function Sn(){let t=jn();Ka()?function Qa(){ke.lFrame.isParent=!1}():(t=t.parent,Bi(t,!1));const e=t;(function Pg(t){return ke.skipHydrationRootTNode===t})(e)&&function Kv(){ke.skipHydrationRootTNode=null}(),function oh(){ke.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(Dc(n,t),Wd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Ac(t){return 0!=(8&t.flags)}(e)&&AE(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Wg(t){return 0!=(16&t.flags)}(e)&&AE(n,e,Y(),e.stylesWithoutHost,!1),Sn}function ta(t,e,n,r){return tr(t,e,n,r),Sn(),ta}let tR=(t,e,n,r,i,s)=>(ws(!0),sm(r,i,function fh(){return ke.lFrame.currentNamespace}()));function $h(t){return!!t&&"function"==typeof t.then}function iR(t){return!!t&&"function"==typeof t.subscribe}function ni(t,e,n,r){const i=Y(),s=dt(),o=jn();return function oR(t,e,n,r,i,s,o){const a=qd(r),l=t.firstCreatePass&&function CS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[Yt],g=function DS(t){return t[Lo]||(t[Lo]=[])}(e);let m=!0;if(3&r.type||o){const b=mn(r,e),M=o?o(b):b,U=g.length,N=o?se=>o(xt(se[r.index])):r.index;let z=null;if(!o&&a&&(z=function Lj(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Lo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1;else{s=uR(r,e,h,s,!1);const se=n.listen(M,i,s);g.push(s,se),l&&l.push(i,N,U,U+1)}}else s=uR(r,e,h,s,!1);const y=r.outputs;let D;if(m&&null!==y&&(D=y[i])){const b=D.length;if(b)for(let M=0;M<b;M+=2){const de=e[D[M]][D[M+1]].subscribe(s),$e=g.length;g.push(s,de),l&&l.push(i,r.index,$e,-($e+1))}}}(s,i,i[Ue],o,t,e,r),ni}function aR(t,e,n,r){try{return ei(6,e,n),!1!==n(r)}catch(i){return bS(t,i),!1}finally{ei(7,e,n)}}function uR(t,e,n,r,i){return function s(o){if(o===Function)return r;Nh(t.componentOffset>-1?$r(t.index,e):e);let u=aR(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=aR(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function km(t,e,n,r,i){const s=Y(),o=Xc(s,e,n,r);return o!==ze&&vi(dt(),Jt(),s,t,o,s[Ue],i,!1),km}function Vm(t,e){return t<<17|e<<2}function na(t){return t>>17&32767}function RE(t){return 2|t}function ou(t){return(131068&t)>>2}function PE(t,e){return-131069&t|e<<2}function ME(t){return 1|t}function yR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?na(s):ou(s),u=!1;for(;0!==a&&(!1===u||o);){const h=t[a+1];Zj(t[a],e)&&(u=!0,t[a+1]=r?ME(h):RE(h)),a=r?na(h):ou(h)}u&&(t[n+1]=r?RE(s):ME(s))}function Zj(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Vc(t,e)>=0}function Fm(t,e){return function ns(t,e,n,r){const i=Y(),s=dt(),o=function Xi(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function bR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[lr()],o=function AR(t,e){return e>=t.expandoStartIndex}(t,n);(function MR(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function rH(t,e,n,r){const i=function Ya(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=jh(n=NE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=NE(i,t,e,n,r),null===s){let u=function iH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ou(r))return t[na(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=NE(null,t,e,u[1],r),u=jh(u,e.attrs,r),function sH(t,e,n,r){t[na(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function oH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=jh(r,t[s].hostAttrs,n);return jh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function qj(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=na(o),u=ou(o);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Vc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=na(t[a+1]);t[r+1]=Vm(m,a),0!==m&&(t[m+1]=PE(t[m+1],r)),t[a+1]=function zj(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Vm(a,0),0!==a&&(t[a+1]=PE(t[a+1],r)),a=r;else t[r+1]=Vm(u,0),0===a?a=r:t[u+1]=PE(t[u+1],r),u=r;l&&(t[r+1]=RE(t[r+1])),yR(t,h,r,!0),yR(t,h,r,!1),function Gj(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Vc(s,e)>=0&&(n[r+1]=ME(n[r+1]))}(e,h,t,r,s),o=Vm(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==ze&&Er(i,o,e)&&function RR(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function Wj(t){return 1==(1&t)}(l)?PR(u,e,n,i,ou(l),o):void 0;Lm(h)||(Lm(s)||function Hj(t){return 2==(2&t)}(l)&&(s=PR(u,null,n,i,a,o)),function $U(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Xo.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Xo.Important),t.setStyle(n,r,i,s))}}(r,o,mc(lr(),n),i,s))}(s,s.data[lr()],i,i[Ue],t,i[o+1]=function lH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ce(ea(t)))),t}(e,n),r,o)}(t,e,null,!0),Fm}function NE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=jh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function jh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mi(t,o,!!n||e[++s]))}return void 0===t?null:t}function PR(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===ze&&(m=g?gt:void 0);let y=g?fI(m,r):h===r?m:void 0;if(l&&!Lm(y)&&(y=fI(u,r)),Lm(y)&&(a=y,o))return a;const D=t[i+1];i=o?na(D):ou(D)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=fI(u,r))}return a}function Lm(t){return void 0!==t}function Ii(t,e=""){const n=Y(),r=dt(),i=t+tt,s=r.firstCreatePass?Yc(r,i,1,e,null):r.data[i],o=NR(r,n,s,e,t);n[i]=o,Tc()&&um(r,n,o,s),Bi(s,!1)}let NR=(t,e,n,r,i)=>(ws(!0),function im(t,e){return t.createText(e)}(e[Ue],r));function Um(t){return Hh("",t,""),Um}function Hh(t,e,n){const r=Y(),i=Xc(r,t,e,n);return i!==ze&&function lo(t,e,n){const r=mc(e,t);!function X0(t,e,n){t.setValue(e,n)}(t[Ue],r,n)}(r,lr(),i),Hh}const cl="en-US";let eP=cl;function kE(t,e,n,r,i){if(t=R(t),Array.isArray(t))for(let s=0;s<t.length;s++)kE(t[s],e,n,r,i);else{const s=dt(),o=Y(),a=jn();let u=ru(t)?t:R(t.provide);const l=xb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(ru(t)||!t.multi){const y=new io(l,i,re),D=FE(u,e,i?h:h+m,g);-1===D?(_e(E(a,o),s,u),VE(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[D]=y,o[D]=y)}else{const y=FE(u,e,h+m,g),D=FE(u,e,h,h+m),M=D>=0&&n[D];if(i&&!M||!i&&!(y>=0&&n[y])){_e(E(a,o),s,u);const U=function Mz(t,e,n,r,i){const s=new io(t,n,re);return s.multi=[],s.index=e,s.componentProviders=0,CP(s,i,r&&!n),s}(i?Pz:Rz,n.length,i,r,l);!i&&M&&(n[D].providerFactory=U),VE(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),o.push(U)}else VE(s,t,y>-1?y:D,CP(n[i?D:y],l,!i&&r));!i&&r&&M&&n[D].componentProviders++}}}function VE(t,e,n,r){const i=ru(e),s=function _B(t){return!!t.useClass}(e);if(i||s){const u=(s?R(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function CP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function FE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Rz(t,e,n,r){return LE(this.multi,[])}function Pz(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ts(n,n[fe],this.providerFactory.index,r);s=a.slice(0,o),LE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],LE(i,s);return s}function LE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function sn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Sz(t,e,n){const r=dt();if(r.firstCreatePass){const i=Li(t);kE(n,r.data,r.blueprint,i,!0),kE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class uu{}class AP{}class UE extends uu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new OS(this);const i=ur(e);this._bootstrapComponents=co(i.bootstrap),this._r3Injector=Gb(e,n,[{provide:uu,useValue:this},{provide:wm,useValue:this.componentFactoryResolver},...r],Ce(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class BE extends AP{constructor(e){super(),this.moduleType=e}create(e){return new UE(this.moduleType,e,[])}}class bP extends uu{constructor(e){super(),this.componentFactoryResolver=new OS(this),this.instance=null;const n=new Hc([...e.providers,{provide:uu,useValue:this},{provide:wm,useValue:this.componentFactoryResolver}],e.parent||gm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function $E(t,e,n=null){return new bP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Oz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Rb(0,n.type),i=r.length>0?$E([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Re({token:t,providedIn:"environment",factory:()=>new t(oe(Hi))})}return t})();function SP(t){t.getStandaloneInjector=e=>e.get(Oz).getOrCreateStandaloneInjector(t)}function kP(t,e,n,r,i,s){const o=e+n;return Er(t,o,i)?function As(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Kh(t,e){const n=t[e];return n===ze?void 0:n}(t,o+1)}function $P(t,e,n){const r=t+tt,i=Y(),s=function zo(t,e){return t[e]}(i,r);return function Qh(t,e){return t[fe].data[e].pure}(i,r)?kP(i,function cr(){const t=ke.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function o4(t,e,n,r=!0){const i=e[fe];if(function xU(t,e,n,r){const i=Xn+r,s=n.length;r>0&&(n[i-1][gi]=e),r<s-Xn?(e[gi]=n[i],R0(n,Xn+r,e)):(n.push(e),e[gi]=null),e[Bt]=n;const o=e[Ys];null!==o&&n!==o&&function OU(t,e){const n=t[$o];e[hn]!==e[Bt][Bt][hn]&&(t[ug]=!0),null===n?t[$o]=[e]:n.push(e)}(o,e);const a=e[Jr];null!==a&&a.insertView(t),e[Le]|=128}(i,e,t,n),r){const s=SI(n,t),o=e[Ue],a=am(o,t[Fi]);null!==a&&function PU(t,e,n,r,i,s){r[Ut]=i,r[Jn]=e,Ch(t,r,n,1,i,s)}(i,t[Jn],o,e,a,s)}}Symbol;let ho=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=c4}return t})();const a4=ho,u4=class extends a4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function s4(t,e,n,r){const i=e.tView,a=Cm(t,i,n,4096&t[Le]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ys]=t[e.index];const l=t[Jr];return null!==l&&(a[Jr]=l.createEmbeddedView(i)),yE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new kh(i)}};function c4(){return function zm(t,e){return 4&t.type?new u4(e,t,Gc(t,e)):null}(jn(),Y())}let is=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=g4}return t})();function g4(){return function ZP(t,e){let n;const r=e[t.index];return $n(r)?n=r:(n=wS(r,e,null,t),e[t.index]=n,Am(e,n)),KP(n,e,t,r),new qP(n,t,e)}(jn(),Y())}const m4=is,qP=class extends m4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new er(this._hostTNode,this._hostLView)}get parentInjector(){const e=X(this._hostTNode,this._hostLView);if(gh(e)){const n=eu(e,this._hostLView),r=Xa(e);return new er(n[fe].data[r+8],n)}return new er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=GP(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function vh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const u=o?e:new Vh(rt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?l:this.parentInjector).get(Hi,null);M&&(s=M)}rt(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Wv(t){return $n(t[Bt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[Bt],h=new qP(l,l[Jn],l[Bt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return o4(a,i,o,!r),e.attachToViewContainerRef(),R0(zE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=GP(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=om(this._lContainer,n);r&&(Kg(zE(this._lContainer),n),DI(r[fe],r))}detach(e){const n=this._adjustIndex(e,-1),r=om(this._lContainer,n);return r&&null!=Kg(zE(this._lContainer),n)?new kh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function GP(t){return t[8]}function zE(t){return t[8]||(t[8]=[])}let KP=function QP(t,e,n,r){if(t[Fi])return;let i;i=8&n.type?xt(r):function _4(t,e){const n=t[Ue],r=n.createComment(""),i=mn(e,t);return nu(n,am(n,i),r,function LU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Fi]=i};const tw=new ce("Application Initializer");let nw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=we(tw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if($h(s))n.push(s);else if(iR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),EM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const fo=new ce("LocaleId",{providedIn:"root",factory:()=>we(fo,Ye.Optional|Ye.SkipSelf)||function Z4(){return typeof $localize<"u"&&$localize.locale||cl}()});let wM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Y4{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let TM=(()=>{class t{compileModuleSync(n){return new BE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=co(ur(n).declarations).reduce((o,a)=>{const u=rt(a);return u&&o.push(new Vh(u)),o},[]);return new Y4(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const bM=new ce(""),Zm=new ce("");let aw,sw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aw||(function vW(t){aw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(vt),oe(ow),oe(Zm))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),ow=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return aw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ra=null;const SM=new ce("AllowMultipleToken"),uw=new ce("PlatformDestroyListeners"),cw=new ce("appBootstrapListener");class PM{constructor(e,n){this.name=e,this.token=n}}function NM(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(s=[])=>{let o=lw();if(!o||o.injector.get(SM,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function wW(t){if(ra&&!ra.get(SM,!1))throw new H(400,!1);(function RM(){!function Vv(t){kv=t}(()=>{throw new H(600,!1)})})(),ra=t;const e=t.get(OM);(function MM(t){t.get(Ob,null)?.forEach(n=>n())})(t)}(function xM(t=[],e){return jr.create({name:e,providers:[{provide:BI,useValue:"platform"},{provide:uw,useValue:new Set([()=>ra=null])},...t]})}(a,r))}return function DW(t){const e=lw();if(!e)throw new H(401,!1);return e}()}}function lw(){return ra?.get(OM)??null}let OM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function CW(t="zone.js",e){return"noop"===t?new JB:"zone.js"===t?new vt(e):t}(r?.ngZone,function kM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function xz(t,e,n){return new UE(t,e,n)}(n.moduleType,this.injector,function BM(t){return[{provide:vt,useFactory:t},{provide:Rh,multi:!0,useFactory:()=>{const e=we(bW,{optional:!0});return()=>e.initialize()}},{provide:UM,useFactory:AW},{provide:Jb,useFactory:Xb}]}(()=>i)),o=s.injector.get(uo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Km(this._modules,s),a.unsubscribe()})}),function VM(t,e,n){try{const r=n();return $h(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(nw);return a.runInitializers(),a.donePromise.then(()=>(function tP(t){Qn(t,"Expected localeId to be defined"),"string"==typeof t&&(eP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(fo,cl)||cl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=FM({},r);return function IW(t,e,n){const r=new BE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(hl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(uw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(jr))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function FM(t,e){return Array.isArray(e)?e.reduce(FM,t):{...t,...e}}let hl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(UM),this.zoneIsStable=we(Jb),this.componentTypes=[],this.components=[],this.isStable=we(wM).hasPendingTasks.pipe(Ie(n=>n?A(!1):this.zoneIsStable),Oe(),W()),this._injector=we(Hi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Ub;if(!this._injector.get(nw).done)throw!i&&function Fo(t){const e=rt(t)||Un(t)||Bn(t);return null!==e&&e.standalone}(n),new H(405,!1);let o;o=i?n:this._injector.get(wm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function EW(t){return t.isBoundToModule}(o)?void 0:this._injector.get(uu),l=o.create(jr.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(bM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Km(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Km(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(cw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Km(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Km(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const UM=new ce("",{providedIn:"root",factory:()=>we(uo).handleError.bind(void 0)});function AW(){const t=we(vt),e=we(uo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let bW=(()=>{class t{constructor(){this.zone=we(vt),this.applicationRef=we(hl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Qm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=RW}return t})();function RW(t){return function PW(t,e,n){if(Xs(t)&&!n){const r=$r(t.index,e);return new kh(r,r)}return 47&t.type?new kh(e[hn],e):null}(jn(),Y(),16==(16&t))}class WM{constructor(){}supports(e){return Pm(e)}create(e){return new VW(e)}}const kW=(t,e)=>e;class VW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<GM(r,i,s)?n:r,a=GM(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,D=y+m;h<=D&&D<l&&(s[m]=y+1)}s[o.previousIndex]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Pm(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function uj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new FW(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new qM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class FW{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LW{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class qM{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new LW,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GM(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function KM(){return new Xm([new WM])}let Xm=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:KM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||KM()),deps:[[t,new Yg,new _i]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();const HW=NM(null,"core",[]);let zW=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(hl))};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({})}return t})();function fl(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let mw=null;function ia(){return mw}class iq{}const Wi=new ce("DocumentToken");let _w=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(oq)},providedIn:"platform"})}return t})();const sq=new ce("Location Initialized");let oq=(()=>{class t extends _w{constructor(){super(),this._doc=we(Wi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ia().getBaseHref(this._doc)}onPopState(n){const r=ia().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ia().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function yw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function sN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function po(t){return t&&"?"!==t[0]?"?"+t:t}let lu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(aN)},providedIn:"root"})}return t})();const oN=new ce("appBaseHref");let aN=(()=>{class t extends lu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??we(Wi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return yw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+po(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+po(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+po(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(_w),oe(oN,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aq=(()=>{class t extends lu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=yw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+po(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+po(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(_w),oe(oN,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),vw=(()=>{class t{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function lq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(sN(uN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+po(r))}normalize(n){return t.stripTrailingSlash(function cq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,uN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+po(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+po(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=po;static#t=this.joinWithSlash=yw;static#n=this.stripTrailingSlash=sN;static#r=this.\u0275fac=function(r){return new(r||t)(oe(lu))};static#i=this.\u0275prov=Re({token:t,factory:function(){return function uq(){return new vw(oe(lu))}()},providedIn:"root"})}return t})();function uN(t){return t.replace(/\/index.html$/,"")}class Yq{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Yq(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),vN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{vN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(re(is),re(ho),re(Xm))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function vN(t,e){t.context.$implicit=e.item}class nG{createSubscription(e,n){return wg(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){wg(()=>e.unsubscribe())}}class rG{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const iG=new rG,sG=new nG;let wN=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if($h(n))return iG;if(iR(n))return sG;throw function os(t,e){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(re(Qm,16))};static#t=this.\u0275pipe=Yn({name:"async",type:t,pure:!1,standalone:!0})}return t})(),TG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({})}return t})();function d_(t){return"server"===t}let bG=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new SG(oe(Wi),window)})}return t})();class SG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function RG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class XG extends iq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fw extends XG{static makeCurrent(){!function rq(t){mw||(mw=t)}(new Fw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function e3(){return rf=rf||document.querySelector("base"),rf?rf.getAttribute("href"):null}();return null==n?null:function t3(t){p_=p_||document.createElement("a"),p_.setAttribute("href",t);const e=p_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){rf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zq(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let p_,rf=null,r3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const Lw=new ce("EventManagerPlugins");let RN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Lw),oe(vt))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class PN{constructor(e){this._doc=e}}const Uw="ng-app-id";let MN=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=d_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Uw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Uw),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Uw,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Wi),oe(mm),oe(kb,8),oe(oo))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const Bw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$w=/%COMP%/g,a3=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function xN(t,e){return e.map(n=>n.replace($w,t))}let ON=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=d_(a),this.defaultRenderer=new jw(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===pi.ShadowDom&&(r={...r,encapsulation:pi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof VN?i.applyToHost(n):i instanceof Hw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case pi.Emulated:s=new VN(u,l,r,this.appId,h,o,a,g);break;case pi.ShadowDom:return new d3(u,l,n,r,o,a,this.nonce,g);default:s=new Hw(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(RN),oe(MN),oe(mm),oe(a3),oe(Wi),oe(oo),oe(vt),oe(kb))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class jw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Bw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(kN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(kN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Bw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Bw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Xo.DashCase|Xo.Important)?e.style.setProperty(n,r,i&Xo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Xo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=ia().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function kN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class d3 extends jw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=xN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Hw extends jw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?xN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class VN extends Hw{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function u3(t){return"_ngcontent-%COMP%".replace($w,t)}(l),this.hostAttr=function c3(t){return"_nghost-%COMP%".replace($w,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let h3=(()=>{class t extends PN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Wi))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const FN=["alt","control","meta","shift"],f3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let g3=(()=>{class t extends PN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ia().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),FN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=f3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),FN.forEach(o=>{o!==i&&(0,p3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Wi))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const UN=[{provide:oo,useValue:"browser"},{provide:Ob,useValue:function m3(){Fw.makeCurrent()},multi:!0},{provide:Wi,useFactory:function y3(){return function qU(t){MI=t}(document),document},deps:[]}],v3=NM(HW,"browser",UN),I3=new ce(""),BN=[{provide:Zm,useClass:class n3{addToWindow(e){At.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new H(5103,!1);return s},At.getAllAngularTestabilities=()=>e.getAllTestabilities(),At.getAllAngularRootElements=()=>e.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(r=>{const i=At.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ia().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:bM,useClass:sw,deps:[vt,ow,Zm]},{provide:sw,useClass:sw,deps:[vt,ow,Zm]}],$N=[{provide:BI,useValue:"root"},{provide:uo,useFactory:function _3(){return new uo},deps:[]},{provide:Lw,useClass:h3,multi:!0,deps:[Wi,vt,oo]},{provide:Lw,useClass:g3,multi:!0,deps:[Wi]},ON,MN,RN,{provide:$b,useExisting:ON},{provide:class PG{},useClass:r3,deps:[]},[]];let E3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:mm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(I3,12))};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({providers:[...$N,...BN],imports:[TG,zW]})}return t})(),jN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Wi))};static#t=this.\u0275prov=Re({token:t,factory:function(r){let i=null;return i=r?new r:function T3(){return new jN(oe(Wi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:S3}=Array,{getPrototypeOf:R3,prototype:P3,keys:M3}=Object;function qN(t){if(1===t.length){const e=t[0];if(S3(e))return{args:e,keys:null};if(function N3(t){return t&&"object"==typeof t&&R3(t)===P3}(e)){const n=M3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:x3}=Array;function GN(t){return ge(e=>function O3(t,e){return x3(e)?t(...e):t(e)}(t,e))}function ZN(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let KN=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(ao),re(yi))};static#t=this.\u0275dir=xe({type:t})}return t})(),du=(()=>{class t extends KN{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,features:[St]})}return t})();const Ps=new ce("NgValueAccessor"),F3={provide:Ps,useExisting:k(()=>g_),multi:!0},U3=new ce("CompositionEventMode");let g_=(()=>{class t extends KN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function L3(){const t=ia()?ia().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(ao),re(yi),re(U3,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ni("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[sn([F3]),St]})}return t})();function oa(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function YN(t){return null!=t&&"number"==typeof t.length}const wr=new ce("NgValidators"),aa=new ce("NgAsyncValidators"),B3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ww{static min(e){return function JN(t){return e=>{if(oa(e.value)||oa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function XN(t){return e=>{if(oa(e.value)||oa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return ex(e)}static requiredTrue(e){return function tx(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function nx(t){return oa(t.value)||B3.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function rx(t){return e=>oa(e.value)||!YN(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ix(t){return e=>YN(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function sx(t){if(!t)return m_;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(oa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return dx(e)}static composeAsync(e){return hx(e)}}function ex(t){return oa(t.value)?{required:!0}:null}function m_(t){return null}function ox(t){return null!=t}function ax(t){return $h(t)?I(t):t}function ux(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function cx(t,e){return e.map(n=>n(t))}function lx(t){return t.map(e=>function $3(t){return!t.validate}(e)?e:n=>e.validate(n))}function dx(t){if(!t)return null;const e=t.filter(ox);return 0==e.length?null:function(n){return ux(cx(n,e))}}function qw(t){return null!=t?dx(lx(t)):null}function hx(t){if(!t)return null;const e=t.filter(ox);return 0==e.length?null:function(n){return function k3(...t){const e=xi(t),{args:n,keys:r}=qN(t),i=new We(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;ct(n[h]).subscribe(ue(s,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?ZN(r,a):a),s.complete())}))}});return e?i.pipe(GN(e)):i}(cx(n,e).map(ax)).pipe(ge(ux))}}function Gw(t){return null!=t?hx(lx(t)):null}function fx(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function px(t){return t._rawValidators}function gx(t){return t._rawAsyncValidators}function Zw(t){return t?Array.isArray(t)?t:[t]:[]}function __(t,e){return Array.isArray(t)?t.includes(e):t===e}function mx(t,e){const n=Zw(e);return Zw(t).forEach(i=>{__(n,i)||n.push(i)}),n}function _x(t,e){return Zw(e).filter(n=>!__(t,n))}class yx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Gw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class qr extends yx{get formDirective(){return null}get path(){return null}}class ua extends yx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ix=(()=>{class t extends vx{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(ua,2))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Fm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[St]})}return t})(),Ex=(()=>{class t extends vx{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(qr,10))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Fm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[St]})}return t})();const sf="VALID",v_="INVALID",gl="PENDING",af="DISABLED";function Yw(t){return(I_(t)?t.validators:t)||null}function Jw(t,e){return(I_(e)?e.asyncValidators:t)||null}function I_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function Tx(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function Dx(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new H(1002,"")})}class E_{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===sf}get invalid(){return this.status===v_}get pending(){return this.status==gl}get disabled(){return this.status===af}get enabled(){return this.status!==af}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_x(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_x(e,this._rawAsyncValidators))}hasValidator(e){return __(this._rawValidators,e)}hasAsyncValidator(e){return __(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=af,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=sf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sf||this.status===gl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?af:sf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gl,this._hasOwnPendingAsyncValidator=!0;const n=ax(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?af:this.errors?v_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gl)?gl:this._anyControlsHaveStatus(v_)?v_:sf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){I_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function W3(t){return Array.isArray(t)?qw(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function q3(t){return Array.isArray(t)?Gw(t):t||null}(this._rawAsyncValidators)}}class uf extends E_{constructor(e,n,r){super(Yw(n),Jw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Dx(this,0,e),Object.keys(e).forEach(r=>{Tx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Cx extends uf{}const hu=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>cf}),cf="always";function lf(t,e,n=cf){Xw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Z3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ax(t,e)})}(t,e),function Q3(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function K3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ax(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function G3(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function T_(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),C_(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function D_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Xw(t,e){const n=px(t);null!==e.validator?t.setValidators(fx(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=gx(t);null!==e.asyncValidator?t.setAsyncValidators(fx(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();D_(e._rawValidators,i),D_(e._rawAsyncValidators,i)}function C_(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=px(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const i=gx(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}const r=()=>{};return D_(e._rawValidators,r),D_(e._rawAsyncValidators,r),n}function Ax(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Rx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Px(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const hf=class extends E_{constructor(e=null,n,r){super(Yw(n),Jw(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),I_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Px(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Rx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Rx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Px(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let kx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),Fx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({})}return t})();const iT=new ce("NgModelWithFormControlWarning"),l9={provide:qr,useExisting:k(()=>A_)};let A_=(()=>{class t extends qr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _n,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(C_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return lf(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){T_(n.control||null,n,!1),function e9(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function Sx(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(T_(r||null,n),(t=>t instanceof hf)(i)&&(lf(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function bx(t,e){Xw(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function Y3(t,e){return C_(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xw(this.form,this),this._oldForm&&C_(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(re(wr,10),re(aa,10),re(hu,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ni("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([l9]),St,Xr]})}return t})();const f9={provide:ua,useExisting:k(()=>aT)};let aT=(()=>{class t extends ua{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new _n,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===g_?n=s:function X3(t){return Object.getPrototypeOf(t.constructor)===du}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){this._added||this._setUpControl(),function tT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function w_(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(re(qr,13),re(wr,10),re(aa,10),re(Ps,10),re(iT,8))};static#n=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[sn([f9]),St,Xr]})}return t})(),fu=(()=>{class t{constructor(){this._validator=m_}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):m_,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,features:[Xr]})}return t})();const w9={provide:wr,useExisting:k(()=>b_),multi:!0};let b_=(()=>{class t extends fu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fl,this.createValidator=n=>ex}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&bs("required",i._enabled?"":null)},inputs:{required:"required"},features:[sn([w9]),St]})}return t})(),Xx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({imports:[Fx]})}return t})();class eO extends E_{constructor(e,n,r){super(Yw(n),Jw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Dx(this,0,e),e.forEach((r,i)=>{Tx(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function tO(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let S9=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let s={};return tO(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new uf(i,s)}record(n,r=null){const i=this._reduceControls(n);return new Cx(i,r)}control(n,r,i){let s={};return this.useNonNullable?(tO(r)?s=r:(s.validators=r,s.asyncValidators=i),new hf(n,{...s,nonNullable:!0})):new hf(n,r,i)}array(n,r,i){const s=n.map(o=>this._createControl(o));return new eO(s,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof hf||n instanceof E_?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),R9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:hu,useValue:n.callSetDisabledState??cf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({imports:[Xx]})}return t})(),P9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:iT,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:hu,useValue:n.callSetDisabledState??cf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({imports:[Xx]})}return t})();function lT(...t){const e=fi(t),n=xi(t),{args:r,keys:i}=qN(t);if(0===r.length)return I([],e);const s=new We(function N9(t,e,n=cn){return r=>{nO(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)nO(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ue(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ZN(i,o):cn));return n?s.pipe(GN(n)):s}function nO(t,e,n){t?Nr(n,t,e):e()}const S_=q(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function dT(...t){return function x9(){return xr(1)}()(I(t,fi(t)))}function rO(t){return new We(e=>{ct(t()).subscribe(e)})}function ff(t,e){const n=T(t)?t:()=>t,r=i=>i.error(n());return new We(e?i=>e.schedule(r,0,i):r)}function hT(){return K((t,e)=>{let n=null;t._refCount++;const r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class iO extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;const n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return hT()(this)}}function ml(t){return t<=0?()=>ln:K((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function R_(...t){const e=fi(t);return K((n,r)=>{(e?dT(t,n,e):dT(t,n)).subscribe(r)})}function as(t,e){return K((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function P_(t){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function sO(t=O9){return K((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function O9(){return new S_}function ca(t,e){const n=arguments.length>=2;return r=>r.pipe(t?as((i,s)=>t(i,s,r)):cn,ml(1),n?P_(e):sO(()=>new S_))}function pf(t,e){return T(e)?Et(t,e,1):Et(t,1)}function hr(t,e,n){const r=T(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):cn}function pu(t){return K((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ue(n,void 0,void 0,o=>{s=ct(t(o,pu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function M_(t,e){return K(function k9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function fT(t){return t<=0?()=>ln:K((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function pT(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ge="primary",gf=Symbol("RouteTitle");class U9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function _l(t){return new U9(t)}function B9(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ms(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!oO(t[i],e[i]))return!1;return!0}function oO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function aO(t){return t.length>0?t[t.length-1]:null}function la(t){return function M9(t){return!!t&&(t instanceof We||T(t.lift)&&T(t.subscribe))}(t)?t:$h(t)?I(Promise.resolve(t)):A(t)}const j9={exact:function lO(t,e,n){if(!gu(t.segments,e.segments)||!N_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!lO(t.children[r],e.children[r],n))return!1;return!0},subset:dO},uO={exact:function H9(t,e){return Ms(t,e)},subset:function z9(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>oO(t[n],e[n]))},ignored:()=>!0};function cO(t,e,n){return j9[n.paths](t.root,e.root,n.matrixParams)&&uO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function dO(t,e,n){return hO(t,e,e.segments,n)}function hO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!gu(i,n)||e.hasChildren()||!N_(i,n,r))}if(t.segments.length===n.length){if(!gu(t.segments,n)||!N_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!dO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(gu(t.segments,i)&&N_(t.segments,i,r)&&t.children[Ge])&&hO(t.children[Ge],e,s,r)}}function N_(t,e,n){return e.every((r,i)=>uO[n](t[i].parameters,r.parameters))}class yl{constructor(e=new Rt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_l(this.queryParams)),this._queryParamMap}toString(){return G9.serialize(this)}}class Rt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x_(this)}}class mf{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=_l(this.parameters)),this._parameterMap}toString(){return gO(this)}}function gu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let _f=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new gT},providedIn:"root"})}return t})();class gT{parse(e){const n=new i6(e);return new yl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${yf(e.root,!0)}`,r=function Q9(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${O_(n)}=${O_(i)}`).join("&"):`${O_(n)}=${O_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function Z9(t){return encodeURI(t)}(e.fragment)}`:""}`}}const G9=new gT;function x_(t){return t.segments.map(e=>gO(e)).join("/")}function yf(t,e){if(!t.hasChildren())return x_(t);if(e){const n=t.children[Ge]?yf(t.children[Ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ge&&r.push(`${i}:${yf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function q9(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ge?[yf(t.children[Ge],!1)]:[`${i}:${yf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ge]?`${x_(t)}/${n[0]}`:`${x_(t)}/(${n.join("//")})`}}function fO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O_(t){return fO(t).replace(/%3B/gi,";")}function mT(t){return fO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k_(t){return decodeURIComponent(t)}function pO(t){return k_(t.replace(/\+/g,"%20"))}function gO(t){return`${mT(t.path)}${function K9(t){return Object.keys(t).map(e=>`;${mT(e)}=${mT(t[e])}`).join("")}(t.parameters)}`}const Y9=/^[^\/()?;#]+/;function _T(t){const e=t.match(Y9);return e?e[0]:""}const J9=/^[^\/()?;=#]+/,e6=/^[^=?&#]+/,n6=/^[^&#]+/;class i6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ge]=new Rt(e,n)),r}parseSegment(){const e=_T(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new mf(k_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function X9(t){const e=t.match(J9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=_T(this.remaining);i&&(r=i,this.capture(r))}e[k_(n)]=k_(r)}parseQueryParam(e){const n=function t6(t){const e=t.match(e6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function r6(t){const e=t.match(n6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=pO(n),s=pO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_T(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ge]:new Rt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function mO(t){return t.segments.length>0?new Rt([],{[Ge]:t}):t}function _O(t){const e={};for(const r of Object.keys(t.children)){const s=_O(t.children[r]);if(r===Ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function s6(t){if(1===t.numberOfChildren&&t.children[Ge]){const e=t.children[Ge];return new Rt(t.segments.concat(e.segments),e.children)}return t}(new Rt(t.segments,e))}function mu(t){return t instanceof yl}function yO(t){let e;const i=mO(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Rt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function vO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return yT(i,i,i,n,r);const s=function a6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new EO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new EO(n,e,r)}(e);if(s.toRoot())return yT(i,i,new Rt([],{}),n,r);const o=function u6(t,e,n){if(t.isAbsolute)return new F_(e,!0,0);if(!n)return new F_(e,!1,NaN);if(null===n.parent)return new F_(n,!0,0);const r=V_(t.commands[0])?0:1;return function c6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new F_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?If(o.segmentGroup,o.index,s.commands):wO(o.segmentGroup,o.index,s.commands);return yT(i,o.segmentGroup,a,n,r)}function V_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function vf(t){return"object"==typeof t&&null!=t&&t.outlets}function yT(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=t===e?n:IO(t,e,n);const a=mO(_O(o));return new yl(a,s,i)}function IO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:IO(s,e,n)}),new Rt(t.segments,r)}class EO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&V_(r[0]))throw new H(4003,!1);const i=r.find(vf);if(i&&i!==aO(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class F_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function wO(t,e,n){if(t||(t=new Rt([],{})),0===t.segments.length&&t.hasChildren())return If(t,e,n);const r=function d6(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(vf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!DO(u,l,o))return s;r+=2}else{if(!DO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Rt(t.segments.slice(0,r.pathIndex),{});return s.children[Ge]=new Rt(t.segments.slice(r.pathIndex),t.children),If(s,0,i)}return r.match&&0===i.length?new Rt(t.segments,{}):r.match&&!t.hasChildren()?vT(t,e,n):r.match?If(t,0,i):vT(t,e,n)}function If(t,e,n){if(0===n.length)return new Rt(t.segments,{});{const r=function l6(t){return vf(t[0])?t[0].outlets:{[Ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ge)&&t.children[Ge]&&1===t.numberOfChildren&&0===t.children[Ge].segments.length){const s=If(t.children[Ge],e,n);return new Rt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=wO(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Rt(t.segments,i)}}function vT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(vf(s)){const u=h6(s.outlets);return new Rt(r,u)}if(0===i&&V_(n[0])){r.push(new mf(t.segments[e].path,TO(n[0]))),i++;continue}const o=vf(s)?s.outlets[Ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&V_(a)?(r.push(new mf(o,TO(a))),i+=2):(r.push(new mf(o,{})),i++)}return new Rt(r,{})}function h6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=vT(new Rt([],{}),0,r))}),e}function TO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DO(t,e,n){return t==n.path&&Ms(e,n.parameters)}const Ef="imperative";class Ns{constructor(e,n){this.id=e,this.url=n}}class L_ extends Ns{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class da extends Ns{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wf extends Ns{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vl extends Ns{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class U_ extends Ns{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class CO extends Ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f6 extends Ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p6 extends Ns{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class g6 extends Ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m6 extends Ns{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class y6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class v6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IT{}class ET{constructor(e){this.url=e}}class T6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tf,this.attachRef=null}}let Tf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new T6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class bO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=wT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=wT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=TT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TT(e,this._root).map(n=>n.value)}}function wT(t,e){if(t===e.value)return e;for(const n of e.children){const r=wT(t,n);if(r)return r}return null}function TT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=TT(t,n);if(r.length)return r.unshift(e),r}return[]}class _o{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Il(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class SO extends bO{constructor(e,n){super(e),this.snapshot=n,DT(this,e)}toString(){return this.snapshot.toString()}}function RO(t,e){const n=function D6(t,e){const o=new B_([],{},{},"",{},Ge,e,null,{});return new MO("",new _o(o,[]))}(0,e),r=new v([new mf("",{})]),i=new v({}),s=new v({}),o=new v({}),a=new v(""),u=new El(r,i,o,a,s,Ge,e,n.root);return u.snapshot=n.root,new SO(new _o(u,[]),n)}class El{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(l=>l[gf]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(e=>_l(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(e=>_l(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function PO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function C6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class B_{get title(){return this.data?.[gf]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_l(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_l(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MO extends bO{constructor(e,n){super(n),this.url=e,DT(this,n)}toString(){return NO(this._root)}}function DT(t,e){e.value._routerState=t,e.children.forEach(n=>DT(t,n))}function NO(t){const e=t.children.length>0?` { ${t.children.map(NO).join(", ")} } `:"";return`${t.value}${e}`}function CT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ms(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ms(e.params,n.params)||t.paramsSubject.next(n.params),function $9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ms(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Ms(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function AT(t,e){const n=Ms(t.params,e.params)&&function W9(t,e){return gu(t,e)&&t.every((n,r)=>Ms(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||AT(t.parent,e.parent))}let bT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ge,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=we(Tf),this.location=we(is),this.changeDetector=we(Qm),this.environmentInjector=we(Hi),this.inputBinder=we($_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new A6(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xr]})}return t})();class A6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===El?this.route:e===Tf?this.childContexts:this.parent.get(e,n)}}const $_=new ce("");let xO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=lT([r.queryParams,r.params,r.data]).pipe(Ie(([s,o,a],u)=>(a={...s,...o,...a},0===u?A(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function nq(t){const e=rt(t);if(!e)return null;const n=new Vh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function Df(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function S6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Df(t,r,i);return Df(t,r)})}(t,e,n);return new _o(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Df(t,a)),o}}const r=function R6(t){return new El(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Df(t,s));return new _o(r,i)}}const ST="ngNavigationCancelingError";function OO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function kO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[ST]=!0,r.cancellationCode=e,n&&(r.url=n),r}function VO(t){return t&&t[ST]}let FO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Vo({type:t,selectors:[["ng-component"]],standalone:!0,features:[SP],decls:1,vars:0,template:function(r,i){1&r&&ta(0,"router-outlet")},dependencies:[bT],encapsulation:2})}return t})();function RT(t){const e=t.children&&t.children.map(RT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=FO),n}function us(t){return t.outlet||Ge}function Cf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class F6{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),CT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Il(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Il(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Il(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Il(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new w6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new I6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(CT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),CT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Cf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class LO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class j_{constructor(e,n){this.component=e,this.route=n}}function L6(t,e,n){const r=t._root;return Af(r,e?e._root:null,n,[r.value])}function wl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Qp(t){return null!==Hu(t)}(t)?e.get(t):t:r}function Af(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Il(e);return t.children.forEach(o=>{(function B6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function $6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!gu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gu(t.url,e.url)||!Ms(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!AT(t,e)||!Ms(t.queryParams,e.queryParams);default:return!AT(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new LO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Af(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new j_(a.outlet.component,o))}else o&&bf(e,a,i),i.canActivateChecks.push(new LO(r)),Af(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>bf(a,n.getContext(o),i)),i}function bf(t,e,n){const r=Il(t),i=t.value;Object.entries(r).forEach(([s,o])=>{bf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new j_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sf(t){return"function"==typeof t}function UO(t){return t instanceof S_||"EmptyError"===t?.name}const H_=Symbol("INITIAL_VALUE");function Tl(){return Ie(t=>lT(t.map(e=>e.pipe(ml(1),R_(H_)))).pipe(ge(e=>{for(const n of e)if(!0!==n){if(n===H_)return H_;if(!1===n||n instanceof yl)return n}return!0}),as(e=>e!==H_),ml(1)))}function BO(t){return function ui(...t){return ci(t)}(hr(e=>{if(mu(e))throw OO(0,e)}),ge(e=>!0===e))}class z_{constructor(e){this.segmentGroup=e||null}}class $O{constructor(e){this.urlTree=e}}function Dl(t){return ff(new z_(t))}function jO(t){return ff(new $O(t))}class a5{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new H(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ge])return ff(new H(4e3,!1));i=i.children[Ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new yl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Rt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const PT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u5(t,e,n,r,i){const s=MT(t,e,n);return s.matched?(r=function M6(t,e){return t.providers&&!t._injector&&(t._injector=$E(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function i5(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(o=>{const a=wl(o,t);return la(function G6(t){return t&&Sf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Tl(),BO()):A(!0)}(r,e,n).pipe(ge(o=>!0===o?s:{...PT}))):A(s)}function MT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...PT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||B9)(n,t,e);if(!i)return{...PT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function HO(t,e,n,r){return n.length>0&&function d5(t,e,n){return n.some(r=>W_(t,e,r)&&us(r)!==Ge)}(t,n,r)?{segmentGroup:new Rt(e,l5(r,new Rt(n,t.children))),slicedSegments:[]}:0===n.length&&function h5(t,e,n){return n.some(r=>W_(t,e,r))}(t,n,r)?{segmentGroup:new Rt(t.segments,c5(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:n}}function c5(t,e,n,r,i){const s={};for(const o of r)if(W_(t,n,o)&&!i[us(o)]){const a=new Rt([],{});s[us(o)]=a}return{...i,...s}}function l5(t,e){const n={};n[Ge]=e;for(const r of t)if(""===r.path&&us(r)!==Ge){const i=new Rt([],{});n[us(r)]=i}return n}function W_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class m5{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new a5(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,!1)}recognize(){const e=HO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ge).pipe(pu(n=>{if(n instanceof $O)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof z_?this.noMatchError(n):n}),ge(n=>{const r=new B_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ge,this.rootComponentType,null,{}),i=new _o(r,n),s=new MO("",i),o=function o6(t,e,n=null,r=null){return vO(yO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ge).pipe(pu(r=>{throw r instanceof z_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=PO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return I(i).pipe(pf(s=>{const o=r.children[s],a=function k6(t,e){const n=t.filter(r=>us(r)===e);return n.push(...t.filter(r=>us(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),M_((s,o)=>(s.push(...o),s)),P_(null),function V9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?as((i,s)=>t(i,s,r)):cn,fT(1),n?P_(e):sO(()=>new S_))}(),Et(s=>{if(null===s)return Dl(r);const o=zO(s);return function _5(t){t.sort((e,n)=>e.value.outlet===Ge?-1:n.value.outlet===Ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),A(o)}))}processSegment(e,n,r,i,s,o){return I(n).pipe(pf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(pu(u=>{if(u instanceof z_)return A(null);throw u}))),ca(a=>!!a),pu(a=>{if(UO(a))return function p5(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?A([]):Dl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function f5(t,e,n,r){return!!(us(t)===r||r!==Ge&&W_(e,n,t))&&("**"===t.path||MT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Dl(i):Dl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Et(o=>{const a=new Rt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=MT(n,i,s);if(!a)return Dl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?jO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(Et(m=>this.processSegment(e,r,n,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?aO(i).parameters:{};a=A({snapshot:new B_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WO(r),us(r),r.component??r._loadedComponent??null,r,qO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=u5(n,r,i,e).pipe(ge(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new B_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WO(r),us(r),r.component??r._loadedComponent??null,r,qO(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(Ie(u=>null===u?Dl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Ie(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:D,slicedSegments:b}=HO(n,m,y,l);if(0===b.length&&D.hasChildren())return this.processChildren(h,l,D).pipe(ge(U=>null===U?null:[new _o(g,U)]));if(0===l.length&&0===b.length)return A([new _o(g,[])]);const M=us(r)===s;return this.processSegment(h,l,D,b,M?Ge:s,!0).pipe(ge(U=>[new _o(g,U)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function r5(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(o=>{const a=wl(o,t);return la(function H6(t){return t&&Sf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Tl(),BO())}(e,n,r).pipe(Et(i=>i?this.configLoader.loadChildren(e,n).pipe(hr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function o5(t){return ff(kO(!1,3))}())):A({routes:[],injector:e})}}function y5(t){const e=t.value.routeConfig;return e&&""===e.path}function zO(t){const e=[],n=new Set;for(const r of t){if(!y5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=zO(r.children);e.push(new _o(r.value,i))}return e.filter(r=>!n.has(r))}function WO(t){return t.data||{}}function qO(t){return t.resolve||{}}function GO(t){return"string"==typeof t.title||null===t.title}function NT(t){return Ie(e=>{const n=t(e);return n?I(n).pipe(ge(()=>e)):A(e)})}const Cl=new ce("ROUTES");let xT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=we(TM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=la(n.loadComponent()).pipe(ge(ZO),hr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),pT(()=>{this.componentLoaders.delete(n)})),i=new iO(r,()=>new j).pipe(hT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function C5(t,e,n,r){return la(t.loadChildren()).pipe(ge(ZO),Et(i=>i instanceof AP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),ge(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Cl,[],{optional:!0,self:!0}).flat()),{routes:o.map(RT),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(pT(()=>{this.childrenLoaders.delete(r)})),o=new iO(s,()=>new j).pipe(hT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZO(t){return function A5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let q_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=we(xT),this.environmentInjector=we(Hi),this.urlSerializer=we(_f),this.rootContexts=we(Tf),this.inputBindingEnabled=null!==we($_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new y6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new _6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ef,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(as(s=>0!==s.id),ge(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),Ie(s=>{this.currentTransition=s;let o=!1,a=!1;return A(s).pipe(hr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ie(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new vl(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),ln}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(Ie(m=>{const y=this.transitions?.getValue();return this.events.next(new L_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?ln:Promise.resolve(m)}),function v5(t,e,n,r,i,s){return Et(o=>function g5(t,e,n,r,i,s,o="emptyOnly"){return new m5(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ge(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),hr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new CO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:D,restoredState:b,extras:M}=u,U=new L_(m,this.urlSerializer.serialize(y),D,b);this.events.next(U);const N=RO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:N,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(s)}{const m="";return this.events.next(new vl(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),ln}}),hr(u=>{const l=new f6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ge(u=>(this.currentTransition=s={...u,guards:L6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function K6(t,e){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?A({...n,guardsResult:!0}):function Q6(t,e,n,r){return I(t).pipe(Et(i=>function n5(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?A(s.map(a=>{const u=Cf(e)??i,l=wl(a,u);return la(function q6(t){return t&&Sf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(ca())})).pipe(Tl()):A(!0)}(i.component,i.route,n,e,r)),ca(i=>!0!==i,!0))}(o,r,i,t).pipe(Et(a=>a&&function j6(t){return"boolean"==typeof t}(a)?function Y6(t,e,n,r){return I(e).pipe(pf(i=>dT(function X6(t,e){return null!==t&&e&&e(new v6(t)),A(!0)}(i.route.parent,r),function J6(t,e){return null!==t&&e&&e(new E6(t)),A(!0)}(i.route,r),function t5(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function U6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>rO(()=>A(o.guards.map(u=>{const l=Cf(o.node)??n,h=wl(u,l);return la(function W6(t){return t&&Sf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(ca())})).pipe(Tl())));return A(s).pipe(Tl())}(t,i.path,n),function e5(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(s=>rO(()=>{const o=Cf(e)??n,a=wl(s,o);return la(function z6(t){return t&&Sf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ca())}));return A(i).pipe(Tl())}(t,i.route,n))),ca(i=>!0!==i,!0))}(r,s,t,e):A(a)),ge(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),hr(u=>{if(s.guardsResult=u.guardsResult,mu(u.guardsResult))throw OO(0,u.guardsResult);const l=new p6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),as(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),NT(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(hr(l=>{const h=new g6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ie(l=>{let h=!1;return A(l).pipe(function I5(t,e){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=0;return I(i).pipe(pf(o=>function E5(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!GO(i)&&(s[gf]=i.title),function w5(t,e,n,r){const i=function T5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const s={};return I(i).pipe(Et(o=>function D5(t,e,n,r){const i=Cf(e)??r,s=wl(t,i);return la(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ca(),hr(a=>{s[o]=a}))),fT(1),function F9(t){return ge(()=>t)}(s),pu(o=>UO(o)?ln:ff(o)))}(s,t,e,r).pipe(ge(o=>(t._resolvedData=o,t.data=PO(t,n).resolve,i&&GO(i)&&(t.data[gf]=i.title),null)))}(o.route,r,t,e)),hr(()=>s++),fT(1),Et(o=>s===i.length?A(n):ln))})}(n.paramsInheritanceStrategy,this.environmentInjector),hr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),hr(l=>{const h=new m6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),NT(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(hr(m=>{h.component=m}),ge(()=>{})));for(const m of h.children)g.push(...l(m));return g};return lT(l(u.targetSnapshot.root)).pipe(P_(),ml(1))}),NT(()=>this.afterPreactivation()),ge(u=>{const l=function b6(t,e,n){const r=Df(t,e._root,n?n._root:void 0);return new SO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),hr(()=>{this.events.next(new IT)}),((t,e,n,r)=>ge(i=>(new F6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ml(1),hr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new da(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function L9(t){return K((e,n)=>{ct(t).subscribe(ue(n,()=>n.complete(),Te)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(hr(u=>{throw u}))),pT(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),pu(u=>{if(a=!0,VO(u))this.events.next(new wf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function P6(t){return VO(t)&&mu(t.url)}(u)?this.events.next(new ET(u.url)):s.resolve(!1);else{this.events.next(new U_(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return ln}))}))}cancelNavigationTransition(n,r,i){const s=new wf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KO(t){return t!==Ef}let QO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ge);return r}getResolvedTitleForRoute(n){return n.data[gf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(b5)},providedIn:"root"})}return t})(),b5=(()=>{class t extends QO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(jN))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),S5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(P5)},providedIn:"root"})}return t})();class R5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let P5=(()=>{class t extends R5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=bn(t)))(i||t)}}();static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const G_=new ce("",{providedIn:"root",factory:()=>({})});let M5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(N5)},providedIn:"root"})}return t})(),N5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Rf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Rf||{});function YO(t,e){t.events.pipe(as(n=>n instanceof da||n instanceof wf||n instanceof U_||n instanceof vl),ge(n=>n instanceof da||n instanceof vl?Rf.COMPLETE:n instanceof wf&&(0===n.code||1===n.code)?Rf.REDIRECTING:Rf.FAILED),as(n=>n!==Rf.REDIRECTING),ml(1)).subscribe(()=>{e()})}function x5(t){throw t}function O5(t,e,n){return e.parse("/")}const k5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},V5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=we(EM),this.isNgZoneEnabled=!1,this._events=new j,this.options=we(G_,{optional:!0})||{},this.pendingTasks=we(wM),this.errorHandler=this.options.errorHandler||x5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||O5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=we(M5),this.routeReuseStrategy=we(S5),this.titleStrategy=we(QO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=we(Cl,{optional:!0})?.flat()??[],this.navigationTransitions=we(q_),this.urlSerializer=we(_f),this.location=we(vw),this.componentInputBindingEnabled=!!we($_,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=we(vt)instanceof vt&&vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new yl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(JO(r)&&this._events.next(r));if(r instanceof L_)KO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof vl)this.rawUrlTree=i.rawUrl;else if(r instanceof CO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof IT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof wf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof ET){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KO(i.source)};this.scheduleNavigation(s,Ef,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof U_&&this.restoreHistory(i,!0),r instanceof da&&(this.navigated=!0),JO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ef,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(RT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=yO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return vO(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=mu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ef,null,r)}navigate(n,r={skipLocationChange:!1}){return function F5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...k5}:!1===r?{...V5}:r,mu(n))return cO(this.currentUrlTree,n,i);const s=this.parseUrl(n);return cO(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return YO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function JO(t){return!(t instanceof IT||t instanceof ET)}let Pf=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof da&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Cb(t,e,n){return function pB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Db:Tb}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(re(wi),re(El),function Zg(t){return function Pe(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Xu(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(jn(),t)}("tabindex"),re(ao),re(yi),re(lu))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ni("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&bs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",fl],skipLocationChange:["skipLocationChange","skipLocationChange",fl],replaceUrl:["replaceUrl","replaceUrl",fl],routerLink:"routerLink"},standalone:!0,features:[BS,Xr]})}return t})();class XO{}let B5=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(as(n=>n instanceof da),pf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=$E(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return I(i).pipe(xr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const s=i.pipe(Et(o=>null===o?A(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?I([s,this.loader.loadComponent(r)]).pipe(xr()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(wi),oe(TM),oe(Hi),oe(XO),oe(xT))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const OT=new ce("");let e1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof L_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof da?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof vl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof AO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new AO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function fS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function yo(t,e){return{\u0275kind:t,\u0275providers:e}}function n1(){const t=we(jr);return e=>{const n=t.get(hl);if(e!==n.components[0])return;const r=t.get(wi),i=t.get(r1);1===t.get(kT)&&r.initialNavigation(),t.get(i1,null,Ye.Optional)?.setUpPreloading(),t.get(OT,null,Ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const r1=new ce("",{factory:()=>new j}),kT=new ce("",{providedIn:"root",factory:()=>1}),i1=new ce("");function z5(t){return yo(0,[{provide:i1,useExisting:B5},{provide:XO,useExisting:t}])}const s1=new ce("ROUTER_FORROOT_GUARD"),q5=[vw,{provide:_f,useClass:gT},wi,Tf,{provide:El,useFactory:function t1(t){return t.routerState.root},deps:[wi]},xT,[]];function G5(){return new PM("Router",wi)}let o1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[q5,[],{provide:Cl,multi:!0,useValue:n},{provide:s1,useFactory:Y5,deps:[[wi,new _i,new Yg]]},{provide:G_,useValue:r||{}},r?.useHash?{provide:lu,useClass:aq}:{provide:lu,useClass:aN},{provide:OT,useFactory:()=>{const t=we(bG),e=we(vt),n=we(G_),r=we(q_),i=we(_f);return n.scrollOffset&&t.setOffset(n.scrollOffset),new e1(i,r,t,e,n)}},r?.preloadingStrategy?z5(r.preloadingStrategy).\u0275providers:[],{provide:PM,multi:!0,useFactory:G5},r?.initialNavigation?J5(r):[],r?.bindToComponentInputs?yo(8,[xO,{provide:$_,useExisting:xO}]).\u0275providers:[],[{provide:a1,useFactory:n1},{provide:cw,multi:!0,useExisting:a1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Cl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(s1,8))};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({})}return t})();function Y5(t){return"guarded"}function J5(t){return["disabled"===t.initialNavigation?yo(3,[{provide:tw,multi:!0,useFactory:()=>{const e=we(wi);return()=>{e.setUpLocationChangeListener()}}},{provide:kT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?yo(2,[{provide:kT,useValue:0},{provide:tw,multi:!0,deps:[jr],useFactory:e=>{const n=e.get(sq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(wi),s=e.get(r1);YO(i,()=>{r(!0)}),e.get(q_).afterPreactivation=()=>(r(!0),s.closed?A(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const a1=new ce("");let u1=(()=>{class t{constructor(){this.notas=[]}agregarReceta(n){const r=this.obtenerNotas();r.push(n),localStorage.setItem("notas",JSON.stringify(r))}obtenerNotas(){const n=localStorage.getItem("notas");return n?JSON.parse(n):[]}borrarNotas(){localStorage.removeItem("notas")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Gr=Me(534);(0,Gr.registerVersion)("firebase","10.7.0","app");class n8 extends ft{constructor(e,n){super()}schedule(e,n=0){return this}}const Z_={setInterval(t,e,...n){const{delegate:r}=Z_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Z_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class c1 extends n8{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Z_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Z_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,De(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const VT={now:()=>(VT.delegate||Date).now(),delegate:void 0};class Mf{constructor(e,n=Mf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Mf.now=VT.now;class l1 extends Mf{constructor(e,n=Mf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const s8=new class i8 extends l1{}(class r8 extends c1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),d1=new l1(c1),FT=new Zc("ANGULARFIRE2_VERSION");const LT=(t,e)=>{const n=e?[e]:(0,Gr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class UT{constructor(){return LT(o8)}}const o8="app-check";function Al(){}class f1{zone;delegate;constructor(e,n=s8){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class a8{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Al,{},Al,Al)),n.pipe(hr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let K_=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new f1(Zone.current)),this.insideAngular=n.run(()=>new f1(Zone.current,d1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(vt))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function _u(t){return bl().ngZone.run(()=>t())}function Ti(t){return function c8(t){return function(n){return(n=n.lift(new a8(t.ngZone))).pipe(Kn(t.outsideAngular),gn(t.insideAngular))}}(bl())(t)}const l8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),_u(()=>t.apply(void 0,r))},p1=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||=_u(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Al,{},Al,Al))),r[s]=l8(r[s],n));const i=function u8(t){return bl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof We){const s=bl();return i.pipe(Kn(s.outsideAngular),gn(s.insideAngular))}return _u(()=>i)}return i instanceof We?i.pipe(Ti):i instanceof Promise?_u(()=>new Promise((s,o)=>i.then(a=>_u(()=>s(a)),a=>_u(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:_u(()=>i)};var Q_=Me(106);Q_.Z.registerVersion("firebase","10.7.0","app-compat");const f8=["ngOnDestroy"];class g1{constructor(e){return e}}const BT=new ce("angularfire2.app.options"),$T=new ce("angularfire2.app.name");function jT(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=Q_.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Q_.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;m8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new g1(o)}const m8=(t,...e)=>{};function m1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function _8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(_1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${y8?" You may need to reload as Firebase is not HMR aware.":""}`),_1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const y8=typeof module<"u"&&!!module.hot,_1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Me(365);class v8 extends j{constructor(e=1/0,n=1/0,r=VT){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function y1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new v8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function v1(t,e){return T(e)?Ie(()=>t,e):Ie(()=>t)}const I1=new ce("angularfire2.auth.use-emulator"),E1=new ce("angularfire2.auth.settings"),w1=new ce("angularfire2.auth.tenant-id"),T1=new ce("angularfire2.auth.langugage-code"),D1=new ce("angularfire2.auth.use-device-language"),C1=new ce("angularfire.auth.persistence"),A1=(t,e,n,r,i,s,o,a)=>m1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let b1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,h,g,m,y){const D=new j,b=A(void 0).pipe(gn(o.outsideAngular),Ie(()=>s.runOutsideAngular(()=>Promise.resolve().then(Me.bind(Me,365)))),ge(()=>jT(n,s,r)),ge(M=>A1(M,s,a,l,h,g,u,m)),y1({bufferSize:1,refCount:!1}));if(d_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{b.pipe(ca()).subscribe();const M=b.pipe(Ie(z=>z.getRedirectResult().then(se=>se,()=>null)),Ti,y1({bufferSize:1,refCount:!1})),U=b.pipe(Ie(z=>new We(se=>({unsubscribe:s.runOutsideAngular(()=>z.onAuthStateChanged(de=>se.next(de),de=>se.error(de),()=>se.complete()))})))),N=b.pipe(Ie(z=>new We(se=>({unsubscribe:s.runOutsideAngular(()=>z.onIdTokenChanged(de=>se.next(de),de=>se.error(de),()=>se.complete()))}))));this.authState=M.pipe(v1(U),Kn(o.outsideAngular),gn(o.insideAngular)),this.user=M.pipe(v1(N),Kn(o.outsideAngular),gn(o.insideAngular)),this.idToken=this.user.pipe(Ie(z=>z?I(z.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(Ie(z=>z?I(z.getIdTokenResult()):A(null))),this.credential=w(M,D,this.authState.pipe(as(z=>!z))).pipe(ge(z=>z?.user?z:null),Kn(o.outsideAngular),gn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(f8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,b,s,{spy:{apply:(M,U,N)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&N.then(z=>D.next(z))}}})}static \u0275fac=function(r){return new(r||t)(oe(BT),oe($T,8),oe(oo),oe(vt),oe(K_),oe(I1,8),oe(E1,8),oe(w1,8),oe(T1,8),oe(D1,8),oe(C1,8),oe(UT,8))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function HT(){return K((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var pe,G=Me(861),S1=Me(537),xs=Me(879),Ot=Me(58),E8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cs={},zT=zT||{},He=E8||self;function Y_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Nf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var WT="closure_uid_"+(1e9*Math.random()>>>0),T8=0;function D8(t,e,n){return t.call.apply(t.bind,arguments)}function C8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Tr(t,e,n){return(Tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D8:C8).apply(null,arguments)}function J_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ha(){this.s=this.s,this.o=this.o}ha.prototype.s=!1,ha.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function w8(t){Object.prototype.hasOwnProperty.call(t,WT)&&t[WT]||(t[WT]=++T8)}(this)},ha.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const R1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function qT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function P1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Y_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Dr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var b8=function(){if(!He.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};He.addEventListener("test",n,e),He.removeEventListener("test",n,e)}catch{}return t}();function xf(t){return/^[\s\xa0]*$/.test(t)}function X_(){var t=He.navigator;return t&&(t=t.userAgent)?t:""}function Os(t){return-1!=X_().indexOf(t)}function GT(t){return GT[" "](t),t}GT[" "]=function(){};var KT,t,R8=Os("Opera"),Sl=Os("Trident")||Os("MSIE"),M1=Os("Edge"),ZT=M1||Sl,N1=Os("Gecko")&&!(-1!=X_().toLowerCase().indexOf("webkit")&&!Os("Edge"))&&!(Os("Trident")||Os("MSIE"))&&!Os("Edge"),P8=-1!=X_().toLowerCase().indexOf("webkit")&&!Os("Edge");function x1(){var t=He.document;return t?t.documentMode:void 0}e:{var QT="",YT=(t=X_(),N1?/rv:([^\);]+)(\)|;)/.exec(t):M1?/Edge\/([\d\.]+)/.exec(t):Sl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):P8?/WebKit\/(\S+)/.exec(t):R8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(YT&&(QT=YT?YT[1]:""),Sl){var JT=x1();if(null!=JT&&JT>parseFloat(QT)){KT=String(JT);break e}}KT=QT}var M8=He.document&&Sl&&(x1()||parseInt(KT,10))||void 0;function Of(t,e){if(Dr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(N1){e:{try{GT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:N8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Of.$.h.call(this)}}nr(Of,Dr);var N8={2:"touch",3:"pen",4:"mouse"};Of.prototype.h=function(){Of.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var kf="closure_listenable_"+(1e6*Math.random()|0),x8=0;function O8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++x8,this.fa=this.ia=!1}function ey(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function eD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function k1(t){const e={};for(const n in t)e[n]=t[n];return e}const V1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<V1.length;s++)n=V1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ty(t){this.src=t,this.g={},this.h=0}function tD(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=R1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ey(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function nD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}ty.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=nD(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new O8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var rD="closure_lm_"+(1e6*Math.random()|0),iD={};function L1(t,e,n,r,i){if(r&&r.once)return B1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)L1(t,e[s],n,r,i);return null}return n=uD(n),t&&t[kf]?t.O(e,n,Nf(r)?!!r.capture:!!r,i):U1(t,e,n,!1,r,i)}function U1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Nf(i)?!!i.capture:!!i,a=oD(t);if(a||(t[rD]=a=new ty(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function V8(){const e=F8;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)b8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(j1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function B1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)B1(t,e[s],n,r,i);return null}return n=uD(n),t&&t[kf]?t.P(e,n,Nf(r)?!!r.capture:!!r,i):U1(t,e,n,!0,r,i)}function $1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)$1(t,e[s],n,r,i);else r=Nf(r)?!!r.capture:!!r,n=uD(n),t&&t[kf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=nD(s=t.g[e],n,r,i))&&(ey(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=oD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=nD(e,n,r,i)),(n=-1<t?e[t]:null)&&sD(n))}function sD(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[kf])tD(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(j1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=oD(e))?(tD(n,t),0==n.h&&(n.src=null,e[rD]=null)):ey(t)}}}function j1(t){return t in iD?iD[t]:iD[t]="on"+t}function F8(t,e){if(t.fa)t=!0;else{e=new Of(e,this);var n=t.listener,r=t.la||t.src;t.ia&&sD(t),t=n.call(r,e)}return t}function oD(t){return(t=t[rD])instanceof ty?t:null}var aD="__closure_events_fn_"+(1e9*Math.random()>>>0);function uD(t){return"function"==typeof t?t:(t[aD]||(t[aD]=function(e){return t.handleEvent(e)}),t[aD])}function rr(){ha.call(this),this.i=new ty(this),this.S=this,this.J=null}function fr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Dr(e,t);else if(e instanceof Dr)e.target=e.target||t;else{var i=e;F1(e=new Dr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ny(o,r,!0,e)&&i}if(i=ny(o=e.g=t,r,!0,e)&&i,i=ny(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=ny(o=e.g=n[s],r,!1,e)&&i}function ny(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&tD(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}nr(rr,ha),rr.prototype[kf]=!0,rr.prototype.removeEventListener=function(t,e,n,r){$1(this,t,e,n,r)},rr.prototype.N=function(){if(rr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ey(n[r]);delete t.g[e],t.h--}}this.J=null},rr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},rr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var cD=He.JSON.stringify;function U8(){var t=lD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var H1=new class L8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new $8,t=>t.reset());class $8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function j8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function H8(t){He.setTimeout(()=>{throw t},0)}let Vf,Ff=!1,lD=new class B8{constructor(){this.h=this.g=null}add(e,n){const r=H1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},z1=()=>{const t=He.Promise.resolve(void 0);Vf=()=>{t.then(z8)}};var z8=()=>{for(var t;t=U8();){try{t.h.call(t.g)}catch(n){H8(n)}var e=H1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ff=!1};function ry(t,e){rr.call(this),this.h=t||1,this.g=e||He,this.j=Tr(this.qb,this),this.l=Date.now()}function dD(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function hD(t,e,n){if("function"==typeof t)n&&(t=Tr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Tr(t.handleEvent,t)}return 2147483647<Number(e)?-1:He.setTimeout(t,e||0)}function W1(t){t.g=hD(()=>{t.g=null,t.i&&(t.i=!1,W1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}nr(ry,rr),(pe=ry.prototype).ga=!1,pe.T=null,pe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fr(this,"tick"),this.ga&&(dD(this),this.start()))}},pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.N=function(){ry.$.N.call(this),dD(this),delete this.g};class W8 extends ha{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:W1(this)}N(){super.N(),this.g&&(He.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lf(t){ha.call(this),this.h=t,this.g={}}nr(Lf,ha);var q1=[];function G1(t,e,n,r){Array.isArray(n)||(n&&(q1[0]=n.toString()),n=q1);for(var i=0;i<n.length;i++){var s=L1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Z1(t){eD(t.g,function(e,n){this.g.hasOwnProperty(n)&&sD(e)},t),t.g={}}function iy(){this.g=!0}function Rl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function K8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return cD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Lf.prototype.N=function(){Lf.$.N.call(this),Z1(this)},Lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iy.prototype.Ea=function(){this.g=!1},iy.prototype.info=function(){};var yu={},K1=null;function sy(){return K1=K1||new rr}function Q1(t){Dr.call(this,yu.Ta,t)}function Uf(t){const e=sy();fr(e,new Q1(e))}function Y1(t,e){Dr.call(this,yu.STAT_EVENT,t),this.stat=e}function Zr(t){const e=sy();fr(e,new Y1(e,t))}function J1(t,e){Dr.call(this,yu.Ua,t),this.size=e}function Bf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return He.setTimeout(function(){t()},e)}yu.Ta="serverreachability",nr(Q1,Dr),yu.STAT_EVENT="statevent",nr(Y1,Dr),yu.Ua="timingevent",nr(J1,Dr);var oy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},X1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fD(){}function tk(){}fD.prototype.h=null;var mD,$f={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pD(){Dr.call(this,"d")}function gD(){Dr.call(this,"c")}function ay(){}function jf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Lf(this),this.P=Q8,this.V=new ry(t=ZT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nk}function nk(){this.i=null,this.g="",this.h=!1}nr(pD,Dr),nr(gD,Dr),nr(ay,fD),ay.prototype.g=function(){return new XMLHttpRequest},ay.prototype.i=function(){return{}},mD=new ay;var Q8=45e3,rk={},_D={};function yD(t,e,n){t.L=1,t.A=dy(vo(e)),t.u=n,t.S=!0,ik(t,null)}function ik(t,e){t.G=Date.now(),Hf(t),t.B=vo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),pk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new nk,t.g=Lk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new W8(Tr(t.Pa,t,t.g),t.O)),G1(t.U,t.g,"readystatechange",t.nb),e=t.I?k1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Uf(),function q8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function sk(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function ok(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Y8(t,n),i==_D){4==e&&(t.s=4,Zr(14),r=!1),Rl(t.j,t.m,null,"[Incomplete Response]");break}if(i==rk){t.s=4,Zr(15),Rl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Rl(t.j,t.m,i,null),vD(t,i)}sk(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Zr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),AD(e),e.M=!0,Zr(11))):(Rl(t.j,t.m,n,"[Invalid Chunked Response]"),vu(t),zf(t))}function Y8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?_D:(n=Number(e.substring(n,r)),isNaN(n)?rk:(r+=1)+n>e.length?_D:(e=e.slice(r,r+n),t.o=r+n,e))}function Hf(t){t.Y=Date.now()+t.P,ak(t,t.P)}function ak(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Bf(Tr(t.lb,t),e)}function uy(t){t.C&&(He.clearTimeout(t.C),t.C=null)}function zf(t){0==t.l.H||t.J||Ok(t.l,t)}function vu(t){uy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,dD(t.V),Z1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vD(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||ID(n.i,t)))if(!t.K&&ID(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;_y(n),gy(n)}CD(n),Zr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Bf(Tr(n.ib,n),6e3));if(1>=_k(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Eu(n,11)}else if((t.K||n.g==t)&&_y(n),!xf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const D=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(D){var s=r.i;s.g||-1==D.indexOf("spdy")&&-1==D.indexOf("quic")&&-1==D.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ED(s,s.h),s.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,Xt(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Fk(r,r.J?r.pa:null,r.Y),o.K){yk(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(uy(a),Hf(a)),r.g=o}else Nk(r);0<n.j.length&&my(n)}else"stop"!=l[0]&&"close"!=l[0]||Eu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Eu(n,7):DD(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Uf()}catch{}}function uk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Y_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function X8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Y_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function J8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Y_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(pe=jf.prototype).setTimeout=function(t){this.P=t},pe.nb=function(t){t=t.target;const e=this.M;e&&3==ks(t)?e.l():this.Pa(t)},pe.Pa=function(t){try{if(t==this.g)e:{const h=ks(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||ZT||this.g&&(this.h.h||this.g.ja()||Ak(this.g)))){this.J||4!=h||7==e||Uf(),uy(this);var n=this.g.da();this.ca=n;t:if(sk(this)){var r=Ak(this.g);t="";var i=r.length,s=4==ks(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vu(this),zf(this);var o="";break t}this.h.i=new He.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function G8(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Zr(12),vu(this),zf(this);break e}Rl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vD(this,n)}this.S?(ok(this,h,o),ZT&&this.i&&3==h&&(G1(this.U,this.V,"tick",this.mb),this.V.start())):(Rl(this.j,this.m,o,null),vD(this,o)),4==h&&vu(this),this.i&&!this.J&&(4==h?Ok(this.l,this):(this.i=!1,Hf(this)))}else(function _Z(t){const e={};t=(t.g&&2<=ks(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(xf(t[r]))continue;var n=j8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function k8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Zr(12)):(this.s=0,Zr(13)),vu(this),zf(this)}}}catch{}},pe.mb=function(){if(this.g){var t=ks(this.g),e=this.g.ja();this.o<e.length&&(uy(this),ok(this,t,e),this.i&&4!=t&&Hf(this))}},pe.cancel=function(){this.J=!0,vu(this)},pe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function Z8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Uf(),Zr(17)),vu(this),this.s=2,zf(this)):ak(this,this.Y-t)};var ck=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Iu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Iu){this.h=t.h,cy(this,t.j),this.s=t.s,this.g=t.g,ly(this,t.m),this.l=t.l;var e=t.i,n=new Gf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),lk(this,n),this.o=t.o}else t&&(e=String(t).match(ck))?(this.h=!1,cy(this,e[1]||"",!0),this.s=Wf(e[2]||""),this.g=Wf(e[3]||"",!0),ly(this,e[4]),this.l=Wf(e[5]||"",!0),lk(this,e[6]||"",!0),this.o=Wf(e[7]||"")):(this.h=!1,this.i=new Gf(null,this.h))}function vo(t){return new Iu(t)}function cy(t,e,n){t.j=n?Wf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ly(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lk(t,e,n){e instanceof Gf?(t.i=e,function oZ(t,e){e&&!t.j&&(fa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hk(this,r),pk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=qf(e,iZ)),t.i=new Gf(e,t.h))}function Xt(t,e,n){t.i.set(e,n)}function dy(t){return Xt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,tZ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tZ(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Iu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qf(e,dk,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qf(e,dk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qf(n,"/"==n.charAt(0)?rZ:nZ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qf(n,sZ)),t.join("")};var dk=/[#\/\?@]/g,nZ=/[#\?:]/g,rZ=/[#\?]/g,iZ=/[#\?@]/g,sZ=/#/g;function Gf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fa(t){t.g||(t.g=new Map,t.h=0,t.i&&function eZ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function hk(t,e){fa(t),e=Pl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fk(t,e){return fa(t),e=Pl(t,e),t.g.has(e)}function pk(t,e,n){hk(t,e),0<n.length&&(t.i=null,t.g.set(Pl(t,e),qT(n)),t.h+=n.length)}function Pl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function gk(t){this.l=t||uZ,t=He.PerformanceNavigationTiming?0<(t=He.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(He.g&&He.g.Ka&&He.g.Ka()&&He.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=Gf.prototype).add=function(t,e){fa(this),this.i=null,t=Pl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},pe.forEach=function(t,e){fa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},pe.ta=function(){fa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},pe.Z=function(t){fa(this);let e=[];if("string"==typeof t)fk(this,t)&&(e=e.concat(this.g.get(Pl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},pe.set=function(t,e){return fa(this),this.i=null,fk(this,t=Pl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},pe.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var uZ=10;function mk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _k(t){return t.h?1:t.g?t.g.size:0}function ID(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ED(t,e){t.g?t.g.add(e):t.h=e}function yk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function vk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return qT(t.i)}gk.prototype.cancel=function(){if(this.i=vk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var cZ=class{stringify(t){return He.JSON.stringify(t,void 0)}parse(t){return He.JSON.parse(t,void 0)}};function lZ(){this.g=new cZ}function dZ(t,e,n){const r=n||"";try{uk(t,function(i,s){let o=i;Nf(i)&&(o=cD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zf(t){this.l=t.ec||null,this.j=t.ob||!1}function fy(t,e){rr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nr(Zf,fD),Zf.prototype.g=function(){return new fy(this.l,this.j)},Zf.prototype.i=function(t){return function(){return t}}({}),nr(fy,rr);var wD=0;function Ik(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Kf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qf(t)}function Qf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(pe=fy.prototype).open=function(t,e){if(this.readyState!=wD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qf(this)},pe.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||He).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kf(this)),this.readyState=wD},pe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof He.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ik(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},pe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Kf(this):Qf(this),3==this.readyState&&Ik(this)}},pe.Za=function(t){this.g&&(this.response=this.responseText=t,Kf(this))},pe.Ya=function(t){this.g&&(this.response=t,Kf(this))},pe.ka=function(){this.g&&Kf(this)},pe.setRequestHeader=function(t,e){this.v.append(t,e)},pe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var fZ=He.JSON.parse;function vn(t){rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ek,this.L=this.M=!1}nr(vn,rr);var Ek="",pZ=/^https?$/i,gZ=["POST","PUT"];function wk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Tk(t),py(t)}function Tk(t){t.F||(t.F=!0,fr(t,"complete"),fr(t,"error"))}function Dk(t){if(t.h&&typeof zT<"u"&&(!t.C[1]||4!=ks(t)||2!=t.da()))if(t.v&&4==ks(t))hD(t.La,0,t);else if(fr(t,"readystatechange"),4==ks(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(ck)[1]||null;!i&&He.self&&He.self.location&&(i=He.self.location.protocol.slice(0,-1)),r=!pZ.test(i?i.toLowerCase():"")}n=r}if(n)fr(t,"complete"),fr(t,"success");else{t.m=6;try{var s=2<ks(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Tk(t)}}finally{py(t)}}}function py(t,e){if(t.g){Ck(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||fr(t,"ready");try{n.onreadystatechange=r}catch{}}}function Ck(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(He.clearTimeout(t.A),t.A=null)}function ks(t){return t.g?t.g.readyState:0}function Ak(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ek:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function bk(t){let e="";return eD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function TD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=bk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xt(t,e,n))}function Yf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sk(t){this.Ga=0,this.j=[],this.l=new iy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yf("baseRetryDelayMs",5e3,t),this.hb=Yf("retryDelaySeedMs",1e4,t),this.eb=Yf("forwardChannelMaxRetries",2,t),this.xa=Yf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new gk(t&&t.concurrentRequestLimit),this.Ja=new lZ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function DD(t){if(Rk(t),3==t.H){var e=t.W++,n=vo(t.I);if(Xt(n,"SID",t.K),Xt(n,"RID",e),Xt(n,"TYPE","terminate"),Jf(t,n),(e=new jf(t,t.l,e)).L=2,e.A=dy(vo(n)),n=!1,He.navigator&&He.navigator.sendBeacon)try{n=He.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&He.Image&&((new Image).src=e.A,n=!0),n||(e.g=Lk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Hf(e)}Vk(t)}function gy(t){t.g&&(AD(t),t.g.cancel(),t.g=null)}function Rk(t){gy(t),t.u&&(He.clearTimeout(t.u),t.u=null),_y(t),t.i.cancel(),t.m&&("number"==typeof t.m&&He.clearTimeout(t.m),t.m=null)}function my(t){if(!mk(t.i)&&!t.m){t.m=!0;var e=t.Na;Vf||z1(),Ff||(Vf(),Ff=!0),lD.add(e,t),t.C=0}}function Pk(t,e){var n;n=e?e.m:t.W++;const r=vo(t.I);Xt(r,"SID",t.K),Xt(r,"RID",n),Xt(r,"AID",t.V),Jf(t,r),t.o&&t.s&&TD(r,t.o,t.s),n=new jf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Mk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ED(t.i,n),yD(n,r,e)}function Jf(t,e){t.na&&eD(t.na,function(n,r){Xt(e,r,n)}),t.h&&uk({},function(n,r){Xt(e,r,n)})}function Mk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Tr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{dZ(h,o,"req"+l+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Nk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Vf||z1(),Ff||(Vf(),Ff=!0),lD.add(e,t),t.A=0}}function CD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Bf(Tr(t.Ma,t),kk(t,t.A)),t.A++,0))}function AD(t){null!=t.B&&(He.clearTimeout(t.B),t.B=null)}function xk(t){t.g=new jf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=vo(t.wa);Xt(e,"RID","rpc"),Xt(e,"SID",t.K),Xt(e,"AID",t.V),Xt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Xt(e,"TO",t.qa),Xt(e,"TYPE","xmlhttp"),Jf(t,e),t.o&&t.s&&TD(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=dy(vo(e)),n.u=null,n.S=!0,ik(n,t)}function _y(t){null!=t.v&&(He.clearTimeout(t.v),t.v=null)}function Ok(t,e){var n=null;if(t.g==e){_y(t),AD(t),t.g=null;var r=2}else{if(!ID(t.i,e))return;n=e.F,yk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;fr(r=sy(),new J1(r,n)),my(t)}else Nk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function yZ(t,e){return!(_k(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Bf(Tr(t.Na,t,e),kk(t,t.C)),t.C++,0)))}(t,e)||2==r&&CD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Eu(t,5);break;case 4:Eu(t,10);break;case 3:Eu(t,6);break;default:Eu(t,2)}}function kk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Eu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Tr(t.pb,t);n||(n=new Iu("//www.google.com/images/cleardot.gif"),He.location&&"http"==He.location.protocol||cy(n,"https"),dy(n)),function hZ(t,e){const n=new iy;if(He.Image){const r=new Image;r.onload=J_(hy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=J_(hy,n,r,"TestLoadImage: error",!1,e),r.onabort=J_(hy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=J_(hy,n,r,"TestLoadImage: timeout",!1,e),He.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zr(2);t.H=0,t.h&&t.h.za(e),Vk(t),Rk(t)}function Vk(t){if(t.H=0,t.ma=[],t.h){const e=vk(t.i);(0!=e.length||0!=t.j.length)&&(P1(t.ma,e),P1(t.ma,t.j),t.i.i.length=0,qT(t.j),t.j.length=0),t.h.ya()}}function Fk(t,e,n){var r=n instanceof Iu?vo(n):new Iu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),ly(r,r.m);else{var i=He.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Iu(null);r&&cy(s,r),e&&(s.g=e),i&&ly(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Xt(r,n,e),Xt(r,"VER",t.ra),Jf(t,r),r}function Lk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(t.Ha&&!t.va?new Zf({ob:n}):t.va)).Oa(t.J),e}function Uk(){}function yy(){if(Sl&&!(10<=Number(M8)))throw Error("Environmental error: no available transport.")}function Di(t,e){rr.call(this),this.g=new Sk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ml(this)}function Bk(t){pD.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $k(){gD.call(this),this.status=1}function Ml(t){this.g=t}function ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bD(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Pt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(pe=vn.prototype).Oa=function(t){this.M=t},pe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mD.g(),this.C=function ek(t){return t.h||(t.h=t.i())}(this.u?this.u:mD),this.g.onreadystatechange=Tr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void wk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=He.FormData&&t instanceof He.FormData,!(0<=R1(gZ,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ck(this),0<this.B&&((this.L=function mZ(t){return Sl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tr(this.ua,this)):this.A=hD(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){wk(this,s)}},pe.ua=function(){typeof zT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},pe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fr(this,"complete"),fr(this,"abort"),py(this))},pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),py(this,!0)),vn.$.N.call(this)},pe.La=function(){this.s||(this.G||this.v||this.l?Dk(this):this.kb())},pe.kb=function(){Dk(this)},pe.isActive=function(){return!!this.g},pe.da=function(){try{return 2<ks(this)?this.g.status:-1}catch{return-1}},pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},pe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fZ(e)}},pe.Ia=function(){return this.m},pe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=Sk.prototype).ra=8,pe.H=1,pe.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new jf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=k1(s),F1(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Mk(this,i,e),Xt(n=vo(this.I),"RID",t),Xt(n,"CVER",22),this.F&&Xt(n,"X-HTTP-Session-Id",this.F),Jf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(bk(s)))+"&"+e:this.o&&TD(n,this.o,s)),ED(this.i,i),this.bb&&Xt(n,"TYPE","init"),this.P?(Xt(n,"$req",e),Xt(n,"SID","null"),i.aa=!0,yD(i,n,null)):yD(i,n,e),this.H=2}}else 3==this.H&&(t?Pk(this,t):0==this.j.length||mk(this.i)||Pk(this))},pe.Ma=function(){if(this.u=null,xk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Bf(Tr(this.jb,this),t)}},pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zr(10),gy(this),xk(this))},pe.ib=function(){null!=this.v&&(this.v=null,gy(this),CD(this),Zr(19))},pe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zr(2)):(this.l.info("Failed to ping google.com"),Zr(1))},pe.isActive=function(){return!!this.h&&this.h.isActive(this)},(pe=Uk.prototype).Ba=function(){},pe.Aa=function(){},pe.za=function(){},pe.ya=function(){},pe.isActive=function(){return!0},pe.Va=function(){},yy.prototype.g=function(t,e){return new Di(t,e)},nr(Di,rr),Di.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Fk(t,null,t.Y),my(t)},Di.prototype.close=function(){DD(this.g)},Di.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=cD(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&my(e)},Di.prototype.N=function(){this.g.h=null,delete this.j,DD(this.g),delete this.g,Di.$.N.call(this)},nr(Bk,pD),nr($k,gD),nr(Ml,Uk),Ml.prototype.Ba=function(){fr(this.g,"a")},Ml.prototype.Aa=function(t){fr(this.g,new Bk(t))},Ml.prototype.za=function(t){fr(this.g,new $k)},Ml.prototype.ya=function(){fr(this.g,"b")},nr(ls,function vZ(){this.blockSize=-1}),ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ls.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)bD(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){bD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){bD(this,r),i=0;break}}this.h=i,this.i+=e},ls.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var IZ={};function SD(t){return-128<=t&&128>t?function S8(t,e){var n=IZ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Pt([0|e],0>e?-1:0)}):new Pt([0|t],0>t?-1:0)}function Vs(t){if(isNaN(t)||!isFinite(t))return Nl;if(0>t)return pr(Vs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=RD;return new Pt(e,0)}var RD=4294967296,Nl=SD(0),PD=SD(1),Hk=SD(16777216);function Io(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Zi(t){return-1==t.h}function pr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Pt(n,~t.h).add(PD)}function vy(t,e){return t.add(pr(e))}function Iy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Xf(t,e){this.g=t,this.h=e}function Ey(t,e){if(Io(e))throw Error("division by zero");if(Io(t))return new Xf(Nl,Nl);if(Zi(t))return e=Ey(pr(t),e),new Xf(pr(e.g),pr(e.h));if(Zi(e))return e=Ey(t,pr(e)),new Xf(pr(e.g),e.h);if(30<t.g.length){if(Zi(t)||Zi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=PD,r=e;0>=r.X(t);)n=zk(n),r=zk(r);var i=xl(n,1),s=xl(r,1);for(r=xl(r,2),n=xl(n,2);!Io(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=xl(r,1),n=xl(n,1)}return e=vy(t,i.R(e)),new Xf(i,e)}for(i=Nl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Vs(n)).R(e);Zi(o)||0<o.X(t);)o=(s=Vs(n-=r)).R(e);Io(s)&&(s=PD),i=i.add(s),t=vy(t,o)}return new Xf(i,t)}function zk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Pt(n,t.h)}function xl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pt(i,t.h)}(pe=Pt.prototype).ea=function(){if(Zi(this))return-pr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:RD+r)*e,e*=RD}return t},pe.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Io(this))return"0";if(Zi(this))return"-"+pr(this).toString(t);for(var e=Vs(Math.pow(t,6)),n=this,r="";;){var i=Ey(n,e).g,s=((0<(n=vy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Io(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},pe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},pe.X=function(t){return Zi(t=vy(this,t))?-1:Io(t)?0:1},pe.abs=function(){return Zi(this)?pr(this):this},pe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Pt(n,-2147483648&n[n.length-1]?-1:0)},pe.R=function(t){if(Io(this)||Io(t))return Nl;if(Zi(this))return Zi(t)?pr(this).R(pr(t)):pr(pr(this).R(t));if(Zi(t))return pr(this.R(pr(t)));if(0>this.X(Hk)&&0>t.X(Hk))return Vs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Iy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Iy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Iy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Iy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Pt(n,0)},pe.gb=function(t){return Ey(this,t).h},pe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Pt(n,this.h&t.h)},pe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Pt(n,this.h|t.h)},pe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Pt(n,this.h^t.h)},yy.prototype.createWebChannel=yy.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,oy.NO_ERROR=0,oy.TIMEOUT=8,oy.HTTP_ERROR=6,X1.COMPLETE="complete",tk.EventType=$f,$f.OPEN="a",$f.CLOSE="b",$f.ERROR="c",$f.MESSAGE="d",rr.prototype.listen=rr.prototype.O,vn.prototype.listenOnce=vn.prototype.P,vn.prototype.getLastError=vn.prototype.Sa,vn.prototype.getLastErrorCode=vn.prototype.Ia,vn.prototype.getStatus=vn.prototype.da,vn.prototype.getResponseJson=vn.prototype.Wa,vn.prototype.getResponseText=vn.prototype.ja,vn.prototype.send=vn.prototype.ha,vn.prototype.setWithCredentials=vn.prototype.Oa,ls.prototype.digest=ls.prototype.l,ls.prototype.reset=ls.prototype.reset,ls.prototype.update=ls.prototype.j,Pt.prototype.add=Pt.prototype.add,Pt.prototype.multiply=Pt.prototype.R,Pt.prototype.modulo=Pt.prototype.gb,Pt.prototype.compare=Pt.prototype.X,Pt.prototype.toNumber=Pt.prototype.ea,Pt.prototype.toString=Pt.prototype.toString,Pt.prototype.getBits=Pt.prototype.D,Pt.fromNumber=Vs,Pt.fromString=function jk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return pr(jk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Vs(Math.pow(e,8)),r=Nl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Vs(Math.pow(e,s)),r=r.R(s).add(Vs(o))):r=(r=r.R(n)).add(Vs(o))}return r};var EZ=cs.createWebChannelTransport=function(){return new yy},wZ=cs.getStatEventTarget=function(){return sy()},MD=cs.ErrorCode=oy,TZ=cs.EventType=X1,DZ=cs.Event=yu,Wk=cs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wy=(cs.FetchXmlHttpFactory=Zf,cs.WebChannel=tk),CZ=cs.XhrIo=vn,AZ=cs.Md5=ls,Ol=cs.Integer=Pt;const qk="@firebase/firestore";class ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let kl="10.7.0";const pa=new xs.Yd("@firebase/firestore");function Vl(){return pa.logLevel}function ne(t,...e){if(pa.logLevel<=xs.in.DEBUG){const n=e.map(ND);pa.debug(`Firestore (${kl}): ${t}`,...n)}}function Pn(t,...e){if(pa.logLevel<=xs.in.ERROR){const n=e.map(ND);pa.error(`Firestore (${kl}): ${t}`,...n)}}function si(t,...e){if(pa.logLevel<=xs.in.WARN){const n=e.map(ND);pa.warn(`Firestore (${kl}): ${t}`,...n)}}function ND(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ve(t="Unexpected state"){const e=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: `+t;throw Pn(e),new Error(e)}function Ae(t,e){t||ve()}function ae(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ot.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Gk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ir.UNAUTHENTICATED))}shutdown(){}}class PZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MZ{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,G.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new Gk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new ir(e)}}class NZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new Zk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function kZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Kk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=kZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function Fl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Qk(t){return t+"\0"}class on{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new on(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new on(0,0))}static max(){return new be(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ep{constructor(e,n,r){void 0===n?n=0:n>e.length&&ve(),void 0===r?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ep.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends ep{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const VZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends ep{construct(e,n,r){return new en(e,n,r)}static isValidIdentifier(e){return VZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new en(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(mt.fromString(e))}static fromName(e){return new le(mt.fromString(e).popFirst(5))}static empty(){return new le(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new mt(e.slice()))}}class Ll{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function xD(t){return t.fields.find(e=>2===e.kind)}function wu(t){return t.fields.filter(e=>2!==e.kind)}Ll.UNKNOWN_ID=-1;class Tu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ul{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ul(0,Ci.min())}}function Yk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new on(n+1,0):new on(n,r));return new Ci(i,le.empty(),e)}function Jk(t){return new Ci(t.readTime,t.key,-1)}class Ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ci(be.min(),le.empty(),-1)}static max(){return new Ci(be.max(),le.empty(),-1)}}function OD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:Be(t.largestBatchId,e.largestBatchId))}const Xk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ga(t){return kD.apply(this,arguments)}function kD(){return kD=(0,G.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Xk)throw t;ne("LocalStore","Unexpectedly lost primary lease")}),kD.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Ty{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Wn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new tp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=VD(r.target.error);this.V.reject(new tp(e,i))}}static open(e,n,r,i){try{return new Ty(n,e.transaction(i,r))}catch(s){throw new tp(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BZ(n)}}class ds{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===ds.S((0,Ot.z$)())&&Pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),Du(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ot.hl)())return!1;if(ds.C())return!0;const e=(0,Ot.z$)(),n=ds.S(e),r=0<n&&n<10,i=ds.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,G.Z)(function*(){return n.db||(ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new tp(e,a))},s.onupgradeneeded=o=>{ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,G.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Ty.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class UZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Du(this.k.delete())}}class tp extends J{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ma(t){return"IndexedDbTransactionError"===t.name}class BZ{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Du(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),Du(this.store.add(e))}get(e){return Du(this.store.get(e)).next(n=>(void 0===n&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),Du(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),Du(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new O((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=VD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new UZ(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Du(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=VD(r.target.error);n(i)}})}let tV=!1;function VD(t){const e=ds.S((0,Ot.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tV||(tV=!0,setTimeout(()=>{throw r},0)),r}}return t}class $Z{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){n.task=null;try{ne("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){ma(r)?ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ga(r)}yield n.ee(6e4)}))}}class jZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,G.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ne("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ne("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Jk(s);OD(o,r)>0&&(r=o)}),new Ci(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ai=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function np(t){return null==t}function rp(t){return 0===t&&1/t==-1/0}function nV(t){return"number"==typeof t&&Number.isInteger(t)&&!rp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Cr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rV(e)),e=HZ(t.get(n),e);return rV(e)}function HZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function rV(t){return t+"\x01\x01"}function Fs(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),mt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&ve(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:ve()}s=o+2}return new mt(r)}const iV=["userId","batchId"];function Dy(t,e){return[t,Cr(e)]}function sV(t,e,n){return[t,Cr(e),n]}const zZ={},WZ=["prefixPath","collectionGroup","readTime","documentId"],qZ=["prefixPath","collectionGroup","documentId"],GZ=["collectionGroup","readTime","prefixPath","documentId"],ZZ=["canonicalId","targetId"],KZ=["targetId","path"],QZ=["path","targetId"],YZ=["collectionId","parent"],JZ=["indexId","uid"],XZ=["uid","sequenceNumber"],e7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],t7=["indexId","uid","orderedDocumentKey"],n7=["userId","collectionPath","documentId"],r7=["userId","collectionPath","largestBatchId"],i7=["userId","collectionGroup","largestBatchId"],oV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s7=[...oV,"documentOverlays"],aV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uV=aV,o7=[...uV,"indexConfiguration","indexState","indexEntries"];class FD extends eV{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function sr(t,e){const n=ae(t);return ds.M(n.ae,e)}function cV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ht{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new Ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cy(this.root,e,this.comparator,!0)}}class Cy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gr.RED,this.left=i??gr.EMPTY,this.right=s??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new gr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return gr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1,gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kt{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dV(this.data.getIterator())}getIteratorFrom(e){return new dV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class dV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bl(t){return t.hasNext()?t.getNext():void 0}class oi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new oi([])}unionWith(e){let n=new kt(en.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class hV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hV("Invalid base64 string: "+s):s}}(e);return new qn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const u7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=u7.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:In(t.seconds),nanos:In(t.nanos)}}function In(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Eo(t){return"string"==typeof t?qn.fromBase64String(t):qn.fromUint8Array(t)}function Ay(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function by(t){const e=t.mapValue.fields.__previous_value__;return Ay(e)?by(e):e}function ip(t){const e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}class c7{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class va{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new va("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const Ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sy={nullValue:"NULL_VALUE"};function Ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ay(t)?4:mV(t)?9007199254740991:10:ve()}function Ls(t,e){if(t===e)return!0;const n=Ea(t);if(n!==Ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ip(t).isEqual(ip(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ya(i.timestampValue),a=ya(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Eo(t.bytesValue).isEqual(Eo(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return In(i.geoPointValue.latitude)===In(s.geoPointValue.latitude)&&In(i.geoPointValue.longitude)===In(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return In(i.integerValue)===In(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=In(i.doubleValue),a=In(s.doubleValue);return o===a?rp(o)===rp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Fl(t.arrayValue.values||[],e.arrayValue.values||[],Ls);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cV(o)!==cV(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Ls(o[u],a[u])))return!1;return!0}(t,e);default:return ve()}var s}function sp(t,e){return void 0!==(t.values||[]).find(n=>Ls(n,e))}function wa(t,e){if(t===e)return 0;const n=Ea(t),r=Ea(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=In(s.integerValue||s.doubleValue),u=In(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return fV(t.timestampValue,e.timestampValue);case 4:return fV(ip(t),ip(e));case 5:return Be(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Eo(s),u=Eo(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=Be(a[l],u[l]);if(0!==h)return h}return Be(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Be(In(s.latitude),In(o.latitude));return 0!==a?a:Be(In(s.longitude),In(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=wa(a[l],u[l]);if(h)return h}return Be(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ia.mapValue&&o===Ia.mapValue)return 0;if(s===Ia.mapValue)return 1;if(o===Ia.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=Be(u[g],h[g]);if(0!==m)return m;const y=wa(a[u[g]],l[h[g]]);if(0!==y)return y}return Be(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ve()}}function fV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Be(t,e);const n=ya(t),r=ya(e),i=Be(n.seconds,r.seconds);return 0!==i?i:Be(n.nanos,r.nanos)}function $l(t){return LD(t)}function LD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ya(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Eo(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=LD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${LD(n.fields[o])}`;return i+"}"}(t.mapValue):ve()}function Cu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function UD(t){return!!t&&"integerValue"in t}function op(t){return!!t&&"arrayValue"in t}function pV(t){return!!t&&"nullValue"in t}function gV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Py(t){return!!t&&"mapValue"in t}function ap(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _a(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ap(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ap(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function l7(t){return"nullValue"in t?Sy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Cu(va.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ve()}function d7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Cu(va.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ia:ve()}function _V(t,e){const n=wa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yV(t,e){const n=wa(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Py(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(n)}setAll(e){let n=en.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ap(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Py(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Py(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_a(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new mr(ap(this.value))}}function vV(t){const e=[];return _a(t.fields,(n,r)=>{const i=new en([n]);if(Py(r)){const s=vV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new oi(e)}class tn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tn(e,0,be.min(),be.min(),be.min(),mr.empty(),0)}static newFoundDocument(e,n,r,i){return new tn(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new tn(e,2,n,be.min(),be.min(),mr.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,be.min(),be.min(),mr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ta{constructor(e,n){this.position=e,this.inclusive=n}}function IV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(o.referenceValue),n.key):wa(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function EV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ls(t.position[n],e.position[n]))return!1;return!0}class up{constructor(e,n="asc"){this.field=e,this.dir=n}}function h7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class wV{}class ht extends wV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new f7(e,n,r):"array-contains"===n?new m7(e,r):"in"===n?new SV(e,r):"not-in"===n?new _7(e,r):"array-contains-any"===n?new y7(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new p7(e,r):new g7(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(wa(n,this.value)):null!==n&&Ea(this.value)===Ea(n)&&this.matchesComparison(wa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends wV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Mt(e,n)}matches(e){return jl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function jl(t){return"and"===t.op}function BD(t){return"or"===t.op}function $D(t){return TV(t)&&jl(t)}function TV(t){for(const e of t.filters)if(e instanceof Mt)return!1;return!0}function jD(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+$l(t.value);if($D(t))return t.filters.map(e=>jD(e)).join(",");{const e=t.filters.map(n=>jD(n)).join(",");return`${t.op}(${e})`}}function DV(t,e){return t instanceof ht?(r=t,(i=e)instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Ls(r.value,i.value)):t instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&DV(o,i.filters[a]),!0)}(t,e):void ve();var r,i}function CV(t,e){const n=t.filters.concat(e);return Mt.create(n,t.op)}function AV(t){return t instanceof ht?`${(n=t).field.canonicalString()} ${n.op} ${$l(n.value)}`:t instanceof Mt?function(n){return n.op.toString()+" {"+n.getFilters().map(AV).join(" ,")+"}"}(t):"Filter";var n}class f7 extends ht{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class p7 extends ht{constructor(e,n){super(e,"in",n),this.keys=bV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g7 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=bV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class m7 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return op(n)&&sp(n.arrayValue,this.value)}}class SV extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&sp(this.value.arrayValue,n)}}class _7 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!sp(this.value.arrayValue,n)}}class y7 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!op(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}}class v7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function HD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new v7(t,e,n,r,i,s,o)}function Au(t){const e=ae(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$l(r)).join(",")),e.ce=n}return e.ce}function cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!EV(t.startAt,e.startAt)&&EV(t.endAt,e.endAt)}function My(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Ny(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function RV(t,e,n){let r=Sy,i=!0;for(const s of Ny(t,e)){let o=Sy,a=!0;switch(s.op){case"<":case"<=":o=l7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Sy}_V({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_V({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function PV(t,e,n){let r=Ia,i=!0;for(const s of Ny(t,e)){let o=Ia,a=!0;switch(s.op){case">=":case">":o=d7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ia}yV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];yV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class wo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function MV(t,e,n,r,i,s,o,a){return new wo(t,e,n,r,i,s,o,a)}function Hl(t){return new wo(t)}function NV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function zD(t){return null!==t.collectionGroup}function zl(t){const e=ae(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(en.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new up(s,r))}),n.has(en.keyField().canonicalString())||e.le.push(new up(en.keyField(),r))}return e.le}function Kr(t){const e=ae(t);return e.he||(e.he=function xV(t,e){if("F"===t.limitType)return HD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new up(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ta(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ta(t.startAt.position,t.startAt.inclusive):null;return HD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,zl(t))),e.he}function WD(t,e){const n=t.filters.concat([e]);return new wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xy(t,e,n){return new wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lp(t,e){return cp(Kr(t),Kr(e))&&t.limitType===e.limitType}function OV(t){return`${Au(Kr(t))}|lt:${t.limitType}`}function Wl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AV(i)).join(", ")}]`),np(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$l(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$l(i)).join(",")),`Target(${r})`}(Kr(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of zl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=IV(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,zl(r),i)||r.endAt&&!function(o,a,u){const l=IV(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,zl(r),i)));var r,i}function kV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VV(t){return(e,n)=>{let r=!1;for(const i of zl(t)){const s=I7(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function I7(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?wa(u,l):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return lV(this.inner)}size(){return this.innerSize}}const E7=new Ht(le.comparator);function ai(){return E7}const FV=new Ht(le.comparator);function hp(...t){let e=FV;for(const n of t)e=e.insert(n.key,n);return e}function LV(t){let e=FV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Us(){return fp()}function UV(){return fp()}function fp(){return new To(t=>t.toString(),(t,e)=>t.isEqual(e))}const w7=new Ht(le.comparator),T7=new kt(le.comparator);function Ze(...t){let e=T7;for(const n of t)e=e.add(n);return e}const D7=new kt(Be);function qD(){return D7}function BV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rp(e)?"-0":e}}function $V(t){return{integerValue:""+t}}function jV(t,e){return nV(e)?$V(e):BV(t,e)}class Oy{constructor(){this._=void 0}}function C7(t,e,n){return t instanceof ql?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ay(s)&&(s=by(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof bu?zV(t,e):t instanceof Su?WV(t,e):function(i,s){const o=HV(i,s),a=qV(o)+qV(i.Ie);return UD(o)&&UD(i.Ie)?$V(a):BV(i.serializer,a)}(t,e)}function A7(t,e,n){return t instanceof bu?zV(t,e):t instanceof Su?WV(t,e):n}function HV(t,e){return t instanceof Gl?UD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class ql extends Oy{}class bu extends Oy{constructor(e){super(),this.elements=e}}function zV(t,e){const n=GV(e);for(const r of t.elements)n.some(i=>Ls(i,r))||n.push(r);return{arrayValue:{values:n}}}class Su extends Oy{constructor(e){super(),this.elements=e}}function WV(t,e){let n=GV(e);for(const r of t.elements)n=n.filter(i=>!Ls(i,r));return{arrayValue:{values:n}}}class Gl extends Oy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function qV(t){return In(t.integerValue||t.doubleValue)}function GV(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class pp{constructor(e,n){this.field=e,this.transform=n}}class S7{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ky(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Vy{}function ZV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Kl(t.key,an.none()):new Zl(t.key,t.data,an.none());{const n=t.data,r=mr.empty();let i=new kt(en.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Do(t.key,r,new oi(i.toArray()),an.none())}}function R7(t,e,n){t instanceof Zl?function(i,s,o){const a=i.value.clone(),u=YV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Do?function(i,s,o){if(!ky(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=YV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(QV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function gp(t,e,n,r){return t instanceof Zl?function(s,o,a,u){if(!ky(s.precondition,o))return a;const l=s.value.clone(),h=JV(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Do?function(s,o,a,u){if(!ky(s.precondition,o))return a;const l=JV(s.fieldTransforms,u,o),h=o.data;return h.setAll(QV(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,ky(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function P7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=HV(r.transform,i||null);null!=s&&(null===n&&(n=mr.empty()),n.set(r.field,s))}return n||null}function KV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Fl(r,i,(s,o)=>function b7(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof bu&&i instanceof bu||r instanceof Su&&i instanceof Su?Fl(r.elements,i.elements,Ls):r instanceof Gl&&i instanceof Gl?Ls(r.Ie,i.Ie):r instanceof ql&&i instanceof ql);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Zl extends Vy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends Vy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function QV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YV(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,A7(o,a,n[i]))}return r}function JV(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,C7(s,o,e))}return r}class Kl extends Vy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GD extends Vy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&R7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ZV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Fl(this.mutations,e.mutations,(n,r)=>KV(n,r))&&Fl(this.baseMutations,e.baseMutations,(n,r)=>KV(n,r))}}class KD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=w7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new KD(e,n,r,i)}}class QD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class N7{constructor(e,n){this.count=e,this.unchangedNames=n}}var kn,_t;function XV(t){switch(t){default:return ve();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function eF(t){if(void 0===t)return Pn("GRPC error has no .code"),B.UNKNOWN;switch(t){case kn.OK:return B.OK;case kn.CANCELLED:return B.CANCELLED;case kn.UNKNOWN:return B.UNKNOWN;case kn.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case kn.INTERNAL:return B.INTERNAL;case kn.UNAVAILABLE:return B.UNAVAILABLE;case kn.UNAUTHENTICATED:return B.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case kn.NOT_FOUND:return B.NOT_FOUND;case kn.ALREADY_EXISTS:return B.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return B.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case kn.ABORTED:return B.ABORTED;case kn.OUT_OF_RANGE:return B.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return B.UNIMPLEMENTED;case kn.DATA_LOSS:return B.DATA_LOSS;default:return ve()}}(_t=kn||(kn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function tF(){return new TextEncoder}const x7=new Ol([4294967295,4294967295],0);function nF(t){const e=tF().encode(t),n=new AZ;return n.update(e),new Uint8Array(n.digest())}function rF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ol([n,r],0),new Ol([i,s],0)]}class YD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mp(`Invalid padding: ${n}`);if(r<0)throw new mp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new mp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ol.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Ol.fromNumber(r)));return 1===i.compare(x7)&&(i=new Ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=nF(e),[r,i]=rF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new YD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=nF(e),[r,i]=rF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class mp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _p{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _p(be.min(),i,new Ht(Be),ai(),Ze())}}class yp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yp(r,n,Ze(),Ze(),Ze())}}class Ly{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class iF{constructor(e,n){this.targetId=e,this.fe=n}}class sF{constructor(e,n,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oF{constructor(){this.ge=0,this.pe=uF(),this.ye=qn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new yp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=uF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class O7{constructor(e){this.Le=e,this.ke=new Map,this.qe=ai(),this.Qe=aF(),this.Ke=new Ht(Be)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(My(s))if(0===r){const o=new le(s.path);this.We(n,o,tn.newNoDocument(o,be.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Eo(r).toUint8Array()}catch(u){if(u instanceof hV)return si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new YD(o,i,s)}catch(u){return si(u instanceof mp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&My(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,tn.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new _p(e,n,this.Ke,this.qe,r);return this.qe=ai(),this.Qe=aF(),this.Ke=new Ht(Be),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new oF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new kt(Be),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new oF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function aF(){return new Ht(le.comparator)}function uF(){return new Ht(le.comparator)}const k7={asc:"ASCENDING",desc:"DESCENDING"},V7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F7={and:"AND",or:"OR"};class L7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function JD(t,e){return t.useProto3Json||np(e)?e:{value:e}}function Ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U7(t,e){return Ql(t,e.toTimestamp())}function Mn(t){return Ae(!!t),be.fromTimestamp(function(n){const r=ya(n);return new on(r.seconds,r.nanos)}(t))}function XD(t,e){return(r=t,new mt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function lF(t){const e=mt.fromString(t);return Ae(vF(e)),e}function vp(t,e){return XD(t.databaseId,e.path)}function Bs(t,e){const n=lF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(hF(n))}function eC(t,e){return XD(t.databaseId,e)}function dF(t){const e=lF(t);return 4===e.length?mt.emptyPath():hF(e)}function Ip(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hF(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fF(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function pF(t,e,n){const r=Bs(t,e.name),i=Mn(e.updateTime),s=e.createTime?Mn(e.createTime):be.min(),o=new mr({mapValue:{fields:e.fields}}),a=tn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ep(t,e){let n;if(e instanceof Zl)n={update:fF(t,e.key,e.value)};else if(e instanceof Kl)n={delete:vp(t,e.key)};else if(e instanceof Do)n={update:fF(t,e.key,e.data),updateMask:G7(e.fieldMask)};else{if(!(e instanceof GD))return ve();n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Su)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:U7(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ve()),n;var s}function tC(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?an.updateTime(Mn(s.updateTime)):void 0!==s.exists?an.exists(s.exists):an.none():an.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new ql):"appendMissingElements"in a?u=new bu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Su(a.removeAllFromArray.values||[]):"increment"in a?u=new Gl(o,a.increment):ve();const l=en.fromServerFormat(a.fieldPath);return new pp(l,u)}(t,i)):[];var s;if(e.update){const i=Bs(t,e.update.name),s=new mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new oi((e.updateMask.fieldPaths||[]).map(h=>en.fromServerFormat(h)));return new Do(i,s,o,n,r)}return new Zl(i,s,n,r)}if(e.delete){const i=Bs(t,e.delete);return new Kl(i,n)}if(e.verify){const i=Bs(t,e.verify);return new GD(i,n)}return ve()}function gF(t,e){return{documents:[eC(t,e.path)]}}function nC(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=eC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=eC(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return yF(Mt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Da((g=l).field),direction:z7(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=JD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function mF(t){let e=dF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=_F(g);return m instanceof Mt&&$D(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(m=>{return new up(Yl((D=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,np(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Ta((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Ta(g.values||[],!g.before)}(n.endAt)),MV(e,i,o,s,a,"F",u,l)}function _F(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yl(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yl(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yl(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yl(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):void 0!==t.fieldFilter?ht.create(Yl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Mt.create(n.compositeFilter.filters.map(r=>_F(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve();var n}function z7(t){return k7[t]}function W7(t){return V7[t]}function q7(t){return F7[t]}function Da(t){return{fieldPath:t.canonicalString()}}function Yl(t){return en.fromServerFormat(t.fieldPath)}function yF(t){return t instanceof ht?function(n){if("=="===n.op){if(gV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NAN"}};if(pV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(gV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NAN"}};if(pV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Da(n.field),op:W7(n.op),value:n.value}}}(t):t instanceof Mt?function(n){const r=n.getFilters().map(i=>yF(i));return 1===r.length?r[0]:{compositeFilter:{op:q7(n.op),filters:r}}}(t):ve()}function G7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Co{constructor(e,n,r,i,s=be.min(),o=be.min(),a=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IF{constructor(e){this.ut=e}}function EF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ql(s,o.version.toTimestamp()),createTime:Ql(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return ve();r.unknownDocument={path:n.path.toArray(),version:Ru(e.version)}}var s,o;return r}function Uy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pu(t){const e=new on(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function Mu(t,e){const n=(e.baseMutations||[]).map(s=>tC(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>tC(t.ut,s)),i=on.fromMillis(e.localWriteTimeMs);return new ZD(e.batchId,i,n,r)}function wp(t){const e=Pu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Pu(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),Kr(Hl(dF(s.documents[0])))):function(s){return Kr(mF(s))}(t.query),new Co(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qn.fromBase64String(t.resumeToken));var s}function wF(t,e){const n=Ru(e.snapshotVersion),r=Ru(e.lastLimboFreeSnapshotVersion);let i;i=My(e.target)?gF(t.ut,e.target):nC(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Au(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rC(t){const e=mF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?xy(e,e.limit,"L"):e}function iC(t,e){return new QD(e.largestBatchId,tC(t.ut,e.overlayMutation))}function TF(t,e){const n=e.path.lastSegment();return[t,Cr(e.path.popLast()),n]}function DF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ru(r.readTime),documentKey:Cr(r.documentKey.path),largestBatchId:r.largestBatchId}}class K7{getBundleMetadata(e,n){return CF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Pu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return CF(e).put({bundleId:(i=n).id,createTime:Ru(Mn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return AF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:rC(s.bundledQuery),readTime:Pu(s.readTime)};var s})}saveNamedQuery(e,n){return AF(e).put({name:(i=n).name,readTime:Ru(Mn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function CF(t){return sr(t,"bundles")}function AF(t){return sr(t,"namedQueries")}class By{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new By(e,n.uid||"")}getOverlay(e,n){return Tp(e).get(TF(this.userId,n)).next(r=>r?iC(this.serializer,r):null)}getOverlays(e,n){const r=Us();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new QD(n,o);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Cr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Tp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Us(),s=Cr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Tp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=iC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Us();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Tp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=iC(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,n){return Tp(e).put(function(i,s,o){const[a,u,l]=TF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ep(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Tp(t){return sr(t,"documentOverlays")}class Nu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(In(e.integerValue));else if("doubleValue"in e){const r=In(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),rp(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Eo(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?mV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ve()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),le.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Q7(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Q7(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Nu.St=new Nu;class Y7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=bF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=bF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class J7{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class X7{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Dp{constructor(){this.Wt=new Y7,this.Gt=new J7(this.Wt),this.zt=new X7(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class xu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xu(this.indexId,this.documentKey,this.arrayValue,r)}}function Ca(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=SF(t.arrayValue,e.arrayValue),0!==n?n:(n=SF(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function SF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class RF{constructor(e){this.Jt=new kt((n,r)=>en.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=xD(e);if(void 0!==n&&!this.tn(n))return!1;const r=wu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new kt(en.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Tu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Tu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Tu(r.field,"asc"===r.dir?0:1)));return new Ll(Ll.UNKNOWN_ID,this.collectionId,n,Ul.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function PF(t){var e,n;if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht){if(t instanceof SV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ht.create(t.field,"==",s)))||[];return Mt.create(i,"or")}return t}const r=t.filters.map(i=>PF(i));return Mt.create(r,t.op)}function eK(t){if(0===t.getFilters().length)return[];const e=aC(PF(t));return Ae(MF(e)),sC(e)||oC(e)?[e]:e.getFilters()}function sC(t){return t instanceof ht}function oC(t){return t instanceof Mt&&$D(t)}function MF(t){return sC(t)||oC(t)||function(n){if(n instanceof Mt&&BD(n)){for(const r of n.getFilters())if(!sC(r)&&!oC(r))return!1;return!0}return!1}(t)}function aC(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;if(1===t.filters.length)return aC(t.filters[0]);const e=t.filters.map(r=>aC(r));let n=Mt.create(e,t.op);return n=$y(n),MF(n)?n:(Ae(n instanceof Mt),Ae(jl(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>uC(r,i)))}function uC(t,e){let n;return Ae(t instanceof ht||t instanceof Mt),Ae(e instanceof ht||e instanceof Mt),n=t instanceof ht?e instanceof ht?Mt.create([t,e],"and"):NF(t,e):e instanceof ht?NF(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),jl(i)&&jl(s))return CV(i,s.getFilters());const o=BD(i)?i:s,a=BD(i)?s:i,u=o.filters.map(l=>uC(l,a));return Mt.create(u,"or")}(t,e),$y(n)}function NF(t,e){if(jl(e))return CV(e,t.getFilters());{const n=e.filters.map(r=>uC(t,r));return Mt.create(n,"or")}}function $y(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;const e=t.getFilters();if(1===e.length)return $y(e[0]);if(TV(t))return t;const n=e.map(i=>$y(i)),r=[];return n.forEach(i=>{i instanceof ht?r.push(i):i instanceof Mt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Mt.create(r,t.op)}class tK{constructor(){this.on=new cC}addToCollectionParentIndex(e,n){return this.on.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ci.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class cC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(mt.comparator)).toArray()}}const jy=new Uint8Array(0);class nK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new cC,this.an=new To(r=>Au(r),(r,i)=>cp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Cr(i)};return xF(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Qk(n),""],!1,!0);return xF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Fs(o.parent))}return r})}addFieldIndex(e,n){const r=Cp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=Xl(e);return s.next(a=>{o.put(DF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Cp(e),i=Xl(e),s=Jl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Cp(e),r=Jl(e),i=Xl(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new RF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Jl(e);let i=!0;const s=new Map;return O.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ze();const a=[];return O.forEach(s,(u,l)=>{var z;ne("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`} to execute ${Au(n)}`);const h=function(z,se){const de=xD(se);if(void 0===de)return null;for(const $e of Ny(z,de.fieldPath))switch($e.op){case"array-contains-any":return $e.value.arrayValue.values||[];case"array-contains":return[$e.value]}return null}(l,u),g=function(z,se){const de=new Map;for(const $e of wu(se))for(const Dt of Ny(z,$e.fieldPath))switch(Dt.op){case"==":case"in":de.set($e.fieldPath.canonicalString(),Dt.value);break;case"not-in":case"!=":return de.set($e.fieldPath.canonicalString(),Dt.value),Array.from(de.values())}return null}(l,u),m=function(z,se){const de=[];let $e=!0;for(const Dt of wu(se)){const Gn=0===Dt.kind?RV(z,Dt.fieldPath,z.startAt):PV(z,Dt.fieldPath,z.startAt);de.push(Gn.value),$e&&($e=Gn.inclusive)}return new Ta(de,$e)}(l,u),y=function(z,se){const de=[];let $e=!0;for(const Dt of wu(se)){const Gn=0===Dt.kind?PV(z,Dt.fieldPath,z.endAt):RV(z,Dt.fieldPath,z.endAt);de.push(Gn.value),$e&&($e=Gn.inclusive)}return new Ta(de,$e)}(l,u),D=this.ln(u,l,m),b=this.ln(u,l,y),M=this.hn(u,l,g),U=this.Pn(u.indexId,h,D,m.inclusive,b,y.inclusive,M);return O.forEach(U,N=>r.j(N,n.limit).next(z=>{z.forEach(se=>{const de=le.fromSegments(se.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:eK(Mt.create(e.filters,"and")).map(r=>HD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):jy,y=this.Tn(e,m,r[g%l],i),D=this.En(e,m,s[g%l],o),b=a.map(M=>this.Tn(e,m,M,!0));h.push(...this.createRange(y,D,b))}return h}Tn(e,n,r,i){const s=new xu(e,le.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new xu(e,le.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new RF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return O.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new kt(en.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Dp;for(const i of wu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Nu.St.ht(s,o)}return r.Ut()}In(e){const n=new Dp;return Nu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Dp;return Nu.St.ht(Cu(this.databaseId,n),r.jt(function(s){const o=wu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Dp);let s=0;for(const o of wu(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&op(a))i=this.Vn(i,o,a);else{const l=u.jt(o.kind);Nu.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Dp;u.seed(a.Ut()),Nu.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Cp(e),i=Xl(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const m=g?new Ul(g.sequenceNumber,new Ci(Pu(g.readTime),new le(Fs(g.documentKey)),g.largestBatchId)):Ul.empty(),y=h.fields.map(([D,b])=>new Tu(en.fromServerFormat(D),b));return new Ll(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Cp(e),s=Xl(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(DF(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(s,u);return l.isEqual(h)?O.resolve():this.yn(e,s,u,l,h)}))))})}wn(e,n,r,i){return Jl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Jl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Jl(e);let s=new kt(Ca);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new xu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new kt(Ca);const i=this.dn(n,e);if(null==i)return r;const s=xD(n);if(null!=s){const o=e.data.field(s.fieldPath);if(op(o))for(const a of o.arrayValue.values||[])r=r.add(new xu(n.indexId,e.key,this.In(a),i))}else r=r.add(new xu(n.indexId,e.key,jy,i));return r}yn(e,n,r,i,s){ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,h,g,m){const y=u.getIterator(),D=l.getIterator();let b=Bl(y),M=Bl(D);for(;b||M;){let U=!1,N=!1;if(b&&M){const z=h(b,M);z<0?N=!0:z>0&&(U=!0)}else null!=b?N=!0:U=!0;U?(g(M),M=Bl(D)):N?(m(b),b=Bl(y)):(b=Bl(y),M=Bl(D))}}(i,s,Ca,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),O.waitFor(o)}fn(e){let n=1;return Xl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ca(o,a)).filter((o,a,u)=>!a||0!==Ca(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ca(o,e),u=Ca(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jy,[]]))}return s}bn(e,n){return Ca(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OF)}getMinOffset(e,n){return O.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ve())).next(OF)}}function xF(t){return sr(t,"collectionParents")}function Jl(t){return sr(t,"indexEntries")}function Cp(t){return sr(t,"indexConfiguration")}function Xl(t){return sr(t,"indexState")}function OF(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;OD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ci(e.readTime,e.documentKey,n)}const kF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ar{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function VF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Ae(1===a)}));const l=[];for(const h of n.mutations){const g=sV(e,h.key.path,n.batchId);s.push(i.delete(g)),l.push(h.key)}return O.waitFor(s).next(()=>l)}function Hy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ve();e=t.noDocument}return JSON.stringify(e).length}Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class zy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new zy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ed(e),o=Aa(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new ZD(a,n,r,i),l=function(y,D,b){const M=b.baseMutations.map(N=>Ep(y.ut,N)),U=b.mutations.map(N=>Ep(y.ut,N));return{userId:D,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new kt((m,y)=>Be(m.canonicalString(),y.canonicalString()));for(const m of i){const y=sV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,zZ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Aa(e).get(n).next(r=>r?(Ae(r.userId===this.userId),Mu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?O.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Aa(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=Mu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Aa(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).W("userMutationsIndex",n).next(r=>r.map(i=>Mu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Dy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ed(e).Y({range:i},(o,a,u)=>{const[l,h,g]=o,m=Fs(h);if(l===this.userId&&n.path.isEqual(m))return Aa(e).get(g).next(y=>{if(!y)throw ve();Ae(y.userId===this.userId),s.push(Mu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(Be);const i=[];return n.forEach(s=>{const o=Dy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ed(e).Y({range:a},(l,h,g)=>{const[m,y,D]=l,b=Fs(y);m===this.userId&&s.path.isEqual(b)?r=r.add(D):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Dy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new kt(Be);return ed(e).Y({range:o},(u,l,h)=>{const[g,m,y]=u,D=Fs(m);g===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Aa(e).get(s).next(o=>{if(null===o)throw ve();Ae(o.userId===this.userId),r.push(Mu(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return VF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ed(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Fs(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return FF(e,this.userId,n)}Mn(e){return LF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FF(t,e,n){const r=Dy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ed(t).Y({range:s,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function Aa(t){return sr(t,"mutations")}function ed(t){return sr(t,"documentMutations")}function LF(t){return sr(t,"mutationQueues")}class Ou{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ou(0)}static Nn(){return new Ou(-1)}}class rK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Ou(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new on(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>td(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return td(e).Y((o,a)=>{const u=wp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return td(e).Y((r,i)=>{const s=wp(i);n(s)})}Bn(e){return UF(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}Ln(e,n){return UF(e).put("targetGlobalKey",n)}kn(e,n){return td(e).put(wF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Au(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return td(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=wp(a);cp(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ba(e);return n.forEach(o=>{const a=Cr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=ba(e);return O.forEach(n,s=>{const o=Cr(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ba(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ba(e);let s=Ze();return i.Y({range:r,J:!0},(o,a,u)=>{const l=Fs(o[1]),h=new le(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Cr(n.path),i=IDBKeyRange.bound([r],[Qk(r)],!1,!0);let s=0;return ba(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return td(e).get(n).next(r=>r?wp(r):null)}}function td(t){return sr(t,"targets")}function UF(t){return sr(t,"targetGlobal")}function ba(t){return sr(t,"targetDocuments")}function BF([t,e],[n,r]){const i=Be(t,n);return 0===i?Be(e,r):i}class iK{constructor(e){this.Qn=e,this.buffer=new kt(BF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();BF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $F{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){ma(r)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ga(r)}yield n.Gn(3e5)}))}}class sK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Ai._e);const r=new iK(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(kF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Vl()<=xs.in.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class oK{constructor(e,n){this.db=e,this.garbageCollector=function jF(t,e){return new sK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Wy(e,r)}removeReference(e,n,r){return Wy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Wy(e,n)}Xn(e,n){return function(i,s){let o=!1;return LF(i).Z(a=>FF(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,be.min()),ba(e).delete([0,Cr(o.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Wy(e,n)}Zn(e,n){const r=ba(e);let i,s=Ai._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Ai._e&&n(new le(Fs(i)),s),s=l,i=u):s=Ai._e}).next(()=>{s!==Ai._e&&n(new le(Fs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wy(t,e){return ba(t).put((i=t.currentSequenceNumber,{targetId:0,path:Cr(e.path),sequenceNumber:i}));var i}class HF{constructor(){this.changes=new To(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ku(e).put(r)}removeEntry(e,n,r){return ku(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=tn.newInvalidDocument(n);return ku(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:tn.newInvalidDocument(n)};return ku(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(n))},(i,s)=>{r={document:this.tr(n,s),size:Hy(s)}}).next(()=>r)}getEntries(e,n){let r=ai();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=ai(),i=new Ht(le.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Hy(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return O.resolve();let i=new kt(GF);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Ap(i.first()),Ap(i.last())),o=i.getIterator();let a=o.getNext();return ku(e).Y({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&GF(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.U(Ap(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Uy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ku(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=ai();for(const g of l){const m=this.tr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(dp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=ai();const o=qF(n,r),a=qF(n,Ci.max());return ku(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.tr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new uK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return WF(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}er(e,n){return WF(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function Z7(t,e){let n;if(e.document)n=pF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Pu(e.noDocument.readTime);n=tn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const r=le.fromSegments(e.unknownDocument.path),i=Pu(e.unknownDocument.version);n=tn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new on(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return tn.newInvalidDocument(e)}}function zF(t){return new aK(t)}class uK extends HF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new To(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new kt((s,o)=>Be(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=EF(this._r.serializer,o);i=i.add(s.path.popLast());const l=Hy(u);r+=l-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=EF(this._r.serializer,o.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function WF(t){return sr(t,"remoteDocumentGlobal")}function ku(t){return sr(t,"remoteDocumentsV14")}function Ap(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qF(t,e){const n=e.documentKey.path.toArray();return[t,Uy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GF(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Be(n[s],r[s]),i)return i;return i=Be(n.length,r.length),i||(i=Be(n[n.length-2],r[r.length-2]),i||Be(n[n.length-1],r[r.length-1]))}class cK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ZF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&gp(r.mutation,i,oi.empty(),on.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const i=Us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=hp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ai();const o=fp(),a=fp();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Do)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),gp(h.mutation,l,h.mutation.getFieldMask(),on.now())):o.set(l.key,oi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new cK(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fp();let i=new Ht((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||oi.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=UV();h.forEach(m=>{if(!s.has(m)){const y=ZV(n.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):zD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Us());let a=-1,u=s;return o.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Ze())).next(h=>({batchId:a,changes:LV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=hp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=hp();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(s),new wo(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,tn.newInvalidDocument(h)))});let a=hp();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&gp(h.mutation,l,oi.empty(),on.now()),dp(n,l)&&(a=a.insert(u,l))}),a})}}class lK{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return O.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:Mn(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:rC(i.bundledQuery),readTime:Mn(i.readTime)}),O.resolve();var i}}class dK{constructor(){this.overlays=new Ht(le.comparator),this.lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Us();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Us(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ht((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Us(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Us(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QD(n,r));let s=this.lr.get(n);void 0===s&&(s=Ze(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class lC{constructor(){this.hr=new kt(or.Pr),this.Ir=new kt(or.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new or(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new or(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new le(new mt([])),r=new or(n,e),i=new or(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new le(new mt([])),r=new or(n,e),i=new or(n,e+1);let s=Ze();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new or(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class or{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return le.comparator(e.key,n.key)||Be(e.gr,n.gr)}static Tr(e,n){return Be(e.gr,n.gr)||le.comparator(e.key,n.key)}}class hK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new kt(or.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new ZD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new or(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new or(n,0),i=new or(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(Be);return n.forEach(i=>{const s=new or(i,0),o=new or(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new or(new le(s),0);let a=new kt(Be);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),O.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(n.mutations,i=>{const s=new or(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new or(n,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fK{constructor(e){this.Cr=e,this.docs=new Ht(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=ai();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ai();const o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||OD(Jk(h),r)<=0||(i.has(h.key)||dp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve()}vr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pK(this)}getSize(e){return O.resolve(this.size)}}class pK extends HF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class gK{constructor(e){this.persistence=e,this.Fr=new To(n=>Au(n),cp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new lC,this.targetCount=0,this.Nr=Ou.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),O.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ou(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.kn(n),O.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Or.containsKey(n))}}class dC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ai(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new gK(this),this.indexManager=new tK,this.remoteDocumentCache=new fK(r=>this.referenceDelegate.Qr(r)),this.serializer=new IF(n),this.Kr=new lK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new hK(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new mK(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class mK extends eV{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.Gr=new lC,this.zr=null}static jr(e){return new qy(e)}get Hr(){if(this.zr)return this.zr;throw ve()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=le.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return O.or([()=>O.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class _K{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Ty("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iV,{unique:!0}),u.createObjectStore("documentMutations"),KF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),KF(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iV,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:n7});l.createIndex("collectionPathOverlayIndex",r7,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",i7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:WZ});l.createIndex("documentKeyIndex",qZ),l.createIndex("collectionGroupIndex",GZ)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:JZ}).createIndex("sequenceNumberIndex",XZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:e7}).createIndex("documentKeyIndex",t7,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Hy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Ae(u.userId===s.userId);const l=Mu(this.serializer,u);return VF(e,s.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new mt(o),l=[0,Cr(u)];s.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:Cr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:YZ});const r=n.store("collectionParents"),i=new cC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Cr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new mt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const h=Fs(a);return s(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=wp(i),o=wF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new le(mt.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):ve()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=zF(this.serializer),s=new dC(qy.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Ze();Mu(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ir(l),g=By.ct(this.serializer,h),m=s.getIndexManager(h),y=zy.ct(h,this.serializer,m,s.referenceDelegate);return new ZF(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new FD(n,Ai._e),u).next()})})}}function KF(t){t.createObjectStore("targetDocuments",{keyPath:KZ}).createIndex("documentTargetsIndex",QZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZZ,{unique:!0}),t.createObjectStore("targetGlobal")}const hC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fC{constructor(e,n,r,i,s,o,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!fC.D())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oK(this,i),this.Ii=n+"main",this.serializer=new IF(u),this.Ti=new ds(this.Ii,this.ai,new _K(this.serializer)),this.qr=new rK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zF(this.serializer),this.Kr=new K7,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&Pn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,hC);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ai(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,G.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,G.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ma(e))return ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return bp(e).get("owner").next(n=>O.resolve(this.wi(n)))}Si(e){return Zy(e).delete(this.clientId)}bi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=sr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):bp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,hC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zy(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,G.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new FD(n,Ai._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Zy(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return zy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return By.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){ne("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?o7:14===u?uV:13===u?aV:12===u?s7:11===u?oV:void ve();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new FD(a,this.Lr?this.Lr.next():Ai._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(B.FAILED_PRECONDITION,Xk);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return bp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,hC)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bp(e).put("owner",n)}static D(){return ds.D()}pi(e){const n=bp(e);return n.get("owner").next(r=>this.wi(r)?(ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Pn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ot.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Pn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(t){return sr(t,"owner")}function Zy(t){return sr(t,"clientMetadata")}function pC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class gC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ze(),i=Ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gC(e,n.fromCache,r,i)}}class yK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QF{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yK;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Vl()<=xs.in.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Wl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(Vl()<=xs.in.DEBUG&&ne("QueryEngine","Query:",Wl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Vl()<=xs.in.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Wl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):O.resolve())}zi(e,n){if(NV(n))return O.resolve(null);let r=Kr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=xy(n,null,"F"),r=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ze(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(e,xy(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return NV(n)||i.isEqual(be.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?O.resolve(null):(Vl()<=xs.in.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wl(n)),this.Xi(e,o,n,Yk(i,-1)).next(a=>a))})}Yi(e,n){let r=new kt(VV(e));return n.forEach((i,s)=>{dp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Vl()<=xs.in.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Wl(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ci.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class vK{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ht(Be),this.ns=new To(s=>Au(s),cp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZF(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function YF(t,e,n,r){return new vK(t,e,n,r)}function JF(t,e){return mC.apply(this,arguments)}function mC(){return mC=(0,G.Z)(function*(t,e){const n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ze();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}),mC.apply(this,arguments)}function XF(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function eL(t,e,n){let r=Ze(),i=Ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ai();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function wK(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nd(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Co(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function rd(t,e,n){return _C.apply(this,arguments)}function _C(){return _C=(0,G.Z)(function*(t,e,n){const r=ae(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ma(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),_C.apply(this,arguments)}function Ky(t,e,n){const r=ae(t);let i=be.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=ae(u),m=g.ns.get(h);return void 0!==m?O.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,o,Kr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:be.min(),n?s:Ze())).next(a=>(rL(r,kV(e),a),{documents:a,ls:s})))}function tL(t,e){const n=ae(t),r=ae(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function nL(t,e){const n=ae(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,Yk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rL(n,e,i),i))}function rL(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function yC(){return yC=(0,G.Z)(function*(t,e,n,r){const i=ae(t);let s=Ze(),o=ai();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(s=s.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),o=o.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield nd(i,(h=r,Kr(Hl(mt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>eL(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),yC.apply(this,arguments)}function DK(t,e){return vC.apply(this,arguments)}function vC(){return vC=(0,G.Z)(function*(t,e,n=Ze()){const r=yield nd(t,Kr(rC(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Mn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(qn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),vC.apply(this,arguments)}function iL(t,e){return`firestore_clients_${t}_${e}`}function sL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function IC(t,e){return`firestore_targets_${t}_${e}`}class Qy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new Qy(e,n,i.state,s):(Pn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Sp(e,r.state,i):(Pn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=qD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Yy(e,s):(Pn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class EC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new EC(n.clientId,n.onlineState):(Pn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wC{constructor(){this.activeTargetIds=qD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TC{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ht(Be),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=iL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new wC),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(iL(e.persistenceKey,i));if(s){const o=Yy.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(IC(this.persistenceKey,e));if(r){const i=Sp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IC(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ne("SharedClientState","READ",e,n),n}setItem(e,n){ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,G.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Ai._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){Pn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ai._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new Qy(this.currentUser,e,n,r),s=sL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=sL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=IC(this.persistenceKey,e),s=new Sp(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Yy.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return Qy.Ts(new ir(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Sp.Ts(i,n)}Ms(e){return EC.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,G.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=qD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class oL{constructor(){this.eo=new wC,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new wC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CK{ro(e){}shutdown(){}}class aL{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jy=null;function DC(){return null===Jy?Jy=268435456+Math.round(2147483648*Math.random()):Jy++,"0x"+Jy.toString(16)}const AK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bK{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const br="WebChannelConnection";class SK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=DC(),u=this.So(n,r);ne("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(h=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw si("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+kl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${AK[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=DC();return new Promise((o,a)=>{const u=new CZ;u.setWithCredentials(!0),u.listenOnce(TZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case MD.NO_ERROR:const h=u.getResponseJson();ne(br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case MD.TIMEOUT:ne(br,`RPC '${e}' ${s} timed out`),a(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case MD.HTTP_ERROR:const g=u.getStatus();if(ne(br,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const D=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(y.status);a(new J(D,y.message))}else a(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(B.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ne(br,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);ne(br,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=DC(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EZ(),a=wZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ne(br,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,y=!1;const D=new bK({co:M=>{y?ne(br,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(ne(br,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ne(br,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},lo:()=>g.close()}),b=(M,U,N)=>{M.listen(U,z=>{try{N(z)}catch(se){setTimeout(()=>{throw se},0)}})};return b(g,wy.EventType.OPEN,()=>{y||ne(br,`RPC '${e}' stream ${i} transport opened.`)}),b(g,wy.EventType.CLOSE,()=>{y||(y=!0,ne(br,`RPC '${e}' stream ${i} transport closed`),D.Ro())}),b(g,wy.EventType.ERROR,M=>{y||(y=!0,si(br,`RPC '${e}' stream ${i} transport errored:`,M),D.Ro(new J(B.UNAVAILABLE,"The operation could not be completed")))}),b(g,wy.EventType.MESSAGE,M=>{var U;if(!y){const N=M.data[0];Ae(!!N);const se=N.error||(null===(U=N[0])||void 0===U?void 0:U.error);if(se){ne(br,`RPC '${e}' stream ${i} received error:`,se);const de=se.status;let $e=function(Wp){const Iv=kn[Wp];if(void 0!==Iv)return eF(Iv)}(de),Dt=se.message;void 0===$e&&($e=B.INTERNAL,Dt="Unknown error status: "+de+" with message "+se.message),y=!0,D.Ro(new J($e,Dt)),g.close()}else ne(br,`RPC '${e}' stream ${i} received:`,N),D.Vo(N)}}),b(a,DZ.STAT_EVENT,M=>{M.stat===Wk.PROXY?ne(br,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Wk.NOPROXY&&ne(br,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.Ao()},0),D}}function uL(){return typeof window<"u"?window:null}function Xy(){return typeof document<"u"?document:null}function Rp(t){return new L7(t,!0)}class CC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class cL{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new CC(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,G.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,G.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,G.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Pn(n.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,G.Z)(function*(){e.state=0,e.start()}))}o_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RK extends cL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function $7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:ve(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(void 0===h||"string"==typeof h),qn.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),qn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?B.UNKNOWN:eF(l.code);return new J(h,l.message||"")}(o);n=new sF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Bs(t,r.document.name),s=Mn(r.document.updateTime),o=r.document.createTime?Mn(r.document.createTime):be.min(),a=new mr({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,s,o,a);n=new Ly(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Bs(t,r.document),s=r.readTime?Mn(r.readTime):be.min(),o=tn.newNoDocument(i,s);n=new Ly([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Bs(t,r.document);n=new Ly([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ve();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new N7(i,s);n=new iF(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Mn(o.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Ip(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=My(u)?{documents:gF(s,u)}:{query:nC(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cF(s,o.resumeToken);const l=JD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=Ql(s,o.snapshotVersion.toTimestamp());const l=JD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function H7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Ip(this.serializer),n.removeTarget=e,this.e_(n)}}class PK extends cL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function j7(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=Mn(i.updateTime?i.updateTime:s);return o.isEqual(be.min())&&(o=Mn(s)),new S7(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.I_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ip(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ep(this.serializer,r))};this.e_(n)}}class MK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class xK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Pn(n),this.f_=!1):ne("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class OK{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,G.Z)(function*(){var u;Sa(o)&&(ne("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,G.Z)(function*(h){const g=ae(h);g.C_.add(4),yield id(g),g.M_.set("Unknown"),g.C_.delete(4),yield Pp(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.M_=new xK(r,i)}}function Pp(t){return bC.apply(this,arguments)}function bC(){return bC=(0,G.Z)(function*(t){if(Sa(t))for(const e of t.v_)yield e(!0)}),bC.apply(this,arguments)}function id(t){return SC.apply(this,arguments)}function SC(){return SC=(0,G.Z)(function*(t){for(const e of t.v_)yield e(!1)}),SC.apply(this,arguments)}function ev(t,e){const n=ae(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),MC(n)?PC(n):od(n).Ho()&&RC(n,e))}function Mp(t,e){const n=ae(t),r=od(n);n.D_.delete(e),r.Ho()&&lL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Sa(n)&&n.M_.set("Unknown"))}function RC(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}od(t).u_(e)}function lL(t,e){t.x_.Oe(e),od(t).c_(e)}function PC(t){t.x_=new O7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),od(t).start(),t.M_.g_()}function MC(t){return Sa(t)&&!od(t).jo()&&t.D_.size>0}function Sa(t){return 0===ae(t).C_.size}function dL(t){t.x_=void 0}function kK(t){return NC.apply(this,arguments)}function NC(){return NC=(0,G.Z)(function*(t){t.D_.forEach((e,n)=>{RC(t,e)})}),NC.apply(this,arguments)}function VK(t,e){return xC.apply(this,arguments)}function xC(){return xC=(0,G.Z)(function*(t,e){dL(t),MC(t)?(t.M_.w_(e),PC(t)):t.M_.set("Unknown")}),xC.apply(this,arguments)}function FK(t,e,n){return OC.apply(this,arguments)}function OC(){return OC=(0,G.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof sF&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tv(t,r)}else if(e instanceof Ly?t.x_.$e(e):e instanceof iF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield XF(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.D_.get(l);h&&s.D_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.D_.get(u);if(!h)return;s.D_.set(u,h.withResumeToken(qn.EMPTY_BYTE_STRING,h.snapshotVersion)),lL(s,u);const g=new Co(h.target,u,l,h.sequenceNumber);RC(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),yield tv(t,r)}var r}),OC.apply(this,arguments)}function tv(t,e,n){return kC.apply(this,arguments)}function kC(){return kC=(0,G.Z)(function*(t,e,n){if(!ma(e))throw e;t.C_.add(1),yield id(t),t.M_.set("Offline"),n||(n=()=>XF(t.localStore)),t.asyncQueue.enqueueRetryable((0,G.Z)(function*(){ne("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Pp(t)}))}),kC.apply(this,arguments)}function hL(t,e){return e().catch(n=>tv(t,n,e))}function sd(t){return VC.apply(this,arguments)}function VC(){return VC=(0,G.Z)(function*(t){const e=ae(t),n=Ra(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;LK(e);)try{const i=yield wK(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,UK(e,i)}catch(i){yield tv(e,i)}fL(e)&&pL(e)}),VC.apply(this,arguments)}function LK(t){return Sa(t)&&t.b_.length<10}function UK(t,e){t.b_.push(e);const n=Ra(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function fL(t){return Sa(t)&&!Ra(t).jo()&&t.b_.length>0}function pL(t){Ra(t).start()}function BK(t){return FC.apply(this,arguments)}function FC(){return FC=(0,G.Z)(function*(t){Ra(t).E_()}),FC.apply(this,arguments)}function $K(t){return LC.apply(this,arguments)}function LC(){return LC=(0,G.Z)(function*(t){const e=Ra(t);for(const n of t.b_)e.P_(n.mutations)}),LC.apply(this,arguments)}function jK(t,e,n){return UC.apply(this,arguments)}function UC(){return UC=(0,G.Z)(function*(t,e,n){const r=t.b_.shift(),i=KD.from(r,e,n);yield hL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield sd(t)}),UC.apply(this,arguments)}function HK(t,e){return BC.apply(this,arguments)}function BC(){return BC=(0,G.Z)(function*(t,e){var n;e&&Ra(t).h_&&(yield(n=(0,G.Z)(function*(i,s){if(XV(a=s.code)&&a!==B.ABORTED){const o=i.b_.shift();Ra(i).Yo(),yield hL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield sd(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),fL(t)&&pL(t)}),BC.apply(this,arguments)}function gL(t,e){return $C.apply(this,arguments)}function $C(){return $C=(0,G.Z)(function*(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Sa(n);n.C_.add(3),yield id(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Pp(n)}),$C.apply(this,arguments)}function jC(t,e){return HC.apply(this,arguments)}function HC(){return HC=(0,G.Z)(function*(t,e){const n=ae(t);e?(n.C_.delete(2),yield Pp(n)):e||(n.C_.add(2),yield id(n),n.M_.set("Unknown"))}),HC.apply(this,arguments)}function od(t){return t.O_||(t.O_=function(n,r,i){const s=ae(n);return s.A_(),new RK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:kK.bind(null,t),Io:VK.bind(null,t),a_:FK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.O_.Yo(),MC(t)?PC(t):t.M_.set("Unknown")):(yield t.O_.stop(),dL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Ra(t){return t.N_||(t.N_=function(n,r,i){const s=ae(n);return s.A_(),new PK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:BK.bind(null,t),Io:HK.bind(null,t),T_:$K.bind(null,t),I_:jK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.N_.Yo(),yield sd(t)):(yield t.N_.stop(),t.b_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class zC{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zC(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ad(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),ma(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}class ud{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=hp(),this.sortedSet=new Ht(this.comparator)}static emptySet(e){return new ud(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ud)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ud;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class mL{constructor(){this.B_=new Ht(le.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ve():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class cd{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new cd(e,n,ud.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class zK{constructor(){this.k_=void 0,this.listeners=[]}}class WK{constructor(){this.queries=new To(e=>OV(e),lp),this.onlineState="Unknown",this.q_=new Set}}function WC(t,e){return qC.apply(this,arguments)}function qC(){return qC=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new zK),i)try{s.k_=yield n.onListen(r)}catch(o){const a=ad(o,`Initialization of query '${Wl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&KC(n)}),qC.apply(this,arguments)}function GC(t,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,G.Z)(function*(t,e){const n=ae(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),ZC.apply(this,arguments)}function qK(t,e){const n=ae(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&KC(n)}function GK(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function KC(t){t.q_.forEach(e=>{e.next()})}class QC{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new cd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class ZK{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class _L{constructor(e){this.serializer=e}hs(e){return Bs(this.serializer,e)}Ps(e){return e.metadata.exists?pF(this.serializer,e.document,!1):tn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Mn(e)}}class KK{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=mt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new _L(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,G.Z)(function*(){const n=yield function TK(t,e,n,r){return yC.apply(this,arguments)}(e.localStore,new _L(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield DK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function yL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class vL{constructor(e){this.key=e}}class IL{constructor(e){this.key=e}}class EL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ze(),this.mutatedKeys=Ze(),this._a=VV(e),this.aa=new ud(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new mL,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=dp(this.query,g)?g:null,D=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?D!==b&&(r.track({type:3,doc:y}),M=!0):this.ha(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this._a(y,u)>0||l&&this._a(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(o=o.add(y),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(y,D){const b=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return b(y)-b(D)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,0!==o.length||l?{snapshot:new cd(this.query,e.aa,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new mL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ze(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new IL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new vL(r))}),n}da(e){this.ia=e.ls,this.oa=Ze();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return cd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class QK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YK{constructor(e){this.key=e,this.Ra=!1}}class JK{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new To(a=>OV(a),lp),this.fa=new Map,this.ga=new Set,this.pa=new Ht(le.comparator),this.ya=new Map,this.wa=new lC,this.Sa={},this.ba=new Map,this.Da=Ou.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function XK(t,e){return YC.apply(this,arguments)}function YC(){return YC=(0,G.Z)(function*(t,e){const n=IA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield nd(n.localStore,Kr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield JC(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&ev(n.remoteStore,o)}return i}),YC.apply(this,arguments)}function JC(t,e,n,r,i){return XC.apply(this,arguments)}function XC(){return XC=(0,G.Z)(function*(t,e,n,r,i){t.va=(g,m,y)=>{return(D=(0,G.Z)(function*(M,U,N,z){let se=U.view.ca(N);se.Zi&&(se=yield Ky(M.localStore,U.query,!1).then(({documents:Gn})=>U.view.ca(Gn,se)));const de=z&&z.targetChanges.get(U.targetId),$e=z&&null!=z.targetMismatches.get(U.targetId),Dt=U.view.applyChanges(se,M.isPrimaryClient,de,$e);return cA(M,U.targetId,Dt.Ta),Dt.snapshot}),function b(M,U,N,z){return D.apply(this,arguments)})(t,g,m,y);var D};const s=yield Ky(t.localStore,e,!0),o=new EL(e,s.ls),a=o.ca(s.documents),u=yp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);cA(t,n,l.Ta);const h=new QK(e,n,o);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),XC.apply(this,arguments)}function eQ(t,e){return eA.apply(this,arguments)}function eA(){return eA=(0,G.Z)(function*(t,e){const n=ae(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!lp(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Mp(n.remoteStore,r.targetId),ld(n,r.targetId)}).catch(ga))):(ld(n,r.targetId),yield rd(n.localStore,r.targetId,!0))}),eA.apply(this,arguments)}function tA(){return tA=(0,G.Z)(function*(t,e,n){const r=EA(t);try{const i=yield function(o,a){const u=ae(o),l=on.now(),h=a.reduce((y,D)=>y.add(D.key),Ze());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=ai(),b=Ze();return u.ss.getEntries(y,h).next(M=>{D=M,D.forEach((U,N)=>{N.isValidDocument()||(b=b.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{g=M;const U=[];for(const N of a){const z=P7(N,g.get(N.key).overlayedDocument);null!=z&&U.push(new Do(N.key,z,vV(z.value.mapValue),an.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(M=>{m=M;const U=M.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(y,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:LV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Ht(Be)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ao(r,i.changes),yield sd(r.remoteStore)}catch(i){const s=ad(i,"Failed to persist write");n.reject(s)}}),tA.apply(this,arguments)}function wL(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,G.Z)(function*(t,e){const n=ae(t);try{const r=yield function EK(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var b,M,U;null!==e.targetMismatches.get(g)?y=y.withResumeToken(qn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,U=h,(0===(b=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=ai(),l=Ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(eL(s,o,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(be.min())){const h=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield Ao(n,r,e)}catch(r){yield ga(r)}}),nA.apply(this,arguments)}function TL(t,e,n){const r=ae(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ae(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&KC(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nQ(t,e,n){return rA.apply(this,arguments)}function rA(){return rA=(0,G.Z)(function*(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Ht(le.comparator);o=o.insert(s,tn.newNoDocument(s,be.min()));const a=Ze().add(s),u=new _p(be.min(),new Map,new Ht(Be),o,a);yield wL(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),lA(r)}else yield rd(r.localStore,e,!1).then(()=>ld(r,e,n)).catch(ga)}),rA.apply(this,arguments)}function rQ(t,e){return iA.apply(this,arguments)}function iA(){return iA=(0,G.Z)(function*(t,e){const n=ae(t),r=e.batch.batchId;try{const i=yield function IK(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(b=>{const M=l.docVersions.get(D);Ae(null!==M),b.version.compareTo(M)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ze();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);uA(n,r,null),aA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ao(n,i)}catch(i){yield ga(i)}}),iA.apply(this,arguments)}function iQ(t,e,n){return sA.apply(this,arguments)}function sA(){return sA=(0,G.Z)(function*(t,e,n){const r=ae(t);try{const i=yield function(o,a){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ae(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);uA(r,e,n),aA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ao(r,i)}catch(i){yield ga(i)}}),sA.apply(this,arguments)}function oA(){return oA=(0,G.Z)(function*(t,e){const n=ae(t);Sa(n.remoteStore)||ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=ad(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),oA.apply(this,arguments)}function aA(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function uA(t,e,n){const r=ae(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||DL(t,r)})}function DL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Mp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),lA(t))}function cA(t,e,n){for(const r of n)r instanceof vL?(t.wa.addReference(r.key,e),oQ(t,r)):r instanceof IL?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||DL(t,r.key)):ve()}function oQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ga.add(r),lA(t))}function lA(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new le(mt.fromString(e)),r=t.Da.next();t.ya.set(r,new YK(n)),t.pa=t.pa.insert(n,r),ev(t.remoteStore,new Co(Kr(Hl(n.path)),r,"TargetPurposeLimboResolution",Ai._e))}}function Ao(t,e,n){return dA.apply(this,arguments)}function dA(){return dA=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=gC.Qi(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,G.Z)(function*(l,h){const g=ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.ki,D=>g.persistence.referenceDelegate.addReference(m,y.targetId,D)).next(()=>O.forEach(y.qi,D=>g.persistence.referenceDelegate.removeReference(m,y.targetId,D)))))}catch(m){if(!ma(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const D=g.ts.get(y),M=D.withLastLimboFreeSnapshotVersion(D.snapshotVersion);g.ts=g.ts.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),dA.apply(this,arguments)}function aQ(t,e){return hA.apply(this,arguments)}function hA(){return hA=(0,G.Z)(function*(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=yield JF(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ao(n,r._s)}var s}),hA.apply(this,arguments)}function uQ(t,e){const n=ae(t),r=n.ya.get(e);if(r&&r.Ra)return Ze().add(r.key);{let i=Ze();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function cQ(t,e){return fA.apply(this,arguments)}function fA(){return fA=(0,G.Z)(function*(t,e){const n=ae(t),r=yield Ky(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&cA(n,e.targetId,i.Ta),i}),fA.apply(this,arguments)}function lQ(t,e){return pA.apply(this,arguments)}function pA(){return pA=(0,G.Z)(function*(t,e){const n=ae(t);return nL(n.localStore,e).then(r=>Ao(n,r))}),pA.apply(this,arguments)}function dQ(t,e,n,r){return gA.apply(this,arguments)}function gA(){return gA=(0,G.Z)(function*(t,e,n,r){const i=ae(t),s=yield function(a,u){const l=ae(a),h=ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield sd(i.remoteStore):"acknowledged"===n||"rejected"===n?(uA(i,e,r||null),aA(i,e),u=e,ae(ae(i.localStore).mutationQueue).Fn(u)):ve(),yield Ao(i,s)):ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),gA.apply(this,arguments)}function mA(){return mA=(0,G.Z)(function*(t,e){const n=ae(t);if(IA(n),EA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield CL(n,r.toArray());n.Ca=!0,yield jC(n.remoteStore,!0);for(const s of i)ev(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ld(n,o),rd(n.localStore,o,!0))),Mp(n.remoteStore,o)}),yield i,yield CL(n,r),function(o){const a=ae(o);a.ya.forEach((u,l)=>{Mp(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ht(le.comparator)}(n),n.Ca=!1,yield jC(n.remoteStore,!1)}}),mA.apply(this,arguments)}function CL(t,e,n){return _A.apply(this,arguments)}function _A(){return _A=(0,G.Z)(function*(t,e,n){const r=ae(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield nd(r.localStore,Kr(u[0]));for(const l of u){const h=r.ma.get(l),g=yield cQ(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield tL(r.localStore,o);a=yield nd(r.localStore,l),yield JC(r,AL(l),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),_A.apply(this,arguments)}function AL(t){return MV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fQ(t){return n=ae(t).localStore,ae(ae(n).persistence).Bi();var n}function pQ(t,e,n,r){return yA.apply(this,arguments)}function yA(){return yA=(0,G.Z)(function*(t,e,n,r){const i=ae(t);if(i.Ca)return void ne("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield nL(i.localStore,kV(s[0])),a=_p.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,qn.EMPTY_BYTE_STRING);yield Ao(i,o,a);break}case"rejected":yield rd(i.localStore,e,!0),ld(i,e,r);break;default:ve()}}),yA.apply(this,arguments)}function gQ(t,e,n){return vA.apply(this,arguments)}function vA(){return vA=(0,G.Z)(function*(t,e,n){const r=IA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){ne("SyncEngine","Adding an already active target "+i);continue}const s=yield tL(r.localStore,i),o=yield nd(r.localStore,s);yield JC(r,AL(s),o.targetId,!1,o.resumeToken),ev(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield rd(r.localStore,i,!1).then(()=>{Mp(r.remoteStore,i),ld(r,i)}).catch(ga))}}),vA.apply(this,arguments)}function IA(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nQ.bind(null,e),e.Va.a_=qK.bind(null,e.eventManager),e.Va.Fa=GK.bind(null,e.eventManager),e}function EA(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iQ.bind(null,e),e}class Np{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,G.Z)(function*(){n.serializer=Rp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return YF(this.persistence,new QF,e.initialUser,this.serializer)}createPersistence(e){return new dC(qy.jr,this.serializer)}createSharedClientState(e){return new oL}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wA extends Np{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield EA(r.xa.syncEngine),yield sd(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return YF(this.persistence,new QF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new $F(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new jZ(n,this.persistence);return new $Z(e.asyncQueue,r)}createPersistence(e){const n=pC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new fC(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uL(),Xy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new oL}}class bL extends wA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof TC&&(r.sharedClientState.syncEngine={Ys:dQ.bind(null,i),Zs:pQ.bind(null,i),Xs:gQ.bind(null,i),Bi:fQ.bind(null,i),Js:lQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,G.Z)(function*(o){yield function hQ(t,e){return mA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=uL();if(!TC.D(n))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new TC(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class dd{initialize(e,n){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>TL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aQ.bind(null,r.syncEngine),yield jC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WK}createDatastore(e){const n=Rp(e.databaseInfo.databaseId),r=new SK(e.databaseInfo);return new MK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>TL(this.syncEngine,n,0),a=aL.D()?new aL:new CK,new OK(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){const g=new JK(i,s,o,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,G.Z)(function*(r){const i=ae(r);ne("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield id(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function SL(t,e=10240){let n=0;return{read:()=>(0,G.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class yQ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Wn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,G.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new ZK(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,G.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,G.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,G.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class vQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,G.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,G.Z)(function*(o,a){const u=ae(o),l=Ip(u.serializer)+"/documents",h={documents:a.map(D=>vp(u.serializer,D))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(D=>{const b=function B7(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=Bs(r,i.found.name),o=Mn(i.found.updateTime),a=i.found.createTime?Mn(i.found.createTime):be.min(),u=new mr({mapValue:{fields:i.found.fields}});return tn.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=Bs(r,i.missing),o=Mn(i.readTime);return tn.newNoDocument(s,o)}(t,e):ve()}(u.serializer,D);m.set(b.key.toString(),b)});const y=[];return a.forEach(D=>{const b=m.get(D.toString());Ae(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=le.fromPath(i);e.mutations.push(new GD(s,e.precondition(s)))}),yield(r=(0,G.Z)(function*(s,o){const a=ae(s),u=Ip(a.serializer)+"/documents",l={writes:o.map(h=>Ep(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?an.exists(!1):an.updateTime(n):an.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new J(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return an.updateTime(n)}return an.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IQ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new CC(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,G.Z)(function*(){const n=new vQ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!np(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!XV(n)}return!1}}class EQ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ir.UNAUTHENTICATED,this.clientId=Kk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,G.Z)(function*(a){ne("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ad(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function rv(t,e){return TA.apply(this,arguments)}function TA(){return TA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,G.Z)(function*(s){r.isEqual(s)||(yield JF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),TA.apply(this,arguments)}function DA(t,e){return CA.apply(this,arguments)}function CA(){return CA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield AA(t);ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>gL(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>gL(e.remoteStore,s)),t._onlineComponents=e}),CA.apply(this,arguments)}function RL(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function AA(t){return bA.apply(this,arguments)}function bA(){return bA=(0,G.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!RL(n))throw n;si("Error using user provided cache. Falling back to memory cache: "+n),yield rv(t,new Np)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),yield rv(t,new Np);return t._offlineComponents}),bA.apply(this,arguments)}function iv(t){return SA.apply(this,arguments)}function SA(){return SA=(0,G.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield DA(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),yield DA(t,new dd))),t._onlineComponents}),SA.apply(this,arguments)}function PL(t){return AA(t).then(e=>e.persistence)}function hd(t){return AA(t).then(e=>e.localStore)}function ML(t){return iv(t).then(e=>e.remoteStore)}function RA(t){return iv(t).then(e=>e.syncEngine)}function fd(t){return PA.apply(this,arguments)}function PA(){return PA=(0,G.Z)(function*(t){const e=yield iv(t),n=e.eventManager;return n.onListen=XK.bind(null,e.syncEngine),n.onUnlisten=eQ.bind(null,e.syncEngine),n}),PA.apply(this,arguments)}function xL(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new nv({next:m=>{o.enqueueAndForget(()=>GC(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new QC(Hl(a.path),h,{includeMetadataChanges:!0,J_:!0});return WC(s,g)}(yield fd(t),t.asyncQueue,e,n,r)})),r.promise}function OL(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new nv({next:m=>{o.enqueueAndForget(()=>GC(s,g)),m.fromCache&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new QC(a,h,{includeMetadataChanges:!0,J_:!0});return WC(s,g)}(yield fd(t),t.asyncQueue,e,n,r)})),r.promise}function kL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const VL=new Map;function MA(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FL(t,e,n,r){if(!0===e&&!0===r)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LL(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UL(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ve()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sv(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BL(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class $L{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=kL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $L({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $L(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new RZ;switch(r.type){case"firstParty":return new xZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VL.get(n);r&&(ne("ComponentProvider","Removing Datastore"),VL.delete(n),r.terminate())}(this),Promise.resolve()}}function jL(t,e,n,r={}){var i;const s=(t=ot(t,xp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ir.MOCK_USER;else{a=(0,Ot.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ir(l)}t._authCredentials=new PZ(new Gk(a,u))}}class _r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _r(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class $s extends _r{constructor(e,n,r){super(e,n,Hl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new le(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function HL(t,e,...n){if(t=(0,Ot.m9)(t),MA("collection","path",e),t instanceof xp){const r=mt.fromString(e,...n);return UL(r),new $s(t,null,r)}{if(!(t instanceof nn||t instanceof $s))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return UL(r),new $s(t.firestore,null,r)}}function ov(t,e,...n){if(t=(0,Ot.m9)(t),1===arguments.length&&(e=Kk.newId()),MA("doc","path",e),t instanceof xp){const r=mt.fromString(e,...n);return LL(r),new nn(t,null,new le(r))}{if(!(t instanceof nn||t instanceof $s))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return LL(r),new nn(t.firestore,t instanceof $s?t.converter:null,new le(r))}}function zL(t,e){return t=(0,Ot.m9)(t),e=(0,Ot.m9)(e),(t instanceof nn||t instanceof $s)&&(e instanceof nn||e instanceof $s)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function NA(t,e){return t=(0,Ot.m9)(t),e=(0,Ot.m9)(e),t instanceof _r&&e instanceof _r&&t.firestore===e.firestore&&lp(t._query,e._query)&&t.converter===e.converter}class xQ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new CC(this,"async_queue_retry"),this.iu=()=>{const n=Xy();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Xy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Xy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Wn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,G.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!ma(n))throw n;ne("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Pn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=zC.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&ve()}verifyOperationInProgress(){}uu(){var e=this;return(0,G.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function xA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class OQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zt extends xp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||WL(this),this._firestoreClient.terminate()}}function VQ(t,e){const n="object"==typeof t?t:(0,Gr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Gr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Ot.P0)("firestore");s&&jL(i,...s)}return i}function En(t){return t._firestoreClient||WL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function WL(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new c7(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new EQ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qL(t,e,n){const r=new Wn;return t.asyncQueue.enqueue((0,G.Z)(function*(){try{yield rv(t,n),yield DA(t,e),r.resolve()}catch(i){const s=i;if(!RL(s))throw s;si("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function GL(t){if(t._initialized||t._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(qn.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new js(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vu{constructor(e){this._methodName=e}}class av{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}const qQ=/^__.*__$/;class GQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}class ZL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Do(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class uv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return dv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(KL(this.Iu)&&qQ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ZQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rp(e)}pu(e,n,r,i=!1){return new uv({Iu:e,methodName:n,gu:r,path:en.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fu(t){const e=t._freezeSettings(),n=Rp(t._databaseId);return new ZQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cv(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);FA("Data must be an object, but it was:",o,r);const a=JL(r,o);let u,l;if(s.merge)u=new oi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Vp(e,g,n);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);e2(h,m)||h.push(m)}u=new oi(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new GQ(new mr(a),u,l)}class kp extends Vu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}function QL(t,e,n){return new uv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OA extends Vu{_toFieldTransform(e){return new pp(e.path,new ql)}isEqual(e){return e instanceof OA}}class KQ extends Vu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=QL(this,e,!0),r=this.yu.map(s=>Lu(s,n)),i=new bu(r);return new pp(e.path,i)}isEqual(e){return this===e}}class QQ extends Vu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=QL(this,e,!0),r=this.yu.map(s=>Lu(s,n)),i=new Su(r);return new pp(e.path,i)}isEqual(e){return this===e}}class YQ extends Vu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Gl(e.serializer,jV(e.serializer,this.wu));return new pp(e.path,n)}isEqual(e){return this===e}}function kA(t,e,n,r){const i=t.pu(1,e,n);FA("Data must be an object, but it was:",i,r);const s=[],o=mr.empty();_a(r,(u,l)=>{const h=lv(e,u,n);l=(0,Ot.m9)(l);const g=i.Ru(h);if(l instanceof kp)s.push(h);else{const m=Lu(l,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new oi(s);return new ZL(o,a,i.fieldTransforms)}function VA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Vp(e,r,n)],u=[i];if(s.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Vp(e,s[m])),u.push(s[m+1]);const l=[],h=mr.empty();for(let m=a.length-1;m>=0;--m)if(!e2(l,a[m])){const y=a[m];let D=u[m];D=(0,Ot.m9)(D);const b=o.Ru(y);if(D instanceof kp)l.push(y);else{const M=Lu(D,b);null!=M&&(l.push(y),h.set(y,M))}}const g=new oi(l);return new ZL(h,g,o.fieldTransforms)}function YL(t,e,n,r=!1){return Lu(n,t.pu(r?4:3,e))}function Lu(t,e){if(XL(t=(0,Ot.m9)(t)))return FA("Unsupported field value:",e,t),JL(t,e);if(t instanceof Vu)return function(r,i){if(!KL(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Lu(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Ot.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return jV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=on.fromDate(r);return{timestampValue:Ql(i.serializer,s)}}if(r instanceof on){const s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ql(i.serializer,s)}}if(r instanceof av)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof js)return{bytesValue:cF(i.serializer,r._byteString)};if(r instanceof nn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${sv(r)}`)}(t,e)}function JL(t,e){const n={};return lV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,(r,i)=>{const s=Lu(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function XL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof on||t instanceof av||t instanceof js||t instanceof nn||t instanceof Vu)}function FA(t,e,n){if(!XL(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=sv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Vp(t,e,n){if((e=(0,Ot.m9)(e))instanceof bo)return e._internalPath;if("string"==typeof e)return lv(t,e);throw dv("Field path arguments must be of type string or ",t,!1,void 0,n)}const JQ=new RegExp("[~\\*/\\[\\]]");function lv(t,e,n){if(e.search(JQ)>=0)throw dv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bo(...e.split("."))._internalPath}catch{throw dv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function e2(t,e){return t.some(n=>n.isEqual(e))}class Fp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class XQ extends Fp{data(){return super.data()}}function hv(t,e){return"string"==typeof e?lv(t,e):e instanceof bo?e._internalPath:e._delegate._internalPath}function t2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LA{}class Lp extends LA{}function Pa(t,e,...n){let r=[];e instanceof LA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof pd).length,a=s.filter(u=>u instanceof Up).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Up extends Lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Up(e,n,r)}_apply(e){const n=this._parse(e);return s2(e._query,n),new _r(e.firestore,e.converter,WD(e._query,n))}_parse(e){const n=Fu(e.firestore);return function(s,o,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){i2(g,h);const y=[];for(const D of g)y.push(r2(u,s,D));m={arrayValue:{values:y}}}else m=r2(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||i2(g,h),m=YL(a,"where",g,"in"===h||"not-in"===h);return ht.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class pd extends LA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Mt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)s2(o,u),o=WD(o,u)}(e._query,n),new _r(e.firestore,e.converter,WD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class UA extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new UA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new up(s,o)}(e._query,this._field,this._direction);return new _r(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class fv extends Lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fv(e,n,r)}_apply(e){return new _r(e.firestore,e.converter,xy(e._query,this._limit,this._limitType))}}class pv extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new pv(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new _r(e.firestore,e.converter,(s=n,new wo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class gv extends Lp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gv(e,n,r)}_apply(e){const n=n2(e,this.type,this._docOrFields,this._inclusive);return new _r(e.firestore,e.converter,(s=n,new wo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function n2(t,e,n,r){if(n[0]=(0,Ot.m9)(n[0]),n[0]instanceof Fp)return function(s,o,a,u,l){if(!u)throw new J(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of zl(s))if(g.field.isKeyField())h.push(Cu(o,u.key));else{const m=u.data.field(g.field);if(Ay(m))throw new J(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new J(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ta(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Fu(t.firestore);return function(o,a,u,l,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new J(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let D=0;D<h.length;D++){const b=h[D];if(m[D].field.isKeyField()){if("string"!=typeof b)throw new J(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!zD(o)&&-1!==b.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const M=o.path.child(mt.fromString(b));if(!le.isDocumentKey(M))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const U=new le(M);y.push(Cu(a,U))}else{const M=YL(u,l,b);y.push(M)}}return new Ta(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function r2(t,e,n){if("string"==typeof(n=(0,Ot.m9)(n))){if(""===n)throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zD(e)&&-1!==n.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cu(t,new le(r))}if(n instanceof nn)return Cu(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sv(n)}.`)}function i2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s2(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BA{convertValue(e,n="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _a(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new av(In(e.latitude),In(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=by(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ip(e));default:return null}}convertTimestamp(e){const n=ya(e);return new on(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ae(vF(r));const i=new va(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Pn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function mv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uY extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}class Uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends Fp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bp extends So{data(e={}){return super.data(e)}}class Ma{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bp(this._firestore,this._userDataWriter,r.key,r,new Uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function a2(t,e){return t instanceof So&&e instanceof So?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ma&&e instanceof Ma&&t._firestore===e._firestore&&NA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Na extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function u2(t,e,n){t=ot(t,nn);const r=ot(t.firestore,zt),i=mv(t.converter,e,n);return gd(r,[cv(Fu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,an.none())])}function c2(t,e,n,...r){t=ot(t,nn);const i=ot(t.firestore,zt),s=Fu(i);let o;return o="string"==typeof(e=(0,Ot.m9)(e))||e instanceof bo?VA(s,"updateDoc",t._key,e,n,r):kA(s,"updateDoc",t._key,e),gd(i,[o.toMutation(t._key,an.exists(!0))])}function l2(t,...e){var n,r,i;t=(0,Ot.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||xA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(xA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof nn)l=ot(t.firestore,zt),h=Hl(t._key.path),u={next:g=>{e[o]&&e[o]($A(l,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ot(t,_r);l=ot(g.firestore,zt),h=g._query;const m=new Na(l);u={next:y=>{e[o]&&e[o](new Ma(l,m,g,y))},error:e[o+1],complete:e[o+2]},t2(t._query)}return function(m,y,D,b){const M=new nv(b),U=new QC(y,M,D);return m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return WC(yield fd(m),U)})),()=>{M.Na(),m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return GC(yield fd(m),U)}))}}(En(l),h,a,u)}function gd(t,e){return function(r,i){const s=new Wn;return r.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function tQ(t,e,n){return tA.apply(this,arguments)}(yield RA(r),i,s)})),s.promise}(En(t),e)}function $A(t,e,n){const r=n.docs.get(e._key),i=new Na(t);return new So(t,i,e._key,r,new Uu(n.hasPendingWrites,n.fromCache),e.converter)}const SY={maxAttempts:5};class d2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fu(e)}set(e,n,r){this._verifyNotCommitted();const i=xa(e,this._firestore),s=mv(i.converter,n,r),o=cv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,an.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=xa(e,this._firestore);let o;return o="string"==typeof(n=(0,Ot.m9)(n))||n instanceof bo?VA(this._dataReader,"WriteBatch.update",s._key,n,r,i):kA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=xa(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(n._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xa(t,e){if((t=(0,Ot.m9)(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class RY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Fu(n)}get(n){const r=xa(n,this._firestore),i=new uY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ve();const o=s[0];if(o.isFoundDocument())return new Fp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Fp(this._firestore,i,r._key,null,r.converter);throw ve()})}set(n,r,i){const s=xa(n,this._firestore),o=mv(s.converter,r,i),a=cv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=xa(n,this._firestore);let a;return a="string"==typeof(r=(0,Ot.m9)(r))||r instanceof bo?VA(this._dataReader,"Transaction.update",o._key,r,i,s):kA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=xa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=xa(e,this._firestore),r=new Na(this._firestore);return super.get(e).then(i=>new So(this._firestore,r,n._key,i._document,new Uu(!1,!1),n.converter))}}function HA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function g2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function m2(){if(!function a7(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){kl=Gr.SDK_VERSION,(0,Gr._registerComponent)(new S1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new zt(new MZ(r.getProvider("auth-internal")),new OZ(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Gr.registerVersion)(qk,"4.4.0",e),(0,Gr.registerVersion)(qk,"4.4.0","esm2017")}();class $p{constructor(e){this._delegate=e}static fromBase64String(e){return m2(),new $p(js.fromBase64String(e))}static fromUint8Array(e){return g2(),new $p(js.fromUint8Array(e))}toBase64(){return m2(),this._delegate.toBase64()}toUint8Array(){return g2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zA(t){return function UY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class BY{enableIndexedDbPersistence(e,n){return function FQ(t,e){GL(t=ot(t,zt));const n=En(t);if(n._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new dd;return qL(n,i,new wA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function LQ(t){GL(t=ot(t,zt));const e=En(t);if(e._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new dd;return qL(e,r,new bL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UQ(t){if(t._initialized&&!t._terminated)throw new J(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(n=(0,G.Z)(function*(i){if(!ds.D())return Promise.resolve();const s=i+"main";yield ds.delete(s)}),function r(i){return n.apply(this,arguments)})(pC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class _2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof va||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){jL(this._delegate,e,n,r)}enableNetwork(){return function $Q(t){return function wQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield PL(t),n=yield ML(t);return e.setNetworkEnabled(!0),function(i){const s=ae(i);return s.C_.delete(0),Pp(s)}(n)}))}(En(t=ot(t,zt)))}(this._delegate)}disableNetwork(){return function jQ(t){return function TQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield PL(t),n=yield ML(t);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(s){const o=ae(s);o.C_.add(0),yield id(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(En(t=ot(t,zt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BQ(t){return function(n){const r=new Wn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function sQ(t,e){return oA.apply(this,arguments)}(yield RA(n),r)})),r.promise}(En(t=ot(t,zt)))}(this._delegate)}onSnapshotsInSync(e){return function vY(t,e){return function AQ(t,e){const n=new nv(e);return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield fd(t),s=n,ae(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield fd(t),s=n,void ae(i).q_.delete(s);var i,s}))}}(En(t=ot(t,zt)),xA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new md(this,HL(this._delegate,e))}catch(n){throw Qr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ki(this,ov(this._delegate,e))}catch(n){throw Qr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yr(this,function NQ(t,e){if(t=ot(t,xp),MA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _r(t,null,(r=e,new wo(mt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Qr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function PY(t,e,n){t=ot(t,zt);const r=Object.assign(Object.assign({},SY),n);return function(s){if(s.maxAttempts<1)throw new J(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Wn;return s.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const l=yield function NL(t){return iv(t).then(e=>e.datastore)}(s);new IQ(s.asyncQueue,l,a,o,u).run()})),u.promise}(En(t),i=>e(new RY(t,i)),r)}(this._delegate,n=>e(new y2(this,n)))}batch(){return En(this._delegate),new v2(new d2(this._delegate,e=>gd(this._delegate,e)))}loadBundle(e){return function HQ(t,e){const n=En(t=ot(t,zt)),r=new OQ;return function bQ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?tF().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return SL(h,g);if(h instanceof ArrayBuffer)return SL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new yQ(h,a);var h}(n,Rp(e));t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function mQ(t,e,n){const r=ae(t);var i;(i=(0,G.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(D,b){const M=ae(D),U=Mn(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.Kr.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(U)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(D=l).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);u._updateProgress(yL(l));const h=new KK(l,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield Ao(o,m.ra,void 0),yield function(D,b){const M=ae(D);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Kr.saveBundleMetadata(U,b))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return si("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var D}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield RA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zQ(t,e){return function SQ(t,e){return t.asyncQueue.enqueue((0,G.Z)(function*(){return function(r,i){const s=ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield hd(t),e)}))}(En(t=ot(t,zt)),e).then(n=>n?new _r(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Yr(this,n):null)}}class yv extends BA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(new js(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ki.forKey(n,this.firestore,null)}}class y2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new yv(e)}get(e){const n=$u(e);return this._delegate.get(n).then(r=>new jp(this._firestore,new So(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=$u(e);return r?(HA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$u(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$u(e);return this._delegate.delete(n),this}}class v2{constructor(e){this._delegate=e}set(e,n,r){const i=$u(e);return r?(HA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=$u(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=$u(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Bp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Bu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Bu(e,new yv(e),n),i.set(n,s)),s}}Bu.INSTANCES=new WeakMap;class Ki{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ki(n,new nn(n._delegate,r,new le(e)))}static forKey(e,n,r){return new Ki(n,new nn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new md(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new md(this.firestore,HL(this._delegate,e))}catch(n){throw Qr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof nn&&zL(this._delegate,e)}set(e,n){n=HA("DocumentReference.set",n);try{return n?u2(this._delegate,e,n):u2(this._delegate,e)}catch(r){throw Qr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?c2(this._delegate,e):c2(this._delegate,e,n,...r)}catch(i){throw Qr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _Y(t){return gd(ot(t.firestore,zt),[new Kl(t._key,an.none())])}(this._delegate)}onSnapshot(...e){const n=I2(e),r=E2(e,i=>new jp(this.firestore,new So(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return l2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function hY(t){t=ot(t,nn);const e=ot(t.firestore,zt),n=En(e),r=new Na(e);return function DQ(t,e){const n=new Wn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield function(h,g){const m=ae(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=ad(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new So(e,r,t._key,i,new Uu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function fY(t){t=ot(t,nn);const e=ot(t.firestore,zt);return xL(En(e),t._key,{source:"server"}).then(n=>$A(e,t,n))}(this._delegate):function dY(t){t=ot(t,nn);const e=ot(t.firestore,zt);return xL(En(e),t._key).then(n=>$A(e,t,n))}(this._delegate),n.then(r=>new jp(this.firestore,new So(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ki(this.firestore,this._delegate.withConverter(e?Bu.getInstance(this.firestore,e):null))}}function Qr(t,e,n){return t.message=t.message.replace(e,n),t}function I2(t){for(const e of t)if("object"==typeof e&&!zA(e))return e;return{}}function E2(t,e){var n,r;let i;return i=zA(t[0])?t[0]:zA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return a2(this._delegate,e._delegate)}}class Hp extends jp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function SZ(t,e){t||ve()}(void 0!==n),n}}class Yr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yv(e)}where(e,n,r){try{return new Yr(this.firestore,Pa(this._delegate,function eY(t,e,n){const r=e,i=hv("where",t);return Up._create(i,r,n)}(e,n,r)))}catch(i){throw Qr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Yr(this.firestore,Pa(this._delegate,function tY(t,e="asc"){const n=e,r=hv("orderBy",t);return UA._create(r,n)}(e,n)))}catch(r){throw Qr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yr(this.firestore,Pa(this._delegate,function nY(t){return BL("limit",t),fv._create("limit",t,"F")}(e)))}catch(n){throw Qr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Yr(this.firestore,Pa(this._delegate,function rY(t){return BL("limitToLast",t),fv._create("limitToLast",t,"L")}(e)))}catch(n){throw Qr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yr(this.firestore,Pa(this._delegate,function iY(...t){return pv._create("startAt",t,!0)}(...e)))}catch(n){throw Qr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yr(this.firestore,Pa(this._delegate,function sY(...t){return pv._create("startAfter",t,!1)}(...e)))}catch(n){throw Qr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yr(this.firestore,Pa(this._delegate,function oY(...t){return gv._create("endBefore",t,!1)}(...e)))}catch(n){throw Qr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yr(this.firestore,Pa(this._delegate,function aY(...t){return gv._create("endAt",t,!0)}(...e)))}catch(n){throw Qr(n,"endAt()","Query.endAt()")}}isEqual(e){return NA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function gY(t){t=ot(t,_r);const e=ot(t.firestore,zt),n=En(e),r=new Na(e);return function CQ(t,e){const n=new Wn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield Ky(s,o,!0),l=new EL(o,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=ad(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield hd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Ma(e,r,t,i))}(this._delegate):"server"===e?.source?function mY(t){t=ot(t,_r);const e=ot(t.firestore,zt),n=En(e),r=new Na(e);return OL(n,t._query,{source:"server"}).then(i=>new Ma(e,r,t,i))}(this._delegate):function pY(t){t=ot(t,_r);const e=ot(t.firestore,zt),n=En(e),r=new Na(e);return t2(t._query),OL(n,t._query).then(i=>new Ma(e,r,t,i))}(this._delegate),n.then(r=>new WA(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=I2(e),r=E2(e,i=>new WA(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return l2(this._delegate,n,r)}withConverter(e){return new Yr(this.firestore,this._delegate.withConverter(e?Bu.getInstance(this.firestore,e):null))}}class jY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new jY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Hp(this._firestore,r))})}isEqual(e){return a2(this._delegate,e._delegate)}}class md extends Yr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ki(this.firestore,e):null}doc(e){try{return new Ki(this.firestore,void 0===e?ov(this._delegate):ov(this._delegate,e))}catch(n){throw Qr(n,"doc()","CollectionReference.doc()")}}add(e){return function yY(t,e){const n=ot(t.firestore,zt),r=ov(t),i=mv(t.converter,e);return gd(n,[cv(Fu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ki(this.firestore,n))}isEqual(e){return zL(this._delegate,e._delegate)}withConverter(e){return new md(this.firestore,this._delegate.withConverter(e?Bu.getInstance(this.firestore,e):null))}}function $u(t){return ot(t,nn)}class qA{constructor(...e){this._delegate=new bo(...e)}static documentId(){return new qA(en.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof bo&&this._delegate._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NY(){return new OA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ju(e)}static delete(){const e=function MY(){return new kp("deleteField")}();return e._methodName="FieldValue.delete",new ju(e)}static arrayUnion(...e){const n=function xY(...t){return new KQ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new ju(n)}static arrayRemove(...e){const n=function OY(...t){return new QQ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new ju(n)}static increment(e){const n=function kY(t){return new YQ("increment",t)}(e);return n._methodName="FieldValue.increment",new ju(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HY={Firestore:_2,GeoPoint:av,Timestamp:on,Blob:$p,Transaction:y2,WriteBatch:v2,DocumentReference:Ki,DocumentSnapshot:jp,Query:Yr,QueryDocumentSnapshot:Hp,QuerySnapshot:WA,CollectionReference:md,FieldPath:qA,FieldValue:ju,setLogLevel:function $Y(t){!function bZ(t){pa.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function w2(t,e){return function qY(t,e=d1){return new We(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function GA(t,e){return w2(t,e).pipe(ge(n=>({payload:n,type:"query"})))}!function WY(t){(function zY(t,e){t.INTERNAL.registerComponent(new S1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},HY)))})(t,(e,n)=>new _2(e,n,new BY)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Q_.Z);class T2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=b2(r,n);return new A2(i,s,this.afs)}snapshotChanges(){return function GY(t,e){return w2(t,e).pipe(R_(void 0),HT(),ge(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Ti)}}function vv(t,e){return GA(t,e).pipe(R_(void 0),HT(),ge(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function D2(t,e,n){return vv(t,n).pipe(M_((r,i)=>function ZY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function KY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return ZA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Oe(),ge(r=>r.map(i=>({type:i.type,payload:i}))))}function ZA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function C2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class A2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=vv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ge(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(R_(void 0),HT(),as(([r,i])=>i.length>0||!r),ge(([,r])=>r),Ti)}auditTrail(e){return this.stateChanges(e).pipe(M_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=C2(e);return D2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return GA(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ti)}get(e){return I(this.query.get(e)).pipe(Ti)}add(e){return this.ref.add(e)}doc(e){return new T2(this.ref.doc(e),this.afs)}}class QY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?vv(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.filter(r=>e.indexOf(r.type)>-1)),as(n=>n.length>0),Ti):vv(this.query,this.afs.schedulers.outsideAngular).pipe(Ti)}auditTrail(e){return this.stateChanges(e).pipe(M_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=C2(e);return D2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ti)}valueChanges(e={}){return GA(this.query,this.afs.schedulers.outsideAngular).pipe(ge(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ti)}get(e){return I(this.query.get(e)).pipe(Ti)}}const YY=new ce("angularfire2.enableFirestorePersistence"),JY=new ce("angularfire2.firestore.persistenceSettings"),XY=new ce("angularfire2.firestore.settings"),eJ=new ce("angularfire2.firestore.use-emulator");function b2(t,e=(n=>n)){return{query:e(t),ref:t}}let tJ=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,h,g,m,y,D,b,M,U,N){this.schedulers=u;const z=jT(n,a,r),se=h;g&&A1(z,a,m,D,b,M,y,U),[this.firestore,this.persistenceEnabled$]=m1(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const de=a.runOutsideAngular(()=>z.firestore());if(s&&de.settings(s),se&&de.useEmulator(...se),i&&!d_(o)){const $e=()=>{try{return I(de.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Dt){return typeof console<"u"&&console.warn(Dt),A(!1)}};return[de,a.runOutsideAngular($e)]}return[de,A(!1)]},[s,se,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=b2(i,r),a=this.schedulers.ngZone.run(()=>s);return new A2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new QY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new T2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(BT),oe($T,8),oe(YY,8),oe(XY,8),oe(oo),oe(vt),oe(K_),oe(JY,8),oe(eJ,8),oe(b1,8),oe(I1,8),oe(E1,8),oe(w1,8),oe(T1,8),oe(D1,8),oe(C1,8),oe(UT,8))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),S2=(()=>{class t{constructor(n){this.db=n,this.path="notas",this.notasRef=n.collection(this.path),this.notasRef.valueChanges().subscribe(r=>{console.log(r)})}getAll(){return this.notasRef.valueChanges()}save(n){const r=n.etiqueta;return console.log("Nota",n),this.notasRef.doc(r).set(Object.assign({},n))}getReceta(n){return console.log("uid",n),this.db.doc(this.path+"/"+n).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(tJ))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nJ(t,e){if(1&t&&(tr(0,"li")(1,"p"),Ii(2),Sn(),tr(3,"p"),Ii(4),Sn(),tr(5,"h3",6),Ii(6),Sn()()),2&t){const n=e.$implicit;Ds(2),Hh("Ingredientes: ",n.nota,""),Ds(2),Hh("Pasos: ",n.fecha,""),Ds(1),km("routerLink","/paginas/crear/",n.etiqueta,""),Ds(1),Um(n.nombre)}}const rJ=[{path:"paginas/crear",component:(()=>{class t{constructor(n,r,i){this.fb=n,this.notasService=r,this.notasFirebaseService=i,this.formulario=this.fb.group({nota:["",Ww.required],fecha:["",Ww.required],etiqueta:["",Ww.required]})}onSubmit(){if(this.formulario.valid){const n=this.formulario.value;this.notasService.agregarReceta(n),this.notasFirebaseService.save(n),this.formulario.reset()}}static#e=this.\u0275fac=function(r){return new(r||t)(re(S9),re(u1),re(S2))};static#t=this.\u0275cmp=Vo({type:t,selectors:[["app-crear"]],decls:15,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nota"],["type","text","id","nota","formControlName","nota","required",""],["for","fecha"],["id","fecha","formControlName","fecha","required",""],["for","etiqueta"],["id","etiqueta","formControlName","etiqueta","required",""],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(tr(0,"form",0),ni("ngSubmit",function(){return i.onSubmit()}),tr(1,"div",1)(2,"label",2),Ii(3,"Nombre de la Receta:"),Sn(),ta(4,"input",3),Sn(),tr(5,"div",1)(6,"label",4),Ii(7,"Ingredientes:"),Sn(),ta(8,"textarea",5),Sn(),tr(9,"div",1)(10,"label",6),Ii(11,"Pasos:"),Sn(),ta(12,"textarea",7),Sn(),tr(13,"button",8),Ii(14,"Agregar Receta"),Sn()()),2&r&&(su("formGroup",i.formulario),Ds(13),su("disabled",i.formulario.invalid))},dependencies:[kx,g_,Ix,Ex,b_,A_,aT]})}return t})()},{path:"paginas/visualizar",component:(()=>{class t{constructor(n,r,i){this.router=n,this.notasService=r,this.notasFirebaseService=i,this.notas=[],this.terminoBusqueda="",this.notas=r.obtenerNotas(),this.listaNotas=this.notasFirebaseService.getAll()}ngOnInit(){this.notas=this.notasService.obtenerNotas()}borrarTodasLasNotas(){this.notasService.borrarNotas()}goEditar(n){console.log("editando",n),this.router.navigate(["paginas/formulario"],{queryParams:{receta:n}})}static#e=this.\u0275fac=function(r){return new(r||t)(re(wi),re(u1),re(S2))};static#t=this.\u0275cmp=Vo({type:t,selectors:[["app-visualizar"]],decls:16,vars:3,consts:[["lang","es"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[3,"click"],[1,"recipe-title"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(r,i){1&r&&(tr(0,"html",0)(1,"head")(2,"title"),Ii(3,"P\xe1gina Web de Recetas Culinarias"),Sn(),ta(4,"meta",1)(5,"meta",2),Sn(),tr(6,"body")(7,"button",3),ni("click",function(){return i.borrarTodasLasNotas()}),Ii(8,"Borrar Recetas"),Sn(),tr(9,"p",4),Ii(10,"Recetas"),Sn(),tr(11,"h2"),Ii(12,"Recetas"),Sn(),tr(13,"ul"),CE(14,nJ,7,4,"li",5),function BP(t,e){const n=dt();let r;const i=t+tt;n.firstCreatePass?(r=function Xz(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=jo(r.type)),a=vr(re);try{const u=Sc(!1),l=s();return Sc(u),function Rj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,l),l}finally{vr(a)}}(15,"async"),Sn()()()),2&r&&(Ds(14),su("ngForOf",$P(15,1,i.listaNotas)))},dependencies:[Pw,Pf,wN],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;background-color:#1a1a1a;color:#fff}button[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:10px 15px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#555}.recipe-title[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:gold}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{margin-bottom:20px}li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}li[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700;text-decoration:none;color:#fff;transition:color .3s ease}li[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:hover{color:gold}"]})}return t})()}];let iJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t});static#n=this.\u0275inj=ar({imports:[o1.forRoot(rJ),o1]})}return t})();function sJ(t,e){if(1&t&&(tr(0,"li",4)(1,"a",5),Ii(2),Sn()()),2&t){const n=e.$implicit;Ds(1),su("routerLink",n.path),Ds(1),Um(n.titulo)}}let oJ=(()=>{class t{constructor(){this.paginas=[{titulo:"Crear",path:"pages/crear"},{titulo:"Visualizar",path:"pages/visualizar"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Vo({type:t,selectors:[["app-menu"]],decls:5,vars:1,consts:[[1,"header"],[1,"container"],[1,"menu"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["href","#",3,"routerLink"]],template:function(r,i){1&r&&(tr(0,"header",0)(1,"div",1)(2,"div",2)(3,"ul",2),CE(4,sJ,3,2,"li",3),Sn()()()()),2&r&&(Ds(4),su("ngForOf",i.paginas))},dependencies:[Pw,Pf],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial,sans-serif;background-color:#1a1a1a;color:#fff}.header[_ngcontent-%COMP%]{background-color:#333;padding:15px 0}.menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu-item[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-size:16px;transition:color .3s ease}.menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}"]})}return t})(),aJ=(()=>{class t{constructor(){this.title="practicaPWA"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Vo({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&ta(0,"app-menu")(1,"router-outlet")},dependencies:[bT,oJ]})}return t})();class zp{constructor(e){return e}}class R2{constructor(){return(0,Gr.getApps)()}}const KA=new ce("angularfire2._apps"),cJ={provide:zp,useFactory:function uJ(t){return t&&1===t.length?t[0]:new zp((0,Gr.getApp)())},deps:[[new _i,KA]]},lJ={provide:R2,deps:[[new _i,KA]]};function dJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new zp(r)}}let hJ=(()=>{class t{constructor(n){(0,Gr.registerVersion)("angularfire",FT.full,"core"),(0,Gr.registerVersion)("angularfire",FT.full,"app"),(0,Gr.registerVersion)("angular",jb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(oo))};static \u0275mod=Ln({type:t});static \u0275inj=ar({providers:[cJ,lJ]})}return t})();function fJ(t,...e){return{ngModule:hJ,providers:[{provide:KA,useFactory:dJ(t),multi:!0,deps:[vt,jr,K_,...e]}]}}const pJ=p1(Gr.initializeApp,!0);Me(932);class M2{constructor(){return LT("auth")}}class JA{constructor(e){return e}}const N2="firestore",XA=new ce("angularfire2.firestore-instances");function IJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new JA(r)}}const EJ={provide:class yJ{constructor(){return LT(N2)}},deps:[[new _i,XA]]},wJ={provide:JA,useFactory:function vJ(t,e){const n=function h1(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(N2,t,e);return n&&new JA(n)},deps:[[new _i,XA],zp]};let TJ=(()=>{class t{constructor(){(0,Gr.registerVersion)("angularfire",FT.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ln({type:t});static \u0275inj=ar({providers:[wJ,EJ]})}return t})();function DJ(t,...e){return{ngModule:TJ,providers:[{provide:XA,useFactory:IJ(t),multi:!0,deps:[vt,jr,K_,R2,[new _i,M2],[new _i,UT],...e]}]}}const CJ=p1(VQ,!0);let AJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Ln({type:t,bootstrap:[aJ]});static#n=this.\u0275inj=ar({imports:[E3,iJ,R9,P9,fJ(()=>pJ({projectId:"practicapwa-63f87",appId:"1:1004037856530:web:9b4dc2167d2912fef467cb",storageBucket:"practicapwa-63f87.appspot.com",apiKey:"AIzaSyDI8mwwf6VvQlj_It2j8F0ZzYoooC53FvE",authDomain:"practicapwa-63f87.firebaseapp.com",messagingSenderId:"1004037856530",measurementId:"G-HWT214MLYM"})),DJ(()=>CJ())]})}return t})();v3().bootstrapModule(AJ).catch(t=>console.error(t))},106:(bi,wn,Me)=>{Me.d(wn,{Z:()=>Tn});var T=Me(58),q=Me(537),x=Me(534),De=Me(879);class ft{constructor(Ve,Fe){this._delegate=Ve,this.firebase=Fe,(0,x._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Ve,Fe=x._DEFAULT_ENTRY_NAME){var Nn;this._delegate.checkDestroyed();const qt=this._delegate.container.getProvider(Ve);return!qt.isInitialized()&&"EXPLICIT"===(null===(Nn=qt.getComponent())||void 0===Nn?void 0:Nn.instantiationMode)&&qt.initialize(),qt.getImmediate({identifier:Fe})}_removeServiceInstance(Ve,Fe=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Fe)}_addComponent(Ve){(0,x._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,x._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const un=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function at(){const nt=function Nt(nt){const Ve={},Fe={__esModule:!0,initializeApp:function Xe(qe,te={}){const st=x.initializeApp(qe,te);if((0,T.r3)(Ve,st.name))return Ve[st.name];const Vt=new nt(st,Fe);return Ve[st.name]=Vt,Vt},app:qt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function Sr(qe){const te=qe.name,st=te.replace("-compat","");if(x._registerComponent(qe)&&"PUBLIC"===qe.type){const Vt=(rn=qt())=>{if("function"!=typeof rn[st])throw un.create("invalid-app-argument",{appName:te});return rn[st]()};void 0!==qe.serviceProps&&(0,T.ZB)(Vt,qe.serviceProps),Fe[st]=Vt,nt.prototype[st]=function(...rn){return this._getService.bind(this,te).apply(this,qe.multipleInstances?rn:[])}}return"PUBLIC"===qe.type?Fe[st]:null},removeApp:function Nn(qe){delete Ve[qe]},useAsService:function pn(qe,te){return"serverAuth"===te?null:te},modularAPIs:x}};function qt(qe){if(!(0,T.r3)(Ve,qe=qe||x._DEFAULT_ENTRY_NAME))throw un.create("no-app",{appName:qe});return Ve[qe]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function It(){return Object.keys(Ve).map(qe=>Ve[qe])}}),qt.App=nt,Fe}(ft);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function Ve(Fe){(0,T.ZB)(nt,Fe)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),nt}(),ie=new De.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Tn=Z;!function pt(nt){(0,x.registerVersion)("@firebase/app-compat","0.2.24",nt)}()},534:(bi,wn,Me)=>{Me.r(wn),Me.d(wn,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>Ni,_DEFAULT_ENTRY_NAME:()=>di,_addComponent:()=>Mr,_addOrOverwriteComponent:()=>Nr,_apps:()=>Zn,_clearComponents:()=>ln,_components:()=>Pr,_getProvider:()=>Et,_registerComponent:()=>Fn,_removeServiceInstance:()=>xr,deleteApp:()=>gn,getApp:()=>fi,getApps:()=>An,initializeApp:()=>xi,onLog:()=>Ro,registerVersion:()=>Or,setLogLevel:()=>hs});var T=Me(861),q=Me(537),x=Me(879),De=Me(58);const ft=(k,R)=>R.some(ee=>k instanceof ee);let Wt,un;const Z=new WeakMap,ie=new WeakMap,Te=new WeakMap,je=new WeakMap,pt=new WeakMap;let Ve={get(k,R,ee){if(k instanceof IDBTransaction){if("done"===R)return ie.get(k);if("objectStoreNames"===R)return k.objectStoreNames||Te.get(k);if("store"===R)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Xe(k[R])},set:(k,R,ee)=>(k[R]=ee,!0),has:(k,R)=>k instanceof IDBTransaction&&("done"===R||"store"===R)||R in k};function qt(k){return"function"==typeof k?function Nn(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return un||(un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...R){return k.apply(It(this),R),Xe(Z.get(this))}:function(...R){return Xe(k.apply(It(this),R))}:function(R,...ee){const me=k.call(It(this),R,...ee);return Te.set(me,R.sort?R.sort():[R]),Xe(me)}}(k):(k instanceof IDBTransaction&&function nt(k){if(ie.has(k))return;const R=new Promise((ee,me)=>{const Ke=()=>{k.removeEventListener("complete",et),k.removeEventListener("error",H),k.removeEventListener("abort",H)},et=()=>{ee(),Ke()},H=()=>{me(k.error||new DOMException("AbortError","AbortError")),Ke()};k.addEventListener("complete",et),k.addEventListener("error",H),k.addEventListener("abort",H)});ie.set(k,R)}(k),ft(k,function Nt(){return Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ve):k)}function Xe(k){if(k instanceof IDBRequest)return function Tn(k){const R=new Promise((ee,me)=>{const Ke=()=>{k.removeEventListener("success",et),k.removeEventListener("error",H)},et=()=>{ee(Xe(k.result)),Ke()},H=()=>{me(k.error),Ke()};k.addEventListener("success",et),k.addEventListener("error",H)});return R.then(ee=>{ee instanceof IDBCursor&&Z.set(ee,k)}).catch(()=>{}),pt.set(R,k),R}(k);if(je.has(k))return je.get(k);const R=qt(k);return R!==k&&(je.set(k,R),pt.set(R,k)),R}const It=k=>pt.get(k),qe=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],st=new Map;function Vt(k,R){if(!(k instanceof IDBDatabase)||R in k||"string"!=typeof R)return;if(st.get(R))return st.get(R);const ee=R.replace(/FromIndex$/,""),me=R!==ee,Ke=te.includes(ee);if(!(ee in(me?IDBIndex:IDBObjectStore).prototype)||!Ke&&!qe.includes(ee))return;const et=function(){var H=(0,T.Z)(function*(Kt,...Ee){const Qe=this.transaction(Kt,Ke?"readwrite":"readonly");let ka=Qe.store;return me&&(ka=ka.index(Ee.shift())),(yield Promise.all([ka[ee](...Ee),Ke&&Qe.done]))[0]});return function(Ee){return H.apply(this,arguments)}}();return st.set(R,et),et}!function Fe(k){Ve=k(Ve)}(k=>({...k,get:(R,ee,me)=>Vt(R,ee)||k.get(R,ee,me),has:(R,ee)=>!!Vt(R,ee)||k.has(R,ee)}));class rn{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function cn(k){const R=k.getComponent();return"VERSION"===R?.type}(ee)){const me=ee.getImmediate();return`${me.library}/${me.version}`}return null}).filter(ee=>ee).join(" ")}}const ui="@firebase/app",We=new x.Yd("@firebase/app"),di="[DEFAULT]",hi={[ui]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zn=new Map,Pr=new Map;function Mr(k,R){try{k.container.addComponent(R)}catch(ee){We.debug(`Component ${R.name} failed to register with FirebaseApp ${k.name}`,ee)}}function Nr(k,R){k.container.addOrOverwriteComponent(R)}function Fn(k){const R=k.name;if(Pr.has(R))return We.debug(`There were multiple attempts to register component ${R}.`),!1;Pr.set(R,k);for(const ee of Zn.values())Mr(ee,k);return!0}function Et(k,R){const ee=k.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),k.container.getProvider(R)}function xr(k,R,ee=di){Et(k,R).clearInstance(ee)}function ln(){Pr.clear()}const Zt=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dn{constructor(R,ee,me){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=me,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const Ni="10.7.0";function xi(k,R={}){let ee=k;"object"!=typeof R&&(R={name:R});const me=Object.assign({name:di,automaticDataCollectionEnabled:!1},R),Ke=me.name;if("string"!=typeof Ke||!Ke)throw Zt.create("bad-app-name",{appName:String(Ke)});if(ee||(ee=(0,De.aH)()),!ee)throw Zt.create("no-options");const et=Zn.get(Ke);if(et){if((0,De.vZ)(ee,et.options)&&(0,De.vZ)(me,et.config))return et;throw Zt.create("duplicate-app",{appName:Ke})}const H=new q.H0(Ke);for(const Ee of Pr.values())H.addComponent(Ee);const Kt=new dn(ee,me,H);return Zn.set(Ke,Kt),Kt}function fi(k=di){const R=Zn.get(k);if(!R&&k===di&&(0,De.aH)())return xi();if(!R)throw Zt.create("no-app",{appName:k});return R}function An(){return Array.from(Zn.values())}function gn(k){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,T.Z)(function*(k){const R=k.name;Zn.has(R)&&(Zn.delete(R),yield Promise.all(k.container.getProviders().map(ee=>ee.delete())),k.isDeleted=!0)})).apply(this,arguments)}function Or(k,R,ee){var me;let Ke=null!==(me=hi[k])&&void 0!==me?me:k;ee&&(Ke+=`-${ee}`);const et=Ke.match(/\s|\//),H=R.match(/\s|\//);if(et||H){const Kt=[`Unable to register library "${Ke}" with version "${R}":`];return et&&Kt.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),et&&H&&Kt.push("and"),H&&Kt.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void We.warn(Kt.join(" "))}Fn(new q.wA(`${Ke}-version`,()=>({library:Ke,version:R}),"VERSION"))}function Ro(k,R){if(null!==k&&"function"!=typeof k)throw Zt.create("invalid-log-argument");(0,x.Am)(k,R)}function hs(k){(0,x.Ub)(k)}const Hs="firebase-heartbeat-database",Oi=1,S="firebase-heartbeat-store";let C=null;function I(){return C||(C=function Sr(k,R,{blocked:ee,upgrade:me,blocking:Ke,terminated:et}={}){const H=indexedDB.open(k,R),Kt=Xe(H);return me&&H.addEventListener("upgradeneeded",Ee=>{me(Xe(H.result),Ee.oldVersion,Ee.newVersion,Xe(H.transaction),Ee)}),ee&&H.addEventListener("blocked",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee)),Kt.then(Ee=>{et&&Ee.addEventListener("close",()=>et()),Ke&&Ee.addEventListener("versionchange",Qe=>Ke(Qe.oldVersion,Qe.newVersion,Qe))}).catch(()=>{}),Kt}(Hs,Oi,{upgrade:(k,R)=>{0===R&&k.createObjectStore(S)}}).catch(k=>{throw Zt.create("idb-open",{originalErrorMessage:k.message})})),C}function v(){return(v=(0,T.Z)(function*(k){try{return yield(yield I()).transaction(S).objectStore(S).get(ye(k))}catch(R){if(R instanceof De.ZR)We.warn(R.message);else{const ee=Zt.create("idb-get",{originalErrorMessage:R?.message});We.warn(ee.message)}}})).apply(this,arguments)}function A(k,R){return W.apply(this,arguments)}function W(){return(W=(0,T.Z)(function*(k,R){try{const me=(yield I()).transaction(S,"readwrite");yield me.objectStore(S).put(R,ye(k)),yield me.done}catch(ee){if(ee instanceof De.ZR)We.warn(ee.message);else{const me=Zt.create("idb-set",{originalErrorMessage:ee?.message});We.warn(me.message)}}})).apply(this,arguments)}function ye(k){return`${k.name}!${k.options.appId}`}class lt{constructor(R){this.container=R,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new Ce(ee),this._heartbeatsCachePromise=this._storage.read().then(me=>(this._heartbeatsCache=me,me))}triggerHeartbeat(){var R=this;return(0,T.Z)(function*(){var ee,me;const et=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=he();if((null!=(null===(ee=R._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(me=R._heartbeatsCache)||void 0===me?void 0:me.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==H&&!R._heartbeatsCache.heartbeats.some(Kt=>Kt.date===H))return R._heartbeatsCache.heartbeats.push({date:H,agent:et}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(Kt=>{const Ee=new Date(Kt.date).valueOf();return Date.now()-Ee<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,T.Z)(function*(){var ee;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(ee=R._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const me=he(),{heartbeatsToSend:Ke,unsentEntries:et}=function Ct(k,R=1024){const ee=[];let me=k.slice();for(const Ke of k){const et=ee.find(H=>H.agent===Ke.agent);if(et){if(et.dates.push(Ke.date),xn(ee)>R){et.dates.pop();break}}else if(ee.push({agent:Ke.agent,dates:[Ke.date]}),xn(ee)>R){ee.pop();break}me=me.slice(1)}return{heartbeatsToSend:ee,unsentEntries:me}}(R._heartbeatsCache.heartbeats),H=(0,De.L)(JSON.stringify({version:2,heartbeats:Ke}));return R._heartbeatsCache.lastSentHeartbeatDate=me,et.length>0?(R._heartbeatsCache.heartbeats=et,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),H})()}}function he(){return(new Date).toISOString().substring(0,10)}class Ce{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,De.hl)()&&(0,De.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,T.Z)(function*(){if(yield R._canUseIndexedDBPromise){const me=yield function w(k){return v.apply(this,arguments)}(R.app);return me?.heartbeats?me:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var ee=this;return(0,T.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const et=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(me=R.lastSentHeartbeatDate)&&void 0!==me?me:et.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var ee=this;return(0,T.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const et=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(me=R.lastSentHeartbeatDate)&&void 0!==me?me:et.lastSentHeartbeatDate,heartbeats:[...et.heartbeats,...R.heartbeats]})}})()}}function xn(k){return(0,De.L)(JSON.stringify({version:2,heartbeats:k})).length}!function zs(k){Fn(new q.wA("platform-logger",R=>new rn(R),"PRIVATE")),Fn(new q.wA("heartbeat",R=>new lt(R),"PRIVATE")),Or(ui,"0.9.24",k),Or(ui,"0.9.24","esm2017"),Or("fire-js","")}("")},537:(bi,wn,Me)=>{Me.d(wn,{H0:()=>Nt,wA:()=>x});var T=Me(861),q=Me(58);class x{constructor(Z,ie,Te){this.name=Z,this.instanceFactory=ie,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const De="[DEFAULT]";class ft{constructor(Z,ie){this.name=Z,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ie=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ie)){const Te=new q.BH;if(this.instancesDeferred.set(ie,Te),this.isInitialized(ie)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:ie});je&&Te.resolve(je)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Z){var ie;const Te=this.normalizeInstanceIdentifier(Z?.identifier),je=null!==(ie=Z?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(pt){if(je)return null;throw pt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function un(at){return"EAGER"===at.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:De})}catch{}for(const[ie,Te]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(ie);try{const pt=this.getOrInitializeService({instanceIdentifier:je});Te.resolve(pt)}catch{}}}}clearInstance(Z=De){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,T.Z)(function*(){const ie=Array.from(Z.instances.values());yield Promise.all([...ie.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ie.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=De){return this.instances.has(Z)}getOptions(Z=De){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ie={}}=Z,Te=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Te,options:ie});for(const[pt,Tn]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(pt)&&Tn.resolve(je);return je}onInit(Z,ie){var Te;const je=this.normalizeInstanceIdentifier(ie),pt=null!==(Te=this.onInitCallbacks.get(je))&&void 0!==Te?Te:new Set;pt.add(Z),this.onInitCallbacks.set(je,pt);const Tn=this.instances.get(je);return Tn&&Z(Tn,je),()=>{pt.delete(Z)}}invokeOnInitCallbacks(Z,ie){const Te=this.onInitCallbacks.get(ie);if(Te)for(const je of Te)try{je(Z,ie)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ie={}}){let Te=this.instances.get(Z);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(at=Z,at===De?void 0:at),options:ie}),this.instances.set(Z,Te),this.instancesOptions.set(Z,ie),this.invokeOnInitCallbacks(Te,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Te)}catch{}var at;return Te||null}normalizeInstanceIdentifier(Z=De){return this.component?this.component.multipleInstances?Z:De:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nt{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ie=this.getProvider(Z.name);if(ie.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ie.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ie=new ft(Z,this);return this.providers.set(Z,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(bi,wn,Me)=>{Me.d(wn,{Am:()=>at,Ub:()=>Nt,Yd:()=>un,in:()=>q});const T=[];var q=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(q||{});const x={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},De=q.INFO,ft={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Wt=(Z,ie,...Te)=>{if(ie<Z.logLevel)return;const je=(new Date).toISOString(),pt=ft[ie];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[pt](`[${je}]  ${Z.name}:`,...Te)};class un{constructor(ie){this.name=ie,this._logLevel=De,this._logHandler=Wt,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in q))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?x[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...ie),this._logHandler(this,q.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...ie),this._logHandler(this,q.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,q.INFO,...ie),this._logHandler(this,q.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,q.WARN,...ie),this._logHandler(this,q.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...ie),this._logHandler(this,q.ERROR,...ie)}}function Nt(Z){T.forEach(ie=>{ie.setLogLevel(Z)})}function at(Z,ie){for(const Te of T){let je=null;ie&&ie.level&&(je=x[ie.level]),Te.userLogHandler=null===Z?null:(pt,Tn,...nt)=>{const Ve=nt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Tn>=(je??pt.logLevel)&&Z({level:q[Tn].toLowerCase(),message:Ve,args:nt,type:pt.name})}}}},365:(bi,wn,Me)=>{Me.r(wn);var T=Me(861),q=Me(106),x=Me(932),De=Me(58),un=(Me(534),Me(879),Me(537));function Nt(){return window}function ie(){return ie=(0,T.Z)(function*(I,w,v){var A;const{BuildInfo:W}=Nt();(0,x.au)(w.sessionId,"AuthEvent did not contain a session ID");const ye=yield function Fe(I){return Nn.apply(this,arguments)}(w.sessionId),Ie={};return(0,x.av)()?Ie.ibi=W.packageName:(0,x.aw)()?Ie.apn=W.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(Ie.appDisplayName=W.displayName),Ie.sessionId=ye,(0,x.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,Ie)}),ie.apply(this,arguments)}function je(){return(je=(0,T.Z)(function*(I){const{BuildInfo:w}=Nt(),v={};(0,x.av)()?v.iosBundleId=w.packageName:(0,x.aw)()?v.androidPackageName=w.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),yield(0,x.az)(I,v)})).apply(this,arguments)}function nt(){return(nt=(0,T.Z)(function*(I,w,v){const{cordova:A}=Nt();let W=()=>{};try{yield new Promise((ye,Ie)=>{let Oe=null;function lt(){var Ce;ye();const xn=null===(Ce=A.plugins.browsertab)||void 0===Ce?void 0:Ce.close;"function"==typeof xn&&xn(),"function"==typeof v?.close&&v.close()}function he(){Oe||(Oe=window.setTimeout(()=>{Ie((0,x.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&he()}w.addPassiveListener(lt),document.addEventListener("resume",he,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",Ct,!1),W=()=>{w.removePassiveListener(lt),document.removeEventListener("resume",he,!1),document.removeEventListener("visibilitychange",Ct,!1),Oe&&window.clearTimeout(Oe)}})}finally{W()}})).apply(this,arguments)}function Nn(){return(Nn=(0,T.Z)(function*(I){const w=function qt(I){if((0,x.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class It extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,T.Z)(function*(){yield w.initPromise})()}}function qe(I){return te.apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(I){const w=yield rn()._get(cn(I));return w&&(yield rn()._remove(cn(I))),w})).apply(this,arguments)}function Vt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function rn(){return(0,x.aE)(x.b)}function cn(I){return(0,x.aF)("authEvent",I.config.apiKey,I.name)}function We(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,De.zd)(v.join("?"))}const L=class Si{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new It(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,x.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var ye=this;return(0,T.Z)(function*(){!function Ve(I){var w,v,A,W,ye,Ie,Oe,lt,he,Ct;const Ce=Nt();(0,x.aC)("function"==typeof(null===(w=Ce?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(v=Ce?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(ye=null===(W=null===(A=Ce?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===ye?void 0:ye.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(lt=null===(Oe=null===(Ie=Ce?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===lt?void 0:lt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Ct=null===(he=Ce?.cordova)||void 0===he?void 0:he.InAppBrowser)||void 0===Ct?void 0:Ct.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const Ie=yield ye._initialize(w);yield Ie.initialized(),Ie.resetRedirect(),(0,x.aI)(),yield ye._originValidation(w);const Oe=function Sr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Vt(),postBody:null,tenantId:I.tenantId,error:(0,x.aB)(I,"no-auth-event")}}(w,A,W);yield function pn(I,w){return rn()._set(cn(I),w)}(w,Oe);const lt=yield function Z(I,w,v){return ie.apply(this,arguments)}(w,Oe,v),he=yield function pt(I){const{cordova:w}=Nt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,x.aA)()?"_blank":"_system","location=yes"),v(W)})})}(lt);return function Tn(I,w,v){return nt.apply(this,arguments)}(w,Ie,he)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Te(I){return je.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:ye}=Nt(),Ie=setTimeout((0,T.Z)(function*(){yield qe(w),v.onEvent($())}),500),Oe=function(){var Ct=(0,T.Z)(function*(Ce){clearTimeout(Ie);const xn=yield qe(w);let zs=null;xn&&Ce?.url&&(zs=function st(I,w){var v,A;const W=function ci(I){const w=We(I),v=w.link?decodeURIComponent(w.link):void 0,A=We(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return We(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const ye=We(W),Ie=ye.firebaseError?function ui(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(ye.firebaseError)):null,Oe=null===(A=null===(v=Ie?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],lt=Oe?(0,x.aB)(Oe):null;return lt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(xn,Ce.url)),v.onEvent(zs||$())});return function(xn){return Ct.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Oe);const lt=W,he=`${ye.packageName.toLowerCase()}://`;Nt().handleOpenURL=function(){var Ct=(0,T.Z)(function*(Ce){if(Ce.toLowerCase().startsWith(he)&&Oe({url:Ce}),"function"==typeof lt)try{lt(Ce)}catch(xn){console.error(xn)}});return function(Ce){return Ct.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ue(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function ge(I=(0,De.z$)()){return!("file:"!==ue()&&"ionic:"!==ue()&&"capacitor:"!==ue()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gt(){try{const I=self.localStorage,w=x.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function bt(I=(0,De.z$)()){return function ut(){return(0,De.w1)()&&11===document?.documentMode}()||function Lt(I=(0,De.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,De.hl)()}catch{return Dn()&&(0,De.hl)()}return!1}function Dn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cn(){return(function Je(){return"http:"===ue()||"https:"===ue()}()||(0,De.ru)()||ge())&&!function Se(){return(0,De.b$)()||(0,De.UG)()}()&&Gt()&&!Dn()}function Vn(){return ge()&&typeof document<"u"}function li(){return(li=(0,T.Z)(function*(){return!!Vn()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const ct={LOCAL:"local",NONE:"none",SESSION:"session"},Pi=x.aC,Mi="persistence";function hi(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,T.Z)(function*(I){yield I._initializationPromise;const w=Mr(),v=x.aF(Mi,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Mr(){var I;try{return(null===(I=function Ri(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Nr=x.aC;class Fn{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(L),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var ye=this;return(0,T.Z)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var ye=this;return(0,T.Z)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Vn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,T.Z)(function*(){if(w.underlyingResolver)return;const v=yield function yr(){return li.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function Et(I){return I.unwrap()}function ln(I){return Zt(I)}function Zt(I){const{_tokenResponse:w}=I instanceof De.ZR?I.customData:I;if(!w)return null;if(!(I instanceof De.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return x.P.credentialFromResult(I);const v=w.providerId;if(!v||v===x.p.PASSWORD)return null;let A;switch(v){case x.p.GOOGLE:A=x.X;break;case x.p.FACEBOOK:A=x.W;break;case x.p.GITHUB:A=x.Y;break;case x.p.TWITTER:A=x.$;break;default:const{oauthIdToken:W,oauthAccessToken:ye,oauthTokenSecret:Ie,pendingToken:Oe,nonce:lt}=w;return ye||Ie||W||Oe?Oe?v.startsWith("saml.")?x.aQ._create(v,Oe):x.N._fromParams({providerId:v,signInMethod:v,pendingToken:Oe,idToken:W,accessToken:ye}):new x.Z(v).credential({idToken:W,accessToken:ye,rawNonce:lt}):null}return I instanceof De.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function dn(I,w){return w.catch(v=>{throw v instanceof De.ZR&&function Oa(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new fi(I,x.as(I,w));else if(A){const W=Zt(w),ye=w;W&&(ye.credential=W,ye.tenantId=A.tenantId||void 0,ye.email=A.email||void 0,ye.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:ln(v),additionalUserInfo:x.aq(v),user:An.getOrCreate(W)}})}function Ni(I,w){return xi.apply(this,arguments)}function xi(){return(xi=(0,T.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>dn(I,v.confirm(A))}})).apply(this,arguments)}class fi{constructor(w,v){this.resolver=v,this.auth=function xr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return dn(Et(this.auth),this.resolver.resolveSignIn(w))}}class An{constructor(w){this._delegate=w,this.multiFactor=x.at(w)}static getOrCreate(w){return An.USER_MAP.has(w)||An.USER_MAP.set(w,new An(w)),An.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,T.Z)(function*(){return dn(v.auth,x.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,T.Z)(function*(){return Ni(A.auth,x.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,T.Z)(function*(){return dn(v.auth,x.d(v._delegate,w,Fn))})()}linkWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield hi(x.aJ(v.auth)),x.g(v._delegate,w,Fn)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,T.Z)(function*(){return dn(v.auth,x.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return Ni(this.auth,x.r(this._delegate,w,v))}reauthenticateWithPopup(w){return dn(this.auth,x.e(this._delegate,w,Fn))}reauthenticateWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield hi(x.aJ(v.auth)),x.h(v._delegate,w,Fn)})()}sendEmailVerification(w){return x.ag(this._delegate,w)}unlink(w){var v=this;return(0,T.Z)(function*(){return yield x.ap(v._delegate,w),v})()}updateEmail(w){return x.al(this._delegate,w)}updatePassword(w){return x.am(this._delegate,w)}updatePhoneNumber(w){return x.u(this._delegate,w)}updateProfile(w){return x.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return x.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}An.USER_MAP=new WeakMap;const gn=x.aC;let Kn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;gn(W,"invalid-api-key",{appName:v.name}),gn(W,"invalid-api-key",{appName:v.name});const ye=typeof window<"u"?Fn:void 0;this._delegate=A.initialize({options:{persistence:Ro(W,v.name),popupRedirectResolver:ye}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?An.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){x.K(this._delegate,v,A)}applyActionCode(v){return x.a7(this._delegate,v)}checkActionCode(v){return x.a8(this._delegate,v)}confirmPasswordReset(v,A){return x.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,T.Z)(function*(){return dn(W._delegate,x.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return x.af(this._delegate,v)}isSignInWithEmailLink(v){return x.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,T.Z)(function*(){gn(Cn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield x.j(v._delegate,Fn);return A?dn(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function j(I,w){(0,x.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:ye,error:Ie,complete:Oe}=Or(v,A,W);return this._delegate.onAuthStateChanged(ye,Ie,Oe)}onIdTokenChanged(v,A,W){const{next:ye,error:Ie,complete:Oe}=Or(v,A,W);return this._delegate.onIdTokenChanged(ye,Ie,Oe)}sendSignInLinkToEmail(v,A){return x.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return x.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,T.Z)(function*(){let W;switch(function di(I,w){Pi(Object.values(ct).includes(w),I,"invalid-persistence-type"),(0,De.b$)()?Pi(w!==ct.SESSION,I,"unsupported-persistence-type"):(0,De.UG)()?Pi(w===ct.NONE,I,"unsupported-persistence-type"):Dn()?Pi(w===ct.NONE||w===ct.LOCAL&&(0,De.hl)(),I,"unsupported-persistence-type"):Pi(w===ct.NONE||Gt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case ct.SESSION:W=x.a;break;case ct.LOCAL:W=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case ct.NONE:W=x.U;break;default:return x.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return dn(this._delegate,x.a0(this._delegate))}signInWithCredential(v){return dn(this._delegate,x.a1(this._delegate,v))}signInWithCustomToken(v){return dn(this._delegate,x.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return dn(this._delegate,x.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return dn(this._delegate,x.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Ni(this._delegate,x.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,T.Z)(function*(){return gn(Cn(),A._delegate,"operation-not-supported-in-this-environment"),dn(A._delegate,x.c(A._delegate,v,Fn))})()}signInWithRedirect(v){var A=this;return(0,T.Z)(function*(){return gn(Cn(),A._delegate,"operation-not-supported-in-this-environment"),yield hi(A._delegate),x.f(A._delegate,v,Fn)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return x.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=ct,I})();function Or(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:Ie=>W(Ie&&An.getOrCreate(Ie)),error:w,complete:v}}function Ro(I,w){const v=function Pr(I,w){const v=Mr();if(!v)return[];const A=x.aF(Mi,I,w);switch(v.getItem(A)){case ct.NONE:return[x.U];case ct.LOCAL:return[x.i,x.a];case ct.SESSION:return[x.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(x.i)&&v.push(x.i),typeof window<"u")for(const A of[x.b,x.a])v.includes(A)||v.push(A);return v.includes(x.U)||v.push(x.U),v}class hs{constructor(){this.providerId="phone",this._delegate=new x.P(Et(q.Z.auth()))}static credential(w,v){return x.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}hs.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,hs.PROVIDER_ID=x.P.PROVIDER_ID;const Hs=x.aC;class Oi{constructor(w,v,A=q.Z.app()){var W;Hs(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new x.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function C(I){I.INTERNAL.registerComponent(new un.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Kn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:hs,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:Oi,TwitterAuthProvider:x.$,Auth:Kn,AuthCredential:x.L,Error:De.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.5.0")}(q.Z)},861:(bi,wn,Me)=>{function T(x,De,ft,Wt,un,Nt,at){try{var Z=x[Nt](at),ie=Z.value}catch(Te){return void ft(Te)}Z.done?De(ie):Promise.resolve(ie).then(Wt,un)}function q(x){return function(){var De=this,ft=arguments;return new Promise(function(Wt,un){var Nt=x.apply(De,ft);function at(ie){T(Nt,Wt,un,at,Z,"next",ie)}function Z(ie){T(Nt,Wt,un,at,Z,"throw",ie)}at(void 0)})}}Me.d(wn,{Z:()=>q})},582:(bi,wn,Me)=>{function De(L,$){var j={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&$.indexOf(V)<0&&(j[V]=L[V]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(V=Object.getOwnPropertySymbols(L);Q<V.length;Q++)$.indexOf(V[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,V[Q])&&(j[V[Q]]=L[V[Q]])}return j}function Te(L,$,j,V){return new(j||(j=Promise))(function(K,ue){function Je(ut){try{Se(V.next(ut))}catch(Lt){ue(Lt)}}function ge(ut){try{Se(V.throw(ut))}catch(Lt){ue(Lt)}}function Se(ut){ut.done?K(ut.value):function Q(K){return K instanceof j?K:new j(function(ue){ue(K)})}(ut.value).then(Je,ge)}Se((V=V.apply(L,$||[])).next())})}function Xe(L){return this instanceof Xe?(this.v=L,this):new Xe(L)}function It(L,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,V=j.apply(L,$||[]),K=[];return Q={},ue("next"),ue("throw"),ue("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ue(bt){V[bt]&&(Q[bt]=function(Gt){return new Promise(function(Dn,Cn){K.push([bt,Gt,Dn,Cn])>1||Je(bt,Gt)})})}function Je(bt,Gt){try{!function ge(bt){bt.value instanceof Xe?Promise.resolve(bt.value.v).then(Se,ut):Lt(K[0][2],bt)}(V[bt](Gt))}catch(Dn){Lt(K[0][3],Dn)}}function Se(bt){Je("next",bt)}function ut(bt){Je("throw",bt)}function Lt(bt,Gt){bt(Gt),K.shift(),K.length&&Je(K[0][0],K[0][1])}}function pn(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=L[Symbol.asyncIterator];return $?$.call(L):(L=function nt(L){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&L[$],V=0;if(j)return j.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),j={},V("next"),V("throw"),V("return"),j[Symbol.asyncIterator]=function(){return this},j);function V(K){j[K]=L[K]&&function(ue){return new Promise(function(Je,ge){!function Q(K,ue,Je,ge){Promise.resolve(ge).then(function(Se){K({value:Se,done:Je})},ue)}(Je,ge,(ue=L[K](ue)).done,ue.value)})}}}Me.d(wn,{FC:()=>It,KL:()=>pn,_T:()=>De,mG:()=>Te,qq:()=>Xe}),"function"==typeof SuppressedError&&SuppressedError}},bi=>{bi(bi.s=272)}]);