"use strict";(self.webpackChunkpracticaPWA=self.webpackChunkpracticaPWA||[]).push([[179],{932:(Pi,Cn,Me)=>{Me.d(Cn,{$:()=>og,A:()=>ie,G:()=>pt,K:()=>Vv,L:()=>xo,N:()=>$r,P:()=>Ic,R:()=>Pg,U:()=>me,V:()=>Nd,W:()=>nc,X:()=>vi,Y:()=>Li,Z:()=>jr,_:()=>Fo,a:()=>ji,a0:()=>kd,a1:()=>ac,a2:()=>$d,a3:()=>lg,a4:()=>$v,a5:()=>jn,a6:()=>Uo,a7:()=>dg,a8:()=>$a,a9:()=>jv,aA:()=>Ke,aB:()=>Et,aC:()=>ne,aD:()=>zi,aE:()=>W,aF:()=>Oe,aG:()=>Xa,aH:()=>kg,aI:()=>Zo,aJ:()=>Jt,aN:()=>gn,aQ:()=>ts,aa:()=>pe,ab:()=>jt,ac:()=>Ii,ad:()=>nr,ae:()=>Bo,af:()=>Be,ag:()=>hg,ah:()=>pn,ak:()=>ja,al:()=>Ts,am:()=>ns,ap:()=>ag,aq:()=>za,as:()=>M0,at:()=>V0,au:()=>Lt,av:()=>_e,aw:()=>k,ax:()=>Xe,ay:()=>Qo,az:()=>Ug,b:()=>zv,c:()=>Ds,d:()=>Og,e:()=>rI,f:()=>sI,g:()=>Wn,h:()=>dt,i:()=>_c,j:()=>Hi,k:()=>Kg,l:()=>eI,m:()=>_I,p:()=>xt,r:()=>tI,s:()=>Mg,u:()=>Ot});var T=Me(861),q=Me(58),x=Me(534),Ce=Me(879),ft=Me(582),Gt=Me(537);const xt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Dn=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new Ce.Yd("@firebase/auth");function Zt(f,...c){Fe.logLevel<=Ce.in.ERROR&&Fe.error(`Auth (${x.SDK_VERSION}): ${f}`,...c)}function Xe(f,...c){throw qe(f,...c)}function Et(f,...c){return qe(f,...c)}function xr(f,c,d){const p=Object.assign(Object.assign({},Dn()),{[c]:d});return new q.LL("auth","Firebase",p).create(c,{appName:f.name})}function mn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&Xe(f,"argument-error"),xr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return rt.create(f,...c)}function ne(f,c,...d){if(!f)throw qe(c,...d)}function ot(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Zt(c),new Error(c)}function Lt(f,c){f||ot(c)}function on(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function hn(){return"http:"===fi()||"https:"===fi()}function fi(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Or{constructor(c,d){this.shortDelay=c,this.longDelay=d,Lt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function pi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(hn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mi(f,c){Lt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j=new Or(3e4,6e4);function V(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,T.Z)(function*(f,c,d,p,_={}){return ae(f,_,(0,T.Z)(function*(){let E={},P={};p&&("GET"===c?P=p:E={body:JSON.stringify(p)});const F=(0,q.xO)(Object.assign({key:f.config.apiKey},P)).slice(1),X=yield f._getAdditionalHeaders();return X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode),L.fetch()(at(f,f.config.apiHost,d,F),Object.assign({method:c,headers:X,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ae(f,c,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,T.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},$),c);try{const _=new St(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const P=yield E.json();if("needConfirmation"in P)throw Kt(f,"account-exists-with-different-credential",P);if(E.ok&&!("errorMessage"in P))return P;{const F=E.ok?P.errorMessage:P.error.message,[X,ye]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Kt(f,"credential-already-in-use",P);if("EMAIL_EXISTS"===X)throw Kt(f,"email-already-in-use",P);if("USER_DISABLED"===X)throw Kt(f,"user-disabled",P);const Pe=p[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(ye)throw xr(f,Pe,ye);Xe(f,Pe)}}catch(_){if(_ instanceof q.ZR)throw _;Xe(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function de(f,c,d,p){return Re.apply(this,arguments)}function Re(){return(Re=(0,T.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&Xe(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function at(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Mi(f.config,_):`${f.config.apiScheme}://${_}`}function Bt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class St{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Et(this.auth,"network-request-failed")),j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Et(f,c,p);return _.customData._tokenResponse=d,_}function An(f){return void 0!==f&&void 0!==f.getResponse}function bn(f){return void 0!==f&&void 0!==f.enterprise}class Bn{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Bt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function gi(){return(gi=(0,T.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ni(f,c){return et.apply(this,arguments)}function et(){return(et=(0,T.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",V(f,c))})).apply(this,arguments)}function Oi(){return(Oi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function _i(){return(_i=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function kr(){return(kr=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Vr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function yt(){return(yt=(0,T.Z)(function*(f,c=!1){const d=(0,q.m9)(f),p=yield d.getIdToken(c),_=fn(p);ne(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,P=E?.sign_in_provider;return{claims:_,token:p,authTime:Vr(Lr(_.auth_time)),issuedAtTime:Vr(Lr(_.iat)),expirationTime:Vr(Lr(_.exp)),signInProvider:P||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Lr(f){return 1e3*Number(f)}function fn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,q.tV)(d);return _?JSON.parse(_):(Zt("Failed to decode base64 JWT payload"),null)}catch(_){return Zt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Qt(f,c){return an.apply(this,arguments)}function an(){return(an=(0,T.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof q.ZR&&function ki({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Vi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,T.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class yi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(f){return _n.apply(this,arguments)}function _n(){return _n=(0,T.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Qt(f,function Yn(f,c){return kr.apply(this,arguments)}(d,{idToken:p}));ne(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const P=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function ms(f){return f.map(c=>{var{providerId:d}=c,p=(0,ft._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],F=function No(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,P),Pe=!!f.isAnonymous&&!(f.email&&E.passwordHash||F?.length),st={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:F,metadata:new yi(E.createdAt,E.lastLoginAt),isAnonymous:Pe};Object.assign(f,st)}),_n.apply(this,arguments)}function Ur(){return(Ur=(0,T.Z)(function*(f){const c=(0,q.m9)(f);yield Sn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Fi(){return(Fi=(0,T.Z)(function*(f,c){const d=yield ae(f,{},(0,T.Z)(function*(){const p=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,P=at(f,_,"/v1/token",`key=${E}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(P,{method:"POST",headers:F,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,T.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",V(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ne(c.idToken,"internal-error"),ne(typeof c.idToken<"u","internal-error"),ne(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Va(f){const c=fn(f);return ne(c,"internal-error"),ne(typeof c.exp<"u","internal-error"),ne(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,T.Z)(function*(){return ne(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,T.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:P}=yield function qs(f,c){return Fi.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(P))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,P=new I;return p&&(ne("string"==typeof p,"internal-error",{appName:c}),P.refreshToken=p),_&&(ne("string"==typeof _,"internal-error",{appName:c}),P.accessToken=_),E&&(ne("number"==typeof E,"internal-error",{appName:c}),P.expirationTime=E),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return ot("not implemented")}}function w(f,c){ne("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,ft._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new yi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,T.Z)(function*(){const p=yield Qt(d,d.stsTokenManager.getToken(d.auth,c));return ne(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function $n(f){return yt.apply(this,arguments)}(this,c)}reload(){return function Jn(f){return Ur.apply(this,arguments)}(this)}_assign(c){this!==c&&(ne(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,T.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Sn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.Z)(function*(){const d=yield c.getIdToken();return yield Qt(c,function xi(f,c){return Oi.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,P,F,X,ye,Pe;const st=null!==(p=d.displayName)&&void 0!==p?p:void 0,pr=null!==(_=d.email)&&void 0!==_?_:void 0,ss=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,iu=null!==(P=d.photoURL)&&void 0!==P?P:void 0,Yg=null!==(F=d.tenantId)&&void 0!==F?F:void 0,Xo=null!==(X=d._redirectEventId)&&void 0!==X?X:void 0,bs=null!==(ye=d.createdAt)&&void 0!==ye?ye:void 0,Jg=null!==(Pe=d.lastLoginAt)&&void 0!==Pe?Pe:void 0,{uid:xc,emailVerified:vh,isAnonymous:ea,providerData:Ih,stsTokenManager:ir}=d;ne(xc&&ir,c,"internal-error");const EI=I.fromJSON(this.name,ir);ne("string"==typeof xc,c,"internal-error"),w(st,c.name),w(pr,c.name),ne("boolean"==typeof vh,c,"internal-error"),ne("boolean"==typeof ea,c,"internal-error"),w(ss,c.name),w(iu,c.name),w(Yg,c.name),w(Xo,c.name),w(bs,c.name),w(Jg,c.name);const Rn=new v({uid:xc,auth:c,email:pr,emailVerified:vh,displayName:st,isAnonymous:ea,photoURL:iu,phoneNumber:ss,tenantId:Yg,stsTokenManager:EI,createdAt:bs,lastLoginAt:Jg});return Ih&&Array.isArray(Ih)&&(Rn.providerData=Ih.map(Eh=>Object.assign({},Eh))),Xo&&(Rn._redirectEventId=Xo),Rn}static _fromIdTokenResponse(c,d,p=!1){return(0,T.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Sn(E),E})()}}const A=new Map;function W(f){Lt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Lt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const me=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,T.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,T.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Oe(f,c,d){return`firebase:${f}:${c}:${d}`}class lt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Oe(this.userKey,_.apiKey,E),this.fullPersistenceKey=Oe("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,T.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,T.Z)(function*(){if(!d.length)return new lt(W(me),c,p);const _=(yield Promise.all(d.map(function(){var ye=(0,T.Z)(function*(Pe){if(yield Pe._isAvailable())return Pe});return function(Pe){return ye.apply(this,arguments)}}()))).filter(ye=>ye);let E=_[0]||W(me);const P=Oe(p,c.config.apiKey,c.name);let F=null;for(const ye of d)try{const Pe=yield ye._get(P);if(Pe){const st=v._fromJSON(c,Pe);ye!==E&&(F=st),E=ye;break}}catch{}const X=_.filter(ye=>ye._shouldAllowMigration);return E._shouldAllowMigration&&X.length?(E=X[0],F&&(yield E._set(P,F.toJSON())),yield Promise.all(d.map(function(){var ye=(0,T.Z)(function*(Pe){if(Pe!==E)try{yield Pe._remove(P)}catch{}});return function(Pe){return ye.apply(this,arguments)}}())),new lt(E,c,p)):new lt(E,c,p)})()}}function fe(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Gs(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(R(c))return"Blackberry";if(te(c))return"Webos";if(De(c))return"Safari";if((c.includes("chrome/")||kn(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Dt(f=(0,q.z$)()){return/firefox\//i.test(f)}function De(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function kn(f=(0,q.z$)()){return/crios\//i.test(f)}function Gs(f=(0,q.z$)()){return/iemobile/i.test(f)}function k(f=(0,q.z$)()){return/android/i.test(f)}function R(f=(0,q.z$)()){return/blackberry/i.test(f)}function te(f=(0,q.z$)()){return/webos/i.test(f)}function _e(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ke(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function Yt(f=(0,q.z$)()){return _e(f)||k(f)||te(f)||R(f)||/windows phone/i.test(f)||Gs(f)}function Qe(f,c=[]){let d;switch(f){case"Browser":d=fe((0,q.z$)());break;case"Worker":d=`${fe((0,q.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${x.SDK_VERSION}/${p}`}class Fa{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((P,F)=>{try{P(c(E))}catch(X){F(X)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,T.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function Id(){return(Id=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",V(f,c))})).apply(this,arguments)}class Br{constructor(c){var d,p,_,E;const P=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=P.minPasswordLength)&&void 0!==d?d:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,P,F;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(d=X.meetsMinPasswordLength)||void 0===d||d),X.isValid&&(X.isValid=null===(p=X.meetsMaxPasswordLength)||void 0===p||p),X.isValid&&(X.isValid=null===(_=X.containsLowercaseLetter)||void 0===_||_),X.isValid&&(X.isValid=null===(E=X.containsUppercaseLetter)||void 0===E||E),X.isValid&&(X.isValid=null===(P=X.containsNumericCharacter)||void 0===P||P),X.isValid&&(X.isValid=null===(F=X.containsNonAlphanumericCharacter)||void 0===F||F),X}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class w0{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new Fa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,T.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield lt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,T.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,P=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,X=E?._redirectEventId,ye=yield d.tryRedirectSignIn(c);(!F||F===X)&&ye?.user&&(E=ye.user,P=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(P)try{yield d.beforeStateQueue.runMiddleware(E)}catch(F){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return ne(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,T.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,T.Z)(function*(){try{yield Sn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Le(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,T.Z)(function*(){const p=c?(0,q.m9)(c):null;return p&&ne(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return c&&ne(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,T.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,T.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.Z)(function*(){const d=yield function E0(f){return Id.apply(this,arguments)}(c),p=new Br(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,T.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function S(f,c){return D.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,T.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,T.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;ne(p,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,T.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,T.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,T.Z)(function*(){if(c===d.currentUser)return d.queue((0,T.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let P=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(F,this,"internal-error"),F.then(()=>{P||E(this.currentUser)}),"function"==typeof d){const X=c.addObserver(d,p,_);return()=>{P=!0,X()}}{const X=c.addObserver(d);return()=>{P=!0,X()}}}directlySetCurrentUser(c){var d=this;return(0,T.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Qe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,T.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function On(f,...c){Fe.logLevel<=Ce.in.WARN&&Fe.warn(`Auth (${x.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Jt(f){return(0,q.m9)(f)}class Nv{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(d=>this.observer=d)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yp(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=Et("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function Zs(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function xv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class kv{constructor(c){this.type="recaptcha-enterprise",this.auth=Jt(c)}verify(c="verify",d=!1){var p=this;return(0,T.Z)(function*(){function E(){return E=(0,T.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var X=(0,T.Z)(function*(ye,Pe){Ni(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const pr=new Bn(st);return null==F.tenantId?F._agentRecaptchaConfig=pr:F._tenantRecaptchaConfigs[F.tenantId]=pr,ye(pr.siteKey)}Pe(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{Pe(st)})});return function(ye,Pe){return X.apply(this,arguments)}}())}),E.apply(this,arguments)}function P(F,X,ye){const Pe=window.grecaptcha;bn(Pe)?Pe.enterprise.ready(()=>{Pe.enterprise.execute(F,{action:c}).then(st=>{X(st)}).catch(()=>{X("NO_RECAPTCHA")})}):ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,X)=>{(function _(F){return E.apply(this,arguments)})(p.auth).then(ye=>{if(!d&&bn(window.grecaptcha))P(ye,F,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));Yp("https://www.google.com/recaptcha/enterprise.js?render="+ye).then(()=>{P(ye,F,X)}).catch(Pe=>{X(Pe)})}}).catch(ye=>{X(ye)})})})()}}function Jp(f,c,d){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,T.Z)(function*(f,c,d,p=!1){const _=new kv(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const P=Object.assign({},c);return Object.assign(P,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Xn(f,c,d,p){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,T.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Jp(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,T.Z)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield Jp(f,c,d,"getOobCode"===d);return p(f,F)}return Promise.reject(P)});return function(P){return E.apply(this,arguments)}}())}),Ne.apply(this,arguments)}function Vv(f,c,d){const p=Jt(f);ne(p._canInitEmulator,p,"emulator-config-failed"),ne(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=er(c),{host:P,port:F}=function Gu(f){const c=er(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:tg(p.substr(E.length+1))}}{const[E,P]=p.split(":");return{host:E,port:tg(P)}}}(c);p.config.emulator={url:`${E}//${P}${null===F?"":`:${F}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:P,port:F,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function ng(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function er(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function tg(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class xo{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ot("not implemented")}_getIdTokenResponse(c){return ot("not implemented")}_linkToIdToken(c,d){return ot("not implemented")}_getReauthenticationResolver(c){return ot("not implemented")}}function La(f,c){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",V(f,c))})).apply(this,arguments)}function Zu(){return(Zu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fv(f,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ku(){return(Ku=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",V(f,c))})).apply(this,arguments)}function Tr(f,c){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPassword",V(f,c))})).apply(this,arguments)}function Cd(f,c){return At.apply(this,arguments)}function At(){return(At=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",V(f,c))})).apply(this,arguments)}function rg(){return(rg=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function ue(f,c){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function Dd(f,c){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function bd(){return(bd=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function ig(){return(ig=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}function sg(){return(sg=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}class Ju extends xo{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Ju(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Ju(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,T.Z)(function*(){switch(d.signInMethod){case"password":return Xn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Tr);case"emailLink":return function Sd(f,c){return ig.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:Xe(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return Xn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fv);case"emailLink":return function S0(f,c){return sg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:Xe(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function _s(f,c){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithIdp",V(f,c))})).apply(this,arguments)}class $r extends xo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new $r(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):Xe("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,ft._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const P=new $r(p,_);return P.idToken=E.idToken||void 0,P.accessToken=E.accessToken||void 0,P.secret=E.secret,P.nonce=E.nonce,P.pendingToken=E.pendingToken||null,P}_getIdTokenResponse(c){return _s(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,_s(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,_s(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,q.xO)(d)}return c}}function Pd(){return(Pd=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",V(f,c))})).apply(this,arguments)}function Xu(){return(Xu=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c))})).apply(this,arguments)}function Md(){return(Md=(0,T.Z)(function*(f,c){const d=yield de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c));if(d.temporaryProof)throw Kt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ys={USER_NOT_FOUND:"user-not-found"};function oe(){return(oe=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),ys)})).apply(this,arguments)}class vs extends xo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new vs({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new vs({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Uv(f,c){return Xu.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function ko(f,c){return Md.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Bv(f,c){return oe.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new vs({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Qs{constructor(c){var d,p,_,E,P,F;const X=(0,q.zd)((0,q.pd)(c)),ye=null!==(d=X.apiKey)&&void 0!==d?d:null,Pe=null!==(p=X.oobCode)&&void 0!==p?p:null,st=function we(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=X.mode)&&void 0!==_?_:null);ne(ye&&Pe&&st,"argument-error"),this.apiKey=ye,this.operation=st,this.code=Pe,this.continueUrl=null!==(E=X.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(P=X.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(F=X.tenantId)&&void 0!==F?F:null}static parseLink(c){const d=function ec(f){const c=(0,q.zd)((0,q.pd)(f)).link,d=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,p=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(p?(0,q.zd)((0,q.pd)(p)).link:null)||p||d||c||f}(c);try{return new Qs(d)}catch{return null}}}let Nd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Ju._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Qs.parseLink(p);return ne(_,"argument-error"),Ju._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class es{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Vo extends es{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class jr extends Vo{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return ne("providerId"in d&&"signInMethod"in d,"argument-error"),$r._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ne(c.idToken||c.accessToken,"argument-error"),$r._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return jr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return jr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:P,providerId:F}=c;if(!p&&!_&&!d&&!E||!F)return null;try{return new jr(F)._credential({idToken:d,accessToken:p,nonce:P,pendingToken:E})}catch{return null}}}let nc=(()=>{class f extends Vo{constructor(){super("facebook.com")}static credential(d){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),vi=(()=>{class f extends Vo{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Li=(()=>{class f extends Vo{constructor(){super("github.com")}static credential(d){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class ts extends xo{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return _s(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,_s(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,_s(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new ts(p,E):null}static _create(c,d){return new ts(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fo extends es{constructor(c){ne(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Fo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Fo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=ts.fromJSON(c);return ne(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return ts._create(p,d)}catch{return null}}}let og=(()=>{class f extends Vo{constructor(){super("twitter.com")}static credential(d,p){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Ui(f,c){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signUp",V(f,c))})).apply(this,arguments)}class Hr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,T.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),P=Od(p);return new Hr({user:E,providerId:P,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,T.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Od(p);return new Hr({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Od(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function kd(f){return rc.apply(this,arguments)}function rc(){return(rc=(0,T.Z)(function*(f){var c;const d=Jt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Hr({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Ui(d,{returnSecureToken:!0}),_=yield Hr._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class Ba extends q.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,Ba.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new Ba(c,d,p,_)}}function Lo(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Ba._fromErrorAndOperation(f,E,c,p):E})}function Vd(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ag(f,c){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);yield sc(!0,d,c);const{providerUserInfo:p}=yield function mi(f,c){return _i.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Vd(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Fd.apply(this,arguments)}function ic(f,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,T.Z)(function*(f,c,d=!1){const p=yield Qt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Hr._forOperation(f,"link",p)})).apply(this,arguments)}function sc(f,c,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,T.Z)(function*(f,c,d){yield Sn(c);const _=!1===f?"provider-already-linked":"no-such-provider";ne(Vd(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function ug(f,c){return oc.apply(this,arguments)}function oc(){return(oc=(0,T.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Qt(f,Lo(p,_,c,f),d);ne(E.idToken,p,"internal-error");const P=fn(E.idToken);ne(P,p,"internal-error");const{sub:F}=P;return ne(f.uid===F,p,"user-mismatch"),Hr._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&Xe(p,"user-mismatch"),E}})).apply(this,arguments)}function cg(f,c){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,T.Z)(function*(f,c,d=!1){const p="signIn",_=yield Lo(f,p,c),E=yield Hr._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function ac(f,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,T.Z)(function*(f,c){return cg(Jt(f),c)})).apply(this,arguments)}function $d(f,c){return jd.apply(this,arguments)}function jd(){return(jd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);return yield sc(!1,d,c.providerId),ic(d,c)})).apply(this,arguments)}function lg(f,c){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,T.Z)(function*(f,c){return ug((0,q.m9)(f),c)})).apply(this,arguments)}function zd(){return(zd=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithCustomToken",V(f,c))})).apply(this,arguments)}function $v(f,c){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,T.Z)(function*(f,c){const d=Jt(f),p=yield function Js(f,c){return zd.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Hr._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),Wd.apply(this,arguments)}class Vn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?qd._fromServerResponse(c,d):"totpInfo"in d?uc._fromServerResponse(c,d):Xe(c,"internal-error")}}class qd extends Vn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new qd(d)}}class uc extends Vn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new uc(d)}}function xe(f,c,d){var p;ne((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),ne(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ne(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(ne(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function tr(f){return it.apply(this,arguments)}function it(){return(it=(0,T.Z)(function*(f){const c=Jt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function jn(f,c,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,T.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xe(p,_,d),yield Xn(p,_,"getOobCode",ue)})).apply(this,arguments)}function Uo(f,c,d){return dr.apply(this,arguments)}function dr(){return dr=(0,T.Z)(function*(f,c,d){yield La((0,q.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&tr(f),_});return function(_){return p.apply(this,arguments)}}())}),dr.apply(this,arguments)}function dg(f,c){return cc.apply(this,arguments)}function cc(){return cc=(0,T.Z)(function*(f,c){yield function Td(f,c){return Ku.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),cc.apply(this,arguments)}function $a(f,c){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),p=yield La(d,{oobCode:c}),_=p.requestType;switch(ne(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(p.mfaInfo,d,"internal-error");default:ne(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Vn._fromServerResponse(Jt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function jv(f,c){return $t.apply(this,arguments)}function $t(){return($t=(0,T.Z)(function*(f,c){const{data:d}=yield $a((0,q.m9)(f),c);return d.email})).apply(this,arguments)}function pe(f,c,d){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,T.Z)(function*(f,c,d){const p=Jt(f),P=yield Xn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ui).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&tr(f),X}),F=yield Hr._fromIdTokenResponse(p,"signIn",P);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}function jt(f,c,d){return ac((0,q.m9)(f),Nd.credential(c,d)).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&tr(f),_});return function(_){return p.apply(this,arguments)}}())}function Ii(f,c,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,T.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(P,F){ne(F.handleCodeInApp,p,"argument-error"),F&&xe(p,P,F)})(_,d),yield Xn(p,_,"getOobCode",Dd)})).apply(this,arguments)}function nr(f,c){const d=Qs.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function Bo(f,c,d){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=Nd.credentialWithLink(c,d||on());return ne(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),ac(p,_)})).apply(this,arguments)}function Es(){return(Es=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",V(f,c))})).apply(this,arguments)}function Be(f,c){return eo.apply(this,arguments)}function eo(){return eo=(0,T.Z)(function*(f,c){const p={identifier:c,continueUri:hn()?on():"http://localhost"},{signinMethods:_}=yield function Is(f,c){return Es.apply(this,arguments)}((0,q.m9)(f),p);return _||[]}),eo.apply(this,arguments)}function hg(f,c){return ws.apply(this,arguments)}function ws(){return ws=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&xe(d.auth,_,c);const{email:E}=yield function b0(f,c){return rg.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),ws.apply(this,arguments)}function pn(f,c,d){return to.apply(this,arguments)}function to(){return to=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&xe(p.auth,E,d);const{email:P}=yield function Ad(f,c){return bd.apply(this,arguments)}(p.auth,E);P!==f.email&&(yield f.reload())}),to.apply(this,arguments)}function ri(){return(ri=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ja(f,c){return lc.apply(this,arguments)}function lc(){return lc=(0,T.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,q.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},P=yield Qt(p,function $o(f,c){return ri.apply(this,arguments)}(p.auth,E));p.displayName=P.displayName||null,p.photoURL=P.photoUrl||null;const F=p.providerData.find(({providerId:X})=>"password"===X);F&&(F.displayName=p.displayName,F.photoURL=p.photoURL),yield p._updateTokensIfNecessary(P)}),lc.apply(this,arguments)}function Ts(f,c){return jo((0,q.m9)(f),c,null)}function ns(f,c){return jo((0,q.m9)(f),null,c)}function jo(f,c,d){return no.apply(this,arguments)}function no(){return no=(0,T.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const P=yield Qt(f,function wd(f,c){return Zu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(P,!0)}),no.apply(this,arguments)}class Ha{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class dc extends Ha{constructor(c,d,p,_){super(c,d,p),this.username=_}}class fg extends Ha{constructor(c,d){super(c,"facebook.com",d)}}class Bi extends dc{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class hc extends Ha{constructor(c,d){super(c,"google.com",d)}}class Ho extends dc{constructor(c,d,p){super(c,"twitter.com",d,p)}}function za(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function nt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const P=null===(d=null===(c=fn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(P)return new Ha(E,"anonymous"!==P&&"custom"!==P?P:null)}if(!p)return null;switch(p){case"facebook.com":return new fg(E,_);case"github.com":return new Bi(E,_);case"google.com":return new hc(E,_);case"twitter.com":return new Ho(E,_,f.screenName||null);case"custom":case"anonymous":return new Ha(E,null);default:return new Ha(E,p,_)}}(d)}class io{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new io("enroll",c,d)}static _fromMfaPendingCredential(c){return new io("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return io._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return io._fromIdtoken(c.multiFactorSession.idToken)}return null}}class gg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Jt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(F=>Vn._fromServerResponse(p,F));ne(_.mfaPendingCredential,p,"internal-error");const P=io._fromMfaPendingCredential(_.mfaPendingCredential);return new gg(P,E,function(){var F=(0,T.Z)(function*(X){const ye=yield X._process(p,P);delete _.mfaInfo,delete _.mfaPendingCredential;const Pe=Object.assign(Object.assign({},_),{idToken:ye.idToken,refreshToken:ye.refreshToken});switch(d.operationType){case"signIn":const st=yield Hr._fromIdTokenResponse(p,d.operationType,Pe);return yield p._updateCurrentUser(st.user),st;case"reauthenticate":return ne(d.user,p,"internal-error"),Hr._forOperation(d.user,d.operationType,Pe);default:Xe(p,"internal-error")}});return function(X){return F.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,T.Z)(function*(){return d.signInResolver(c)})()}}function M0(f,c){var d;const p=(0,q.m9)(f),_=c;return ne(c.customData.operationType,p,"argument-error"),ne(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),gg._fromError(p,_)}class mg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Vn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new mg(c)}getSession(){var c=this;return(0,T.Z)(function*(){return io._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,T.Z)(function*(){const _=c,E=yield p.getSession(),P=yield Qt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(P),p.user.reload()})()}unenroll(c){var d=this;return(0,T.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Qt(d.user,function k0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",V(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:P})=>P!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const _g=new WeakMap;function V0(f){const c=(0,q.m9)(f);return _g.has(c)||_g.set(c,mg._fromUser(c)),_g.get(c)}const Yd="__sak";class Hv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const zv=(()=>{class f extends Hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yg(){const f=(0,q.z$)();return De(f)||_e(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((F,X,ye)=>{this.notifyListeners(F,ye)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(_);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const F=this.storage.getItem(_);!p&&this.localCache[_]===F||this.notifyListeners(_,F)},P=this.storage.getItem(_);!function H(){return(0,q.w1)()&&10===document.documentMode}()||P===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,T.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,T.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,T.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),ji=(()=>{class f extends Hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let U0=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,T.Z)(function*(){const _=d,{eventId:E,eventType:P,data:F}=_.data,X=p.handlersMap[P];if(!X?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:P});const ye=Array.from(X).map(function(){var st=(0,T.Z)(function*(pr){return pr(_.origin,F)});return function(pr){return st.apply(this,arguments)}}()),Pe=yield function L0(f){return Promise.all(f.map(function(){var c=(0,T.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(ye);_.ports[0].postMessage({status:"done",eventId:E,eventType:P,response:Pe})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function gn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class fc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,T.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let P,F;return new Promise((X,ye)=>{const Pe=gn("",20);E.port1.start();const st=setTimeout(()=>{ye(new Error("unsupported_event"))},p);F={messageChannel:E,onMessage(pr){const ss=pr;if(ss.data.eventId===Pe)switch(ss.data.status){case"ack":clearTimeout(st),P=setTimeout(()=>{ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),X(ss.data.response);break;default:clearTimeout(st),clearTimeout(P),ye(new Error("invalid_response"))}}},_.handlers.add(F),E.port1.addEventListener("message",F.onMessage),_.target.postMessage({eventType:c,eventId:Pe,data:d},[E.port2])}).finally(()=>{F&&_.removeMessageHandler(F)})})()}}function vt(){return window}function pc(){return typeof vt().WorkerGlobalScope<"u"&&"function"==typeof vt().importScripts}function gc(){return(gc=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mc="firebaseLocalStorageDb",Wa="firebaseLocalStorage",eh="fbase_key";class Wo{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function so(f,c){return f.transaction([Wa],c?"readwrite":"readonly").objectStore(Wa)}function Cs(){const f=indexedDB.open(mc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(Wa,{keyPath:eh})}catch(_){d(_)}}),f.addEventListener("success",(0,T.Z)(function*(){const p=f.result;p.objectStoreNames.contains(Wa)?c(p):(p.close(),yield function qa(){const f=indexedDB.deleteDatabase(mc);return new Wo(f).toPromise()}(),c(yield Cs()))}))})}function th(f,c,d){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,T.Z)(function*(f,c,d){const p=so(f,!0).put({[eh]:c,value:d});return new Wo(p).toPromise()})).apply(this,arguments)}function Cg(){return(Cg=(0,T.Z)(function*(f,c){const d=so(f,!1).get(c),p=yield new Wo(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Dg(f,c){const d=so(f,!0).delete(c);return new Wo(d).toPromise()}const _c=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.Z)(function*(){return d.db||(d.db=yield Cs()),d.db})()}_withRetries(d){var p=this;return(0,T.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.Z)(function*(){return pc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.Z)(function*(){d.receiver=U0._getInstance(function wg(){return pc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,T.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,T.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function Eg(){return gc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new fc(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,T.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Jd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Cs();return yield th(d,Yd,"1"),yield Dg(d,Yd),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,T.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,T.Z)(function*(){return _._withPendingWrite((0,T.Z)(function*(){return yield _._withRetries(E=>th(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=yield p._withRetries(E=>function B0(f,c){return Cg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,T.Z)(function*(){return p._withPendingWrite((0,T.Z)(function*(){return yield p._withRetries(_=>Dg(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.Z)(function*(){const p=yield d._withRetries(P=>{const F=so(P,!1).getAll();return new Wo(F).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;for(const{fbase_key:P,value:F}of p)E.add(P),JSON.stringify(d.localCache[P])!==JSON.stringify(F)&&(d.notifyListeners(P,F),_.push(P));for(const P of Object.keys(d.localCache))d.localCache[P]&&!E.has(P)&&(d.notifyListeners(P,null),_.push(P));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Ga=1e12;class Ag{constructor(c){this.auth=c,this.counter=Ga,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new Kv(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Ga;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Ga))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,T.Z)(function*(){var p;return null===(p=d._widgets.get(c||Ga))||void 0===p||p.execute(),""})()}}class Kv{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;ne(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rh=xv("rcb"),bg=new Or(3e4,6e4);class Sg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=vt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return ne(function Jv(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&An(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((p,_)=>{const E=vt().setTimeout(()=>{_(Et(c,"network-request-failed"))},bg.get());vt()[rh]=()=>{vt().clearTimeout(E),delete vt()[rh];const F=vt().grecaptcha;if(!F||!An(F))return void _(Et(c,"internal-error"));const X=F.render;F.render=(ye,Pe)=>{const st=X(ye,Pe);return this.counter++,st},this.hostLanguage=d,p(F)},Yp(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:rh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(Et(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=vt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class z0{load(c){return(0,T.Z)(function*(){return new Ag(c)})()}clearedOneInstance(){}}const Rg="recaptcha",ii={theme:"light",type:"image"};class Pg{constructor(c,d,p=Object.assign({},ii)){this.parameters=p,this.type=Rg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jt(c),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;ne(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new z0:new Sg,this.validateStartingState()}verify(){var c=this;return(0,T.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const P=F=>{F&&(c.tokenChangeListeners.delete(P),E(F))};c.tokenChangeListeners.add(P),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=vt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.Z)(function*(){ne(hn()&&!pc(),c.auth,"internal-error"),yield function Xv(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function wr(f){return gi.apply(this,arguments)}(c.auth);ne(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ih{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=vs._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Mg(f,c,d){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(f,c,d){const p=Jt(f),_=yield Ka(p,c,(0,q.m9)(d));return new ih(_,E=>ac(p,E))})).apply(this,arguments)}function eI(f,c,d){return Za.apply(this,arguments)}function Za(){return(Za=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);yield sc(!1,p,"phone");const _=yield Ka(p.auth,c,(0,q.m9)(d));return new ih(_,E=>$d(p,E))})).apply(this,arguments)}function tI(f,c,d){return si.apply(this,arguments)}function si(){return(si=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=yield Ka(p.auth,c,(0,q.m9)(d));return new ih(_,E=>lg(p,E))})).apply(this,arguments)}function Ka(f,c,d){return vc.apply(this,arguments)}function vc(){return vc=(0,T.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(ne("string"==typeof _,f,"argument-error"),ne(d.type===Rg,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const P=E.session;if("phoneNumber"in E)return ne("enroll"===P.type,f,"internal-error"),(yield function N0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",V(f,c))}(f,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{ne("signin"===P.type,f,"internal-error");const F=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return ne(F,f,"missing-multi-factor-info"),(yield function Gv(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",V(f,c))}(f,{mfaPendingCredential:P.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function Lv(f,c){return Pd.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return P}}finally{d._reset()}}),vc.apply(this,arguments)}function Ot(f,c){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,T.Z)(function*(f,c){yield ic((0,q.m9)(f),c)})).apply(this,arguments)}let Ic=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Jt(d)}verifyPhoneNumber(d,p){return Ka(this.auth,d,(0,q.m9)(p))}static credential(d,p){return vs._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?vs._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function yn(f,c){return c?W(c):(ne(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class sh extends xo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return _s(c,this._buildIdpRequest())}_linkToIdToken(c,d){return _s(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return _s(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Ng(f){return cg(f.auth,new sh(f),f.bypassAuthState)}function qo(f){const{auth:c,user:d}=f;return ne(d,c,"internal-error"),ug(d,new sh(f),f.bypassAuthState)}function qr(f){return oh.apply(this,arguments)}function oh(){return(oh=(0,T.Z)(function*(f){const{auth:c,user:d}=f;return ne(d,c,"internal-error"),ic(d,new sh(f),f.bypassAuthState)})).apply(this,arguments)}class xg{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,T.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,T.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:P,error:F,type:X}=c;if(F)return void d.reject(F);const ye={auth:d.auth,requestUri:p,sessionId:_,tenantId:P||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(X)(ye))}catch(Pe){d.reject(Pe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Ng;case"linkViaPopup":case"linkViaRedirect":return qr;case"reauthViaPopup":case"reauthViaRedirect":return qo;default:Xe(this.auth,"internal-error")}}resolve(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nI=new Or(2e3,1e4);function Ds(f,c,d){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,T.Z)(function*(f,c,d){const p=Jt(f);mn(f,c,es);const _=yn(p,d);return new ah(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function rI(f,c,d){return wc.apply(this,arguments)}function wc(){return(wc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es);const _=yn(p.auth,d);return new ah(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Og(f,c,d){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es);const _=yn(p.auth,d);return new ah(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let ah=(()=>{class f extends xg{constructor(d,p,_,E,P){super(d,p,E,P),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.Z)(function*(){const p=yield d.execute();return ne(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,T.Z)(function*(){Lt(1===d.filter.length,"Popup operations only handle one event");const p=gn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Et(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,nI.get())};d()}}return f.currentPopupAction=null,f})();const ke="pendingRedirect",Go=new Map;class W0 extends xg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,T.Z)(function*(){let p=Go.get(d.auth._key());if(!p){try{const E=(yield function iI(f,c){return uh.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Go.set(d.auth._key(),p)}return d.bypassAuthState||Go.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,T.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function uh(){return(uh=(0,T.Z)(function*(f,c){const d=Fg(c),p=Vg(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function ch(f,c){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,T.Z)(function*(f,c){return Vg(f)._set(Fg(c),"true")})).apply(this,arguments)}function Zo(){Go.clear()}function kg(f,c){Go.set(f._key(),c)}function Vg(f){return W(f._redirectPersistence)}function Fg(f){return Oe(ke,f.config.apiKey,f.name)}function sI(f,c,d){return function oI(f,c,d){return Y.apply(this,arguments)}(f,c,d)}function Y(){return(Y=(0,T.Z)(function*(f,c,d){const p=Jt(f);mn(f,c,es),yield p._initializationPromise;const _=yn(p,d);return yield ch(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function dt(f,c,d){return function lh(f,c,d){return Ya.apply(this,arguments)}(f,c,d)}function Ya(){return(Ya=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield ch(_,p.auth);const E=yield aI(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Wn(f,c,d){return function Lg(f,c,d){return oo.apply(this,arguments)}(f,c,d)}function oo(){return(oo=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield sc(!1,p,c.providerId),yield ch(_,p.auth);const E=yield aI(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function Hi(f,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,T.Z)(function*(f,c){return yield Jt(f)._initializationPromise,Xa(f,c,!1)})).apply(this,arguments)}function Xa(f,c){return dh.apply(this,arguments)}function dh(){return(dh=(0,T.Z)(function*(f,c,d=!1){const p=Jt(f),_=yn(p,c),P=yield new W0(p,_,d).execute();return P&&!d&&(delete P.user._redirectEventId,yield p._persistUserIfCurrent(P.user),yield p._setRedirectUser(null,c)),P})).apply(this,arguments)}function aI(f){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,T.Z)(function*(f){const c=gn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class zi{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function rs(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ao(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!ao(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Et(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hh(c))}saveEventToCache(c){this.cachedEventUids.add(hh(c)),this.lastProcessedEventTime=Date.now()}}function hh(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function ao({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Ug(f){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const uI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cI=/^https?/;function eu(){return(eu=(0,T.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Ug(f);for(const d of c)try{if(Bg(d))return}catch{}Xe(f,"unauthorized-domain")})).apply(this,arguments)}function Bg(f){const c=on(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const P=new URL(f);return""===P.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&P.hostname===p}if(!cI.test(d))return!1;if(uI.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const ph=new Or(3e4,6e4);function $g(){const f=vt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Ko=null;const zg=new Or(5e3,15e3),Wg="__/auth/iframe",qg="emulator/auth/iframe",gh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dI(f){const c=f.config;ne(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Mi(c,qg):`https://${f.config.authDomain}/${Wg}`,p={apiKey:c.apiKey,appName:f.name,v:x.SDK_VERSION},_=lI.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,q.xO)(p).slice(1)}`}function is(){return is=(0,T.Z)(function*(f){const c=yield function Hg(f){return Ko=Ko||function jg(f){return new Promise((c,d)=>{var p,_,E;function P(){$g(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{$g(),d(Et(f,"network-request-failed"))},timeout:ph.get()})}if(null!==(_=null===(p=vt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=vt().gapi)||void 0===E||!E.load){const F=xv("iframefcb");return vt()[F]=()=>{gapi.load?P():d(Et(f,"network-request-failed"))},Yp(`https://apis.google.com/js/api.js?onload=${F}`).catch(X=>d(X))}P()}}).catch(c=>{throw Ko=null,c})}(f),Ko}(f),d=vt().gapi;return ne(d,f,"internal-error"),c.open({where:document.body,url:dI(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gh,dontclear:!0},p=>new Promise(function(){var _=(0,T.Z)(function*(E,P){yield p.restyle({setHideOnLeave:!1});const F=Et(f,"network-request-failed"),X=vt().setTimeout(()=>{P(F)},zg.get());function ye(){vt().clearTimeout(X),E(p)}p.ping(ye).then(ye,()=>{P(F)})});return function(E,P){return _.apply(this,arguments)}}()))}),is.apply(this,arguments)}const en={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const As="__/auth/handler",mI="emulator/auth/handler",Sc=encodeURIComponent("fac");function Qo(f,c,d,p,_,E){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,T.Z)(function*(f,c,d,p,_,E){ne(f.config.authDomain,f,"auth-domain-config-required"),ne(f.config.apiKey,f,"invalid-api-key");const P={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:x.SDK_VERSION,eventId:_};if(c instanceof es){c.setDefaultLanguage(f.languageCode),P.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(P.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Pe,st]of Object.entries(E||{}))P[Pe]=st}if(c instanceof Vo){const Pe=c.getScopes().filter(st=>""!==st);Pe.length>0&&(P.scopes=Pe.join(","))}f.tenantId&&(P.tid=f.tenantId);const F=P;for(const Pe of Object.keys(F))void 0===F[Pe]&&delete F[Pe];const X=yield f._getAppCheckToken(),ye=X?`#${Sc}=${encodeURIComponent(X)}`:"";return`${function _h({config:f}){return f.emulator?Mi(f,mI):`https://${f.authDomain}/${As}`}(f)}?${(0,q.xO)(F).slice(1)}${ye}`})).apply(this,arguments)}const Rc="webStorageSupport",Kg=class Zg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ji,this._completeRedirectFn=Xa,this._overrideRedirectResult=kg}_openPopup(c,d,p,_){var E=this;return(0,T.Z)(function*(){var P;Lt(null===(P=E.eventManagers[c._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const F=yield Qo(c,d,p,on(),_);return function Gg(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),P=Math.max((window.screen.availWidth-p)/2,0).toString();let F="";const X=Object.assign(Object.assign({},en),{width:p.toString(),height:_.toString(),top:E,left:P}),ye=(0,q.z$)().toLowerCase();d&&(F=kn(ye)?"_blank":d),Dt(ye)&&(c=c||"http://localhost",X.scrollbars="yes");const Pe=Object.entries(X).reduce((pr,[ss,iu])=>`${pr}${ss}=${iu},`,"");if(function tt(f=(0,q.z$)()){var c;return _e(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ye)&&"_self"!==F)return function bc(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",F),new mh(null);const st=window.open(c||"",F,Pe);ne(st,f,"popup-blocked");try{st.focus()}catch{}return new mh(st)}(c,F,gn())})()}_openRedirect(c,d,p,_){var E=this;return(0,T.Z)(function*(){return yield E._originValidation(c),function Ig(f){vt().location.href=f}(yield Qo(c,d,p,on(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Lt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,T.Z)(function*(){const p=yield function fr(f){return is.apply(this,arguments)}(c),_=new zi(c);return p.register("authEvent",E=>(ne(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Rc,{type:Rc},_=>{var E;const P=null===(E=_?.[0])||void 0===E?void 0:E[Rc];void 0!==P&&d(!!P),Xe(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function fh(f){return eu.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Yt()||De()||_e()}};class Jo{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return ot("unexpected MultiFactorSessionType")}}}class uo extends Jo{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new uo(c)}_finalizeEnroll(c,d,p){return function x0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",V(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function nh(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",V(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _I=(()=>{class f{constructor(){}static assertion(d){return uo._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Qg="@firebase/auth";class q0{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,T.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function nu(f){(0,x._registerComponent)(new Gt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:P,authDomain:F}=p.options;ne(P&&!P.includes(":"),"invalid-api-key",{appName:p.name});const X={apiKey:P,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qe(f)},ye=new w0(p,_,E,X);return function be(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ye,d),ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new Gt.wA("auth-internal",c=>{const d=Jt(c.getProvider("auth").getImmediate());return new q0(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(Qg,"1.5.0",function yh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,x.registerVersion)(Qg,"1.5.0","esm2017")}("Browser")},58:(Pi,Cn,Me)=>{Me.d(Cn,{BH:()=>xr,G6:()=>Mi,L:()=>ct,LL:()=>K,P0:()=>Zt,Pz:()=>Et,Sg:()=>mn,UG:()=>ot,ZB:()=>Te,ZR:()=>Q,aH:()=>Xe,b$:()=>hn,eu:()=>$,hl:()=>L,jU:()=>Lt,m9:()=>Fi,ne:()=>kr,pd:()=>_i,r3:()=>bn,ru:()=>on,tV:()=>Z,uI:()=>ne,vZ:()=>Ni,w1:()=>pi,xO:()=>Oi,xb:()=>wr,z$:()=>qe,zd:()=>mi});const Ce=function(S){const D=[];let I=0;for(let w=0;w<S.length;w++){let v=S.charCodeAt(w);v<128?D[I++]=v:v<2048?(D[I++]=v>>6|192,D[I++]=63&v|128):55296==(64512&v)&&w+1<S.length&&56320==(64512&S.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++w)),D[I++]=v>>18|240,D[I++]=v>>12&63|128,D[I++]=v>>6&63|128,D[I++]=63&v|128):(D[I++]=v>>12|224,D[I++]=v>>6&63|128,D[I++]=63&v|128)}return D},Gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,D){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<S.length;v+=3){const A=S[v],W=v+1<S.length,ve=W?S[v+1]:0,me=v+2<S.length,Oe=me?S[v+2]:0;let Dt=(15&ve)<<2|Oe>>6,De=63&Oe;me||(De=64,W||(Dt=64)),w.push(I[A>>2],I[(3&A)<<4|ve>>4],I[Dt],I[De])}return w.join("")},encodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(S):this.encodeByteArray(Ce(S),D)},decodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(S):function(S){const D=[];let I=0,w=0;for(;I<S.length;){const v=S[I++];if(v<128)D[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=S[I++];D[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const me=((7&v)<<18|(63&S[I++])<<12|(63&S[I++])<<6|63&S[I++])-65536;D[w++]=String.fromCharCode(55296+(me>>10)),D[w++]=String.fromCharCode(56320+(1023&me))}else{const A=S[I++],W=S[I++];D[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return D.join("")}(this.decodeStringToByteArray(S,D))},decodeStringToByteArray(S,D){this.init_();const I=D?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<S.length;){const A=I[S.charAt(v++)],ve=v<S.length?I[S.charAt(v)]:0;++v;const Oe=v<S.length?I[S.charAt(v)]:64;++v;const fe=v<S.length?I[S.charAt(v)]:64;if(++v,null==A||null==ve||null==Oe||null==fe)throw new dn;w.push(A<<2|ve>>4),64!==Oe&&(w.push(ve<<4&240|Oe>>2),64!==fe&&w.push(Oe<<6&192|fe))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ct=function(S){return function(S){const D=Ce(S);return Gt.encodeByteArray(D,!0)}(S).replace(/\./g,"")},Z=function(S){try{return Gt.decodeString(S,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Te(S,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return D}for(const I in D)!D.hasOwnProperty(I)||!He(I)||(S[I]=Te(S[I],D[I]));return S}function He(S){return"__proto__"!==S}const Fe=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=S&&Z(S[1]);return D&&JSON.parse(D)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Zt=S=>{const D=(S=>{var D,I;return null===(I=null===(D=Fe())||void 0===D?void 0:D.emulatorHosts)||void 0===I?void 0:I[S]})(S);if(!D)return;const I=D.lastIndexOf(":");if(I<=0||I+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const w=parseInt(D.substring(I+1),10);return"["===D[0]?[D.substring(1,I-1),w]:[D.substring(0,I),w]},Xe=()=>{var S;return null===(S=Fe())||void 0===S?void 0:S.config},Et=S=>{var D;return null===(D=Fe())||void 0===D?void 0:D[`_${S}`]};class xr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,I)=>{this.resolve=D,this.reject=I})}wrapCallback(D){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(I):D(I,w))}}}function mn(S,D){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=D||"demo-project",v=S.iat||0,A=S.sub||S.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},S);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(W)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function ot(){var S;const D=null===(S=Fe())||void 0===S?void 0:S.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Lt(){return"object"==typeof self&&self.self===self}function on(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pi(){const S=qe();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Mi(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((S,D)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),S(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;D((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){D(I)}})}class Q extends Error{constructor(D,I,w){super(I),this.code=D,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(D,I,w){this.service=D,this.serviceName=I,this.errors=w}create(D,...I){const w=I[0]||{},v=`${this.service}/${D}`,A=this.errors[D],W=A?function ae(S,D){return S.replace(Je,(I,w)=>{const v=D[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Je=/\{\$([^}]+)}/g;function bn(S,D){return Object.prototype.hasOwnProperty.call(S,D)}function wr(S){for(const D in S)if(Object.prototype.hasOwnProperty.call(S,D))return!1;return!0}function Ni(S,D){if(S===D)return!0;const I=Object.keys(S),w=Object.keys(D);for(const v of I){if(!w.includes(v))return!1;const A=S[v],W=D[v];if(et(A)&&et(W)){if(!Ni(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function et(S){return null!==S&&"object"==typeof S}function Oi(S){const D=[];for(const[I,w]of Object.entries(S))Array.isArray(w)?w.forEach(v=>{D.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):D.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return D.length?"&"+D.join("&"):""}function mi(S){const D={};return S.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");D[decodeURIComponent(v)]=decodeURIComponent(A)}}),D}function _i(S){const D=S.indexOf("?");if(!D)return"";const I=S.indexOf("#",D);return S.substring(D,I>0?I:void 0)}function kr(S,D){const I=new Vr(S,D);return I.subscribe.bind(I)}class Vr{constructor(D,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{D(this)}).catch(w=>{this.error(w)})}next(D){this.forEachObserver(I=>{I.next(D)})}error(D){this.forEachObserver(I=>{I.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,I,w){let v;if(void 0===D&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function $n(S,D){if("object"!=typeof S||null===S)return!1;for(const I of D)if(I in S&&"function"==typeof S[I])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:I,complete:w},void 0===v.next&&(v.next=yt),void 0===v.error&&(v.error=yt),void 0===v.complete&&(v.complete=yt);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,D)}sendOne(D,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{I(this.observers[D])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yt(){}function Fi(S){return S&&S._delegate?S._delegate:S}},459:(Pi,Cn,Me)=>{function T(t){return"function"==typeof t}function q(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const x=q(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ce(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(s){e=s instanceof x?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{xt(s)}catch(o){e=e??[],o instanceof x?e=[...e,...o.errors]:e.push(o)}}if(e)throw new x(e)}}add(e){var n;if(e&&e!==this)if(this.closed)xt(e);else{if(e instanceof ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ce(n,e)}remove(e){const{_finalizers:n}=this;n&&Ce(n,e),e instanceof ft&&e._removeParent(this)}}ft.EMPTY=(()=>{const t=new ft;return t.closed=!0,t})();const Gt=ft.EMPTY;function dn(t){return t instanceof ft||t&&"closed"in t&&T(t.remove)&&T(t.add)&&T(t.unsubscribe)}function xt(t){T(t)?t():t.unsubscribe()}const ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Z.setTimeout(()=>{const{onUnhandledError:e}=ct;if(!e)throw t;e(t)})}function Te(){}const He=rt("C",void 0,void 0);function rt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function Fe(t){if(ct.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class Zt extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dn(e)&&e.add(this)):this.destination=Lt}static create(e,n,r){return new mn(e,n,r)}next(e){this.isStopped?ot(function Dn(t){return rt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ot(function pt(t){return rt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ot(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function Et(t,e){return Xe.call(t,e)}class xr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class mn extends Zt{constructor(e,n,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&ct.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Et(e.next,s),error:e.error&&Et(e.error,s),complete:e.complete&&Et(e.complete,s)}):i=e}this.destination=new xr(i)}}function qe(t){ct.useDeprecatedSynchronousErrorHandling?function On(t){ct.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):ie(t)}function ot(t,e){const{onStoppedNotification:n}=ct;n&&Z.setTimeout(()=>n(t,e))}const Lt={closed:!0,next:Te,error:function ne(t){throw t},complete:Te},on="function"==typeof Symbol&&Symbol.observable||"@@observable";function hn(t){return t}function pi(t){return 0===t.length?hn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function L(t){return t&&t instanceof Zt||function Mi(t){return t&&T(t.next)&&T(t.error)&&T(t.complete)}(t)&&dn(t)}(n)?n:new mn(n,r,i);return Fe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Or(r))((i,s)=>{const o=new mn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[on](){return this}pipe(...n){return pi(n)(this)}toPromise(n){return new(n=Or(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Or(t){var e;return null!==(e=t??ct.Promise)&&void 0!==e?e:Promise}const $=q(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new V(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Gt:(this.currentObservers=null,s.push(n),new ft(()=>{this.currentObservers=null,Ce(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Le;return n.source=this,n}}return t.create=(e,n)=>new V(e,n),t})();class V extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Gt}}function Q(t){return T(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new Je(t,e,n,r,i)}class Je extends Zt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function de(t,e){return K((n,r)=>{let i=0;n.subscribe(ae(r,s=>{r.next(t.call(e,s,i++))}))})}var Re=Me(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Bt(t){return T(t?.then)}function St(t){return T(t[on])}function Kt(t){return Symbol.asyncIterator&&T(t?.[Symbol.asyncIterator])}function An(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bn=function bn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wr(t){return T(t?.[Bn])}function gi(t){return(0,Re.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Re.qq)(n.read());if(i)return yield(0,Re.qq)(void 0);yield yield(0,Re.qq)(r)}}finally{n.releaseLock()}})}function Ni(t){return T(t?.getReader)}function et(t){if(t instanceof Le)return t;if(null!=t){if(St(t))return function xi(t){return new Le(e=>{const n=t[on]();if(T(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function Oi(t){return new Le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Bt(t))return function mi(t){return new Le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Kt(t))return Yn(t);if(wr(t))return function _i(t){return new Le(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ni(t))return function kr(t){return Yn(gi(t))}(t)}throw An(t)}function Yn(t){return new Le(e=>{(function Vr(t,e){var n,r,i,s;return(0,Re.mG)(this,void 0,void 0,function*(){try{for(n=(0,Re.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Fr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function yt(t,e,n=1/0){return T(e)?yt((r,i)=>de((s,o)=>e(r,s,i,o))(et(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function $n(t,e,n,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=b=>l<r?C(b):u.push(b),C=b=>{s&&e.next(b),l++;let M=!1;et(n(b,h++)).subscribe(ae(e,U=>{i?.(U),s?y(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const U=u.shift();o?Fr(e,o,()=>C(U)):C(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ae(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function Lr(t=1/0){return yt(hn,t)}const fn=new Le(t=>t.complete());function an(t){return t&&T(t.schedule)}function ki(t){return t[t.length-1]}function Vi(t){return T(ki(t))?t.pop():void 0}function yi(t){return an(ki(t))?t.pop():void 0}function _n(t,e=0){return K((n,r)=>{n.subscribe(ae(r,i=>Fr(r,t,()=>r.next(i),e),()=>Fr(r,t,()=>r.complete(),e),i=>Fr(r,t,()=>r.error(i),e)))})}function Jn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Fi(t,e){if(!t)throw new Error("Iterable cannot be null");return new Le(n=>{Fr(n,e,()=>{const r=t[Symbol.asyncIterator]();Fr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function D(t,e){if(null!=t){if(St(t))return function Ur(t,e){return et(t).pipe(Jn(e),_n(e))}(t,e);if(at(t))return function ms(t,e){return new Le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Bt(t))return function No(t,e){return et(t).pipe(Jn(e),_n(e))}(t,e);if(Kt(t))return Fi(t,e);if(wr(t))return function qs(t,e){return new Le(n=>{let r;return Fr(n,e,()=>{r=t[Bn](),Fr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(t,e);if(Ni(t))return function S(t,e){return Fi(gi(t),e)}(t,e)}throw An(t)}(t,e):et(t)}function w(...t){const e=yi(t),n=function Sn(t,e){return"number"==typeof ki(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?et(r[0]):Lr(n)(I(r,e)):fn}class v extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,yi(t))}function W(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,h=g=!1},C=()=>{const b=o;y(),b?.unsubscribe()};return K((b,M)=>{l++,!g&&!h&&m();const U=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=ve(C,i))}),U.subscribe(M),!o&&l>0&&(o=new mn({next:N=>U.next(N),error:N=>{g=!0,m(),a=ve(y,n,N),U.error(N)},complete:()=>{h=!0,m(),a=ve(y,r),U.complete()}}),et(b).subscribe(o))})(s)}}function ve(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new mn({next:()=>{r.unsubscribe(),t()}});return et(e(...n)).subscribe(r)}function me(t,e){return K((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0;const h=s++;et(t(u,h)).subscribe(i=ae(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Oe(t,e=hn){return t=t??lt,K((n,r)=>{let i,s=!0;n.subscribe(ae(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lt(t,e){return t===e}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function Dt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function De(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(De).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function kn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Gs=fe({__forward_ref__:fe});function k(t){return t.__forward_ref__=k,t.toString=function(){return De(this())},t}function R(t){return te(t)?t():t}function te(t){return"function"==typeof t&&t.hasOwnProperty(Gs)&&t.__forward_ref__===k}function _e(t){return t&&!!t.\u0275providers}const tt="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function Yt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Ed(t,e){throw new H(-201,!1)}function Xn(t,e){null==t&&function Ne(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function be(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function er(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gu(t){return ng(t,Oo)||ng(t,Zu)}function ng(t,e){return t.hasOwnProperty(e)?t[e]:null}function La(t){return t&&(t.hasOwnProperty(wd)||t.hasOwnProperty(Fv))?t[wd]:null}const Oo=fe({\u0275prov:fe}),wd=fe({\u0275inj:fe}),Zu=fe({ngInjectableDef:fe}),Fv=fe({ngInjectorDef:fe});var Ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ye||{});let Td;function Tr(t){const e=Td;return Td=t,e}function Qu(t,e,n){const r=Gu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ye.Optional?null:void 0!==e?e:void Ed(De(t))}const At=globalThis;class ue{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=be({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ks={},Rd="__NG_DI_FLAG__",$r="ngTempTokenPath",Pd=/\n/gm,Xu="__source";let ko;function ys(t){const e=ko;return ko=t,e}function Bv(t,e=Ye.Default){if(void 0===ko)throw new H(-203,!1);return null===ko?Qu(t,void 0,e):ko.get(t,e&Ye.Optional?null:void 0,e)}function oe(t,e=Ye.Default){return(function Ku(){return Td}()||Bv)(R(t),e)}function we(t,e=Ye.Default){return oe(t,ec(e))}function ec(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qs(t){const e=[];for(let n=0;n<t.length;n++){const r=R(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,s=Ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Nd(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function tc(t,e){return t[Rd]=e,t.prototype[Rd]=e,t}function Nd(t){return t[Rd]}function jr(t){return{toString:t}.toString()}var nc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nc||{}),vi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vi||{});const Li={},gt=[],ts=fe({\u0275cmp:fe}),xd=fe({\u0275dir:fe}),Fo=fe({\u0275pipe:fe}),og=fe({\u0275mod:fe}),Ui=fe({\u0275fac:fe}),Ys=fe({__NG_ELEMENT_ID__:fe}),Hr=fe({__NG_ENV_ID__:fe});function Od(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function kd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Ba(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function rc(t){return 3===t||4===t||6===t}function Ba(t){return 64===t.charCodeAt(0)}function Lo(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Vd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Vd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const ag="ng-template";function Fd(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Od(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ic(t){return 4===t.type&&t.value!==ag}function Ld(t,e,n){return e===(4!==t.type||n?t.value:ag)}function sc(t,e,n){let r=4;const i=t.attrs||[],s=function Ud(t){for(let e=0;e<t.length;e++)if(rc(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ld(t,u,n)||""===u&&1===e.length){if(zr(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Fd(t.attrs,l,n)){if(zr(r))return!1;o=!0}continue}const g=ug(8&r?"class":u,i,ic(t),n);if(-1===g){if(zr(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Od(y,l,0)||2&r&&l!==m){if(zr(r))return!1;o=!0}}}}else{if(!o&&!zr(r)&&!zr(u))return!1;if(o&&zr(u))continue;o=!1,r=u|1&r}}return zr(r)||o}function zr(t){return 0==(1&t)}function ug(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function ac(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function oc(t,e,n=!1){for(let r=0;r<e.length;r++)if(sc(t,e[r],n))return!0;return!1}function $d(t,e){return t?":not("+e.trim()+")":e}function jd(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!zr(o)&&(e+=$d(s,i),i=""),r=o,s=s||!zr(r);n++}return""!==i&&(e+=$d(s,i)),e}function Js(t){return jr(()=>{const e=dg(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vi.Emulated,styles:t.styles||gt,_:null,schemas:t.schemas||null,tView:null,id:""};cc(n);const r=t.dependencies;return n.directiveDefs=$a(r,!1),n.pipeDefs=$a(r,!0),n.id=function jv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function $v(t){return it(t)||jn(t)}function Wd(t){return null!==t}function Vn(t){return jr(()=>({type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uc(t,e){if(null==t)return Li;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function xe(t){return jr(()=>{const e=dg(t);return cc(e),e})}function tr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function it(t){return t[ts]||null}function jn(t){return t[xd]||null}function Hn(t){return t[Fo]||null}function dr(t,e){const n=t[og]||null;if(!n&&!0===e)throw new Error(`Type ${De(t)} does not have '\u0275mod' property.`);return n}function dg(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Li,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uc(t.inputs,e),outputs:uc(t.outputs)}}function cc(t){t.features?.forEach(e=>e(t))}function $a(t,e){if(!t)return null;const n=e?Hn:$v;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Wd)}const $t=0,pe=1,Ue=2,jt=3,Ii=4,Xs=5,nr=6,Bo=7,Xt=8,Is=9,Es=10,Be=11,eo=12,hg=13,ws=14,pn=15,to=16,$o=17,ri=18,ja=19,lc=20,Ts=21,ns=22,jo=23,no=24,nt=25,dc=1,fg=2,Bi=7,Ho=9,rr=11;function Wr(t){return Array.isArray(t)&&"object"==typeof t[dc]}function zn(t){return Array.isArray(t)&&!0===t[dc]}function Zd(t){return 0!=(4&t.flags)}function ro(t){return t.componentOffset>-1}function Kd(t){return 1==(1&t.flags)}function $i(t){return!!t.template}function pg(t){return 0!=(512&t[Ue])}function zo(t,e){return t.hasOwnProperty(Ui)?t[Ui]:null}let gn=null,fc=!1;function vt(t){const e=gn;return gn=t,e}const Ig={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Eg(t){if(!qa(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Wa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function wg(t){t.dirty=!0,function gc(t){if(void 0===t.liveConsumerNode)return;const e=fc;fc=!0;try{for(const n of t.liveConsumerNode)n.dirty||wg(n)}finally{fc=e}}(t),t.consumerMarkedDirty?.(t)}function mc(t){return t&&(t.nextProducerIndex=0),vt(t)}function Xd(t,e){if(vt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(qa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)so(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Wa(t){Cs(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Eg(n),r!==n.version))return!0}return!1}function eh(t){if(Cs(t),qa(t))for(let e=0;e<t.producerNode.length;e++)so(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function so(t,e){if(function th(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Cs(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)so(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cs(i),i.producerIndexOfThis[r]=e}}function qa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let qv=null;function bg(t){const e=vt(null);try{return t()}finally{vt(e)}}const Sg=()=>{},Jv=(()=>({...Ig,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Sg}))();class Rg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ii(){return Pg}function Pg(t){return t.type.prototype.ngOnChanges&&(t.setInput=ih),Xv}function Xv(){const t=yc(this),e=t?.current;if(e){const n=t.previous;if(n===Li)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ih(t,e,n,r){const i=this.declaredInputs[n],s=yc(t)||function eI(t,e){return t[Mg]=e}(t,{previous:Li,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Rg(u&&u.currentValue,e,a===Li),t[r]=e}ii.ngInherit=!0;const Mg="__ngSimpleChanges__";function yc(t){return t[Mg]||null}const si=function(t,e,n){};function Ot(t){for(;Array.isArray(t);)t=t[$t];return t}function Ic(t,e){return Ot(e[t])}function yn(t,e){return Ot(e[t.index])}function Ng(t,e){return t.data[e]}function qr(t,e){const n=e[t];return Wr(n)?n:n[$t]}function Ds(t,e){return null==e?null:t[e]}function Ec(t){t[$o]=0}function rI(t){1024&t[Ue]||(t[Ue]|=1024,Og(t,1))}function wc(t){1024&t[Ue]&&(t[Ue]&=-1025,Og(t,-1))}function Og(t,e){let n=t[jt];if(null===n)return;n[Xs]+=e;let r=n;for(n=n[jt];null!==n&&(1===e&&1===r[Xs]||-1===e&&0===r[Xs]);)n[Xs]+=e,r=n,n=n[jt]}const ke={lFrame:zg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Cc(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function dt(){return ke.lFrame.tView}function lh(t){return ke.lFrame.contextLView=t,t[Xt]}function Ya(t){return ke.lFrame.contextLView=null,t}function Wn(){let t=Lg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Lg(){return ke.lFrame.currentTNode}function Hi(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function Ja(){return ke.lFrame.isParent}function ao(){return ke.lFrame.bindingIndex++}function uI(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,fh(e)}function fh(t){ke.lFrame.currentDirectiveIndex=t}function ph(t){ke.lFrame.currentQueryIndex=t}function $g(t){const e=t[pe];return 2===e.type?e.declTNode:1===e.type?t[nr]:null}function jg(t,e,n){if(n&Ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ye.Host||(i=$g(s),null===i||(s=s[ws],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ke.lFrame=Hg();return r.currentTNode=e,r.lView=t,!0}function Ko(t){const e=Hg(),n=t[pe];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hg(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?zg(t):e}function zg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Wg(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qg=Wg;function gh(){const t=Wg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fr(){return ke.lFrame.selectedIndex}function is(t){ke.lFrame.selectedIndex=t}function en(){const t=ke.lFrame;return Ng(t.tView,t.selectedIndex)}let Gg=!0;function bc(){return Gg}function As(t){Gg=t}function Sc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Qo(t,e,n){Rc(t,e,3,n)}function Yo(t,e,n,r){(3&t[Ue])===n&&Rc(t,e,n,r)}function _h(t,e){let n=t[Ue];(3&n)===e&&(n&=8191,n+=1,t[Ue]=n)}function Rc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[$o]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[$o]+=65536),(a<s||-1==s)&&(Kg(t,n,e,u),t[$o]=(4294901760&t[$o])+u+2),u++}function Zg(t,e){si(4,t,e);const n=vt(null);try{e.call(t)}finally{vt(n),si(5,t,e)}}function Kg(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ue]>>13<t[$o]>>16&&(3&t[Ue])===e&&(t[Ue]+=8192,Zg(a,s)):Zg(a,s)}const Jo=-1;class uo{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function yh(t){return t!==Jo}function nu(t){return 32767&t}function ru(t,e){let n=function II(t){return t>>16}(t),r=e;for(;n>0;)r=r[ws],n--;return r}let Mc=!0;function Nc(t){const e=Mc;return Mc=t,e}const f=255,c=5;let d=0;const p={};function E(t,e){const n=F(t,e);if(-1!==n)return n;const r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,P(r.data,t),P(e,null),P(r.blueprint,null));const i=X(t,e),s=t.injectorIndex;if(yh(i)){const o=nu(i),a=ru(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function P(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function X(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=G0(i),null===r)return Jo;if(n++,i=i[ws],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Jo}function ye(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ys)&&(r=n[Ys]),null==r&&(r=n[Ys]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function st(t,e,n){if(n&Ye.Optional||void 0!==t)return t;Ed()}function pr(t,e,n,r){if(n&Ye.Optional&&void 0===r&&(r=null),!(n&(Ye.Self|Ye.Host))){const i=t[Is],s=Tr(void 0);try{return i?i.get(e,r,n&Ye.Optional):Qu(e,r,n&Ye.Optional)}finally{Tr(s)}}return st(r,0,n)}function ss(t,e,n,r=Ye.Default,i){if(null!==t){if(2048&e[Ue]&&!(r&Ye.Self)){const o=function rU(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ue]&&!(512&o[Ue]);){const a=iu(s,o,n,r|Ye.Self,p);if(a!==p)return a;let u=s.parent;if(!u){const l=o[lc];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=G0(o),o=o[ws]}s=u}return i}(t,e,n,r,p);if(o!==p)return o}const s=iu(t,e,n,r,p);if(s!==p)return s}return pr(e,n,r,i)}function iu(t,e,n,r,i){const s=function Jg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ys)?t[Ys]:void 0;return"number"==typeof e?e>=0?e&f:EI:e}(n);if("function"==typeof s){if(!jg(e,t,r))return r&Ye.Host?st(i,0,r):pr(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ye.Optional)return o;Ed()}finally{qg()}}else if("number"==typeof s){let o=null,a=F(t,e),u=Jo,l=r&Ye.Host?e[pn][nr]:null;for((-1===a||r&Ye.SkipSelf)&&(u=-1===a?X(t,e):e[a+8],u!==Jo&&vh(r,!1)?(o=e[pe],a=nu(u),e=ru(u,e)):a=-1);-1!==a;){const h=e[pe];if(xc(s,a,h.data)){const g=Yg(a,e,n,o,r,l);if(g!==p)return g}u=e[a+8],u!==Jo&&vh(r,e[pe].data[a+8]===l)&&xc(s,a,e)?(o=h,a=nu(u),e=ru(u,e)):a=-1}}return i}function Yg(t,e,n,r,i,s){const o=e[pe],a=o.data[t+8],h=function Xo(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,h=s>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){const y=o[u];if(y&&$i(y)&&y.type===n)return u}return null}(a,o,n,null==r?ro(a)&&Mc:r!=o&&0!=(3&a.type),i&Ye.Host&&s===a);return null!==h?bs(e,o,h,a):p}function bs(t,e,n,r){let i=t[n];const s=e.data;if(function _I(t){return t instanceof uo}(i)){const o=i;o.resolving&&function Fa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Nc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Tr(o.injectImpl):null;jg(t,r,Ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function mI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Pg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Tr(l),Nc(a),o.resolving=!1,qg()}}return i}function xc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function vh(t,e){return!(t&Ye.Self||t&Ye.Host&&e)}class ir{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ss(this._tNode,this._lView,e,ec(r),n)}}function EI(){return new ir(Wn(),Y())}function Rn(t){return jr(()=>{const e=t.prototype.constructor,n=e[Ui]||Eh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Ui]||Eh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Eh(t){return te(t)?()=>{const e=Eh(R(t));return e&&e()}:zo(t)}function G0(t){const e=t[pe],n=e.type;return 2===n?e.declTNode:1===n?t[nr]:null}const kc="__parameters__";function Fc(t,e,n){return jr(()=>{const r=function wI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(kc)?u[kc]:Object.defineProperty(u,kc,{value:[]})[kc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Uc(t,e){t.forEach(n=>Array.isArray(n)?Uc(n,e):e(n))}function K0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function em(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ei(t,e,n){let r=Bc(t,e);return r>=0?t[1|r]=n:(r=~r,function lU(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function TI(t,e){const n=Bc(t,e);if(n>=0)return t[1|n]}function Bc(t,e){return function Q0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const wi=tc(Fc("Optional"),8),nm=tc(Fc("SkipSelf"),4);function am(t){return 128==(128&t.flags)}var ta=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ta||{});const SI=new Map;let OU=0;const PI="__ngContext__";function Cr(t,e){Wr(e)?(t[PI]=e[ja],function VU(t){SI.set(t[ja],t)}(e)):t[PI]=e}let MI;function NI(t,e){return MI(t,e)}function Ah(t){const e=t[jt];return zn(e)?e[jt]:e}function mb(t){return yb(t[eo])}function _b(t){return yb(t[Ii])}function yb(t){for(;null!==t&&!zn(t);)t=t[Ii];return t}function Hc(t,e,n,r,i){if(null!=r){let s,o=!1;zn(r)?s=r:Wr(r)&&(o=!0,r=r[$t]);const a=Ot(r);0===t&&null!==n?null==i?wb(e,n,a):su(e,n,a,i||null,!0):1===t&&null!==n?su(e,n,a,i||null,!0):2===t?function pm(t,e,n){const r=hm(t,e);r&&function tB(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function iB(t,e,n,r,i){const s=n[Bi];s!==Ot(n)&&Hc(e,t,r,s,i);for(let a=rr;a<n.length;a++){const u=n[a];Sh(u[pe],u,t,e,r,s)}}(e,t,s,n,i)}}function lm(t,e,n){return t.createElement(e,n)}function Ib(t,e){const n=t[Ho],r=n.indexOf(e);wc(e),n.splice(r,1)}function dm(t,e){if(t.length<=rr)return;const n=rr+e,r=t[n];if(r){const i=r[to];null!==i&&i!==t&&Ib(i,r),e>0&&(t[n-1][Ii]=r[Ii]);const s=em(t,rr+e);!function GU(t,e){Sh(t,e,e[Be],2,null,null),e[$t]=null,e[nr]=null}(r[pe],r);const o=s[ri];null!==o&&o.detachView(s[pe]),r[jt]=null,r[Ii]=null,r[Ue]&=-129}return r}function OI(t,e){if(!(256&e[Ue])){const n=e[Be];e[jo]&&eh(e[jo]),e[no]&&eh(e[no]),n.destroyNode&&Sh(t,e,n,3,null,null),function QU(t){let e=t[eo];if(!e)return kI(t[pe],t);for(;e;){let n=null;if(Wr(e))n=e[eo];else{const r=e[rr];r&&(n=r)}if(!n){for(;e&&!e[Ii]&&e!==t;)Wr(e)&&kI(e[pe],e),e=e[jt];null===e&&(e=t),Wr(e)&&kI(e[pe],e),n=e&&e[Ii]}e=n}}(e)}}function kI(t,e){if(!(256&e[Ue])){e[Ue]&=-129,e[Ue]|=256,function eB(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof uo)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];si(4,a,u);try{u.call(a)}finally{si(5,a,u)}}else{si(4,i,s);try{s.call(i)}finally{si(5,i,s)}}}}}(t,e),function XU(t,e){const n=t.cleanup,r=e[Bo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Bo]=null);const i=e[Ts];if(null!==i){e[Ts]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[pe].type&&e[Be].destroy();const n=e[to];if(null!==n&&zn(e[jt])){n!==e[jt]&&Ib(n,e);const r=e[ri];null!==r&&r.detachView(t)}!function FU(t){SI.delete(t[ja])}(e)}}function VI(t,e,n){return function Eb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[$t];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===vi.None||s===vi.Emulated)return null}return yn(r,n)}}(t,e.parent,n)}function su(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wb(t,e,n){t.appendChild(e,n)}function Tb(t,e,n,r,i){null!==r?su(t,e,n,r,i):wb(t,e,n)}function hm(t,e){return t.parentNode(e)}let FI,$I,mm,Ab=function Db(t,e,n){return 40&t.type?yn(t,n):null};function fm(t,e,n,r){const i=VI(t,r,e),s=e[Be],a=function Cb(t,e,n){return Ab(t,e,n)}(r.parent||e[nr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)Tb(s,i,n[u],a,!1);else Tb(s,i,n,a,!1);void 0!==FI&&FI(s,r,e,n,i)}function bh(t,e){if(null!==e){const n=e.type;if(3&n)return yn(e,t);if(4&n)return LI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return bh(t,r);{const i=t[e.index];return zn(i)?LI(-1,i):Ot(i)}}if(32&n)return NI(e,t)()||Ot(t[e.index]);{const r=Sb(t,e);return null!==r?Array.isArray(r)?r[0]:bh(Ah(t[pn]),r):bh(t,e.next)}}return null}function Sb(t,e){return null!==e?t[pn][nr].projection[e.projection]:null}function LI(t,e){const n=rr+t+1;if(n<e.length){const r=e[n],i=r[pe].firstChild;if(null!==i)return bh(r,i)}return e[Bi]}function UI(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Cr(Ot(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)UI(t,e,n.child,r,i,s,!1),Hc(e,t,i,a,s);else if(32&u){const l=NI(n,r);let h;for(;h=l();)Hc(e,t,i,h,s);Hc(e,t,i,a,s)}else 16&u?Pb(t,e,r,n,i,s):Hc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Sh(t,e,n,r,i,s){UI(n,r,t.firstChild,e,i,s,!1)}function Pb(t,e,n,r,i,s){const o=n[pn],u=o[nr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Hc(e,t,i,u[l],s);else{let l=u;const h=o[jt];am(r)&&(l.flags|=128),UI(t,e,l,h,i,s,!0)}}function Mb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Nb(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&kd(t,e,r),null!==i&&Mb(t,e,i),null!==s&&function oB(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function kb(t){return function jI(){if(void 0===mm&&(mm=null,At.trustedTypes))try{mm=At.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return mm}()?.createScriptURL(t)||t}class Vb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function na(t){return t instanceof Vb?t.changingThisBreaksApplicationSecurity:t}function Rh(t,e){const n=function mB(t){return t instanceof Vb&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${tt})`)}return n===e}const IB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var qc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(qc||{});function Hb(t){const e=Mh();return e?e.sanitize(qc.URL,t)||"":Rh(t,"URL")?na(t):function HI(t){return(t=String(t)).match(IB)?t:"unsafe:"+t}(Ee(t))}function zb(t){const e=Mh();if(e)return kb(e.sanitize(qc.RESOURCE_URL,t)||"");if(Rh(t,"ResourceURL"))return kb(na(t));throw new H(904,!1)}function Mh(){const t=Y();return t&&t[Es].sanitizer}const Nh=new ue("ENVIRONMENT_INITIALIZER"),qb=new ue("INJECTOR",-1),Gb=new ue("INJECTOR_DEF_TYPES");class GI{get(e,n=Ks){if(n===Ks){const r=new Error(`NullInjectorError: No provider for ${De(e)}!`);throw r.name="NullInjectorError",r}return n}}function xB(...t){return{\u0275providers:Zb(0,t),\u0275fromNgModule:!0}}function Zb(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Uc(e,o=>{const a=o;ym(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Kb(i,s),n}function Kb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];KI(i,s=>{e(s,r)})}}function ym(t,e,n,r){if(!(t=R(t)))return!1;let i=null,s=La(t);const o=!s&&it(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=La(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)ym(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Uc(s.imports,h=>{ym(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Kb(l,e)}if(!a){const l=zo(i)||(()=>new i);e({provide:i,useFactory:l,deps:gt},i),e({provide:Gb,useValue:i,multi:!0},i),e({provide:Nh,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;KI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function KI(t,e){for(let n of t)_e(n)&&(n=n.\u0275providers),Array.isArray(n)?KI(n,e):e(n)}const OB=fe({provide:String,useValue:fe});function QI(t){return null!==t&&"object"==typeof t&&OB in t}function ou(t){return"function"==typeof t}const YI=new ue("Set Injector scope."),vm={},VB={};let JI;function Im(){return void 0===JI&&(JI=new GI),JI}class qi{}class Gc extends qi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,eE(e,o=>this.processProvider(o)),this.records.set(qb,Zc(void 0,this)),i.has("environment")&&this.records.set(qi,Zc(void 0,this));const s=this.records.get(YI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Gb.multi,gt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ys(this),r=Tr(void 0);try{return e()}finally{ys(n),Tr(r)}}get(e,n=Ks,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Hr))return e[Hr](this);r=ec(r);const s=ys(this),o=Tr(void 0);try{if(!(r&Ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function $B(t){return"function"==typeof t||"object"==typeof t&&t instanceof ue}(e)&&Gu(e);u=l&&this.injectableDefInScope(l)?Zc(XI(e),vm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ye.Self?Im():this.parent).get(e,n=r&Ye.Optional&&n===Ks?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[$r]=a[$r]||[]).unshift(De(e)),s)throw a;return function es(t,e,n,r){const i=t[$r];throw e[Xu]&&i.unshift(e[Xu]),t.message=function Vo(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=De(e);if(Array.isArray(e))i=e.map(De).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):De(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Pd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[$r]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Tr(o),ys(s)}}resolveInjectorInitializers(){const e=ys(this),n=Tr(void 0);try{const i=this.get(Nh.multi,gt,Ye.Self);for(const s of i)s()}finally{ys(e),Tr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(De(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=ou(e=R(e))?e:R(e&&e.provide);const r=function LB(t){return QI(t)?Zc(void 0,t.useValue):Zc(Jb(t),vm)}(e);if(ou(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Zc(void 0,vm,!0),i.factory=()=>Qs(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===vm&&(n.value=VB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function BB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=R(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function XI(t){const e=Gu(t),n=null!==e?e.factory:zo(t);if(null!==n)return n;if(t instanceof ue)throw new H(204,!1);if(t instanceof Function)return function FB(t){const e=t.length;if(e>0)throw function Th(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new H(204,!1);const n=function xo(t){return t&&(t[Oo]||t[Zu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function Jb(t,e,n){let r;if(ou(t)){const i=R(t);return zo(i)||XI(i)}if(QI(t))r=()=>R(t.useValue);else if(function Yb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Qs(t.deps||[]));else if(function Qb(t){return!(!t||!t.useExisting)}(t))r=()=>oe(R(t.useExisting));else{const i=R(t&&(t.useClass||t.provide));if(!function UB(t){return!!t.deps}(t))return zo(i)||XI(i);r=()=>new i(...Qs(t.deps))}return r}function Zc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function eE(t,e){for(const n of t)Array.isArray(n)?eE(n,e):n&&_e(n)?eE(n.\u0275providers,e):e(n)}const Em=new ue("AppId",{providedIn:"root",factory:()=>jB}),jB="ng",Xb=new ue("Platform Initializer"),os=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eS=new ue("CSP nonce",{providedIn:"root",factory:()=>function Wc(){if(void 0!==$I)return $I;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let tS=(t,e,n)=>null;function uE(t,e,n=!1){return tS(t,e,n)}class JB{}class iS{}class e${resolveComponentFactory(e){throw function XB(t){const e=Error(`No component factory found for ${De(t)}.`);return e.ngComponent=t,e}(e)}}let bm=(()=>{class t{static#e=this.NULL=new e$}return t})();function t$(){return Yc(Wn(),Y())}function Yc(t,e){return new Ti(yn(t,e))}let Ti=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=t$}return t})();class oS{}let lo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function r$(){const t=Y(),n=qr(Wn().index,t);return(Wr(n)?n:t)[Be]}()}return t})(),i$=(()=>{class t{static#e=this.\u0275prov=be({token:t,providedIn:"root",factory:()=>null})}return t})();class Jc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const aS=new Jc("16.2.12"),dE={};function dS(t,e=null,n=null,r){const i=hS(t,e,n,r);return i.resolveInjectorInitializers(),i}function hS(t,e=null,n=null,r,i=new Set){const s=[n||gt,xB(t)];return r=r||("object"==typeof t?void 0:De(t)),new Gc(s,e||Im(),r||null,i)}let Dr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Ks;static#t=this.NULL=new GI;static create(n,r){if(Array.isArray(n))return dS({name:""},r,n,"");{const i=n.name??"";return dS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=be({token:t,providedIn:"any",factory:()=>oe(qb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function fE(t){return t.ngOriginalError}class ho{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&fE(e);for(;n&&fE(n);)n=fE(n);return n||null}}function gE(t){return e=>{setTimeout(t,void 0,e)}}const vn=class d$ extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=gE(s),i&&(i=gE(i)),o&&(o=gE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ft&&e.add(a),a}};function pS(...t){}class It{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function h$(){const t="function"==typeof At.requestAnimationFrame;let e=At[t?"requestAnimationFrame":"setTimeout"],n=At[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function g$(t){const e=()=>{!function p$(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_E(t),t.isCheckStableRunning=!0,mE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_E(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function _$(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return gS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),mS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return gS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,_E(t),mE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!It.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(It.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,f$,pS,pS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const f$={};function mE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _E(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mS(t){t._nesting--,mE(t)}class m${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const _S=new ue("",{providedIn:"root",factory:yS});function yS(){const t=we(It);let e=!0;return w(new Le(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Le(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{It.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function fo(t){return t instanceof Function?t():t}let yE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=be({token:t,providedIn:"root",factory:()=>new t})}return t})();function kh(t){for(;t;){t[Ue]|=64;const e=Ah(t);if(pg(t)&&!e)return t;t=e}return null}const TS=new ue("",{providedIn:"root",factory:()=>!1});let Rm=null;function bS(t,e){return t[e]??PS()}function SS(t,e){const n=PS();n.producerNode?.length&&(t[e]=Rm,n.lView=t,Rm=RS())}const b$={...Ig,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kh(t.lView)},lView:null};function RS(){return Object.create(b$)}function PS(){return Rm??=RS(),Rm}const We={};function gr(t){MS(dt(),Y(),fr()+t,!1)}function MS(t,e,n,r){if(!r)if(3==(3&e[Ue])){const s=t.preOrderCheckHooks;null!==s&&Qo(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Yo(e,s,0,n)}is(n)}function ee(t,e=Ye.Default){const n=Y();return null===n?oe(t,e):ss(Wn(),n,R(t),e)}function Pm(t,e,n,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[$t]=i,g[Ue]=140|r,(null!==l||t&&2048&t[Ue])&&(g[Ue]|=2048),Ec(g),g[jt]=g[ws]=t,g[Xt]=n,g[Es]=o||t&&t[Es],g[Be]=a||t&&t[Be],g[Is]=u||t&&t[Is]||null,g[nr]=s,g[ja]=function kU(){return OU++}(),g[ns]=h,g[lc]=l,g[pn]=2==e.type?t[pn]:g,g}function tl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function vE(t,e,n,r,i){const s=Lg(),o=Ja(),u=t.data[e]=function k$(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Zo(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function Ug(){return ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function oo(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Hi(s,!0),s}function Vh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xS(t,e,n,r,i){const s=bS(e,jo),o=fr(),a=2&r;try{is(-1),a&&e.length>nt&&MS(t,e,nt,!1),si(a?2:0,i);const l=a?s:null,h=mc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Xd(l,h)}}finally{a&&null===e[jo]&&SS(e,jo),is(o),si(a?3:1,i)}}function IE(t,e,n){if(Zd(e)){const r=vt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{vt(r)}}}function EE(t,e,n){Cc()&&(function j$(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ro(n)&&function K$(t,e,n){const r=yn(e,t),i=OS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Mm(t,Pm(t,i,null,o,r,e,null,t[Es].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||E(n,e),Cr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=bs(e,t,a,n);Cr(l,e),null!==o&&Q$(0,a-i,l,u,0,o),$i(u)&&(qr(n.index,e)[Xt]=bs(e,t,a,n))}}(t,e,n,yn(n,e)),64==(64&n.flags)&&US(t,e,n))}function wE(t,e,n=yn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function OS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=TE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function TE(t,e,n,r,i,s,o,a,u,l,h){const g=nt+r,m=g+i,y=function R$(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(g,m),C="function"==typeof l?l():l;return y[pe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}let kS=t=>null;function VS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?FS(n,e,i,s):r.hasOwnProperty(i)&&FS(n,e,r[i],s)}return n}function FS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function CE(t,e,n,r){if(Cc()){const i=null===r?null:{"":-1},s=function z$(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(oc(e,o.selectors,!1))if(r||(r=[]),$i(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),DE(t,e,a.length)}else r.unshift(o),DE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&LS(t,e,n,o,i,a),i&&function W$(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new H(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Lo(n.mergedAttrs,n.attrs)}function LS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ye(E(n,e),t,r[l].type);!function G$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Vh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Lo(n.mergedAttrs,h.hostAttrs),Z$(t,n,e,u,h),q$(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function V$(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=n?n.get(g):null,C=m?m.outputs:null;u=VS(g.inputs,h,u,m?m.inputs:null),l=VS(g.outputs,h,l,C);const b=null===u||null===o||ic(e)?null:Y$(u,h,o);a.push(b)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function US(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function cI(){return ke.lFrame.currentDirectiveIndex}();try{is(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];fh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&H$(u,l)}}finally{is(-1),fh(o)}}function H$(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function DE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function q$(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;$i(e)&&(n[""]=t)}}function Z$(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=zo(i.type)),o=new uo(s,$i(i),ee);t.blueprint[r]=o,n[r]=o,function B$(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function $$(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Vh(t,n,i.hostVars,We),i)}function Ss(t,e,n,r,i,s){const o=yn(t,e);!function AE(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Be],o,s,t.value,n,r,i)}function Q$(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)BS(r,n,o[a++],o[a++],o[a++])}function BS(t,e,n,r,i){const s=vt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{vt(s)}}function Y$(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function $S(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function jS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];ph(n[r]),o.contentQueries(2,e[s],s)}}}function Mm(t,e){return t[eo]?t[hg][Ii]=e:t[eo]=e,t[hg]=e,e}function bE(t,e,n){ph(0);const r=vt(null);try{e(t,n)}finally{vt(r)}}function qS(t,e){const n=t[Is],r=n?n.get(ho,null):null;r&&r.handleError(e)}function SE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];BS(t.data[o],e[o],r,a,i)}}function J$(t,e){const n=qr(e,t),r=n[pe];!function X$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[$t];null!==i&&null===n[ns]&&(n[ns]=uE(i,n[Is])),RE(r,n,n[Xt])}function RE(t,e,n){Ko(e);try{const r=t.viewQuery;null!==r&&bE(1,r,n);const i=t.template;null!==i&&xS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&jS(t,e),t.staticViewQueries&&bE(2,t.viewQuery,n);const s=t.components;null!==s&&function ej(t,e){for(let n=0;n<e.length;n++)J$(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ue]&=-5,gh()}}let GS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Yv(t,e,n){const r=Object.create(Jv);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>wg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Wa(r))return;r.hasRun=!0;const o=mc(r);try{r.cleanupFn(),r.cleanupFn=Sg,r.fn(i)}finally{Xd(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=be({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=kn(i,a):2==s&&(r=kn(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Fh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Ot(s)),zn(s)&&ZS(s,r);const o=n.type;if(8&o)Fh(t,e,n.child,r);else if(32&o){const a=NI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Sb(e,n);if(Array.isArray(a))r.push(...a);else{const u=Ah(e[pn]);Fh(u[pe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ZS(t,e){for(let n=rr;n<t.length;n++){const r=t[n],i=r[pe].firstChild;null!==i&&Fh(r[pe],r,i,e)}t[Bi]!==t[$t]&&e.push(t[Bi])}function xm(t,e,n,r=!0){const i=e[Es],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{KS(t,e,t.template,n)}catch(u){throw r&&qS(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function KS(t,e,n,r){const i=e[Ue];if(256!=(256&i)){e[Es].effectManager?.flush(),Ko(e);try{Ec(e),function hh(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&xS(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Qo(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Yo(e,l,0,null),_h(e,0)}if(function rj(t){for(let e=mb(t);null!==e;e=_b(e)){if(!e[fg])continue;const n=e[Ho];for(let r=0;r<n.length;r++){rI(n[r])}}}(e),QS(e,2),null!==t.contentQueries&&jS(t,e),o){const l=t.contentCheckHooks;null!==l&&Qo(e,l)}else{const l=t.contentHooks;null!==l&&Yo(e,l,1),_h(e,1)}!function S$(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=bS(e,no);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)is(~s);else{const o=s,a=n[++i],u=n[++i];uI(a,o),r.dirty=!1;const l=mc(r);try{u(2,e[o])}finally{Xd(r,l)}}}}finally{null===e[no]&&SS(e,no),is(-1)}}(t,e);const a=t.components;null!==a&&JS(e,a,0);const u=t.viewQuery;if(null!==u&&bE(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Qo(e,l)}else{const l=t.viewHooks;null!==l&&Yo(e,l,2),_h(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ue]&=-73,wc(e)}finally{gh()}}}function QS(t,e){for(let n=mb(t);null!==n;n=_b(n))for(let r=rr;r<n.length;r++)YS(n[r],e)}function ij(t,e,n){YS(qr(e,t),n)}function YS(t,e){if(!function xg(t){return 128==(128&t[Ue])}(t))return;const n=t[pe],r=t[Ue];if(80&r&&0===e||1024&r||2===e)KS(n,t,n.template,t[Xt]);else if(t[Xs]>0){QS(t,1);const i=n.components;null!==i&&JS(t,i,1)}}function JS(t,e,n){for(let r=0;r<e.length;r++)ij(t,e[r],n)}class Lh{get rootNodes(){const e=this._lView,n=e[pe];return Fh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xt]}set context(e){this._lView[Xt]=e}get destroyed(){return 256==(256&this._lView[Ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[jt];if(zn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(dm(e,r),em(n,r))}this._attachedToViewContainer=!1}OI(this._lView[pe],this._lView)}onDestroy(e){!function Tc(t,e){if(256==(256&t[Ue]))throw new H(911,!1);null===t[Ts]&&(t[Ts]=[]),t[Ts].push(e)}(this._lView,e)}markForCheck(){kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){this._lView[Ue]|=128}detectChanges(){xm(this._lView[pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function KU(t,e){Sh(t,e,e[Be],2,null,null)}(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e}}class sj extends Lh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;xm(e[pe],e,e[Xt],!1)}checkNoChanges(){}get context(){return null}}class XS extends bm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=it(e);return new Uh(n,this.ngModule)}}function eR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class aj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ec(r);const i=this.injector.get(e,dE,r);return i!==dE||n===dE?i:this.parentInjector.get(e,n,r)}}class Uh extends iS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=eR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return eR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function lg(t){return t.map(jd).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof qi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new aj(e,s):e,a=o.get(oS,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:o.get(i$,null),effectManager:o.get(GS,null),afterRenderEventManager:o.get(yE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?function P$(t,e,n,r){const s=r.get(TS,!1)||n===vi.ShadowDom,o=t.selectRootElement(e,s);return function M$(t){kS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):lm(m,y,function oj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let N=null;null!==C&&(N=uE(C,o,!0));const z=TE(0,null,null,1,0,null,null,null,null,null,null),se=Pm(null,z,null,U,null,null,g,m,o,null,N);let he,je;Ko(se);try{const Ct=this.componentDef;let Qn,Qp=null;Ct.findHostDirectiveDefs?(Qn=[],Qp=new Map,Ct.findHostDirectiveDefs(Ct,Qn,Qp),Qn.push(Ct)):Qn=[Ct];const Mv=function cj(t,e){const n=t[pe],r=nt;return t[r]=e,tl(n,r,2,"#host",null)}(se,C),hX=function lj(t,e,n,r,i,s,o){const a=i[pe];!function dj(t,e,n,r){for(const i of t)e.mergedAttrs=Lo(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Nm(e,e.mergedAttrs,!0),null!==n&&Nb(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=uE(e,i[Is]));const l=s.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=Pm(i,OS(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&DE(a,t,r.length-1),Mm(i,g),i[t.index]=g}(Mv,C,Ct,Qn,se,g,m);je=Ng(z,nt),C&&function fj(t,e,n,r){if(r)kd(t,n,["ng-version",aS.full]);else{const{attrs:i,classes:s}=function Hd(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!zr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&kd(t,n,i),s&&s.length>0&&Mb(t,n,s.join(" "))}}(m,Ct,C,r),void 0!==n&&function pj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(je,this.ngContentSelectors,n),he=function hj(t,e,n,r,i,s){const o=Wn(),a=i[pe],u=yn(o,i);LS(a,i,o,n,null,r);for(let h=0;h<n.length;h++)Cr(bs(i,a,o.directiveStart+h,o),i);US(a,i,o),u&&Cr(u,i);const l=bs(i,a,o.directiveStart+o.componentOffset,o);if(t[Xt]=i[Xt]=l,null!==s)for(const h of s)h(l,e);return IE(a,o,t),l}(hX,Ct,Qn,Qp,se,[gj]),RE(z,se,null)}finally{gh()}return new uj(this.componentType,he,Yc(je,se),se,je)}}class uj extends JB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new sj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;SE(s[pe],s,i,e,n),this.previousInputValues.set(e,n),kh(qr(this._tNode.index,s))}}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function gj(){const t=Wn();Sc(Y()[pe],t)}function Rt(t){let e=function tR(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if($i(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Om(t.inputs),o.inputTransforms=Om(t.inputTransforms),o.declaredInputs=Om(t.declaredInputs),o.outputs=Om(t.outputs);const a=i.hostBindings;a&&vj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&_j(t,u),l&&yj(t,l),Dt(t.inputs,i.inputs),Dt(t.declaredInputs,i.declaredInputs),Dt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Dt(o.inputTransforms,i.inputTransforms)),$i(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Rt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function mj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Lo(i.hostAttrs,n=Lo(n,i.hostAttrs))}}(r)}function Om(t){return t===Li?{}:t===gt?[]:t}function _j(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function yj(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function vj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function sR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function km(t){return!!function PE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ar(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ps(t,e,n,r){const i=Y();return Ar(i,ao(),e)&&(dt(),Ss(en(),i,t,e,n,r)),Ps}function Bm(t,e,n,r,i,s,o,a){const u=Y(),l=dt(),h=t+nt,g=l.firstCreatePass?function zj(t,e,n,r,i,s,o,a,u){const l=e.consts,h=tl(e,t,4,o||null,Ds(l,a));CE(e,n,h,Ds(l,u)),Sc(e,h);const g=h.tView=TE(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,s,o):l.data[h];Hi(g,!1);const m=yR(l,u,g,t);bc()&&fm(l,u,m,g),Cr(m,u),Mm(u,u[h]=$S(m,u,m,g)),Kd(g)&&EE(l,u,g),null!=o&&wE(u,g,a)}let yR=function vR(t,e,n,r){return As(!0),e[Be].createComment("")};function Zi(t,e,n){const r=Y();return Ar(r,ao(),e)&&function Ci(t,e,n,r,i,s,o,a){const u=yn(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(SE(t,n,h,r,i),ro(e)&&function L$(t,e){const n=qr(e,t);16&n[Ue]||(n[Ue]|=64)}(n,e.index)):3&e.type&&(r=function F$(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(dt(),en(),r,t,e,r[Be],n,!1),Zi}function VE(t,e,n,r,i){const o=i?"class":"style";SE(t,n,e.inputs[o],o,r)}function kt(t,e,n,r){const i=Y(),s=dt(),o=nt+t,a=i[Be],u=s.firstCreatePass?function Kj(t,e,n,r,i,s){const o=e.consts,u=tl(e,t,2,r,Ds(o,i));return CE(e,n,u,Ds(o,s)),null!==u.attrs&&Nm(u,u.attrs,!1),null!==u.mergedAttrs&&Nm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=IR(s,i,u,a,e,t);i[o]=l;const h=Kd(u);return Hi(u,!0),Nb(a,l,u),32!=(32&u.flags)&&bc()&&fm(s,i,l,u),0===function iI(){return ke.lFrame.elementDepthCount}()&&Cr(l,i),function uh(){ke.lFrame.elementDepthCount++}(),h&&(EE(s,i,u),IE(s,u,i)),null!==r&&wE(i,u),kt}function bt(){let t=Wn();Ja()?function Xa(){ke.lFrame.isParent=!1}():(t=t.parent,Hi(t,!1));const e=t;(function kg(t){return ke.skipHydrationRootTNode===t})(e)&&function oI(){ke.skipHydrationRootTNode=null}(),function ch(){ke.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(Sc(n,t),Zd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Pc(t){return 0!=(8&t.flags)}(e)&&VE(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Qg(t){return 0!=(16&t.flags)}(e)&&VE(n,e,Y(),e.stylesWithoutHost,!1),bt}function zh(t,e,n,r){return kt(t,e,n,r),bt(),zh}let IR=(t,e,n,r,i,s)=>(As(!0),lm(r,i,function mh(){return ke.lFrame.currentNamespace}()));function UE(){return Y()}function Wh(t){return!!t&&"function"==typeof t.then}function TR(t){return!!t&&"function"==typeof t.subscribe}function Fn(t,e,n,r){const i=Y(),s=dt(),o=Wn();return function DR(t,e,n,r,i,s,o){const a=Kd(r),l=t.firstCreatePass&&function zS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[Xt],g=function HS(t){return t[Bo]||(t[Bo]=[])}(e);let m=!0;if(3&r.type||o){const b=yn(r,e),M=o?o(b):b,U=g.length,N=o?se=>o(Ot(se[r.index])):r.index;let z=null;if(!o&&a&&(z=function tH(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Bo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1;else{s=bR(r,e,h,s,!1);const se=n.listen(M,i,s);g.push(s,se),l&&l.push(i,N,U,U+1)}}else s=bR(r,e,h,s,!1);const y=r.outputs;let C;if(m&&null!==y&&(C=y[i])){const b=C.length;if(b)for(let M=0;M<b;M+=2){const he=e[C[M]][C[M+1]].subscribe(s),je=g.length;g.push(s,he),l&&l.push(i,r.index,je,-(je+1))}}}(s,i,i[Be],o,t,e,r),Fn}function AR(t,e,n,r){try{return si(6,e,n),!1!==n(r)}catch(i){return qS(t,i),!1}finally{si(7,e,n)}}function bR(t,e,n,r,i){return function s(o){if(o===Function)return r;kh(t.componentOffset>-1?qr(t.index,e):e);let u=AR(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=AR(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function BE(t=1){return function lI(t){return(ke.lFrame.contextLView=function dI(t,e){for(;t>0;)e=e[ws],t--;return e}(t,ke.lFrame.contextLView))[Xt]}(t)}function $m(t,e){return t<<17|e<<2}function ra(t){return t>>17&32767}function jE(t){return 2|t}function uu(t){return(131068&t)>>2}function HE(t,e){return-131069&t|e<<2}function zE(t){return 1|t}function FR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ra(s):uu(s),u=!1;for(;0!==a&&(!1===u||o);){const h=t[a+1];lH(t[a],e)&&(u=!0,t[a+1]=r?zE(h):jE(h)),a=r?ra(h):uu(h)}u&&(t[n+1]=r?jE(s):zE(s))}function lH(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Bc(t,e)>=0}function jm(t,e){return function as(t,e,n,r){const i=Y(),s=dt(),o=function rs(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function qR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[fr()],o=function WR(t,e){return e>=t.expandoStartIndex}(t,n);(function QR(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function vH(t,e,n,r){const i=function eu(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qh(n=WE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=WE(i,t,e,n,r),null===s){let u=function IH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==uu(r))return t[ra(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=WE(null,t,e,u[1],r),u=qh(u,e.attrs,r),function EH(t,e,n,r){t[ra(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function wH(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=qh(r,t[s].hostAttrs,n);return qh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function uH(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ra(o),u=uu(o);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Bc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=ra(t[a+1]);t[r+1]=$m(m,a),0!==m&&(t[m+1]=HE(t[m+1],r)),t[a+1]=function oH(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=$m(a,0),0!==a&&(t[a+1]=HE(t[a+1],r)),a=r;else t[r+1]=$m(u,0),0===a?a=r:t[u+1]=HE(t[u+1],r),u=r;l&&(t[r+1]=jE(t[r+1])),FR(t,h,r,!0),FR(t,h,r,!1),function cH(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Bc(s,e)>=0&&(n[r+1]=zE(n[r+1]))}(e,h,t,r,s),o=$m(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==We&&Ar(i,o,e)&&function ZR(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function aH(t){return 1==(1&t)}(l)?KR(u,e,n,i,uu(l),o):void 0;Hm(h)||(Hm(s)||function sH(t){return 2==(2&t)}(l)&&(s=KR(u,null,n,i,a,o)),function sB(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:ta.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ta.Important),t.setStyle(n,r,i,s))}}(r,o,Ic(fr(),n),i,s))}(s,s.data[fr()],i,i[Be],t,i[o+1]=function AH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=De(na(t)))),t}(e,n),r,o)}(t,e,null,!0),jm}function WE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=qh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ei(t,o,!!n||e[++s]))}return void 0===t?null:t}function KR(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===We&&(m=g?gt:void 0);let y=g?TI(m,r):h===r?m:void 0;if(l&&!Hm(y)&&(y=TI(u,r)),Hm(y)&&(a=y,o))return a;const C=t[i+1];i=o?ra(C):uu(C)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=TI(u,r))}return a}function Hm(t){return void 0!==t}function Pn(t,e=""){const n=Y(),r=dt(),i=t+nt,s=r.firstCreatePass?tl(r,i,1,e,null):r.data[i],o=YR(r,n,s,e,t);n[i]=o,bc()&&fm(r,n,o,s),Hi(s,!1)}let YR=(t,e,n,r,i)=>(As(!0),function cm(t,e){return t.createText(e)}(e[Be],r));function Gh(t){return cu("",t,""),Gh}function cu(t,e,n){const r=Y(),i=function rl(t,e,n,r){return Ar(t,ao(),n)?e+Ee(n)+r:We}(r,t,e,n);return i!==We&&function po(t,e,n){const r=Ic(e,t);!function vb(t,e,n){t.setValue(e,n)}(t[Be],r,n)}(r,fr(),i),cu}const fl="en-US";let vP=fl;function ZE(t,e,n,r,i){if(t=R(t),Array.isArray(t))for(let s=0;s<t.length;s++)ZE(t[s],e,n,r,i);else{const s=dt(),o=Y(),a=Wn();let u=ou(t)?t:R(t.provide);const l=Jb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(ou(t)||!t.multi){const y=new uo(l,i,ee),C=QE(u,e,i?h:h+m,g);-1===C?(ye(E(a,o),s,u),KE(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{const y=QE(u,e,h+m,g),C=QE(u,e,h,h+m),M=C>=0&&n[C];if(i&&!M||!i&&!(y>=0&&n[y])){ye(E(a,o),s,u);const U=function Gz(t,e,n,r,i){const s=new uo(t,n,ee);return s.multi=[],s.index=e,s.componentProviders=0,zP(s,i,r&&!n),s}(i?qz:Wz,n.length,i,r,l);!i&&M&&(n[C].providerFactory=U),KE(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),o.push(U)}else KE(s,t,y>-1?y:C,zP(n[i?C:y],l,!i&&r));!i&&r&&M&&n[C].componentProviders++}}}function KE(t,e,n,r){const i=ou(e),s=function kB(t){return!!t.useClass}(e);if(i||s){const u=(s?R(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function zP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function QE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Wz(t,e,n,r){return YE(this.multi,[])}function qz(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=bs(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),YE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],YE(i,s);return s}function YE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function un(t,e=[]){return n=>{n.providersResolver=(r,i)=>function zz(t,e,n){const r=dt();if(r.firstCreatePass){const i=$i(t);ZE(n,r.data,r.blueprint,i,!0),ZE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class du{}class WP{}class JE extends du{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XS(this);const i=dr(e);this._bootstrapComponents=fo(i.bootstrap),this._r3Injector=hS(e,n,[{provide:du,useValue:this},{provide:bm,useValue:this.componentFactoryResolver},...r],De(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class XE extends WP{constructor(e){super(),this.moduleType=e}create(e){return new JE(this.moduleType,e,[])}}class qP extends du{constructor(e){super(),this.componentFactoryResolver=new XS(this),this.instance=null;const n=new Gc([...e.providers,{provide:du,useValue:this},{provide:bm,useValue:this.componentFactoryResolver}],e.parent||Im(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ew(t,e,n=null){return new qP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Qz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Zb(0,n.type),i=r.length>0?ew([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=be({token:t,providedIn:"environment",factory:()=>new t(oe(qi))})}return t})();function GP(t){t.getStandaloneInjector=e=>e.get(Qz).getOrCreateStandaloneInjector(t)}function eM(t,e,n,r,i,s){const o=e+n;return Ar(t,o,i)?function Rs(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Xh(t,e){const n=t[e];return n===We?void 0:n}(t,o+1)}function nw(t,e){const n=dt();let r;const i=t+nt;n.firstCreatePass?(r=function g4(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=zo(r.type)),a=Tr(ee);try{const u=Nc(!1),l=s();return Nc(u),function Gj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,l),l}finally{Tr(a)}}function rw(t,e,n){const r=t+nt,i=Y(),s=function qo(t,e){return t[e]}(i,r);return function ef(t,e){return t[pe].data[e].pure}(i,r)?eM(i,function hr(){const t=ke.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function w4(t,e,n,r=!0){const i=e[pe];if(function YU(t,e,n,r){const i=rr+r,s=n.length;r>0&&(n[i-1][Ii]=e),r<s-rr?(e[Ii]=n[i],K0(n,rr+r,e)):(n.push(e),e[Ii]=null),e[jt]=n;const o=e[to];null!==o&&n!==o&&function JU(t,e){const n=t[Ho];e[pn]!==e[jt][jt][pn]&&(t[fg]=!0),null===n?t[Ho]=[e]:n.push(e)}(o,e);const a=e[ri];null!==a&&a.insertView(t),e[Ue]|=128}(i,e,t,n),r){const s=LI(n,t),o=e[Be],a=hm(o,t[Bi]);null!==a&&function ZU(t,e,n,r,i,s){r[$t]=i,r[nr]=e,Sh(t,r,n,1,i,s)}(i,t[nr],o,e,a,s)}}Symbol;let go=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=D4}return t})();const T4=go,C4=class extends T4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function E4(t,e,n,r){const i=e.tView,a=Pm(t,i,n,4096&t[Ue]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[to]=t[e.index];const l=t[ri];return null!==l&&(a[ri]=l.createEmbeddedView(i)),RE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Lh(i)}};function D4(){return function Zm(t,e){return 4&t.type?new C4(e,t,Yc(t,e)):null}(Wn(),Y())}let cs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=M4}return t})();function M4(){return function dM(t,e){let n;const r=e[t.index];return zn(r)?n=r:(n=$S(r,e,null,t),e[t.index]=n,Mm(e,n)),hM(n,e,t,r),new cM(n,t,e)}(Wn(),Y())}const N4=cs,cM=class extends N4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new ir(this._hostTNode,this._hostLView)}get parentInjector(){const e=X(this._hostTNode,this._hostLView);if(yh(e)){const n=ru(e,this._hostLView),r=nu(e);return new ir(n[pe].data[r+8],n)}return new ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=lM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function wh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const u=o?e:new Uh(it(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?l:this.parentInjector).get(qi,null);M&&(s=M)}it(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function nI(t){return zn(t[jt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[jt],h=new cM(l,l[nr],l[jt]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return w4(a,i,o,!r),e.attachToViewContainerRef(),K0(sw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=lM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=dm(this._lContainer,n);r&&(em(sw(this._lContainer),n),OI(r[pe],r))}detach(e){const n=this._adjustIndex(e,-1),r=dm(this._lContainer,n);return r&&null!=em(sw(this._lContainer),n)?new Lh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function lM(t){return t[8]}function sw(t){return t[8]||(t[8]=[])}let hM=function fM(t,e,n,r){if(t[Bi])return;let i;i=8&n.type?Ot(r):function x4(t,e){const n=t[Be],r=n.createComment(""),i=yn(e,t);return su(n,hm(n,i),r,function nB(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Bi]=i};const Ym=new ue("Application Initializer");let mw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=we(Ym,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(Wh(s))n.push(s);else if(TR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const mo=new ue("LocaleId",{providedIn:"root",factory:()=>we(mo,Ye.Optional|Ye.SkipSelf)||function lW(){return typeof $localize<"u"&&$localize.locale||fl}()});let UM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class fW{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let BM=(()=>{class t{compileModuleSync(n){return new XE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=fo(dr(n).declarations).reduce((o,a)=>{const u=it(a);return u&&o.push(new Uh(u)),o},[]);return new fW(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const zM=new ue(""),Xm=new ue("");let Ew,vw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ew||(function kW(t){Ew=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(It),oe(Iw),oe(Xm))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})(),Iw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ew?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ia=null;const WM=new ue("AllowMultipleToken"),ww=new ue("PlatformDestroyListeners"),Tw=new ue("appBootstrapListener");class GM{constructor(e,n){this.name=e,this.token=n}}function KM(t,e,n=[]){const r=`Platform: ${e}`,i=new ue(r);return(s=[])=>{let o=Cw();if(!o||o.injector.get(WM,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function LW(t){if(ia&&!ia.get(WM,!1))throw new H(400,!1);(function qM(){!function Gv(t){qv=t}(()=>{throw new H(600,!1)})})(),ia=t;const e=t.get(YM);(function ZM(t){t.get(Xb,null)?.forEach(n=>n())})(t)}(function QM(t=[],e){return Dr.create({name:e,providers:[{provide:YI,useValue:"platform"},{provide:ww,useValue:new Set([()=>ia=null])},...t]})}(a,r))}return function BW(t){const e=Cw();if(!e)throw new H(401,!1);return e}()}}function Cw(){return ia?.get(YM)??null}let YM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function $W(t="zone.js",e){return"noop"===t?new m$:"zone.js"===t?new It(e):t}(r?.ngZone,function JM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Kz(t,e,n){return new JE(t,e,n)}(n.moduleType,this.injector,function rN(t){return[{provide:It,useFactory:t},{provide:Nh,multi:!0,useFactory:()=>{const e=we(HW,{optional:!0});return()=>e.initialize()}},{provide:nN,useFactory:jW},{provide:_S,useFactory:yS}]}(()=>i)),o=s.injector.get(ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{e_(this._modules,s),a.unsubscribe()})}),function XM(t,e,n){try{const r=n();return Wh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(mw);return a.runInitializers(),a.donePromise.then(()=>(function IP(t){Xn(t,"Expected localeId to be defined"),"string"==typeof t&&(vP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(mo,fl)||fl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=eN({},r);return function VW(t,e,n){const r=new XE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(hu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(ww,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Dr))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function eN(t,e){return Array.isArray(e)?e.reduce(eN,t):{...t,...e}}let hu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(nN),this.zoneIsStable=we(_S),this.componentTypes=[],this.components=[],this.isStable=we(UM).hasPendingTasks.pipe(me(n=>n?A(!1):this.zoneIsStable),Oe(),W()),this._injector=we(qi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof iS;if(!this._injector.get(mw).done)throw!i&&function Uo(t){const e=it(t)||jn(t)||Hn(t);return null!==e&&e.standalone}(n),new H(405,!1);let o;o=i?n:this._injector.get(bm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function FW(t){return t.isBoundToModule}(o)?void 0:this._injector.get(du),l=o.create(Dr.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(zM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),e_(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;e_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Tw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>e_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function e_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const nN=new ue("",{providedIn:"root",factory:()=>we(ho).handleError.bind(void 0)});function jW(){const t=we(It),e=we(ho);return n=>t.runOutsideAngular(()=>e.handleError(n))}let HW=(()=>{class t{constructor(){this.zone=we(It),this.applicationRef=we(hu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let t_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=WW}return t})();function WW(t){return function qW(t,e,n){if(ro(t)&&!n){const r=qr(t.index,e);return new Lh(r,r)}return 47&t.type?new Lh(e[pn],e):null}(Wn(),Y(),16==(16&t))}class aN{constructor(){}supports(e){return km(e)}create(e){return new JW(e)}}const YW=(t,e)=>e;class JW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||YW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<cN(r,i,s)?n:r,a=cN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}s[o.previousIndex]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!km(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function Aj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new XW(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new uN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class XW{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class uN{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new eq,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cN(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function dN(){return new i_([new aN])}let i_=(()=>{class t{static#e=this.\u0275prov=be({token:t,providedIn:"root",factory:dN});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||dN()),deps:[[t,new nm,new wi]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();const sq=KM(null,"core",[]);let oq=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(hu))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({})}return t})();function ml(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Mw=null;function sa(){return Mw}class Iq{}const Ki=new ue("DocumentToken");let Nw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return we(wq)},providedIn:"platform"})}return t})();const Eq=new ue("Location Initialized");let wq=(()=>{class t extends Nw{constructor(){super(),this._doc=we(Ki),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sa().getBaseHref(this._doc)}onPopState(n){const r=sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function xw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function EN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function _o(t){return t&&"?"!==t[0]?"?"+t:t}let pu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return we(TN)},providedIn:"root"})}return t})();const wN=new ue("appBaseHref");let TN=(()=>{class t extends pu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??we(Ki).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+_o(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+_o(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+_o(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Nw),oe(wN,8))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tq=(()=>{class t extends pu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=xw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+_o(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Nw),oe(wN,8))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})(),Ow=(()=>{class t{constructor(n){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Aq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(EN(CN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+_o(r))}normalize(n){return t.stripTrailingSlash(function Dq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,CN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_o(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_o(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=_o;static#t=this.joinWithSlash=xw;static#n=this.stripTrailingSlash=EN;static#r=this.\u0275fac=function(r){return new(r||t)(oe(pu))};static#i=this.\u0275prov=be({token:t,factory:function(){return function Cq(){return new Ow(oe(pu))}()},providedIn:"root"})}return t})();function CN(t){return t.replace(/\/index.html$/,"")}class fG{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let m_=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new fG(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),kN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{kN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ee(cs),ee(go),ee(i_))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function kN(t,e){t.context.$implicit=e.item}class yG{createSubscription(e,n){return bg(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){bg(()=>e.unsubscribe())}}class vG{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const IG=new vG,EG=new yG;let Gw=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Wh(n))return IG;if(TR(n))return EG;throw function ds(t,e){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(ee(t_,16))};static#t=this.\u0275pipe=tr({name:"async",type:t,pure:!1,standalone:!0})}return t})(),UG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({})}return t})();const UN="browser";function BN(t){return t===UN}function __(t){return"server"===t}let HG=(()=>{class t{static#e=this.\u0275prov=be({token:t,providedIn:"root",factory:()=>new zG(oe(Ki),window)})}return t})();class zG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function WG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class g3 extends Iq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jw extends g3{static makeCurrent(){!function vq(t){Mw||(Mw=t)}(new Jw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function m3(){return cf=cf||document.querySelector("base"),cf?cf.getAttribute("href"):null}();return null==n?null:function _3(t){I_=I_||document.createElement("a"),I_.setAttribute("href",t);const e=I_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function lG(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let I_,cf=null,v3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();const Xw=new ue("EventManagerPlugins");let WN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Xw),oe(It))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();class qN{constructor(e){this._doc=e}}const eT="ng-app-id";let GN=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=__(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${eT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(eT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(eT,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki),oe(Em),oe(eS,8),oe(os))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();const tT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nT=/%COMP%/g,T3=new ue("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function KN(t,e){return e.map(n=>n.replace(nT,t))}let QN=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=__(a),this.defaultRenderer=new rT(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vi.ShadowDom&&(r={...r,encapsulation:vi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof JN?i.applyToHost(n):i instanceof iT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case vi.Emulated:s=new JN(u,l,r,this.appId,h,o,a,g);break;case vi.ShadowDom:return new b3(u,l,n,r,o,a,this.nonce,g);default:s=new iT(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(WN),oe(GN),oe(Em),oe(T3),oe(Ki),oe(os),oe(It),oe(eS))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();class rT{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(tT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(YN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=tT[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=tT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ta.DashCase|ta.Important)?e.style.setProperty(n,r,i&ta.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ta.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=sa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function YN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class b3 extends rT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=KN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class iT extends rT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?KN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class JN extends iT{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function C3(t){return"_ngcontent-%COMP%".replace(nT,t)}(l),this.hostAttr=function D3(t){return"_nghost-%COMP%".replace(nT,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let S3=(()=>{class t extends qN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();const XN=["alt","control","meta","shift"],R3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let M3=(()=>{class t extends qN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),XN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=R3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),XN.forEach(o=>{o!==i&&(0,P3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();const tx=[{provide:os,useValue:UN},{provide:Xb,useValue:function N3(){Jw.makeCurrent()},multi:!0},{provide:Ki,useFactory:function O3(){return function lB(t){$I=t}(document),document},deps:[]}],k3=KM(sq,"browser",tx),V3=new ue(""),nx=[{provide:Xm,useClass:class y3{addToWindow(e){At.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new H(5103,!1);return s},At.getAllAngularTestabilities=()=>e.getAllTestabilities(),At.getAllAngularRootElements=()=>e.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(r=>{const i=At.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?sa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:zM,useClass:vw,deps:[It,Iw,Xm]},{provide:vw,useClass:vw,deps:[It,Iw,Xm]}],rx=[{provide:YI,useValue:"root"},{provide:ho,useFactory:function x3(){return new ho},deps:[]},{provide:Xw,useClass:S3,multi:!0,deps:[Ki,It,os]},{provide:Xw,useClass:M3,multi:!0,deps:[Ki]},QN,GN,WN,{provide:oS,useExisting:QN},{provide:class qG{},useClass:v3,deps:[]},[]];let F3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Em,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(V3,12))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({providers:[...rx,...nx],imports:[UG,oq]})}return t})(),ix=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=be({token:t,factory:function(r){let i=null;return i=r?new r:function U3(){return new ix(oe(Ki))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:z3}=Array,{getPrototypeOf:W3,prototype:q3,keys:G3}=Object;function ux(t){if(1===t.length){const e=t[0];if(z3(e))return{args:e,keys:null};if(function Z3(t){return t&&"object"==typeof t&&W3(t)===q3}(e)){const n=G3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:K3}=Array;function oT(t){return de(e=>function Q3(t,e){return K3(e)?t(...e):t(e)}(t,e))}function cx(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let lx=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(lo),ee(Ti))};static#t=this.\u0275dir=xe({type:t})}return t})(),gu=(()=>{class t extends lx{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,features:[Rt]})}return t})();const xs=new ue("NgValueAccessor"),X3={provide:xs,useExisting:k(()=>lf),multi:!0},t9=new ue("CompositionEventMode");let lf=(()=>{class t extends lx{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function e9(){const t=sa()?sa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(lo),ee(Ti),ee(t9,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Fn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[un([X3]),Rt]})}return t})();function aa(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function hx(t){return null!=t&&"number"==typeof t.length}const br=new ue("NgValidators"),ua=new ue("NgAsyncValidators"),n9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class aT{static min(e){return function fx(t){return e=>{if(aa(e.value)||aa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function px(t){return e=>{if(aa(e.value)||aa(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return gx(e)}static requiredTrue(e){return function mx(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function _x(t){return aa(t.value)||n9.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function yx(t){return e=>aa(e.value)||!hx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function vx(t){return e=>hx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ix(t){if(!t)return E_;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(aa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Ax(e)}static composeAsync(e){return bx(e)}}function gx(t){return aa(t.value)?{required:!0}:null}function E_(t){return null}function Ex(t){return null!=t}function wx(t){return Wh(t)?I(t):t}function Tx(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Cx(t,e){return e.map(n=>n(t))}function Dx(t){return t.map(e=>function r9(t){return!t.validate}(e)?e:n=>e.validate(n))}function Ax(t){if(!t)return null;const e=t.filter(Ex);return 0==e.length?null:function(n){return Tx(Cx(n,e))}}function uT(t){return null!=t?Ax(Dx(t)):null}function bx(t){if(!t)return null;const e=t.filter(Ex);return 0==e.length?null:function(n){return function Y3(...t){const e=Vi(t),{args:n,keys:r}=ux(t),i=new Le(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;et(n[h]).subscribe(ae(s,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?cx(r,a):a),s.complete())}))}});return e?i.pipe(oT(e)):i}(Cx(n,e).map(wx)).pipe(de(Tx))}}function cT(t){return null!=t?bx(Dx(t)):null}function Sx(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Rx(t){return t._rawValidators}function Px(t){return t._rawAsyncValidators}function lT(t){return t?Array.isArray(t)?t:[t]:[]}function w_(t,e){return Array.isArray(t)?t.includes(e):t===e}function Mx(t,e){const n=lT(e);return lT(t).forEach(i=>{w_(n,i)||n.push(i)}),n}function Nx(t,e){return lT(e).filter(n=>!w_(t,n))}class xx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Qr extends xx{get formDirective(){return null}get path(){return null}}class ca extends xx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ox{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dT=(()=>{class t extends Ox{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(ca,2))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&jm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rt]})}return t})(),kx=(()=>{class t extends Ox{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Qr,10))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&jm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rt]})}return t})();const df="VALID",C_="INVALID",yl="PENDING",hf="DISABLED";function pT(t){return(D_(t)?t.validators:t)||null}function gT(t,e){return(D_(e)?e.asyncValidators:t)||null}function D_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function Fx(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function Lx(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new H(1002,"")})}class A_{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===df}get invalid(){return this.status===C_}get pending(){return this.status==yl}get disabled(){return this.status===hf}get enabled(){return this.status!==hf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Mx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Nx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Nx(e,this._rawAsyncValidators))}hasValidator(e){return w_(this._rawValidators,e)}hasAsyncValidator(e){return w_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=hf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=df,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===df||this.status===yl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hf:df}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yl,this._hasOwnPendingAsyncValidator=!0;const n=wx(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?hf:this.errors?C_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yl)?yl:this._anyControlsHaveStatus(C_)?C_:df}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){D_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function a9(t){return Array.isArray(t)?uT(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function u9(t){return Array.isArray(t)?cT(t):t||null}(this._rawAsyncValidators)}}class ff extends A_{constructor(e,n,r){super(pT(n),gT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Lx(this,0,e),Object.keys(e).forEach(r=>{Fx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Ux extends ff{}const mu=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>pf}),pf="always";function b_(t,e){return[...e.path,t]}function gf(t,e,n=pf){mT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function l9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Bx(t,e)})}(t,e),function h9(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function d9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Bx(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function c9(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function S_(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),P_(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function R_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function mT(t,e){const n=Rx(t);null!==e.validator?t.setValidators(Sx(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=Px(t);null!==e.asyncValidator?t.setAsyncValidators(Sx(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();R_(e._rawValidators,i),R_(e._rawAsyncValidators,i)}function P_(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=Rx(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const i=Px(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}const r=()=>{};return R_(e._rawValidators,r),R_(e._rawAsyncValidators,r),n}function Bx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function yT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function vT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===lf?n=s:function g9(t){return Object.getPrototypeOf(t.constructor)===gu}(s)?r=s:i=s}),i||r||n||null}function Hx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function zx(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _f=class extends A_{constructor(e=null,n,r){super(pT(n),gT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),D_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=zx(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},I9={provide:ca,useExisting:k(()=>ET)},Gx=(()=>Promise.resolve())();let ET=(()=>{class t extends ca{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _f,this._registered=!1,this.name="",this.update=new vn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=vT(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),yT(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Gx.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&ml(r);Gx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?b_(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Qr,9),ee(br,10),ee(ua,10),ee(xs,10),ee(t_,8),ee(mu,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[un([I9]),Rt,ii]})}return t})(),Zx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),Qx=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({})}return t})();const wT=new ue("NgModelWithFormControlWarning"),A9={provide:Qr,useExisting:k(()=>M_)};let M_=(()=>{class t extends Qr{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new vn,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(P_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return gf(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){S_(n.control||null,n,!1),function m9(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function jx(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(S_(r||null,n),(t=>t instanceof _f)(i)&&(gf(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function $x(t,e){mT(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function f9(t,e){return P_(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mT(this.form,this),this._oldForm&&P_(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(ee(br,10),ee(ua,10),ee(mu,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Fn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[un([A9]),Rt,ii]})}return t})();const R9={provide:ca,useExisting:k(()=>DT)};let DT=(()=>{class t extends ca{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new vn,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=vT(0,s)}ngOnChanges(n){this._added||this._setUpControl(),yT(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return b_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(ee(Qr,13),ee(br,10),ee(ua,10),ee(xs,10),ee(wT,8))};static#n=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[un([R9]),Rt,ii]})}return t})(),_u=(()=>{class t{constructor(){this._validator=E_}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):E_,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,features:[ii]})}return t})();const L9={provide:br,useExisting:k(()=>N_),multi:!0};let N_=(()=>{class t extends _u{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ml,this.createValidator=n=>gx}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Ps("required",i._enabled?"":null)},inputs:{required:"required"},features:[un([L9]),Rt]})}return t})(),hO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({imports:[Qx]})}return t})();class fO extends A_{constructor(e,n,r){super(pT(n),gT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Lx(this,0,e),e.forEach((r,i)=>{Fx(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function pO(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let z9=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let s={};return pO(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new ff(i,s)}record(n,r=null){const i=this._reduceControls(n);return new Ux(i,r)}control(n,r,i){let s={};return this.useNonNullable?(pO(r)?s=r:(s.validators=r,s.asyncValidators=i),new _f(n,{...s,nonNullable:!0})):new _f(n,r,i)}array(n,r,i){const s=n.map(o=>this._createControl(o));return new fO(s,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof _f||n instanceof A_?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),W9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:mu,useValue:n.callSetDisabledState??pf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({imports:[hO]})}return t})(),q9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:wT,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:mu,useValue:n.callSetDisabledState??pf}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({imports:[hO]})}return t})();function ST(...t){const e=yi(t),n=Vi(t),{args:r,keys:i}=ux(t);if(0===r.length)return I([],e);const s=new Le(function Z9(t,e,n=hn){return r=>{gO(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)gO(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ae(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>cx(i,o):hn));return n?s.pipe(oT(n)):s}function gO(t,e,n){t?Fr(n,t,e):e()}const x_=q(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function yf(...t){return function K9(){return Lr(1)}()(I(t,yi(t)))}function O_(t){return new Le(e=>{et(t()).subscribe(e)})}function vl(t,e){const n=T(t)?t:()=>t,r=i=>i.error(n());return new Le(e?i=>e.schedule(r,0,i):r)}function RT(){return K((t,e)=>{let n=null;t._refCount++;const r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class PT extends Le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;const n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return RT()(this)}}function ci(t){return t<=0?()=>fn:K((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function k_(...t){const e=yi(t);return K((n,r)=>{(e?yf(t,n,e):yf(t,n)).subscribe(r)})}function mr(t,e){return K((n,r)=>{let i=0;n.subscribe(ae(r,s=>t.call(e,s,i++)&&r.next(s)))})}function V_(t){return K((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mO(t=Q9){return K((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Q9(){return new x_}function la(t,e){const n=arguments.length>=2;return r=>r.pipe(t?mr((i,s)=>t(i,s,r)):hn,ci(1),n?V_(e):mO(()=>new x_))}function vf(t,e){return T(e)?yt(t,e,1):yt(t,1)}function sr(t,e,n){const r=T(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):hn}function yu(t){return K((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ae(n,void 0,void 0,o=>{s=et(t(o,yu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function F_(t,e){return K(function Y9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ae(o,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function MT(t){return t<=0?()=>fn:K((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function _O(t){return de(()=>t)}function NT(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ge="primary",If=Symbol("RouteTitle");class e6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Il(t){return new e6(t)}function t6(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Os(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!yO(t[i],e[i]))return!1;return!0}function yO(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function vO(t){return t.length>0?t[t.length-1]:null}function da(t){return function G9(t){return!!t&&(t instanceof Le||T(t.lift)&&T(t.subscribe))}(t)?t:Wh(t)?I(Promise.resolve(t)):A(t)}const r6={exact:function wO(t,e,n){if(!vu(t.segments,e.segments)||!L_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!wO(t.children[r],e.children[r],n))return!1;return!0},subset:TO},IO={exact:function i6(t,e){return Os(t,e)},subset:function s6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yO(t[n],e[n]))},ignored:()=>!0};function EO(t,e,n){return r6[n.paths](t.root,e.root,n.matrixParams)&&IO[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function TO(t,e,n){return CO(t,e,e.segments,n)}function CO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!vu(i,n)||e.hasChildren()||!L_(i,n,r))}if(t.segments.length===n.length){if(!vu(t.segments,n)||!L_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!TO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(vu(t.segments,i)&&L_(t.segments,i,r)&&t.children[Ge])&&CO(t.children[Ge],e,s,r)}}function L_(t,e,n){return e.every((r,i)=>IO[n](t[i].parameters,r.parameters))}class El{constructor(e=new Pt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Il(this.queryParams)),this._queryParamMap}toString(){return u6.serialize(this)}}class Pt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return U_(this)}}class Ef{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Il(this.parameters)),this._parameterMap}toString(){return bO(this)}}function vu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let wf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return new xT},providedIn:"root"})}return t})();class xT{parse(e){const n=new v6(e);return new El(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Tf(e.root,!0)}`,r=function d6(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${B_(n)}=${B_(i)}`).join("&"):`${B_(n)}=${B_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function c6(t){return encodeURI(t)}(e.fragment)}`:""}`}}const u6=new xT;function U_(t){return t.segments.map(e=>bO(e)).join("/")}function Tf(t,e){if(!t.hasChildren())return U_(t);if(e){const n=t.children[Ge]?Tf(t.children[Ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ge&&r.push(`${i}:${Tf(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function a6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ge?[Tf(t.children[Ge],!1)]:[`${i}:${Tf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ge]?`${U_(t)}/${n[0]}`:`${U_(t)}/(${n.join("//")})`}}function DO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function B_(t){return DO(t).replace(/%3B/gi,";")}function OT(t){return DO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $_(t){return decodeURIComponent(t)}function AO(t){return $_(t.replace(/\+/g,"%20"))}function bO(t){return`${OT(t.path)}${function l6(t){return Object.keys(t).map(e=>`;${OT(e)}=${OT(t[e])}`).join("")}(t.parameters)}`}const h6=/^[^\/()?;#]+/;function kT(t){const e=t.match(h6);return e?e[0]:""}const f6=/^[^\/()?;=#]+/,g6=/^[^=?&#]+/,_6=/^[^&#]+/;class v6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ge]=new Pt(e,n)),r}parseSegment(){const e=kT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Ef($_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function p6(t){const e=t.match(f6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=kT(this.remaining);i&&(r=i,this.capture(r))}e[$_(n)]=$_(r)}parseQueryParam(e){const n=function m6(t){const e=t.match(g6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function y6(t){const e=t.match(_6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=AO(n),s=AO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=kT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ge]:new Pt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function SO(t){return t.segments.length>0?new Pt([],{[Ge]:t}):t}function RO(t){const e={};for(const r of Object.keys(t.children)){const s=RO(t.children[r]);if(r===Ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function I6(t){if(1===t.numberOfChildren&&t.children[Ge]){const e=t.children[Ge];return new Pt(t.segments.concat(e.segments),e.children)}return t}(new Pt(t.segments,e))}function Iu(t){return t instanceof El}function PO(t){let e;const i=SO(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Pt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function MO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return VT(i,i,i,n,r);const s=function w6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new xO(n,e,r)}(e);if(s.toRoot())return VT(i,i,new Pt([],{}),n,r);const o=function T6(t,e,n){if(t.isAbsolute)return new H_(e,!0,0);if(!n)return new H_(e,!1,NaN);if(null===n.parent)return new H_(n,!0,0);const r=j_(t.commands[0])?0:1;return function C6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new H_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Df(o.segmentGroup,o.index,s.commands):OO(o.segmentGroup,o.index,s.commands);return VT(i,o.segmentGroup,a,n,r)}function j_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Cf(t){return"object"==typeof t&&null!=t&&t.outlets}function VT(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=t===e?n:NO(t,e,n);const a=SO(RO(o));return new El(a,s,i)}function NO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:NO(s,e,n)}),new Pt(t.segments,r)}class xO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&j_(r[0]))throw new H(4003,!1);const i=r.find(Cf);if(i&&i!==vO(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class H_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function OO(t,e,n){if(t||(t=new Pt([],{})),0===t.segments.length&&t.hasChildren())return Df(t,e,n);const r=function A6(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Cf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!VO(u,l,o))return s;r+=2}else{if(!VO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Pt(t.segments.slice(0,r.pathIndex),{});return s.children[Ge]=new Pt(t.segments.slice(r.pathIndex),t.children),Df(s,0,i)}return r.match&&0===i.length?new Pt(t.segments,{}):r.match&&!t.hasChildren()?FT(t,e,n):r.match?Df(t,0,i):FT(t,e,n)}function Df(t,e,n){if(0===n.length)return new Pt(t.segments,{});{const r=function D6(t){return Cf(t[0])?t[0].outlets:{[Ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ge)&&t.children[Ge]&&1===t.numberOfChildren&&0===t.children[Ge].segments.length){const s=Df(t.children[Ge],e,n);return new Pt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=OO(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Pt(t.segments,i)}}function FT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Cf(s)){const u=b6(s.outlets);return new Pt(r,u)}if(0===i&&j_(n[0])){r.push(new Ef(t.segments[e].path,kO(n[0]))),i++;continue}const o=Cf(s)?s.outlets[Ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&j_(a)?(r.push(new Ef(o,kO(a))),i+=2):(r.push(new Ef(o,{})),i++)}return new Pt(r,{})}function b6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=FT(new Pt([],{}),0,r))}),e}function kO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function VO(t,e,n){return t==n.path&&Os(e,n.parameters)}const Af="imperative";class ks{constructor(e,n){this.id=e,this.url=n}}class z_ extends ks{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends ks{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bf extends ks{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wl extends ks{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class W_ extends ks{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FO extends ks{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S6 extends ks{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R6 extends ks{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class P6 extends ks{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M6 extends ks{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class x6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class O6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class V6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class LT{}class UT{constructor(e){this.url=e}}class L6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sf,this.attachRef=null}}let Sf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new L6,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class UO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=BT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=BT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=$T(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $T(e,this._root).map(n=>n.value)}}function BT(t,e){if(t===e.value)return e;for(const n of e.children){const r=BT(t,n);if(r)return r}return null}function $T(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$T(t,n);if(r.length)return r.unshift(e),r}return[]}class Io{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Tl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class BO extends UO{constructor(e,n){super(e),this.snapshot=n,jT(this,e)}toString(){return this.snapshot.toString()}}function $O(t,e){const n=function U6(t,e){const o=new q_([],{},{},"",{},Ge,e,null,{});return new HO("",new Io(o,[]))}(0,e),r=new v([new Ef("",{})]),i=new v({}),s=new v({}),o=new v({}),a=new v(""),u=new Cl(r,i,o,a,s,Ge,e,n.root);return u.snapshot=n.root,new BO(new Io(u,[]),n)}class Cl{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(de(l=>l[If]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(de(e=>Il(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(de(e=>Il(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function B6(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class q_{get title(){return this.data?.[If]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Il(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Il(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HO extends UO{constructor(e,n){super(n),this.url=e,jT(this,n)}toString(){return zO(this._root)}}function jT(t,e){e.value._routerState=t,e.children.forEach(n=>jT(t,n))}function zO(t){const e=t.children.length>0?` { ${t.children.map(zO).join(", ")} } `:"";return`${t.value}${e}`}function HT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Os(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Os(e.params,n.params)||t.paramsSubject.next(n.params),function n6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Os(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Os(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zT(t,e){const n=Os(t.params,e.params)&&function o6(t,e){return vu(t,e)&&t.every((n,r)=>Os(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||zT(t.parent,e.parent))}let WT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ge,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=we(Sf),this.location=we(cs),this.changeDetector=we(t_),this.environmentInjector=we(qi),this.inputBinder=we(G_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new $6(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ii]})}return t})();class $6{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Cl?this.route:e===Sf?this.childContexts:this.parent.get(e,n)}}const G_=new ue("");let WO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=ST([r.queryParams,r.params,r.data]).pipe(me(([s,o,a],u)=>(a={...s,...o,...a},0===u?A(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function yq(t){const e=it(t);if(!e)return null;const n=new Uh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();function Rf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function H6(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Rf(t,r,i);return Rf(t,r)})}(t,e,n);return new Io(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rf(t,a)),o}}const r=function z6(t){return new Cl(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Rf(t,s));return new Io(r,i)}}const qT="ngNavigationCancelingError";function qO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Iu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function GO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[qT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function ZO(t){return t&&t[qT]}let KO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Js({type:t,selectors:[["ng-component"]],standalone:!0,features:[GP],decls:1,vars:0,template:function(r,i){1&r&&zh(0,"router-outlet")},dependencies:[WT],encapsulation:2})}return t})();function GT(t){const e=t.children&&t.children.map(GT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=KO),n}function hs(t){return t.outlet||Ge}function Pf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class J6{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),HT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Tl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Tl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Tl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new F6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new k6(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(HT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),HT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Pf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class QO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Z_{constructor(e,n){this.component=e,this.route=n}}function X6(t,e,n){const r=t._root;return Mf(r,e?e._root:null,n,[r.value])}function Dl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function tg(t){return null!==Gu(t)}(t)?e.get(t):t:r}function Mf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Tl(e);return t.children.forEach(o=>{(function t5(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function n5(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!vu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vu(t.url,e.url)||!Os(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zT(t,e)||!Os(t.queryParams,e.queryParams);default:return!zT(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new QO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Mf(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Z_(a.outlet.component,o))}else o&&Nf(e,a,i),i.canActivateChecks.push(new QO(r)),Mf(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nf(a,n.getContext(o),i)),i}function Nf(t,e,n){const r=Tl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Nf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Z_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function xf(t){return"function"==typeof t}function YO(t){return t instanceof x_||"EmptyError"===t?.name}const K_=Symbol("INITIAL_VALUE");function Al(){return me(t=>ST(t.map(e=>e.pipe(ci(1),k_(K_)))).pipe(de(e=>{for(const n of e)if(!0!==n){if(n===K_)return K_;if(!1===n||n instanceof El)return n}return!0}),mr(e=>e!==K_),ci(1)))}function JO(t){return function fi(...t){return pi(t)}(sr(e=>{if(Iu(e))throw qO(0,e)}),de(e=>!0===e))}class Q_{constructor(e){this.segmentGroup=e||null}}class XO{constructor(e){this.urlTree=e}}function bl(t){return vl(new Q_(t))}function e1(t){return vl(new XO(t))}class w5{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new H(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ge])return vl(new H(4e3,!1));i=i.children[Ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new El(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Pt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const ZT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T5(t,e,n,r,i){const s=KT(t,e,n);return s.matched?(r=function q6(t,e){return t.providers&&!t._injector&&(t._injector=ew(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function v5(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(o=>{const a=Dl(o,t);return da(function u5(t){return t&&xf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Al(),JO()):A(!0)}(r,e,n).pipe(de(o=>!0===o?s:{...ZT}))):A(s)}function KT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...ZT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||t6)(n,t,e);if(!i)return{...ZT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function t1(t,e,n,r){return n.length>0&&function A5(t,e,n){return n.some(r=>Y_(t,e,r)&&hs(r)!==Ge)}(t,n,r)?{segmentGroup:new Pt(e,D5(r,new Pt(n,t.children))),slicedSegments:[]}:0===n.length&&function b5(t,e,n){return n.some(r=>Y_(t,e,r))}(t,n,r)?{segmentGroup:new Pt(t.segments,C5(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Pt(t.segments,t.children),slicedSegments:n}}function C5(t,e,n,r,i){const s={};for(const o of r)if(Y_(t,n,o)&&!i[hs(o)]){const a=new Pt([],{});s[hs(o)]=a}return{...i,...s}}function D5(t,e){const n={};n[Ge]=e;for(const r of t)if(""===r.path&&hs(r)!==Ge){const i=new Pt([],{});n[hs(r)]=i}return n}function Y_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class M5{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new w5(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,!1)}recognize(){const e=t1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ge).pipe(yu(n=>{if(n instanceof XO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Q_?this.noMatchError(n):n}),de(n=>{const r=new q_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ge,this.rootComponentType,null,{}),i=new Io(r,n),s=new HO("",i),o=function E6(t,e,n=null,r=null){return MO(PO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ge).pipe(yu(r=>{throw r instanceof Q_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=jO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return I(i).pipe(vf(s=>{const o=r.children[s],a=function Q6(t,e){const n=t.filter(r=>hs(r)===e);return n.push(...t.filter(r=>hs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),F_((s,o)=>(s.push(...o),s)),V_(null),function J9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?mr((i,s)=>t(i,s,r)):hn,MT(1),n?V_(e):mO(()=>new x_))}(),yt(s=>{if(null===s)return bl(r);const o=n1(s);return function N5(t){t.sort((e,n)=>e.value.outlet===Ge?-1:n.value.outlet===Ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),A(o)}))}processSegment(e,n,r,i,s,o){return I(n).pipe(vf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(yu(u=>{if(u instanceof Q_)return A(null);throw u}))),la(a=>!!a),yu(a=>{if(YO(a))return function R5(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?A([]):bl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function S5(t,e,n,r){return!!(hs(t)===r||r!==Ge&&Y_(e,n,t))&&("**"===t.path||KT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):bl(i):bl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?e1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(yt(o=>{const a=new Pt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=KT(n,i,s);if(!a)return bl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?e1(g):this.applyRedirects.lineralizeSegments(i,g).pipe(yt(m=>this.processSegment(e,r,n,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?vO(i).parameters:{};a=A({snapshot:new q_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,r1(r),hs(r),r.component??r._loadedComponent??null,r,i1(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=T5(n,r,i,e).pipe(de(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new q_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,r1(r),hs(r),r.component??r._loadedComponent??null,r,i1(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(me(u=>null===u?bl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(me(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:C,slicedSegments:b}=t1(n,m,y,l);if(0===b.length&&C.hasChildren())return this.processChildren(h,l,C).pipe(de(U=>null===U?null:[new Io(g,U)]));if(0===l.length&&0===b.length)return A([new Io(g,[])]);const M=hs(r)===s;return this.processSegment(h,l,C,b,M?Ge:s,!0).pipe(de(U=>[new Io(g,U)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function y5(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(o=>{const a=Dl(o,t);return da(function i5(t){return t&&xf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Al(),JO())}(e,n,r).pipe(yt(i=>i?this.configLoader.loadChildren(e,n).pipe(sr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function E5(t){return vl(GO(!1,3))}())):A({routes:[],injector:e})}}function x5(t){const e=t.value.routeConfig;return e&&""===e.path}function n1(t){const e=[],n=new Set;for(const r of t){if(!x5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=n1(r.children);e.push(new Io(r.value,i))}return e.filter(r=>!n.has(r))}function r1(t){return t.data||{}}function i1(t){return t.resolve||{}}function s1(t){return"string"==typeof t.title||null===t.title}function QT(t){return me(e=>{const n=t(e);return n?I(n).pipe(de(()=>e)):A(e)})}const Sl=new ue("ROUTES");let YT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=we(BM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=da(n.loadComponent()).pipe(de(o1),sr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),NT(()=>{this.componentLoaders.delete(n)})),i=new PT(r,()=>new j).pipe(RT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function B5(t,e,n,r){return da(t.loadChildren()).pipe(de(o1),yt(i=>i instanceof WP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),de(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Sl,[],{optional:!0,self:!0}).flat()),{routes:o.map(GT),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(NT(()=>{this.childrenLoaders.delete(r)})),o=new PT(s,()=>new j).pipe(RT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function o1(t){return function $5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let J_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=we(YT),this.environmentInjector=we(qi),this.urlSerializer=we(wf),this.rootContexts=we(Sf),this.inputBindingEnabled=null!==we(G_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new x6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new N6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Af,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mr(s=>0!==s.id),de(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),me(s=>{this.currentTransition=s;let o=!1,a=!1;return A(s).pipe(sr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),me(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new wl(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),fn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(me(m=>{const y=this.transitions?.getValue();return this.events.next(new z_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?fn:Promise.resolve(m)}),function O5(t,e,n,r,i,s){return yt(o=>function P5(t,e,n,r,i,s,o="emptyOnly"){return new M5(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),sr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new FO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:C,restoredState:b,extras:M}=u,U=new z_(m,this.urlSerializer.serialize(y),C,b);this.events.next(U);const N=$O(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:N,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(s)}{const m="";return this.events.next(new wl(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),fn}}),sr(u=>{const l=new S6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),de(u=>(this.currentTransition=s={...u,guards:X6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function l5(t,e){return yt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?A({...n,guardsResult:!0}):function d5(t,e,n,r){return I(t).pipe(yt(i=>function _5(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?A(s.map(a=>{const u=Pf(e)??i,l=Dl(a,u);return da(function a5(t){return t&&xf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(la())})).pipe(Al()):A(!0)}(i.component,i.route,n,e,r)),la(i=>!0!==i,!0))}(o,r,i,t).pipe(yt(a=>a&&function r5(t){return"boolean"==typeof t}(a)?function h5(t,e,n,r){return I(e).pipe(vf(i=>yf(function p5(t,e){return null!==t&&e&&e(new O6(t)),A(!0)}(i.route.parent,r),function f5(t,e){return null!==t&&e&&e(new V6(t)),A(!0)}(i.route,r),function m5(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function e5(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>O_(()=>A(o.guards.map(u=>{const l=Pf(o.node)??n,h=Dl(u,l);return da(function o5(t){return t&&xf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(la())})).pipe(Al())));return A(s).pipe(Al())}(t,i.path,n),function g5(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(s=>O_(()=>{const o=Pf(e)??n,a=Dl(s,o);return da(function s5(t){return t&&xf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(la())}));return A(i).pipe(Al())}(t,i.route,n))),la(i=>!0!==i,!0))}(r,s,t,e):A(a)),de(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),sr(u=>{if(s.guardsResult=u.guardsResult,Iu(u.guardsResult))throw qO(0,u.guardsResult);const l=new R6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),mr(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),QT(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(sr(l=>{const h=new P6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),me(l=>{let h=!1;return A(l).pipe(function k5(t,e){return yt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=0;return I(i).pipe(vf(o=>function V5(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!s1(i)&&(s[If]=i.title),function F5(t,e,n,r){const i=function L5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const s={};return I(i).pipe(yt(o=>function U5(t,e,n,r){const i=Pf(e)??r,s=Dl(t,i);return da(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(la(),sr(a=>{s[o]=a}))),MT(1),_O(s),yu(o=>YO(o)?fn:vl(o)))}(s,t,e,r).pipe(de(o=>(t._resolvedData=o,t.data=jO(t,n).resolve,i&&s1(i)&&(t.data[If]=i.title),null)))}(o.route,r,t,e)),sr(()=>s++),MT(1),yt(o=>s===i.length?A(n):fn))})}(n.paramsInheritanceStrategy,this.environmentInjector),sr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),sr(l=>{const h=new M6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),QT(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(sr(m=>{h.component=m}),de(()=>{})));for(const m of h.children)g.push(...l(m));return g};return ST(l(u.targetSnapshot.root)).pipe(V_(),ci(1))}),QT(()=>this.afterPreactivation()),de(u=>{const l=function j6(t,e,n){const r=Rf(t,e._root,n?n._root:void 0);return new BO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),sr(()=>{this.events.next(new LT)}),((t,e,n,r)=>de(i=>(new J6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ci(1),sr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ha(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function X9(t){return K((e,n)=>{et(t).subscribe(ae(n,()=>n.complete(),Te)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(sr(u=>{throw u}))),NT(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),yu(u=>{if(a=!0,ZO(u))this.events.next(new bf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function W6(t){return ZO(t)&&Iu(t.url)}(u)?this.events.next(new UT(u.url)):s.resolve(!1);else{this.events.next(new W_(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return fn}))}))}cancelNavigationTransition(n,r,i){const s=new bf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function a1(t){return t!==Af}let u1=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ge);return r}getResolvedTitleForRoute(n){return n.data[If]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return we(j5)},providedIn:"root"})}return t})(),j5=(()=>{class t extends u1{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(ix))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return we(W5)},providedIn:"root"})}return t})();class z5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let W5=(()=>{class t extends z5{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Rn(t)))(i||t)}}();static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const X_=new ue("",{providedIn:"root",factory:()=>({})});let q5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:function(){return we(G5)},providedIn:"root"})}return t})(),G5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Of=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Of||{});function c1(t,e){t.events.pipe(mr(n=>n instanceof ha||n instanceof bf||n instanceof W_||n instanceof wl),de(n=>n instanceof ha||n instanceof wl?Of.COMPLETE:n instanceof bf&&(0===n.code||1===n.code)?Of.REDIRECTING:Of.FAILED),mr(n=>n!==Of.REDIRECTING),ci(1)).subscribe(()=>{e()})}function Z5(t){throw t}function K5(t,e,n){return e.parse("/")}const Q5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Y5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=we(LM),this.isNgZoneEnabled=!1,this._events=new j,this.options=we(X_,{optional:!0})||{},this.pendingTasks=we(UM),this.errorHandler=this.options.errorHandler||Z5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||K5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=we(q5),this.routeReuseStrategy=we(H5),this.titleStrategy=we(u1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=we(Sl,{optional:!0})?.flat()??[],this.navigationTransitions=we(J_),this.urlSerializer=we(wf),this.location=we(Ow),this.componentInputBindingEnabled=!!we(G_,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=we(It)instanceof It&&It.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new El,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=$O(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(l1(r)&&this._events.next(r));if(r instanceof z_)a1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof wl)this.rawUrlTree=i.rawUrl;else if(r instanceof FO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof LT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof bf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof UT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||a1(i.source)};this.scheduleNavigation(s,Af,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof W_&&this.restoreHistory(i,!0),r instanceof ha&&(this.navigated=!0),l1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Af,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(GT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=PO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return MO(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Iu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Af,null,r)}navigate(n,r={skipLocationChange:!1}){return function J5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...Q5}:!1===r?{...Y5}:r,Iu(n))return EO(this.currentUrlTree,n,i);const s=this.parseUrl(n);return EO(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return c1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function l1(t){return!(t instanceof LT||t instanceof UT)}let ey=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof ha&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Wb(t,e,n){return function NB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?zb:Hb}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Yr),ee(Cl),function Xg(t){return function Pe(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(rc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Wn(),t)}("tabindex"),ee(lo),ee(Ti),ee(pu))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Fn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Ps("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ml],skipLocationChange:["skipLocationChange","skipLocationChange",ml],replaceUrl:["replaceUrl","replaceUrl",ml],routerLink:"routerLink"},standalone:!0,features:[sR,ii]})}return t})();class d1{}let t8=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(mr(n=>n instanceof ha),vf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ew(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return I(i).pipe(Lr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const s=i.pipe(yt(o=>null===o?A(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?I([s,this.loader.loadComponent(r)]).pipe(Lr()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Yr),oe(BM),oe(qi),oe(d1),oe(YT))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const JT=new ue("");let h1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof z_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ha?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof wl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof LO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new LO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function NS(){throw new Error("invalid")}()};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();function Eo(t,e){return{\u0275kind:t,\u0275providers:e}}function p1(){const t=we(Dr);return e=>{const n=t.get(hu);if(e!==n.components[0])return;const r=t.get(Yr),i=t.get(g1);1===t.get(XT)&&r.initialNavigation(),t.get(m1,null,Ye.Optional)?.setUpPreloading(),t.get(JT,null,Ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const g1=new ue("",{factory:()=>new j}),XT=new ue("",{providedIn:"root",factory:()=>1}),m1=new ue("");function s8(t){return Eo(0,[{provide:m1,useExisting:t8},{provide:d1,useExisting:t}])}const _1=new ue("ROUTER_FORROOT_GUARD"),a8=[Ow,{provide:wf,useClass:xT},Yr,Sf,{provide:Cl,useFactory:function f1(t){return t.routerState.root},deps:[Yr]},YT,[]];function u8(){return new GM("Router",Yr)}let y1=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[a8,[],{provide:Sl,multi:!0,useValue:n},{provide:_1,useFactory:h8,deps:[[Yr,new wi,new nm]]},{provide:X_,useValue:r||{}},r?.useHash?{provide:pu,useClass:Tq}:{provide:pu,useClass:TN},{provide:JT,useFactory:()=>{const t=we(HG),e=we(It),n=we(X_),r=we(J_),i=we(wf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new h1(i,r,t,e,n)}},r?.preloadingStrategy?s8(r.preloadingStrategy).\u0275providers:[],{provide:GM,multi:!0,useFactory:u8},r?.initialNavigation?f8(r):[],r?.bindToComponentInputs?Eo(8,[WO,{provide:G_,useExisting:WO}]).\u0275providers:[],[{provide:v1,useFactory:p1},{provide:Tw,multi:!0,useExisting:v1}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Sl,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(_1,8))};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({})}return t})();function h8(t){return"guarded"}function f8(t){return["disabled"===t.initialNavigation?Eo(3,[{provide:Ym,multi:!0,useFactory:()=>{const e=we(Yr);return()=>{e.setUpLocationChangeListener()}}},{provide:XT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Eo(2,[{provide:XT,useValue:0},{provide:Ym,multi:!0,deps:[Dr],useFactory:e=>{const n=e.get(Eq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Yr),s=e.get(g1);c1(i,()=>{r(!0)}),e.get(J_).afterPreactivation=()=>(r(!0),s.closed?A(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const v1=new ue("");class g8{}let eC=(()=>{class t{constructor(){this.notas=[]}agregarReceta(n){const r=this.obtenerNotas();r.push(n),localStorage.setItem("notas",JSON.stringify(r))}obtenerNotas(){const n=localStorage.getItem("notas");return n?JSON.parse(n):[]}borrarNota(n){const r=localStorage.getItem("notas");if(r){const i=JSON.parse(r);i.hasOwnProperty(n)?(delete i[n],localStorage.setItem("notas",JSON.stringify(i)),console.log(`La nota '${n}' ha sido borrada correctamente.`)):console.log(`No se encontr\xf3 la nota '${n}'.`)}else console.log("No hay notas almacenadas en localStorage.")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Jr=Me(534);(0,Jr.registerVersion)("firebase","10.7.0","app");class y8 extends ft{constructor(e,n){super()}schedule(e,n=0){return this}}const ty={setInterval(t,e,...n){const{delegate:r}=ty;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=ty;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class I1 extends y8{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ty.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&ty.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ce(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const tC={now:()=>(tC.delegate||Date).now(),delegate:void 0};class kf{constructor(e,n=kf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}kf.now=tC.now;class E1 extends kf{constructor(e,n=kf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const E8=new class I8 extends E1{}(class v8 extends I1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),ny=new E1(I1),w8=ny,nC=new Jc("ANGULARFIRE2_VERSION");const rC=(t,e)=>{const n=e?[e]:(0,Jr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class iC{constructor(){return rC(T8)}}const T8="app-check";function Rl(){}class T1{zone;delegate;constructor(e,n=E8){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class C8{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rl,{},Rl,Rl)),n.pipe(sr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ry=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new T1(Zone.current)),this.insideAngular=n.run(()=>new T1(Zone.current,ny)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(It))};static \u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Eu(t){return Pl().ngZone.run(()=>t())}function Ai(t){return function A8(t){return function(n){return(n=n.lift(new C8(t.ngZone))).pipe(Jn(t.outsideAngular),_n(t.insideAngular))}}(Pl())(t)}const b8=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Eu(()=>t.apply(void 0,r))},C1=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||=Eu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rl,{},Rl,Rl))),r[s]=b8(r[s],n));const i=function D8(t){return Pl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Le){const s=Pl();return i.pipe(Jn(s.outsideAngular),_n(s.insideAngular))}return Eu(()=>i)}return i instanceof Le?i.pipe(Ai):i instanceof Promise?Eu(()=>new Promise((s,o)=>i.then(a=>Eu(()=>s(a)),a=>Eu(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Eu(()=>i)};var iy=Me(106);iy.Z.registerVersion("firebase","10.7.0","app-compat");const P8=["ngOnDestroy"];class D1{constructor(e){return e}}const sy=new ue("angularfire2.app.options"),sC=new ue("angularfire2.app.name");function oC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=iy.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>iy.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;x8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new D1(o)}const x8=(t,...e)=>{};function A1(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function O8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(b1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${k8?" You may need to reload as Firebase is not HMR aware.":""}`),b1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const k8=typeof module<"u"&&!!module.hot,b1=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Me(365);class V8 extends j{constructor(e=1/0,n=1/0,r=tC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function S1(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new V8(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function R1(t,e){return T(e)?me(()=>t,e):me(()=>t)}const P1=new ue("angularfire2.auth.use-emulator"),M1=new ue("angularfire2.auth.settings"),N1=new ue("angularfire2.auth.tenant-id"),x1=new ue("angularfire2.auth.langugage-code"),O1=new ue("angularfire2.auth.use-device-language"),k1=new ue("angularfire.auth.persistence"),V1=(t,e,n,r,i,s,o,a)=>A1(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let F1=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,h,g,m,y){const C=new j,b=A(void 0).pipe(_n(o.outsideAngular),me(()=>s.runOutsideAngular(()=>Promise.resolve().then(Me.bind(Me,365)))),de(()=>oC(n,s,r)),de(M=>V1(M,s,a,l,h,g,u,m)),S1({bufferSize:1,refCount:!1}));if(__(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{b.pipe(la()).subscribe();const M=b.pipe(me(z=>z.getRedirectResult().then(se=>se,()=>null)),Ai,S1({bufferSize:1,refCount:!1})),U=b.pipe(me(z=>new Le(se=>({unsubscribe:s.runOutsideAngular(()=>z.onAuthStateChanged(he=>se.next(he),he=>se.error(he),()=>se.complete()))})))),N=b.pipe(me(z=>new Le(se=>({unsubscribe:s.runOutsideAngular(()=>z.onIdTokenChanged(he=>se.next(he),he=>se.error(he),()=>se.complete()))}))));this.authState=M.pipe(R1(U),Jn(o.outsideAngular),_n(o.insideAngular)),this.user=M.pipe(R1(N),Jn(o.outsideAngular),_n(o.insideAngular)),this.idToken=this.user.pipe(me(z=>z?I(z.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(me(z=>z?I(z.getIdTokenResult()):A(null))),this.credential=w(M,C,this.authState.pipe(mr(z=>!z))).pipe(de(z=>z?.user?z:null),Jn(o.outsideAngular),_n(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(P8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,b,s,{spy:{apply:(M,U,N)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&N.then(z=>C.next(z))}}})}static \u0275fac=function(r){return new(r||t)(oe(sy),oe(sC,8),oe(os),oe(It),oe(ry),oe(P1,8),oe(M1,8),oe(N1,8),oe(x1,8),oe(O1,8),oe(k1,8),oe(iC,8))};static \u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function aC(){return K((t,e)=>{let n,r=!1;t.subscribe(ae(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var ge,G=Me(861),L1=Me(537),Vs=Me(879),Vt=Me(58),L8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={},uC=uC||{},ze=L8||self;function oy(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var cC="closure_uid_"+(1e9*Math.random()>>>0),B8=0;function $8(t,e,n){return t.call.apply(t.bind,arguments)}function j8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Sr(t,e,n){return(Sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$8:j8).apply(null,arguments)}function ay(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function or(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function fa(){this.s=this.s,this.o=this.o}fa.prototype.s=!1,fa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function U8(t){Object.prototype.hasOwnProperty.call(t,cC)&&t[cC]||(t[cC]=++B8)}(this)},fa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const U1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function lC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function B1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(oy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Rr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rr.prototype.h=function(){this.defaultPrevented=!0};var z8=function(){if(!ze.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ze.addEventListener("test",n,e),ze.removeEventListener("test",n,e)}catch{}return t}();function Ff(t){return/^[\s\xa0]*$/.test(t)}function uy(){var t=ze.navigator;return t&&(t=t.userAgent)?t:""}function Fs(t){return-1!=uy().indexOf(t)}function dC(t){return dC[" "](t),t}dC[" "]=function(){};var fC,t,q8=Fs("Opera"),Ml=Fs("Trident")||Fs("MSIE"),$1=Fs("Edge"),hC=$1||Ml,j1=Fs("Gecko")&&!(-1!=uy().toLowerCase().indexOf("webkit")&&!Fs("Edge"))&&!(Fs("Trident")||Fs("MSIE"))&&!Fs("Edge"),G8=-1!=uy().toLowerCase().indexOf("webkit")&&!Fs("Edge");function H1(){var t=ze.document;return t?t.documentMode:void 0}e:{var pC="",gC=(t=uy(),j1?/rv:([^\);]+)(\)|;)/.exec(t):$1?/Edge\/([\d\.]+)/.exec(t):Ml?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):G8?/WebKit\/(\S+)/.exec(t):q8?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(gC&&(pC=gC?gC[1]:""),Ml){var mC=H1();if(null!=mC&&mC>parseFloat(pC)){fC=String(mC);break e}}fC=pC}var Z8=ze.document&&Ml&&(H1()||parseInt(fC,10))||void 0;function Lf(t,e){if(Rr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(j1){e:{try{dC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:K8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lf.$.h.call(this)}}or(Lf,Rr);var K8={2:"touch",3:"pen",4:"mouse"};Lf.prototype.h=function(){Lf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Uf="closure_listenable_"+(1e6*Math.random()|0),Q8=0;function Y8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Q8,this.fa=this.ia=!1}function cy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function yC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function W1(t){const e={};for(const n in t)e[n]=t[n];return e}const q1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<q1.length;s++)n=q1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ly(t){this.src=t,this.g={},this.h=0}function vC(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=U1(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(cy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function IC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}ly.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=IC(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Y8(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var EC="closure_lm_"+(1e6*Math.random()|0),wC={};function Z1(t,e,n,r,i){if(r&&r.once)return Q1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Z1(t,e[s],n,r,i);return null}return n=AC(n),t&&t[Uf]?t.O(e,n,Vf(r)?!!r.capture:!!r,i):K1(t,e,n,!1,r,i)}function K1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Vf(i)?!!i.capture:!!i,a=CC(t);if(a||(t[EC]=a=new ly(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function X8(){const e=e7;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)z8||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(J1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Q1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q1(t,e[s],n,r,i);return null}return n=AC(n),t&&t[Uf]?t.P(e,n,Vf(r)?!!r.capture:!!r,i):K1(t,e,n,!0,r,i)}function Y1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Y1(t,e[s],n,r,i);else r=Vf(r)?!!r.capture:!!r,n=AC(n),t&&t[Uf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=IC(s=t.g[e],n,r,i))&&(cy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=CC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=IC(e,n,r,i)),(n=-1<t?e[t]:null)&&TC(n))}function TC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Uf])vC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(J1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=CC(e))?(vC(n,t),0==n.h&&(n.src=null,e[EC]=null)):cy(t)}}}function J1(t){return t in wC?wC[t]:wC[t]="on"+t}function e7(t,e){if(t.fa)t=!0;else{e=new Lf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&TC(t),t=n.call(r,e)}return t}function CC(t){return(t=t[EC])instanceof ly?t:null}var DC="__closure_events_fn_"+(1e9*Math.random()>>>0);function AC(t){return"function"==typeof t?t:(t[DC]||(t[DC]=function(e){return t.handleEvent(e)}),t[DC])}function ar(){fa.call(this),this.i=new ly(this),this.S=this,this.J=null}function _r(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Rr(e,t);else if(e instanceof Rr)e.target=e.target||t;else{var i=e;G1(e=new Rr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=dy(o,r,!0,e)&&i}if(i=dy(o=e.g=t,r,!0,e)&&i,i=dy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=dy(o=e.g=n[s],r,!1,e)&&i}function dy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&vC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}or(ar,fa),ar.prototype[Uf]=!0,ar.prototype.removeEventListener=function(t,e,n,r){Y1(this,t,e,n,r)},ar.prototype.N=function(){if(ar.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cy(n[r]);delete t.g[e],t.h--}}this.J=null},ar.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ar.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var bC=ze.JSON.stringify;function n7(){var t=SC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var X1=new class t7{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new i7,t=>t.reset());class i7{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function s7(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function o7(t){ze.setTimeout(()=>{throw t},0)}let Bf,$f=!1,SC=new class r7{constructor(){this.h=this.g=null}add(e,n){const r=X1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},ek=()=>{const t=ze.Promise.resolve(void 0);Bf=()=>{t.then(a7)}};var a7=()=>{for(var t;t=n7();){try{t.h.call(t.g)}catch(n){o7(n)}var e=X1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$f=!1};function hy(t,e){ar.call(this),this.h=t||1,this.g=e||ze,this.j=Sr(this.qb,this),this.l=Date.now()}function RC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function PC(t,e,n){if("function"==typeof t)n&&(t=Sr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Sr(t.handleEvent,t)}return 2147483647<Number(e)?-1:ze.setTimeout(t,e||0)}function tk(t){t.g=PC(()=>{t.g=null,t.i&&(t.i=!1,tk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}or(hy,ar),(ge=hy.prototype).ga=!1,ge.T=null,ge.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_r(this,"tick"),this.ga&&(RC(this),this.start()))}},ge.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.N=function(){hy.$.N.call(this),RC(this),delete this.g};class u7 extends fa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tk(this)}N(){super.N(),this.g&&(ze.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jf(t){fa.call(this),this.h=t,this.g={}}or(jf,fa);var nk=[];function rk(t,e,n,r){Array.isArray(n)||(n&&(nk[0]=n.toString()),n=nk);for(var i=0;i<n.length;i++){var s=Z1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ik(t){yC(t.g,function(e,n){this.g.hasOwnProperty(n)&&TC(e)},t),t.g={}}function fy(){this.g=!0}function Nl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function h7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return bC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}jf.prototype.N=function(){jf.$.N.call(this),ik(this)},jf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fy.prototype.Ea=function(){this.g=!1},fy.prototype.info=function(){};var wu={},sk=null;function py(){return sk=sk||new ar}function ok(t){Rr.call(this,wu.Ta,t)}function Hf(t){const e=py();_r(e,new ok(e))}function ak(t,e){Rr.call(this,wu.STAT_EVENT,t),this.stat=e}function Xr(t){const e=py();_r(e,new ak(e,t))}function uk(t,e){Rr.call(this,wu.Ua,t),this.size=e}function zf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ze.setTimeout(function(){t()},e)}wu.Ta="serverreachability",or(ok,Rr),wu.STAT_EVENT="statevent",or(ak,Rr),wu.Ua="timingevent",or(uk,Rr);var gy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ck={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function MC(){}function dk(){}MC.prototype.h=null;var OC,Wf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function NC(){Rr.call(this,"d")}function xC(){Rr.call(this,"c")}function my(){}function qf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new jf(this),this.P=f7,this.V=new hy(t=hC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hk}function hk(){this.i=null,this.g="",this.h=!1}or(NC,Rr),or(xC,Rr),or(my,MC),my.prototype.g=function(){return new XMLHttpRequest},my.prototype.i=function(){return{}},OC=new my;var f7=45e3,fk={},kC={};function VC(t,e,n){t.L=1,t.A=Iy(wo(e)),t.u=n,t.S=!0,pk(t,null)}function pk(t,e){t.G=Date.now(),Gf(t),t.B=wo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Ck(n.i,"t",r),t.o=0,n=t.l.J,t.h=new hk,t.g=Zk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new u7(Sr(t.Pa,t,t.g),t.O)),rk(t.U,t.g,"readystatechange",t.nb),e=t.I?W1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Hf(),function c7(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function gk(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function mk(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=p7(t,n),i==kC){4==e&&(t.s=4,Xr(14),r=!1),Nl(t.j,t.m,null,"[Incomplete Response]");break}if(i==fk){t.s=4,Xr(15),Nl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Nl(t.j,t.m,i,null),FC(t,i)}gk(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Xr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zC(e),e.M=!0,Xr(11))):(Nl(t.j,t.m,n,"[Invalid Chunked Response]"),Tu(t),Zf(t))}function p7(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?kC:(n=Number(e.substring(n,r)),isNaN(n)?fk:(r+=1)+n>e.length?kC:(e=e.slice(r,r+n),t.o=r+n,e))}function Gf(t){t.Y=Date.now()+t.P,_k(t,t.P)}function _k(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=zf(Sr(t.lb,t),e)}function _y(t){t.C&&(ze.clearTimeout(t.C),t.C=null)}function Zf(t){0==t.l.H||t.J||zk(t.l,t)}function Tu(t){_y(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,RC(t.V),ik(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function FC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||LC(n.i,t)))if(!t.K&&LC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Ay(n),Cy(n)}HC(n),Xr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zf(Sr(n.ib,n),6e3));if(1>=bk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Du(n,11)}else if((t.K||n.g==t)&&Ay(n),!Ff(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const C=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=r.i;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(UC(s,s.h),s.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,tn(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Gk(r,r.J?r.pa:null,r.Y),o.K){Sk(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(_y(a),Gf(a)),r.g=o}else jk(r);0<n.j.length&&Dy(n)}else"stop"!=l[0]&&"close"!=l[0]||Du(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Du(n,7):jC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Hf()}catch{}}function yk(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oy(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function m7(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(oy(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function g7(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(oy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(ge=qf.prototype).setTimeout=function(t){this.P=t},ge.nb=function(t){t=t.target;const e=this.M;e&&3==Ls(t)?e.l():this.Pa(t)},ge.Pa=function(t){try{if(t==this.g)e:{const h=Ls(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||hC||this.g&&(this.h.h||this.g.ja()||Vk(this.g)))){this.J||4!=h||7==e||Hf(),_y(this);var n=this.g.da();this.ca=n;t:if(gk(this)){var r=Vk(this.g);t="";var i=r.length,s=4==Ls(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tu(this),Zf(this);var o="";break t}this.h.i=new ze.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function l7(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ff(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Xr(12),Tu(this),Zf(this);break e}Nl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,FC(this,n)}this.S?(mk(this,h,o),hC&&this.i&&3==h&&(rk(this.U,this.V,"tick",this.mb),this.V.start())):(Nl(this.j,this.m,o,null),FC(this,o)),4==h&&Tu(this),this.i&&!this.J&&(4==h?zk(this.l,this):(this.i=!1,Gf(this)))}else(function O7(t){const e={};t=(t.g&&2<=Ls(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Ff(t[r]))continue;var n=s7(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function J8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Xr(12)):(this.s=0,Xr(13)),Tu(this),Zf(this)}}}catch{}},ge.mb=function(){if(this.g){var t=Ls(this.g),e=this.g.ja();this.o<e.length&&(_y(this),mk(this,t,e),this.i&&4!=t&&Gf(this))}},ge.cancel=function(){this.J=!0,Tu(this)},ge.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function d7(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Hf(),Xr(17)),Tu(this),this.s=2,Zf(this)):_k(this,this.Y-t)};var vk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Cu){this.h=t.h,yy(this,t.j),this.s=t.s,this.g=t.g,vy(this,t.m),this.l=t.l;var e=t.i,n=new Yf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ik(this,n),this.o=t.o}else t&&(e=String(t).match(vk))?(this.h=!1,yy(this,e[1]||"",!0),this.s=Kf(e[2]||""),this.g=Kf(e[3]||"",!0),vy(this,e[4]),this.l=Kf(e[5]||"",!0),Ik(this,e[6]||"",!0),this.o=Kf(e[7]||"")):(this.h=!1,this.i=new Yf(null,this.h))}function wo(t){return new Cu(t)}function yy(t,e,n){t.j=n?Kf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ik(t,e,n){e instanceof Yf?(t.i=e,function T7(t,e){e&&!t.j&&(pa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(wk(this,r),Ck(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Qf(e,E7)),t.i=new Yf(e,t.h))}function tn(t,e,n){t.i.set(e,n)}function Iy(t){return tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Kf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,y7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qf(e,Ek,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Qf(e,Ek,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qf(n,"/"==n.charAt(0)?I7:v7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qf(n,w7)),t.join("")};var Ek=/[#\/\?@]/g,v7=/[#\?:]/g,I7=/[#\?]/g,E7=/[#\?@]/g,w7=/#/g;function Yf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pa(t){t.g||(t.g=new Map,t.h=0,t.i&&function _7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function wk(t,e){pa(t),e=xl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Tk(t,e){return pa(t),e=xl(t,e),t.g.has(e)}function Ck(t,e,n){wk(t,e),0<n.length&&(t.i=null,t.g.set(xl(t,e),lC(n)),t.h+=n.length)}function xl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Dk(t){this.l=t||D7,t=ze.PerformanceNavigationTiming?0<(t=ze.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ze.g&&ze.g.Ka&&ze.g.Ka()&&ze.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=Yf.prototype).add=function(t,e){pa(this),this.i=null,t=xl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ge.forEach=function(t,e){pa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},ge.ta=function(){pa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},ge.Z=function(t){pa(this);let e=[];if("string"==typeof t)Tk(this,t)&&(e=e.concat(this.g.get(xl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ge.set=function(t,e){return pa(this),this.i=null,Tk(this,t=xl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ge.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var D7=10;function Ak(t){return!!t.h||!!t.g&&t.g.size>=t.j}function bk(t){return t.h?1:t.g?t.g.size:0}function LC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function UC(t,e){t.g?t.g.add(e):t.h=e}function Sk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Rk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return lC(t.i)}Dk.prototype.cancel=function(){if(this.i=Rk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var A7=class{stringify(t){return ze.JSON.stringify(t,void 0)}parse(t){return ze.JSON.parse(t,void 0)}};function b7(){this.g=new A7}function S7(t,e,n){const r=n||"";try{yk(t,function(i,s){let o=i;Vf(i)&&(o=bC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ey(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jf(t){this.l=t.ec||null,this.j=t.ob||!1}function wy(t,e){ar.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=BC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}or(Jf,MC),Jf.prototype.g=function(){return new wy(this.l,this.j)},Jf.prototype.i=function(t){return function(){return t}}({}),or(wy,ar);var BC=0;function Pk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Xf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ep(t)}function ep(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ge=wy.prototype).open=function(t,e){if(this.readyState!=BC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ep(this)},ge.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ze).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xf(this)),this.readyState=BC},ge.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ep(this)),this.g&&(this.readyState=3,ep(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ze.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},ge.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xf(this):ep(this),3==this.readyState&&Pk(this)}},ge.Za=function(t){this.g&&(this.response=this.responseText=t,Xf(this))},ge.Ya=function(t){this.g&&(this.response=t,Xf(this))},ge.ka=function(){this.g&&Xf(this)},ge.setRequestHeader=function(t,e){this.v.append(t,e)},ge.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var P7=ze.JSON.parse;function En(t){ar.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Mk,this.L=this.M=!1}or(En,ar);var Mk="",M7=/^https?$/i,N7=["POST","PUT"];function Nk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xk(t),Ty(t)}function xk(t){t.F||(t.F=!0,_r(t,"complete"),_r(t,"error"))}function Ok(t){if(t.h&&typeof uC<"u"&&(!t.C[1]||4!=Ls(t)||2!=t.da()))if(t.v&&4==Ls(t))PC(t.La,0,t);else if(_r(t,"readystatechange"),4==Ls(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(vk)[1]||null;!i&&ze.self&&ze.self.location&&(i=ze.self.location.protocol.slice(0,-1)),r=!M7.test(i?i.toLowerCase():"")}n=r}if(n)_r(t,"complete"),_r(t,"success");else{t.m=6;try{var s=2<Ls(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",xk(t)}}finally{Ty(t)}}}function Ty(t,e){if(t.g){kk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_r(t,"ready");try{n.onreadystatechange=r}catch{}}}function kk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ze.clearTimeout(t.A),t.A=null)}function Ls(t){return t.g?t.g.readyState:0}function Vk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Mk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Fk(t){let e="";return yC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function $C(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):tn(t,e,n))}function tp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Lk(t){this.Ga=0,this.j=[],this.l=new fy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tp("baseRetryDelayMs",5e3,t),this.hb=tp("retryDelaySeedMs",1e4,t),this.eb=tp("forwardChannelMaxRetries",2,t),this.xa=tp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Dk(t&&t.concurrentRequestLimit),this.Ja=new b7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jC(t){if(Uk(t),3==t.H){var e=t.W++,n=wo(t.I);if(tn(n,"SID",t.K),tn(n,"RID",e),tn(n,"TYPE","terminate"),np(t,n),(e=new qf(t,t.l,e)).L=2,e.A=Iy(wo(n)),n=!1,ze.navigator&&ze.navigator.sendBeacon)try{n=ze.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ze.Image&&((new Image).src=e.A,n=!0),n||(e.g=Zk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Gf(e)}qk(t)}function Cy(t){t.g&&(zC(t),t.g.cancel(),t.g=null)}function Uk(t){Cy(t),t.u&&(ze.clearTimeout(t.u),t.u=null),Ay(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ze.clearTimeout(t.m),t.m=null)}function Dy(t){if(!Ak(t.i)&&!t.m){t.m=!0;var e=t.Na;Bf||ek(),$f||(Bf(),$f=!0),SC.add(e,t),t.C=0}}function Bk(t,e){var n;n=e?e.m:t.W++;const r=wo(t.I);tn(r,"SID",t.K),tn(r,"RID",n),tn(r,"AID",t.V),np(t,r),t.o&&t.s&&$C(r,t.o,t.s),n=new qf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$k(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),UC(t.i,n),VC(n,r,e)}function np(t,e){t.na&&yC(t.na,function(n,r){tn(e,r,n)}),t.h&&yk({},function(n,r){tn(e,r,n)})}function $k(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Sr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{S7(h,o,"req"+l+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function jk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Bf||ek(),$f||(Bf(),$f=!0),SC.add(e,t),t.A=0}}function HC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=zf(Sr(t.Ma,t),Wk(t,t.A)),t.A++,0))}function zC(t){null!=t.B&&(ze.clearTimeout(t.B),t.B=null)}function Hk(t){t.g=new qf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=wo(t.wa);tn(e,"RID","rpc"),tn(e,"SID",t.K),tn(e,"AID",t.V),tn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&tn(e,"TO",t.qa),tn(e,"TYPE","xmlhttp"),np(t,e),t.o&&t.s&&$C(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Iy(wo(e)),n.u=null,n.S=!0,pk(n,t)}function Ay(t){null!=t.v&&(ze.clearTimeout(t.v),t.v=null)}function zk(t,e){var n=null;if(t.g==e){Ay(t),zC(t),t.g=null;var r=2}else{if(!LC(t.i,e))return;n=e.F,Sk(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;_r(r=py(),new uk(r,n)),Dy(t)}else jk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function k7(t,e){return!(bk(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=zf(Sr(t.Na,t,e),Wk(t,t.C)),t.C++,0)))}(t,e)||2==r&&HC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Du(t,5);break;case 4:Du(t,10);break;case 3:Du(t,6);break;default:Du(t,2)}}function Wk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Du(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Sr(t.pb,t);n||(n=new Cu("//www.google.com/images/cleardot.gif"),ze.location&&"http"==ze.location.protocol||yy(n,"https"),Iy(n)),function R7(t,e){const n=new fy;if(ze.Image){const r=new Image;r.onload=ay(Ey,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ay(Ey,n,r,"TestLoadImage: error",!1,e),r.onabort=ay(Ey,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ay(Ey,n,r,"TestLoadImage: timeout",!1,e),ze.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xr(2);t.H=0,t.h&&t.h.za(e),qk(t),Uk(t)}function qk(t){if(t.H=0,t.ma=[],t.h){const e=Rk(t.i);(0!=e.length||0!=t.j.length)&&(B1(t.ma,e),B1(t.ma,t.j),t.i.i.length=0,lC(t.j),t.j.length=0),t.h.ya()}}function Gk(t,e,n){var r=n instanceof Cu?wo(n):new Cu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),vy(r,r.m);else{var i=ze.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Cu(null);r&&yy(s,r),e&&(s.g=e),i&&vy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&tn(r,n,e),tn(r,"VER",t.ra),np(t,r),r}function Zk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(t.Ha&&!t.va?new Jf({ob:n}):t.va)).Oa(t.J),e}function Kk(){}function by(){if(Ml&&!(10<=Number(Z8)))throw Error("Environmental error: no available transport.")}function bi(t,e){ar.call(this),this.g=new Lk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ff(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ff(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ol(this)}function Qk(t){NC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Yk(){xC.call(this),this.status=1}function Ol(t){this.g=t}function ps(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function WC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Mt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(ge=En.prototype).Oa=function(t){this.M=t},ge.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():OC.g(),this.C=function lk(t){return t.h||(t.h=t.i())}(this.u?this.u:OC),this.g.onreadystatechange=Sr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Nk(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=ze.FormData&&t instanceof ze.FormData,!(0<=U1(N7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kk(this),0<this.B&&((this.L=function x7(t){return Ml&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sr(this.ua,this)):this.A=PC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Nk(this,s)}},ge.ua=function(){typeof uC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_r(this,"timeout"),this.abort(8))},ge.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_r(this,"complete"),_r(this,"abort"),Ty(this))},ge.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ty(this,!0)),En.$.N.call(this)},ge.La=function(){this.s||(this.G||this.v||this.l?Ok(this):this.kb())},ge.kb=function(){Ok(this)},ge.isActive=function(){return!!this.g},ge.da=function(){try{return 2<Ls(this)?this.g.status:-1}catch{return-1}},ge.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ge.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),P7(e)}},ge.Ia=function(){return this.m},ge.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=Lk.prototype).ra=8,ge.H=1,ge.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new qf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=W1(s),G1(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$k(this,i,e),tn(n=wo(this.I),"RID",t),tn(n,"CVER",22),this.F&&tn(n,"X-HTTP-Session-Id",this.F),np(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Fk(s)))+"&"+e:this.o&&$C(n,this.o,s)),UC(this.i,i),this.bb&&tn(n,"TYPE","init"),this.P?(tn(n,"$req",e),tn(n,"SID","null"),i.aa=!0,VC(i,n,null)):VC(i,n,e),this.H=2}}else 3==this.H&&(t?Bk(this,t):0==this.j.length||Ak(this.i)||Bk(this))},ge.Ma=function(){if(this.u=null,Hk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=zf(Sr(this.jb,this),t)}},ge.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xr(10),Cy(this),Hk(this))},ge.ib=function(){null!=this.v&&(this.v=null,Cy(this),HC(this),Xr(19))},ge.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xr(2)):(this.l.info("Failed to ping google.com"),Xr(1))},ge.isActive=function(){return!!this.h&&this.h.isActive(this)},(ge=Kk.prototype).Ba=function(){},ge.Aa=function(){},ge.za=function(){},ge.ya=function(){},ge.isActive=function(){return!0},ge.Va=function(){},by.prototype.g=function(t,e){return new bi(t,e)},or(bi,ar),bi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Gk(t,null,t.Y),Dy(t)},bi.prototype.close=function(){jC(this.g)},bi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=bC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Dy(e)},bi.prototype.N=function(){this.g.h=null,delete this.j,jC(this.g),delete this.g,bi.$.N.call(this)},or(Qk,NC),or(Yk,xC),or(Ol,Kk),Ol.prototype.Ba=function(){_r(this.g,"a")},Ol.prototype.Aa=function(t){_r(this.g,new Qk(t))},Ol.prototype.za=function(t){_r(this.g,new Yk)},Ol.prototype.ya=function(){_r(this.g,"b")},or(ps,function V7(){this.blockSize=-1}),ps.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ps.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)WC(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){WC(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){WC(this,r),i=0;break}}this.h=i,this.i+=e},ps.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var F7={};function qC(t){return-128<=t&&128>t?function W8(t,e){var n=F7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Mt([0|e],0>e?-1:0)}):new Mt([0|t],0>t?-1:0)}function Us(t){if(isNaN(t)||!isFinite(t))return kl;if(0>t)return yr(Us(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=GC;return new Mt(e,0)}var GC=4294967296,kl=qC(0),ZC=qC(1),Xk=qC(16777216);function To(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ji(t){return-1==t.h}function yr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Mt(n,~t.h).add(ZC)}function Sy(t,e){return t.add(yr(e))}function Ry(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function rp(t,e){this.g=t,this.h=e}function Py(t,e){if(To(e))throw Error("division by zero");if(To(t))return new rp(kl,kl);if(Ji(t))return e=Py(yr(t),e),new rp(yr(e.g),yr(e.h));if(Ji(e))return e=Py(t,yr(e)),new rp(yr(e.g),e.h);if(30<t.g.length){if(Ji(t)||Ji(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ZC,r=e;0>=r.X(t);)n=eV(n),r=eV(r);var i=Vl(n,1),s=Vl(r,1);for(r=Vl(r,2),n=Vl(n,2);!To(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Vl(r,1),n=Vl(n,1)}return e=Sy(t,i.R(e)),new rp(i,e)}for(i=kl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Us(n)).R(e);Ji(o)||0<o.X(t);)o=(s=Us(n-=r)).R(e);To(s)&&(s=ZC),i=i.add(s),t=Sy(t,o)}return new rp(i,t)}function eV(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Mt(n,t.h)}function Vl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Mt(i,t.h)}(ge=Mt.prototype).ea=function(){if(Ji(this))return-yr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:GC+r)*e,e*=GC}return t},ge.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(To(this))return"0";if(Ji(this))return"-"+yr(this).toString(t);for(var e=Us(Math.pow(t,6)),n=this,r="";;){var i=Py(n,e).g,s=((0<(n=Sy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(To(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ge.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},ge.X=function(t){return Ji(t=Sy(this,t))?-1:To(t)?0:1},ge.abs=function(){return Ji(this)?yr(this):this},ge.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Mt(n,-2147483648&n[n.length-1]?-1:0)},ge.R=function(t){if(To(this)||To(t))return kl;if(Ji(this))return Ji(t)?yr(this).R(yr(t)):yr(yr(this).R(t));if(Ji(t))return yr(this.R(yr(t)));if(0>this.X(Xk)&&0>t.X(Xk))return Us(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Ry(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Ry(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ry(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ry(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Mt(n,0)},ge.gb=function(t){return Py(this,t).h},ge.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Mt(n,this.h&t.h)},ge.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Mt(n,this.h|t.h)},ge.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Mt(n,this.h^t.h)},by.prototype.createWebChannel=by.prototype.g,bi.prototype.send=bi.prototype.u,bi.prototype.open=bi.prototype.m,bi.prototype.close=bi.prototype.close,gy.NO_ERROR=0,gy.TIMEOUT=8,gy.HTTP_ERROR=6,ck.COMPLETE="complete",dk.EventType=Wf,Wf.OPEN="a",Wf.CLOSE="b",Wf.ERROR="c",Wf.MESSAGE="d",ar.prototype.listen=ar.prototype.O,En.prototype.listenOnce=En.prototype.P,En.prototype.getLastError=En.prototype.Sa,En.prototype.getLastErrorCode=En.prototype.Ia,En.prototype.getStatus=En.prototype.da,En.prototype.getResponseJson=En.prototype.Wa,En.prototype.getResponseText=En.prototype.ja,En.prototype.send=En.prototype.ha,En.prototype.setWithCredentials=En.prototype.Oa,ps.prototype.digest=ps.prototype.l,ps.prototype.reset=ps.prototype.reset,ps.prototype.update=ps.prototype.j,Mt.prototype.add=Mt.prototype.add,Mt.prototype.multiply=Mt.prototype.R,Mt.prototype.modulo=Mt.prototype.gb,Mt.prototype.compare=Mt.prototype.X,Mt.prototype.toNumber=Mt.prototype.ea,Mt.prototype.toString=Mt.prototype.toString,Mt.prototype.getBits=Mt.prototype.D,Mt.fromNumber=Us,Mt.fromString=function Jk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return yr(Jk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Us(Math.pow(e,8)),r=kl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Us(Math.pow(e,s)),r=r.R(s).add(Us(o))):r=(r=r.R(n)).add(Us(o))}return r};var L7=fs.createWebChannelTransport=function(){return new by},U7=fs.getStatEventTarget=function(){return py()},KC=fs.ErrorCode=gy,B7=fs.EventType=ck,$7=fs.Event=wu,tV=fs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},My=(fs.FetchXmlHttpFactory=Jf,fs.WebChannel=dk),j7=fs.XhrIo=En,H7=fs.Md5=ps,Fl=fs.Integer=Mt;const nV="@firebase/firestore";class ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let Ll="10.7.0";const ga=new Vs.Yd("@firebase/firestore");function Ul(){return ga.logLevel}function re(t,...e){if(ga.logLevel<=Vs.in.DEBUG){const n=e.map(QC);ga.debug(`Firestore (${Ll}): ${t}`,...n)}}function Nn(t,...e){if(ga.logLevel<=Vs.in.ERROR){const n=e.map(QC);ga.error(`Firestore (${Ll}): ${t}`,...n)}}function li(t,...e){if(ga.logLevel<=Vs.in.WARN){const n=e.map(QC);ga.warn(`Firestore (${Ll}): ${t}`,...n)}}function QC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ie(t="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+t;throw Nn(e),new Error(e)}function Ae(t,e){t||Ie()}function ce(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Vt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class rV{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ur.UNAUTHENTICATED))}shutdown(){}}class G7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z7{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,G.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new rV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new ur(e)}}class K7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new K7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new iV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function J7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class sV{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=J7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Bl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function oV(t){return t+"\0"}class cn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new cn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new cn(0,0))}static max(){return new Se(new cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ip{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ie(),void 0===r?r=e.length-n:r>e.length-n&&Ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ip.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ip?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends ip{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const X7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends ip{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return X7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(mt.fromString(e))}static fromName(e){return new le(mt.fromString(e).popFirst(5))}static empty(){return new le(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new mt(e.slice()))}}class $l{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function YC(t){return t.fields.find(e=>2===e.kind)}function Au(t){return t.fields.filter(e=>2!==e.kind)}$l.UNKNOWN_ID=-1;class bu{constructor(e,n){this.fieldPath=e,this.kind=n}}class jl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new jl(0,Si.min())}}function aV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(1e9===r?new cn(n+1,0):new cn(n,r));return new Si(i,le.empty(),e)}function uV(t){return new Si(t.readTime,t.key,-1)}class Si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Si(Se.min(),le.empty(),-1)}static max(){return new Si(Se.max(),le.empty(),-1)}}function JC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:$e(t.largestBatchId,e.largestBatchId))}const cV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ma(t){return XC.apply(this,arguments)}function XC(){return XC=(0,G.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==cV)throw t;re("LocalStore","Unexpectedly lost primary lease")}),XC.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Ny{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new sp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=eD(r.target.error);this.V.reject(new sp(e,i))}}static open(e,n,r,i){try{return new Ny(n,e.transaction(i,r))}catch(s){throw new sp(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new rZ(n)}}class gs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===gs.S((0,Vt.z$)())&&Nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Vt.hl)())return!1;if(gs.C())return!0;const e=(0,Vt.z$)(),n=gs.S(e),r=0<n&&n<10,i=gs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,G.Z)(function*(){return n.db||(re("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new sp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new sp(e,a))},s.onupgradeneeded=o=>{re("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{re("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,G.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Ny.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(re("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Su(this.k.delete())}}class sp extends J{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _a(t){return"IndexedDbTransactionError"===t.name}class rZ{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Su(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}get(e){return Su(this.store.get(e)).next(n=>(void 0===n&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Su(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new O((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=eD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new nZ(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Su(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=eD(r.target.error);n(i)}})}let dV=!1;function eD(t){const e=gs.S((0,Vt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dV||(dV=!0,setTimeout(()=>{throw r},0)),r}}return t}class iZ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){n.task=null;try{re("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){_a(r)?re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ma(r)}yield n.ee(6e4)}))}}class sZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,G.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return re("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(re("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=uV(s);JC(o,r)>0&&(r=o)}),new Si(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Ri=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function op(t){return null==t}function ap(t){return 0===t&&1/t==-1/0}function hV(t){return"number"==typeof t&&Number.isInteger(t)&&!ap(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Pr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fV(e)),e=oZ(t.get(n),e);return fV(e)}function oZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function fV(t){return t+"\x01\x01"}function Bs(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),mt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&Ie(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Ie()}s=o+2}return new mt(r)}const pV=["userId","batchId"];function xy(t,e){return[t,Pr(e)]}function gV(t,e,n){return[t,Pr(e),n]}const aZ={},uZ=["prefixPath","collectionGroup","readTime","documentId"],cZ=["prefixPath","collectionGroup","documentId"],lZ=["collectionGroup","readTime","prefixPath","documentId"],dZ=["canonicalId","targetId"],hZ=["targetId","path"],fZ=["path","targetId"],pZ=["collectionId","parent"],gZ=["indexId","uid"],mZ=["uid","sequenceNumber"],_Z=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yZ=["indexId","uid","orderedDocumentKey"],vZ=["userId","collectionPath","documentId"],IZ=["userId","collectionPath","largestBatchId"],EZ=["userId","collectionGroup","largestBatchId"],mV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wZ=[...mV,"documentOverlays"],_V=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yV=_V,TZ=[...yV,"indexConfiguration","indexState","indexEntries"];class tD extends lV{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function cr(t,e){const n=ce(t);return gs.M(n.ae,e)}function vV(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Wt{constructor(e,n){this.comparator=e,this.root=n||vr.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oy(this.root,e,this.comparator,!0)}}class Oy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vr.RED,this.left=i??vr.EMPTY,this.right=s??vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return vr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1,vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new EV(this.data.getIterator())}getIteratorFrom(e){return new EV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class EV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(t){return t.hasNext()?t.getNext():void 0}class di{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new di([])}unionWith(e){let n=new Ft(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class wV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wV("Invalid base64 string: "+s):s}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const DZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function va(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=DZ.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Co(t){return"string"==typeof t?Kn.fromBase64String(t):Kn.fromUint8Array(t)}function ky(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vy(t){const e=t.mapValue.fields.__previous_value__;return ky(e)?Vy(e):e}function up(t){const e=va(t.mapValue.fields.__local_write_time__.timestampValue);return new cn(e.seconds,e.nanos)}class AZ{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ia{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ia("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}const Ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fy={nullValue:"NULL_VALUE"};function wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ky(t)?4:AV(t)?9007199254740991:10:Ie()}function $s(t,e){if(t===e)return!0;const n=wa(t);if(n!==wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return up(t).isEqual(up(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=va(i.timestampValue),a=va(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Co(t.bytesValue).isEqual(Co(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wn(i.geoPointValue.latitude)===wn(s.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wn(i.integerValue)===wn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wn(i.doubleValue),a=wn(s.doubleValue);return o===a?ap(o)===ap(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bl(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vV(o)!==vV(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!$s(o[u],a[u])))return!1;return!0}(t,e);default:return Ie()}var s}function cp(t,e){return void 0!==(t.values||[]).find(n=>$s(n,e))}function Ta(t,e){if(t===e)return 0;const n=wa(t),r=wa(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wn(s.integerValue||s.doubleValue),u=wn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return TV(t.timestampValue,e.timestampValue);case 4:return TV(up(t),up(e));case 5:return $e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Co(s),u=Co(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=$e(a[l],u[l]);if(0!==h)return h}return $e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$e(wn(s.latitude),wn(o.latitude));return 0!==a?a:$e(wn(s.longitude),wn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ta(a[l],u[l]);if(h)return h}return $e(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ea.mapValue&&o===Ea.mapValue)return 0;if(s===Ea.mapValue)return 1;if(o===Ea.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=$e(u[g],h[g]);if(0!==m)return m;const y=Ta(a[u[g]],l[h[g]]);if(0!==y)return y}return $e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie()}}function TV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $e(t,e);const n=va(t),r=va(e),i=$e(n.seconds,r.seconds);return 0!==i?i:$e(n.nanos,r.nanos)}function zl(t){return nD(t)}function nD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=va(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Co(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=nD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${nD(n.fields[o])}`;return i+"}"}(t.mapValue):Ie()}function Ru(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rD(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function CV(t){return!!t&&"nullValue"in t}function DV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uy(t){return!!t&&"mapValue"in t}function dp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function bZ(t){return"nullValue"in t?Fy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ru(Ia.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ie()}function SZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ru(Ia.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ea:Ie()}function bV(t,e){const n=Ta(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function SV(t,e){const n=Ta(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dp(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=dp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Uy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Uy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ya(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ir(dp(this.value))}}function RV(t){const e=[];return ya(t.fields,(n,r)=>{const i=new nn([n]);if(Uy(r)){const s=RV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new di(e)}class rn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,Se.min(),Se.min(),Se.min(),Ir.empty(),0)}static newFoundDocument(e,n,r,i){return new rn(e,1,n,Se.min(),r,i,0)}static newNoDocument(e,n){return new rn(e,2,n,Se.min(),Se.min(),Ir.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Se.min(),Se.min(),Ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ca{constructor(e,n){this.position=e,this.inclusive=n}}function PV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(o.referenceValue),n.key):Ta(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function MV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}class hp{constructor(e,n="asc"){this.field=e,this.dir=n}}function RZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class NV{}class ht extends NV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new PZ(e,n,r):"array-contains"===n?new xZ(e,r):"in"===n?new LV(e,r):"not-in"===n?new OZ(e,r):"array-contains-any"===n?new kZ(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new MZ(e,r):new NZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ta(n,this.value)):null!==n&&wa(this.value)===wa(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nt extends NV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Nt(e,n)}matches(e){return Wl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Wl(t){return"and"===t.op}function iD(t){return"or"===t.op}function sD(t){return xV(t)&&Wl(t)}function xV(t){for(const e of t.filters)if(e instanceof Nt)return!1;return!0}function oD(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(sD(t))return t.filters.map(e=>oD(e)).join(",");{const e=t.filters.map(n=>oD(n)).join(",");return`${t.op}(${e})`}}function OV(t,e){return t instanceof ht?(r=t,(i=e)instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&$s(r.value,i.value)):t instanceof Nt?function(r,i){return i instanceof Nt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&OV(o,i.filters[a]),!0)}(t,e):void Ie();var r,i}function kV(t,e){const n=t.filters.concat(e);return Nt.create(n,t.op)}function VV(t){return t instanceof ht?`${(n=t).field.canonicalString()} ${n.op} ${zl(n.value)}`:t instanceof Nt?function(n){return n.op.toString()+" {"+n.getFilters().map(VV).join(" ,")+"}"}(t):"Filter";var n}class PZ extends ht{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class MZ extends ht{constructor(e,n){super(e,"in",n),this.keys=FV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NZ extends ht{constructor(e,n){super(e,"not-in",n),this.keys=FV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class xZ extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&cp(n.arrayValue,this.value)}}class LV extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cp(this.value.arrayValue,n)}}class OZ extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cp(this.value.arrayValue,n)}}class kZ extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cp(this.value.arrayValue,r))}}class VZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function aD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new VZ(t,e,n,r,i,s,o)}function Pu(t){const e=ce(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zl(r)).join(",")),e.ce=n}return e.ce}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MV(t.startAt,e.startAt)&&MV(t.endAt,e.endAt)}function By(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function $y(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function UV(t,e,n){let r=Fy,i=!0;for(const s of $y(t,e)){let o=Fy,a=!0;switch(s.op){case"<":case"<=":o=bZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Fy}bV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];bV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function BV(t,e,n){let r=Ea,i=!0;for(const s of $y(t,e)){let o=Ea,a=!0;switch(s.op){case">=":case">":o=SZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ea}SV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];SV({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Do{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function $V(t,e,n,r,i,s,o,a){return new Do(t,e,n,r,i,s,o,a)}function ql(t){return new Do(t)}function jV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function uD(t){return null!==t.collectionGroup}function Gl(t){const e=ce(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ft(nn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new hp(s,r))}),n.has(nn.keyField().canonicalString())||e.le.push(new hp(nn.keyField(),r))}return e.le}function ei(t){const e=ce(t);return e.he||(e.he=function HV(t,e){if("F"===t.limitType)return aD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new hp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Ca(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ca(t.startAt.position,t.startAt.inclusive):null;return aD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Gl(t))),e.he}function cD(t,e){const n=t.filters.concat([e]);return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jy(t,e,n){return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pp(t,e){return fp(ei(t),ei(e))&&t.limitType===e.limitType}function zV(t){return`${Pu(ei(t))}|lt:${t.limitType}`}function Zl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VV(i)).join(", ")}]`),op(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zl(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function gp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Gl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=PV(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Gl(r),i)||r.endAt&&!function(o,a,u){const l=PV(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Gl(r),i)));var r,i}function WV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qV(t){return(e,n)=>{let r=!1;for(const i of Gl(t)){const s=FZ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function FZ(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Ta(u,l):Ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IV(this.inner)}size(){return this.innerSize}}const LZ=new Wt(le.comparator);function hi(){return LZ}const GV=new Wt(le.comparator);function mp(...t){let e=GV;for(const n of t)e=e.insert(n.key,n);return e}function ZV(t){let e=GV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return _p()}function KV(){return _p()}function _p(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const UZ=new Wt(le.comparator),BZ=new Ft(le.comparator);function Ze(...t){let e=BZ;for(const n of t)e=e.add(n);return e}const $Z=new Ft($e);function lD(){return $Z}function QV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function YV(t){return{integerValue:""+t}}function JV(t,e){return hV(e)?YV(e):QV(t,e)}class Hy{constructor(){this._=void 0}}function jZ(t,e,n){return t instanceof Kl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ky(s)&&(s=Vy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Mu?eF(t,e):t instanceof Nu?tF(t,e):function(i,s){const o=XV(i,s),a=nF(o)+nF(i.Ie);return rD(o)&&rD(i.Ie)?YV(a):QV(i.serializer,a)}(t,e)}function HZ(t,e,n){return t instanceof Mu?eF(t,e):t instanceof Nu?tF(t,e):n}function XV(t,e){return t instanceof Ql?rD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Kl extends Hy{}class Mu extends Hy{constructor(e){super(),this.elements=e}}function eF(t,e){const n=rF(e);for(const r of t.elements)n.some(i=>$s(i,r))||n.push(r);return{arrayValue:{values:n}}}class Nu extends Hy{constructor(e){super(),this.elements=e}}function tF(t,e){let n=rF(e);for(const r of t.elements)n=n.filter(i=>!$s(i,r));return{arrayValue:{values:n}}}class Ql extends Hy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function nF(t){return wn(t.integerValue||t.doubleValue)}function rF(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class yp{constructor(e,n){this.field=e,this.transform=n}}class WZ{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Wy{}function iF(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Jl(t.key,ln.none()):new Yl(t.key,t.data,ln.none());{const n=t.data,r=Ir.empty();let i=new Ft(nn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new bo(t.key,r,new di(i.toArray()),ln.none())}}function qZ(t,e,n){t instanceof Yl?function(i,s,o){const a=i.value.clone(),u=aF(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bo?function(i,s,o){if(!zy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=aF(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(oF(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function vp(t,e,n,r){return t instanceof Yl?function(s,o,a,u){if(!zy(s.precondition,o))return a;const l=s.value.clone(),h=uF(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof bo?function(s,o,a,u){if(!zy(s.precondition,o))return a;const l=uF(s.fieldTransforms,u,o),h=o.data;return h.setAll(oF(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,zy(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function GZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=XV(r.transform,i||null);null!=s&&(null===n&&(n=Ir.empty()),n.set(r.field,s))}return n||null}function sF(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Bl(r,i,(s,o)=>function zZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Mu&&i instanceof Mu||r instanceof Nu&&i instanceof Nu?Bl(r.elements,i.elements,$s):r instanceof Ql&&i instanceof Ql?$s(r.Ie,i.Ie):r instanceof Kl&&i instanceof Kl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Yl extends Wy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bo extends Wy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aF(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,HZ(o,a,n[i]))}return r}function uF(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,jZ(s,o,e))}return r}class Jl extends Wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dD extends Wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qZ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=iF(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(n,r)=>sF(n,r))&&Bl(this.baseMutations,e.baseMutations,(n,r)=>sF(n,r))}}class fD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=UZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fD(e,n,r,i)}}class pD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class KZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Un,_t;function cF(t){switch(t){default:return Ie();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function lF(t){if(void 0===t)return Nn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Un.OK:return B.OK;case Un.CANCELLED:return B.CANCELLED;case Un.UNKNOWN:return B.UNKNOWN;case Un.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Un.INTERNAL:return B.INTERNAL;case Un.UNAVAILABLE:return B.UNAVAILABLE;case Un.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Un.NOT_FOUND:return B.NOT_FOUND;case Un.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Un.ABORTED:return B.ABORTED;case Un.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Un.DATA_LOSS:return B.DATA_LOSS;default:return Ie()}}(_t=Un||(Un={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function dF(){return new TextEncoder}const QZ=new Fl([4294967295,4294967295],0);function hF(t){const e=dF().encode(t),n=new H7;return n.update(e),new Uint8Array(n.digest())}function fF(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fl([n,r],0),new Fl([i,s],0)]}class gD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ip(`Invalid padding: ${n}`);if(r<0)throw new Ip(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ip(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ip(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Fl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Fl.fromNumber(r)));return 1===i.compare(QZ)&&(i=new Fl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=hF(e),[r,i]=fF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=hF(e),[r,i]=fF(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ip extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ep{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ep(Se.min(),i,new Wt($e),hi(),Ze())}}class wp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wp(r,n,Ze(),Ze(),Ze())}}class Gy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class pF{constructor(e,n){this.targetId=e,this.fe=n}}class gF{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mF{constructor(){this.ge=0,this.pe=yF(),this.ye=Kn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ie()}}),new wp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=yF()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class YZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=hi(),this.Qe=_F(),this.Ke=new Wt($e)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(By(s))if(0===r){const o=new le(s.path);this.We(n,o,rn.newNoDocument(o,Se.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Co(r).toUint8Array()}catch(u){if(u instanceof wV)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new gD(o,i,s)}catch(u){return li(u instanceof Ip?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&By(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,rn.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Ep(e,n,this.Ke,this.qe,r);return this.qe=hi(),this.Qe=_F(),this.Ke=new Wt($e),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new mF,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ft($e),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new mF),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _F(){return new Wt(le.comparator)}function yF(){return new Wt(le.comparator)}const JZ={asc:"ASCENDING",desc:"DESCENDING"},XZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eK={and:"AND",or:"OR"};class tK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mD(t,e){return t.useProto3Json||op(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nK(t,e){return Xl(t,e.toTimestamp())}function xn(t){return Ae(!!t),Se.fromTimestamp(function(n){const r=va(n);return new cn(r.seconds,r.nanos)}(t))}function _D(t,e){return(r=t,new mt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function IF(t){const e=mt.fromString(t);return Ae(RF(e)),e}function Tp(t,e){return _D(t.databaseId,e.path)}function Hs(t,e){const n=IF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(wF(n))}function yD(t,e){return _D(t.databaseId,e)}function EF(t){const e=IF(t);return 4===e.length?mt.emptyPath():wF(e)}function Cp(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wF(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function TF(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function CF(t,e,n){const r=Hs(t,e.name),i=xn(e.updateTime),s=e.createTime?xn(e.createTime):Se.min(),o=new Ir({mapValue:{fields:e.fields}}),a=rn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Dp(t,e){let n;if(e instanceof Yl)n={update:TF(t,e.key,e.value)};else if(e instanceof Jl)n={delete:Tp(t,e.key)};else if(e instanceof bo)n={update:TF(t,e.key,e.data),updateMask:lK(e.fieldMask)};else{if(!(e instanceof dD))return Ie();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ql)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ie()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:nK(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ie()),n;var s}function vD(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ln.updateTime(xn(s.updateTime)):void 0!==s.exists?ln.exists(s.exists):ln.none():ln.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new Kl):"appendMissingElements"in a?u=new Mu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Nu(a.removeAllFromArray.values||[]):"increment"in a?u=new Ql(o,a.increment):Ie();const l=nn.fromServerFormat(a.fieldPath);return new yp(l,u)}(t,i)):[];var s;if(e.update){const i=Hs(t,e.update.name),s=new Ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new di((e.updateMask.fieldPaths||[]).map(h=>nn.fromServerFormat(h)));return new bo(i,s,o,n,r)}return new Yl(i,s,n,r)}if(e.delete){const i=Hs(t,e.delete);return new Jl(i,n)}if(e.verify){const i=Hs(t,e.verify);return new dD(i,n)}return Ie()}function DF(t,e){return{documents:[yD(t,e.path)]}}function ID(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=yD(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=yD(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return SF(Nt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Da((g=l).field),direction:aK(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=mD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function AF(t){let e=EF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=bF(g);return m instanceof Nt&&sD(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(m=>{return new hp(ed((C=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,op(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Ca((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Ca(g.values||[],!g.before)}(n.endAt)),$V(e,i,o,s,a,"F",u,l)}function bF(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ed(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ed(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ed(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ed(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(t):void 0!==t.fieldFilter?ht.create(ed((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Nt.create(n.compositeFilter.filters.map(r=>bF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(t):Ie();var n}function aK(t){return JZ[t]}function uK(t){return XZ[t]}function cK(t){return eK[t]}function Da(t){return{fieldPath:t.canonicalString()}}function ed(t){return nn.fromServerFormat(t.fieldPath)}function SF(t){return t instanceof ht?function(n){if("=="===n.op){if(DV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NAN"}};if(CV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(DV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NAN"}};if(CV(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Da(n.field),op:uK(n.op),value:n.value}}}(t):t instanceof Nt?function(n){const r=n.getFilters().map(i=>SF(i));return 1===r.length?r[0]:{compositeFilter:{op:cK(n.op),filters:r}}}(t):Ie()}function lK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class So{constructor(e,n,r,i,s=Se.min(),o=Se.min(),a=Kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PF{constructor(e){this.ut=e}}function MF(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Tp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Xl(s,o.version.toTimestamp()),createTime:Xl(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:xu(e.version)};else{if(!e.isUnknownDocument())return Ie();r.unknownDocument={path:n.path.toArray(),version:xu(e.version)}}var s,o;return r}function Zy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function xu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ou(t){const e=new cn(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function ku(t,e){const n=(e.baseMutations||[]).map(s=>vD(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>vD(t.ut,s)),i=cn.fromMillis(e.localWriteTimeMs);return new hD(e.batchId,i,n,r)}function Ap(t){const e=Ou(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Ou(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),ei(ql(EF(s.documents[0])))):function(s){return ei(AF(s))}(t.query),new So(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Kn.fromBase64String(t.resumeToken));var s}function NF(t,e){const n=xu(e.snapshotVersion),r=xu(e.lastLimboFreeSnapshotVersion);let i;i=By(e.target)?DF(t.ut,e.target):ID(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ED(t){const e=AF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jy(e,e.limit,"L"):e}function wD(t,e){return new pD(e.largestBatchId,vD(t.ut,e.overlayMutation))}function xF(t,e){const n=e.path.lastSegment();return[t,Pr(e.path.popLast()),n]}function OF(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:xu(r.readTime),documentKey:Pr(r.documentKey.path),largestBatchId:r.largestBatchId}}class hK{getBundleMetadata(e,n){return kF(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ou(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return kF(e).put({bundleId:(i=n).id,createTime:xu(xn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return VF(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:ED(s.bundledQuery),readTime:Ou(s.readTime)};var s})}saveNamedQuery(e,n){return VF(e).put({name:(i=n).name,readTime:xu(xn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function kF(t){return cr(t,"bundles")}function VF(t){return cr(t,"namedQueries")}class Ky{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Ky(e,n.uid||"")}getOverlay(e,n){return bp(e).get(xF(this.userId,n)).next(r=>r?wD(this.serializer,r):null)}getOverlays(e,n){const r=js();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new pD(n,o);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Pr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(bp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=js(),s=Pr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return bp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=wD(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=js();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=wD(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,n){return bp(e).put(function(i,s,o){const[a,u,l]=xF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Dp(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function bp(t){return cr(t,"documentOverlays")}class Vu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ap(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Co(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?AV(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Ie()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),le.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function fK(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function FF(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=fK(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Vu.St=new Vu;class pK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=FF(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=FF(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class gK{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class mK{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Sp{constructor(){this.Wt=new pK,this.Gt=new gK(this.Wt),this.zt=new mK(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Fu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fu(this.indexId,this.documentKey,this.arrayValue,r)}}function Aa(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=LF(t.arrayValue,e.arrayValue),0!==n?n:(n=LF(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function LF(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class UF{constructor(e){this.Jt=new Ft((n,r)=>nn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=YC(e);if(void 0!==n&&!this.tn(n))return!1;const r=Au(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Ft(nn.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new bu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new bu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new bu(r.field,"asc"===r.dir?0:1)));return new $l($l.UNKNOWN_ID,this.collectionId,n,jl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function BF(t){var e,n;if(Ae(t instanceof ht||t instanceof Nt),t instanceof ht){if(t instanceof LV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ht.create(t.field,"==",s)))||[];return Nt.create(i,"or")}return t}const r=t.filters.map(i=>BF(i));return Nt.create(r,t.op)}function _K(t){if(0===t.getFilters().length)return[];const e=DD(BF(t));return Ae($F(e)),TD(e)||CD(e)?[e]:e.getFilters()}function TD(t){return t instanceof ht}function CD(t){return t instanceof Nt&&sD(t)}function $F(t){return TD(t)||CD(t)||function(n){if(n instanceof Nt&&iD(n)){for(const r of n.getFilters())if(!TD(r)&&!CD(r))return!1;return!0}return!1}(t)}function DD(t){if(Ae(t instanceof ht||t instanceof Nt),t instanceof ht)return t;if(1===t.filters.length)return DD(t.filters[0]);const e=t.filters.map(r=>DD(r));let n=Nt.create(e,t.op);return n=Qy(n),$F(n)?n:(Ae(n instanceof Nt),Ae(Wl(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>AD(r,i)))}function AD(t,e){let n;return Ae(t instanceof ht||t instanceof Nt),Ae(e instanceof ht||e instanceof Nt),n=t instanceof ht?e instanceof ht?Nt.create([t,e],"and"):jF(t,e):e instanceof ht?jF(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),Wl(i)&&Wl(s))return kV(i,s.getFilters());const o=iD(i)?i:s,a=iD(i)?s:i,u=o.filters.map(l=>AD(l,a));return Nt.create(u,"or")}(t,e),Qy(n)}function jF(t,e){if(Wl(e))return kV(e,t.getFilters());{const n=e.filters.map(r=>AD(t,r));return Nt.create(n,"or")}}function Qy(t){if(Ae(t instanceof ht||t instanceof Nt),t instanceof ht)return t;const e=t.getFilters();if(1===e.length)return Qy(e[0]);if(xV(t))return t;const n=e.map(i=>Qy(i)),r=[];return n.forEach(i=>{i instanceof ht?r.push(i):i instanceof Nt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Nt.create(r,t.op)}class yK{constructor(){this.on=new bD}addToCollectionParentIndex(e,n){return this.on.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Si.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class bD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(mt.comparator)).toArray()}}const Yy=new Uint8Array(0);class vK{constructor(e,n){this.user=e,this.databaseId=n,this._n=new bD,this.an=new Ao(r=>Pu(r),(r,i)=>fp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Pr(i)};return HF(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[oV(n),""],!1,!0);return HF(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Bs(o.parent))}return r})}addFieldIndex(e,n){const r=Rp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=nd(e);return s.next(a=>{o.put(OF(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Rp(e),i=nd(e),s=td(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rp(e),r=td(e),i=nd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new UF(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=td(e);let i=!0;const s=new Map;return O.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ze();const a=[];return O.forEach(s,(u,l)=>{var z;re("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`} to execute ${Pu(n)}`);const h=function(z,se){const he=YC(se);if(void 0===he)return null;for(const je of $y(z,he.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(l,u),g=function(z,se){const he=new Map;for(const je of Au(se))for(const Ct of $y(z,je.fieldPath))switch(Ct.op){case"==":case"in":he.set(je.fieldPath.canonicalString(),Ct.value);break;case"not-in":case"!=":return he.set(je.fieldPath.canonicalString(),Ct.value),Array.from(he.values())}return null}(l,u),m=function(z,se){const he=[];let je=!0;for(const Ct of Au(se)){const Qn=0===Ct.kind?UV(z,Ct.fieldPath,z.startAt):BV(z,Ct.fieldPath,z.startAt);he.push(Qn.value),je&&(je=Qn.inclusive)}return new Ca(he,je)}(l,u),y=function(z,se){const he=[];let je=!0;for(const Ct of Au(se)){const Qn=0===Ct.kind?BV(z,Ct.fieldPath,z.endAt):UV(z,Ct.fieldPath,z.endAt);he.push(Qn.value),je&&(je=Qn.inclusive)}return new Ca(he,je)}(l,u),C=this.ln(u,l,m),b=this.ln(u,l,y),M=this.hn(u,l,g),U=this.Pn(u.indexId,h,C,m.inclusive,b,y.inclusive,M);return O.forEach(U,N=>r.j(N,n.limit).next(z=>{z.forEach(se=>{const he=le.fromSegments(se.documentKey);o.has(he)||(o=o.add(he),a.push(he))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:_K(Nt.create(e.filters,"and")).map(r=>aD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):Yy,y=this.Tn(e,m,r[g%l],i),C=this.En(e,m,s[g%l],o),b=a.map(M=>this.Tn(e,m,M,!0));h.push(...this.createRange(y,C,b))}return h}Tn(e,n,r,i){const s=new Fu(e,le.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Fu(e,le.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new UF(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return O.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Ft(nn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Sp;for(const i of Au(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Vu.St.ht(s,o)}return r.Ut()}In(e){const n=new Sp;return Vu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Sp;return Vu.St.ht(Ru(this.databaseId,n),r.jt(function(s){const o=Au(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Sp);let s=0;for(const o of Au(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&lp(a))i=this.Vn(i,o,a);else{const l=u.jt(o.kind);Vu.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Sp;u.seed(a.Ut()),Vu.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Rp(e),i=nd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const m=g?new jl(g.sequenceNumber,new Si(Ou(g.readTime),new le(Bs(g.documentKey)),g.largestBatchId)):jl.empty(),y=h.fields.map(([C,b])=>new bu(nn.fromServerFormat(C),b));return new $l(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Rp(e),s=nd(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(OF(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(s,u);return l.isEqual(h)?O.resolve():this.yn(e,s,u,l,h)}))))})}wn(e,n,r,i){return td(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return td(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=td(e);let s=new Ft(Aa);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Fu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Ft(Aa);const i=this.dn(n,e);if(null==i)return r;const s=YC(n);if(null!=s){const o=e.data.field(s.fieldPath);if(lp(o))for(const a of o.arrayValue.values||[])r=r.add(new Fu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Fu(n.indexId,e.key,Yy,i));return r}yn(e,n,r,i,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,h,g,m){const y=u.getIterator(),C=l.getIterator();let b=Hl(y),M=Hl(C);for(;b||M;){let U=!1,N=!1;if(b&&M){const z=h(b,M);z<0?N=!0:z>0&&(U=!0)}else null!=b?N=!0:U=!0;U?(g(M),M=Hl(C)):N?(m(b),b=Hl(y)):(b=Hl(y),M=Hl(C))}}(i,s,Aa,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),O.waitFor(o)}fn(e){let n=1;return nd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Aa(o,a)).filter((o,a,u)=>!a||0!==Aa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Aa(o,e),u=Aa(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Yy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Yy,[]]))}return s}bn(e,n){return Aa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(zF)}getMinOffset(e,n){return O.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||Ie())).next(zF)}}function HF(t){return cr(t,"collectionParents")}function td(t){return cr(t,"indexEntries")}function Rp(t){return cr(t,"indexConfiguration")}function nd(t){return cr(t,"indexState")}function zF(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;JC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Si(e.readTime,e.documentKey,n)}const WF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Ae(1===a)}));const l=[];for(const h of n.mutations){const g=gV(e,h.key.path,n.batchId);s.push(i.delete(g)),l.push(h.key)}return O.waitFor(s).next(()=>l)}function Jy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ie();e=t.noDocument}return JSON.stringify(e).length}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(41943040,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class Xy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Xy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ba(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=rd(e),o=ba(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new hD(a,n,r,i),l=function(y,C,b){const M=b.baseMutations.map(N=>Dp(y.ut,N)),U=b.mutations.map(N=>Dp(y.ut,N));return{userId:C,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new Ft((m,y)=>$e(m.canonicalString(),y.canonicalString()));for(const m of i){const y=gV(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,aZ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return ba(e).get(n).next(r=>r?(Ae(r.userId===this.userId),ku(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?O.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ba(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=ku(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ba(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ba(e).W("userMutationsIndex",n).next(r=>r.map(i=>ku(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return rd(e).Y({range:i},(o,a,u)=>{const[l,h,g]=o,m=Bs(h);if(l===this.userId&&n.path.isEqual(m))return ba(e).get(g).next(y=>{if(!y)throw Ie();Ae(y.userId===this.userId),s.push(ku(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft($e);const i=[];return n.forEach(s=>{const o=xy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=rd(e).Y({range:a},(l,h,g)=>{const[m,y,C]=l,b=Bs(y);m===this.userId&&s.path.isEqual(b)?r=r.add(C):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=xy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ft($e);return rd(e).Y({range:o},(u,l,h)=>{const[g,m,y]=u,C=Bs(m);g===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ba(e).get(s).next(o=>{if(null===o)throw Ie();Ae(o.userId===this.userId),r.push(ku(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return qF(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return rd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Bs(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return GF(e,this.userId,n)}Mn(e){return ZF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GF(t,e,n){const r=xy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return rd(t).Y({range:s,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function ba(t){return cr(t,"mutations")}function rd(t){return cr(t,"documentMutations")}function ZF(t){return cr(t,"mutationQueues")}class Lu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Lu(0)}static Nn(){return new Lu(-1)}}class IK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Lu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Se.fromTimestamp(new cn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>id(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return id(e).Y((o,a)=>{const u=Ap(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return id(e).Y((r,i)=>{const s=Ap(i);n(s)})}Bn(e){return KF(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}Ln(e,n){return KF(e).put("targetGlobalKey",n)}kn(e,n){return id(e).put(NF(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Pu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return id(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=Ap(a);fp(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Sa(e);return n.forEach(o=>{const a=Pr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Sa(e);return O.forEach(n,s=>{const o=Pr(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Sa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Sa(e);let s=Ze();return i.Y({range:r,J:!0},(o,a,u)=>{const l=Bs(o[1]),h=new le(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Pr(n.path),i=IDBKeyRange.bound([r],[oV(r)],!1,!0);let s=0;return Sa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return id(e).get(n).next(r=>r?Ap(r):null)}}function id(t){return cr(t,"targets")}function KF(t){return cr(t,"targetGlobal")}function Sa(t){return cr(t,"targetDocuments")}function QF([t,e],[n,r]){const i=$e(t,n);return 0===i?$e(e,r):i}class EK{constructor(e){this.Qn=e,this.buffer=new Ft(QF),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QF(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){_a(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ma(r)}yield n.Gn(3e5)}))}}class wK{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Ri._e);const r=new EK(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(WF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WF):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Ul()<=Vs.in.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class TK{constructor(e,n){this.db=e,this.garbageCollector=function JF(t,e){return new wK(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return ev(e,r)}removeReference(e,n,r){return ev(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ev(e,n)}Xn(e,n){return function(i,s){let o=!1;return ZF(i).Z(a=>GF(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Se.min()),Sa(e).delete([0,Pr(o.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ev(e,n)}Zn(e,n){const r=Sa(e);let i,s=Ri._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Ri._e&&n(new le(Bs(i)),s),s=l,i=u):s=Ri._e}).next(()=>{s!==Ri._e&&n(new le(Bs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ev(t,e){return Sa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Pr(e.path),sequenceNumber:i}));var i}class XF{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Uu(e).put(r)}removeEntry(e,n,r){return Uu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=rn.newInvalidDocument(n);return Uu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pp(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:rn.newInvalidDocument(n)};return Uu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pp(n))},(i,s)=>{r={document:this.tr(n,s),size:Jy(s)}}).next(()=>r)}getEntries(e,n){let r=hi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=hi(),i=new Wt(le.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Jy(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return O.resolve();let i=new Ft(rL);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Pp(i.first()),Pp(i.last())),o=i.getIterator();let a=o.getNext();return Uu(e).Y({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rL(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.U(Pp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Zy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uu(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=hi();for(const g of l){const m=this.tr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(gp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=hi();const o=nL(n,r),a=nL(n,Si.max());return Uu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.tr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new DK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return tL(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}er(e,n){return tL(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function dK(t,e){let n;if(e.document)n=CF(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Ou(e.noDocument.readTime);n=rn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie();{const r=le.fromSegments(e.unknownDocument.path),i=Ou(e.unknownDocument.version);n=rn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new cn(i[0],i[1]);return Se.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Se.min()))return r}return rn.newInvalidDocument(e)}}function eL(t){return new CK(t)}class DK extends XF{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ao(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ft((s,o)=>$e(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=MF(this._r.serializer,o);i=i.add(s.path.popLast());const l=Jy(u);r+=l-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=MF(this._r.serializer,o.convertToNoDocument(Se.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function tL(t){return cr(t,"remoteDocumentGlobal")}function Uu(t){return cr(t,"remoteDocumentsV14")}function Pp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nL(t,e){const n=e.documentKey.path.toArray();return[t,Zy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rL(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=$e(n[s],r[s]),i)return i;return i=$e(n.length,r.length),i||(i=$e(n[n.length-2],r[r.length-2]),i||$e(n[n.length-1],r[r.length-1]))}class AK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class iL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&vp(r.mutation,i,di.empty(),cn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const i=js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hi();const o=_p(),a=_p();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof bo)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),vp(h.mutation,l,h.mutation.getFieldMask(),cn.now())):o.set(l.key,di.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new AK(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_p();let i=new Wt((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||di.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=KV();h.forEach(m=>{if(!s.has(m)){const y=iF(n.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):uD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(js());let a=-1,u=s;return o.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Ze())).next(h=>({batchId:a,changes:ZV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=mp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=mp();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(s),new Do(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,rn.newInvalidDocument(h)))});let a=mp();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&vp(h.mutation,l,di.empty(),cn.now()),gp(n,l)&&(a=a.insert(u,l))}),a})}}class bK{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return O.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:xn(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:ED(i.bundledQuery),readTime:xn(i.readTime)}),O.resolve();var i}}class SK{constructor(){this.overlays=new Wt(le.comparator),this.lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=js();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=js(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=js(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=js(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pD(n,r));let s=this.lr.get(n);void 0===s&&(s=Ze(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class SD{constructor(){this.hr=new Ft(lr.Pr),this.Ir=new Ft(lr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new lr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new lr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new le(new mt([])),r=new lr(n,e),i=new lr(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new le(new mt([])),r=new lr(n,e),i=new lr(n,e+1);let s=Ze();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new lr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class lr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return le.comparator(e.key,n.key)||$e(e.gr,n.gr)}static Tr(e,n){return $e(e.gr,n.gr)||le.comparator(e.key,n.key)}}class RK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ft(lr.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new hD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new lr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lr(n,0),i=new lr(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft($e);return n.forEach(i=>{const s=new lr(i,0),o=new lr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new lr(new le(s),0);let a=new Ft($e);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),O.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(n.mutations,i=>{const s=new lr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new lr(n,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class PK{constructor(e){this.Cr=e,this.docs=new Wt(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hi();const o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||JC(uV(h),r)<=0||(i.has(h.key)||gp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ie()}vr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MK(this)}getSize(e){return O.resolve(this.size)}}class MK extends XF{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class NK{constructor(e){this.persistence=e,this.Fr=new Ao(n=>Pu(n),fp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Mr=0,this.Or=new SD,this.targetCount=0,this.Nr=Lu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),O.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Lu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.kn(n),O.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Or.containsKey(n))}}class RD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ri(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new NK(this),this.indexManager=new yK,this.remoteDocumentCache=new PK(r=>this.referenceDelegate.Qr(r)),this.serializer=new PF(n),this.Kr=new bK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new RK(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new xK(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class xK extends lV{constructor(e){super(),this.currentSequenceNumber=e}}class tv{constructor(e){this.persistence=e,this.Gr=new SD,this.zr=null}static jr(e){return new tv(e)}get Hr(){if(this.zr)return this.zr;throw Ie()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=le.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Se.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return O.or([()=>O.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class OK{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Ny("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pV,{unique:!0}),u.createObjectStore("documentMutations"),sL(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sL(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pV,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:vZ});l.createIndex("collectionPathOverlayIndex",IZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",EZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:uZ});l.createIndex("documentKeyIndex",cZ),l.createIndex("collectionGroupIndex",lZ)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:gZ}).createIndex("sequenceNumberIndex",mZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:_Z}).createIndex("documentKeyIndex",yZ,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Jy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Ae(u.userId===s.userId);const l=ku(this.serializer,u);return qF(e,s.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new mt(o),l=[0,Pr(u)];s.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:Pr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:pZ});const r=n.store("collectionParents"),i=new bD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Pr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new mt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const h=Bs(a);return s(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Ap(i),o=NF(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new le(mt.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):Ie()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=eL(this.serializer),s=new RD(tv.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Ze();ku(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ur(l),g=Ky.ct(this.serializer,h),m=s.getIndexManager(h),y=Xy.ct(h,this.serializer,m,s.referenceDelegate);return new iL(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new tD(n,Ri._e),u).next()})})}}function sL(t){t.createObjectStore("targetDocuments",{keyPath:hZ}).createIndex("documentTargetsIndex",fZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dZ,{unique:!0}),t.createObjectStore("targetGlobal")}const PD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MD{constructor(e,n,r,i,s,o,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!MD.D())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TK(this,i),this.Ii=n+"main",this.serializer=new PF(u),this.Ti=new gs(this.Ii,this.ai,new OK(this.serializer)),this.qr=new IK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eL(this.serializer),this.Kr=new hK,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&Nn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,PD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Ri(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,G.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,G.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(_a(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Mp(e).get("owner").next(n=>O.resolve(this.wi(n)))}Si(e){return rv(e).delete(this.clientId)}bi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=cr(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):Mp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,PD);return!1}}return!(!this.networkEnabled||!this.inForeground)||rv(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,G.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new tD(n,Ri._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>rv(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Xy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vK(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ky.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?TZ:14===u?yV:13===u?_V:12===u?wZ:11===u?mV:void Ie();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new tD(a,this.Lr?this.Lr.next():Ri._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw Nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(B.FAILED_PRECONDITION,cV);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Mp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,PD)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mp(e).put("owner",n)}static D(){return gs.D()}pi(e){const n=Mp(e);return n.get("owner").next(r=>this.wi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(Nn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Vt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Nn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mp(t){return cr(t,"owner")}function rv(t){return cr(t,"clientMetadata")}function ND(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class xD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ze(),i=Ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xD(e,n.fromCache,r,i)}}class kK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class oL{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new kK;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ul()<=Vs.in.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(Ul()<=Vs.in.DEBUG&&re("QueryEngine","Query:",Zl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ul()<=Vs.in.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):O.resolve())}zi(e,n){if(jV(n))return O.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=jy(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ze(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(e,jy(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return jV(n)||i.isEqual(Se.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?O.resolve(null):(Ul()<=Vs.in.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zl(n)),this.Xi(e,o,n,aV(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ft(qV(e));return n.forEach((i,s)=>{gp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Ul()<=Vs.in.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Zl(n)),this.Gi.getDocumentsMatchingQuery(e,n,Si.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class VK{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Wt($e),this.ns=new Ao(s=>Pu(s),fp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iL(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function aL(t,e,n,r){return new VK(t,e,n,r)}function uL(t,e){return OD.apply(this,arguments)}function OD(){return OD=(0,G.Z)(function*(t,e){const n=ce(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ze();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}),OD.apply(this,arguments)}function cL(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function lL(t,e,n){let r=Ze(),i=Ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hi();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function UK(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sd(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new So(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function od(t,e,n){return kD.apply(this,arguments)}function kD(){return kD=(0,G.Z)(function*(t,e,n){const r=ce(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_a(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),kD.apply(this,arguments)}function iv(t,e,n){const r=ce(t);let i=Se.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=ce(u),m=g.ns.get(h);return void 0!==m?O.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:Se.min(),n?s:Ze())).next(a=>(fL(r,WV(e),a),{documents:a,ls:s})))}function dL(t,e){const n=ce(t),r=ce(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function hL(t,e){const n=ce(t),r=n.rs.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,aV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fL(n,e,i),i))}function fL(t,e,n){let r=t.rs.get(e)||Se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function VD(){return VD=(0,G.Z)(function*(t,e,n,r){const i=ce(t);let s=Ze(),o=hi();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(s=s.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),o=o.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield sd(i,(h=r,ei(ql(mt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>lL(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),VD.apply(this,arguments)}function $K(t,e){return FD.apply(this,arguments)}function FD(){return FD=(0,G.Z)(function*(t,e,n=Ze()){const r=yield sd(t,ei(ED(e.bundledQuery))),i=ce(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=xn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Kn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),FD.apply(this,arguments)}function pL(t,e){return`firestore_clients_${t}_${e}`}function gL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function LD(t,e){return`firestore_targets_${t}_${e}`}class sv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new sv(e,n,i.state,s):(Nn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Np(e,r.state,i):(Nn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ov{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=lD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=hV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new ov(e,s):(Nn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class UD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new UD(n.clientId,n.onlineState):(Nn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BD{constructor(){this.activeTargetIds=lD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $D{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Wt($e),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=pL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new BD),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(pL(e.persistenceKey,i));if(s){const o=ov.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(LD(this.persistenceKey,e));if(r){const i=Np.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(LD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void Nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,G.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Ri._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){Nn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ri._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new sv(this.currentUser,e,n,r),s=gL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=gL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=LD(this.persistenceKey,e),s=new Np(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return ov.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return sv.Ts(new ur(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Np.Ts(i,n)}Ms(e){return UD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,G.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=lD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class mL{constructor(){this.eo=new BD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new BD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jK{ro(e){}shutdown(){}}class _L{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let av=null;function jD(){return null===av?av=268435456+Math.round(2147483648*Math.random()):av++,"0x"+av.toString(16)}const HK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zK{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Nr="WebChannelConnection";class WK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=jD(),u=this.So(n,r);re("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(h=>(re("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw li("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Ll,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${HK[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=jD();return new Promise((o,a)=>{const u=new j7;u.setWithCredentials(!0),u.listenOnce(B7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case KC.NO_ERROR:const h=u.getResponseJson();re(Nr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case KC.TIMEOUT:re(Nr,`RPC '${e}' ${s} timed out`),a(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case KC.HTTP_ERROR:const g=u.getStatus();if(re(Nr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const C=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(y.status);a(new J(C,y.message))}else a(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(B.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{re(Nr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);re(Nr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=jD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=L7(),a=U7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");re(Nr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,y=!1;const C=new zK({co:M=>{y?re(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(re(Nr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),re(Nr,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},lo:()=>g.close()}),b=(M,U,N)=>{M.listen(U,z=>{try{N(z)}catch(se){setTimeout(()=>{throw se},0)}})};return b(g,My.EventType.OPEN,()=>{y||re(Nr,`RPC '${e}' stream ${i} transport opened.`)}),b(g,My.EventType.CLOSE,()=>{y||(y=!0,re(Nr,`RPC '${e}' stream ${i} transport closed`),C.Ro())}),b(g,My.EventType.ERROR,M=>{y||(y=!0,li(Nr,`RPC '${e}' stream ${i} transport errored:`,M),C.Ro(new J(B.UNAVAILABLE,"The operation could not be completed")))}),b(g,My.EventType.MESSAGE,M=>{var U;if(!y){const N=M.data[0];Ae(!!N);const se=N.error||(null===(U=N[0])||void 0===U?void 0:U.error);if(se){re(Nr,`RPC '${e}' stream ${i} received error:`,se);const he=se.status;let je=function(Qp){const Mv=Un[Qp];if(void 0!==Mv)return lF(Mv)}(he),Ct=se.message;void 0===je&&(je=B.INTERNAL,Ct="Unknown error status: "+he+" with message "+se.message),y=!0,C.Ro(new J(je,Ct)),g.close()}else re(Nr,`RPC '${e}' stream ${i} received:`,N),C.Vo(N)}}),b(a,$7.STAT_EVENT,M=>{M.stat===tV.PROXY?re(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===tV.NOPROXY&&re(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.Ao()},0),C}}function yL(){return typeof window<"u"?window:null}function uv(){return typeof document<"u"?document:null}function xp(t){return new tK(t,!0)}class HD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class vL{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new HD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,G.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,G.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,G.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Nn(n.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,G.Z)(function*(){e.state=0,e.start()}))}o_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qK extends vL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function iK(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ie(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(void 0===h||"string"==typeof h),Kn.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),Kn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?B.UNKNOWN:lF(l.code);return new J(h,l.message||"")}(o);n=new gF(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Hs(t,r.document.name),s=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):Se.min(),a=new Ir({mapValue:{fields:r.document.fields}}),u=rn.newFoundDocument(i,s,o,a);n=new Gy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Hs(t,r.document),s=r.readTime?xn(r.readTime):Se.min(),o=rn.newNoDocument(i,s);n=new Gy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Hs(t,r.document);n=new Gy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ie();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new KZ(i,s);n=new pF(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?xn(o.readTime):Se.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Cp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=By(u)?{documents:DF(s,u)}:{query:ID(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vF(s,o.resumeToken);const l=mD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Se.min())>0){a.readTime=Xl(s,o.snapshotVersion.toTimestamp());const l=mD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function oK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.e_(n)}}class GK extends vL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function sK(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=xn(i.updateTime?i.updateTime:s);return o.isEqual(Se.min())&&(o=xn(s)),new WZ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.I_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Cp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Dp(this.serializer,r))};this.e_(n)}}class ZK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class QK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Nn(n),this.f_=!1):re("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class YK{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,G.Z)(function*(){var u;Ra(o)&&(re("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,G.Z)(function*(h){const g=ce(h);g.C_.add(4),yield ad(g),g.M_.set("Unknown"),g.C_.delete(4),yield Op(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.M_=new QK(r,i)}}function Op(t){return WD.apply(this,arguments)}function WD(){return WD=(0,G.Z)(function*(t){if(Ra(t))for(const e of t.v_)yield e(!0)}),WD.apply(this,arguments)}function ad(t){return qD.apply(this,arguments)}function qD(){return qD=(0,G.Z)(function*(t){for(const e of t.v_)yield e(!1)}),qD.apply(this,arguments)}function cv(t,e){const n=ce(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),KD(n)?ZD(n):cd(n).Ho()&&GD(n,e))}function kp(t,e){const n=ce(t),r=cd(n);n.D_.delete(e),r.Ho()&&IL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Ra(n)&&n.M_.set("Unknown"))}function GD(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cd(t).u_(e)}function IL(t,e){t.x_.Oe(e),cd(t).c_(e)}function ZD(t){t.x_=new YZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),cd(t).start(),t.M_.g_()}function KD(t){return Ra(t)&&!cd(t).jo()&&t.D_.size>0}function Ra(t){return 0===ce(t).C_.size}function EL(t){t.x_=void 0}function JK(t){return QD.apply(this,arguments)}function QD(){return QD=(0,G.Z)(function*(t){t.D_.forEach((e,n)=>{GD(t,e)})}),QD.apply(this,arguments)}function XK(t,e){return YD.apply(this,arguments)}function YD(){return YD=(0,G.Z)(function*(t,e){EL(t),KD(t)?(t.M_.w_(e),ZD(t)):t.M_.set("Unknown")}),YD.apply(this,arguments)}function eQ(t,e,n){return JD.apply(this,arguments)}function JD(){return JD=(0,G.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof gF&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lv(t,r)}else if(e instanceof Gy?t.x_.$e(e):e instanceof pF?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Se.min()))try{const r=yield cL(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.D_.get(l);h&&s.D_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.D_.get(u);if(!h)return;s.D_.set(u,h.withResumeToken(Kn.EMPTY_BYTE_STRING,h.snapshotVersion)),IL(s,u);const g=new So(h.target,u,l,h.sequenceNumber);GD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield lv(t,r)}var r}),JD.apply(this,arguments)}function lv(t,e,n){return XD.apply(this,arguments)}function XD(){return XD=(0,G.Z)(function*(t,e,n){if(!_a(e))throw e;t.C_.add(1),yield ad(t),t.M_.set("Offline"),n||(n=()=>cL(t.localStore)),t.asyncQueue.enqueueRetryable((0,G.Z)(function*(){re("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Op(t)}))}),XD.apply(this,arguments)}function wL(t,e){return e().catch(n=>lv(t,n,e))}function ud(t){return eA.apply(this,arguments)}function eA(){return eA=(0,G.Z)(function*(t){const e=ce(t),n=Pa(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;tQ(e);)try{const i=yield UK(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,nQ(e,i)}catch(i){yield lv(e,i)}TL(e)&&CL(e)}),eA.apply(this,arguments)}function tQ(t){return Ra(t)&&t.b_.length<10}function nQ(t,e){t.b_.push(e);const n=Pa(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function TL(t){return Ra(t)&&!Pa(t).jo()&&t.b_.length>0}function CL(t){Pa(t).start()}function rQ(t){return tA.apply(this,arguments)}function tA(){return tA=(0,G.Z)(function*(t){Pa(t).E_()}),tA.apply(this,arguments)}function iQ(t){return nA.apply(this,arguments)}function nA(){return nA=(0,G.Z)(function*(t){const e=Pa(t);for(const n of t.b_)e.P_(n.mutations)}),nA.apply(this,arguments)}function sQ(t,e,n){return rA.apply(this,arguments)}function rA(){return rA=(0,G.Z)(function*(t,e,n){const r=t.b_.shift(),i=fD.from(r,e,n);yield wL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ud(t)}),rA.apply(this,arguments)}function oQ(t,e){return iA.apply(this,arguments)}function iA(){return iA=(0,G.Z)(function*(t,e){var n;e&&Pa(t).h_&&(yield(n=(0,G.Z)(function*(i,s){if(cF(a=s.code)&&a!==B.ABORTED){const o=i.b_.shift();Pa(i).Yo(),yield wL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield ud(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),TL(t)&&CL(t)}),iA.apply(this,arguments)}function DL(t,e){return sA.apply(this,arguments)}function sA(){return sA=(0,G.Z)(function*(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=Ra(n);n.C_.add(3),yield ad(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Op(n)}),sA.apply(this,arguments)}function oA(t,e){return aA.apply(this,arguments)}function aA(){return aA=(0,G.Z)(function*(t,e){const n=ce(t);e?(n.C_.delete(2),yield Op(n)):e||(n.C_.add(2),yield ad(n),n.M_.set("Unknown"))}),aA.apply(this,arguments)}function cd(t){return t.O_||(t.O_=function(n,r,i){const s=ce(n);return s.A_(),new qK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:JK.bind(null,t),Io:XK.bind(null,t),a_:eQ.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.O_.Yo(),KD(t)?ZD(t):t.M_.set("Unknown")):(yield t.O_.stop(),EL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Pa(t){return t.N_||(t.N_=function(n,r,i){const s=ce(n);return s.A_(),new GK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:rQ.bind(null,t),Io:oQ.bind(null,t),T_:iQ.bind(null,t),I_:sQ.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.N_.Yo(),yield ud(t)):(yield t.N_.stop(),t.b_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class uA{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new uA(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(t,e){if(Nn("AsyncQueue",`${e}: ${t}`),_a(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}class dd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=mp(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new dd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class AL{constructor(){this.B_=new Wt(le.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ie():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hd{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hd(e,n,dd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class aQ{constructor(){this.k_=void 0,this.listeners=[]}}class uQ{constructor(){this.queries=new Ao(e=>zV(e),pp),this.onlineState="Unknown",this.q_=new Set}}function cA(t,e){return lA.apply(this,arguments)}function lA(){return lA=(0,G.Z)(function*(t,e){const n=ce(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new aQ),i)try{s.k_=yield n.onListen(r)}catch(o){const a=ld(o,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&fA(n)}),lA.apply(this,arguments)}function dA(t,e){return hA.apply(this,arguments)}function hA(){return hA=(0,G.Z)(function*(t,e){const n=ce(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),hA.apply(this,arguments)}function cQ(t,e){const n=ce(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&fA(n)}function lQ(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function fA(t){t.q_.forEach(e=>{e.next()})}class pA{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new hd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class dQ{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class bL{constructor(e){this.serializer=e}hs(e){return Hs(this.serializer,e)}Ps(e){return e.metadata.exists?CF(this.serializer,e.document,!1):rn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return xn(e)}}class hQ{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=SL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=mt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new bL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,G.Z)(function*(){const n=yield function BK(t,e,n,r){return VD.apply(this,arguments)}(e.localStore,new bL(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield $K(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function SL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class RL{constructor(e){this.key=e}}class PL{constructor(e){this.key=e}}class ML{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ze(),this.mutatedKeys=Ze(),this._a=qV(e),this.aa=new dd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new AL,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=gp(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?C!==b&&(r.track({type:3,doc:y}),M=!0):this.ha(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this._a(y,u)>0||l&&this._a(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(o=o.add(y),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(y,C){const b=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return b(y)-b(C)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,0!==o.length||l?{snapshot:new hd(this.query,e.aa,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new AL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ze(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new PL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new RL(r))}),n}da(e){this.ia=e.ls,this.oa=Ze();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return hd.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class fQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pQ{constructor(e){this.key=e,this.Ra=!1}}class gQ{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ao(a=>zV(a),pp),this.fa=new Map,this.ga=new Set,this.pa=new Wt(le.comparator),this.ya=new Map,this.wa=new SD,this.Sa={},this.ba=new Map,this.Da=Lu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function mQ(t,e){return gA.apply(this,arguments)}function gA(){return gA=(0,G.Z)(function*(t,e){const n=LA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield sd(n.localStore,ei(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield mA(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&cv(n.remoteStore,o)}return i}),gA.apply(this,arguments)}function mA(t,e,n,r,i){return _A.apply(this,arguments)}function _A(){return _A=(0,G.Z)(function*(t,e,n,r,i){t.va=(g,m,y)=>{return(C=(0,G.Z)(function*(M,U,N,z){let se=U.view.ca(N);se.Zi&&(se=yield iv(M.localStore,U.query,!1).then(({documents:Qn})=>U.view.ca(Qn,se)));const he=z&&z.targetChanges.get(U.targetId),je=z&&null!=z.targetMismatches.get(U.targetId),Ct=U.view.applyChanges(se,M.isPrimaryClient,he,je);return bA(M,U.targetId,Ct.Ta),Ct.snapshot}),function b(M,U,N,z){return C.apply(this,arguments)})(t,g,m,y);var C};const s=yield iv(t.localStore,e,!0),o=new ML(e,s.ls),a=o.ca(s.documents),u=wp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);bA(t,n,l.Ta);const h=new fQ(e,n,o);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),_A.apply(this,arguments)}function _Q(t,e){return yA.apply(this,arguments)}function yA(){return yA=(0,G.Z)(function*(t,e){const n=ce(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!pp(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield od(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kp(n.remoteStore,r.targetId),fd(n,r.targetId)}).catch(ma))):(fd(n,r.targetId),yield od(n.localStore,r.targetId,!0))}),yA.apply(this,arguments)}function vA(){return vA=(0,G.Z)(function*(t,e,n){const r=UA(t);try{const i=yield function(o,a){const u=ce(o),l=cn.now(),h=a.reduce((y,C)=>y.add(C.key),Ze());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=hi(),b=Ze();return u.ss.getEntries(y,h).next(M=>{C=M,C.forEach((U,N)=>{N.isValidDocument()||(b=b.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(M=>{g=M;const U=[];for(const N of a){const z=GZ(N,g.get(N.key).overlayedDocument);null!=z&&U.push(new bo(N.key,z,RV(z.value.mapValue),ln.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(M=>{m=M;const U=M.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(y,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:ZV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Wt($e)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ro(r,i.changes),yield ud(r.remoteStore)}catch(i){const s=ld(i,"Failed to persist write");n.reject(s)}}),vA.apply(this,arguments)}function NL(t,e){return IA.apply(this,arguments)}function IA(){return IA=(0,G.Z)(function*(t,e){const n=ce(t);try{const r=yield function LK(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var b,M,U;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Kn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,U=h,(0===(b=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=hi(),l=Ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(lL(s,o,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(Se.min())){const h=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield Ro(n,r,e)}catch(r){yield ma(r)}}),IA.apply(this,arguments)}function xL(t,e,n){const r=ce(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ce(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&fA(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vQ(t,e,n){return EA.apply(this,arguments)}function EA(){return EA=(0,G.Z)(function*(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Wt(le.comparator);o=o.insert(s,rn.newNoDocument(s,Se.min()));const a=Ze().add(s),u=new Ep(Se.min(),new Map,new Wt($e),o,a);yield NL(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),SA(r)}else yield od(r.localStore,e,!1).then(()=>fd(r,e,n)).catch(ma)}),EA.apply(this,arguments)}function IQ(t,e){return wA.apply(this,arguments)}function wA(){return wA=(0,G.Z)(function*(t,e){const n=ce(t),r=e.batch.batchId;try{const i=yield function FK(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(b=>{const M=l.docVersions.get(C);Ae(null!==M),b.version.compareTo(M)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ze();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);AA(n,r,null),DA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ro(n,i)}catch(i){yield ma(i)}}),wA.apply(this,arguments)}function EQ(t,e,n){return TA.apply(this,arguments)}function TA(){return TA=(0,G.Z)(function*(t,e,n){const r=ce(t);try{const i=yield function(o,a){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ae(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);AA(r,e,n),DA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ro(r,i)}catch(i){yield ma(i)}}),TA.apply(this,arguments)}function CA(){return CA=(0,G.Z)(function*(t,e){const n=ce(t);Ra(n.remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ce(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=ld(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),CA.apply(this,arguments)}function DA(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function AA(t,e,n){const r=ce(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||OL(t,r)})}function OL(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(kp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),SA(t))}function bA(t,e,n){for(const r of n)r instanceof RL?(t.wa.addReference(r.key,e),TQ(t,r)):r instanceof PL?(re("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||OL(t,r.key)):Ie()}function TQ(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(re("SyncEngine","New document in limbo: "+n),t.ga.add(r),SA(t))}function SA(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new le(mt.fromString(e)),r=t.Da.next();t.ya.set(r,new pQ(n)),t.pa=t.pa.insert(n,r),cv(t.remoteStore,new So(ei(ql(n.path)),r,"TargetPurposeLimboResolution",Ri._e))}}function Ro(t,e,n){return RA.apply(this,arguments)}function RA(){return RA=(0,G.Z)(function*(t,e,n){const r=ce(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=xD.Qi(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,G.Z)(function*(l,h){const g=ce(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.ki,C=>g.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>O.forEach(y.qi,C=>g.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!_a(m))throw m;re("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const C=g.ts.get(y),M=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);g.ts=g.ts.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),RA.apply(this,arguments)}function CQ(t,e){return PA.apply(this,arguments)}function PA(){return PA=(0,G.Z)(function*(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=yield uL(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ro(n,r._s)}var s}),PA.apply(this,arguments)}function DQ(t,e){const n=ce(t),r=n.ya.get(e);if(r&&r.Ra)return Ze().add(r.key);{let i=Ze();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function AQ(t,e){return MA.apply(this,arguments)}function MA(){return MA=(0,G.Z)(function*(t,e){const n=ce(t),r=yield iv(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&bA(n,e.targetId,i.Ta),i}),MA.apply(this,arguments)}function bQ(t,e){return NA.apply(this,arguments)}function NA(){return NA=(0,G.Z)(function*(t,e){const n=ce(t);return hL(n.localStore,e).then(r=>Ro(n,r))}),NA.apply(this,arguments)}function SQ(t,e,n,r){return xA.apply(this,arguments)}function xA(){return xA=(0,G.Z)(function*(t,e,n,r){const i=ce(t),s=yield function(a,u){const l=ce(a),h=ce(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield ud(i.remoteStore):"acknowledged"===n||"rejected"===n?(AA(i,e,r||null),DA(i,e),u=e,ce(ce(i.localStore).mutationQueue).Fn(u)):Ie(),yield Ro(i,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}),xA.apply(this,arguments)}function OA(){return OA=(0,G.Z)(function*(t,e){const n=ce(t);if(LA(n),UA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield kL(n,r.toArray());n.Ca=!0,yield oA(n.remoteStore,!0);for(const s of i)cv(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(fd(n,o),od(n.localStore,o,!0))),kp(n.remoteStore,o)}),yield i,yield kL(n,r),function(o){const a=ce(o);a.ya.forEach((u,l)=>{kp(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Wt(le.comparator)}(n),n.Ca=!1,yield oA(n.remoteStore,!1)}}),OA.apply(this,arguments)}function kL(t,e,n){return kA.apply(this,arguments)}function kA(){return kA=(0,G.Z)(function*(t,e,n){const r=ce(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield sd(r.localStore,ei(u[0]));for(const l of u){const h=r.ma.get(l),g=yield AQ(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield dL(r.localStore,o);a=yield sd(r.localStore,l),yield mA(r,VL(l),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),kA.apply(this,arguments)}function VL(t){return $V(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function PQ(t){return n=ce(t).localStore,ce(ce(n).persistence).Bi();var n}function MQ(t,e,n,r){return VA.apply(this,arguments)}function VA(){return VA=(0,G.Z)(function*(t,e,n,r){const i=ce(t);if(i.Ca)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield hL(i.localStore,WV(s[0])),a=Ep.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Kn.EMPTY_BYTE_STRING);yield Ro(i,o,a);break}case"rejected":yield od(i.localStore,e,!0),fd(i,e,r);break;default:Ie()}}),VA.apply(this,arguments)}function NQ(t,e,n){return FA.apply(this,arguments)}function FA(){return FA=(0,G.Z)(function*(t,e,n){const r=LA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){re("SyncEngine","Adding an already active target "+i);continue}const s=yield dL(r.localStore,i),o=yield sd(r.localStore,s);yield mA(r,VL(s),o.targetId,!1,o.resumeToken),cv(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield od(r.localStore,i,!1).then(()=>{kp(r.remoteStore,i),fd(r,i)}).catch(ma))}}),FA.apply(this,arguments)}function LA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vQ.bind(null,e),e.Va.a_=cQ.bind(null,e.eventManager),e.Va.Fa=lQ.bind(null,e.eventManager),e}function UA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EQ.bind(null,e),e}class Vp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,G.Z)(function*(){n.serializer=xp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return aL(this.persistence,new oL,e.initialUser,this.serializer)}createPersistence(e){return new RD(tv.jr,this.serializer)}createSharedClientState(e){return new mL}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BA extends Vp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield UA(r.xa.syncEngine),yield ud(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return aL(this.persistence,new oL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new YF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new sZ(n,this.persistence);return new iZ(e.asyncQueue,r)}createPersistence(e){const n=ND(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new MD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,yL(),uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new mL}}class FL extends BA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof $D&&(r.sharedClientState.syncEngine={Ys:SQ.bind(null,i),Zs:MQ.bind(null,i),Xs:NQ.bind(null,i),Bi:PQ.bind(null,i),Js:bQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,G.Z)(function*(o){yield function RQ(t,e){return OA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=yL();if(!$D.D(n))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ND(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $D(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class pd{initialize(e,n){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>xL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=CQ.bind(null,r.syncEngine),yield oA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new uQ}createDatastore(e){const n=xp(e.databaseInfo.databaseId),r=new WK(e.databaseInfo);return new ZK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>xL(this.syncEngine,n,0),a=_L.D()?new _L:new jK,new YK(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){const g=new gQ(i,s,o,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,G.Z)(function*(r){const i=ce(r);re("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield ad(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function LL(t,e=10240){let n=0;return{read:()=>(0,G.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Nn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class kQ{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Zn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,G.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new dQ(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,G.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,G.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,G.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class VQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,G.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,G.Z)(function*(o,a){const u=ce(o),l=Cp(u.serializer)+"/documents",h={documents:a.map(C=>Tp(u.serializer,C))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(C=>{const b=function rK(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=Hs(r,i.found.name),o=xn(i.found.updateTime),a=i.found.createTime?xn(i.found.createTime):Se.min(),u=new Ir({mapValue:{fields:i.found.fields}});return rn.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=Hs(r,i.missing),o=xn(i.readTime);return rn.newNoDocument(s,o)}(t,e):Ie()}(u.serializer,C);m.set(b.key.toString(),b)});const y=[];return a.forEach(C=>{const b=m.get(C.toString());Ae(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=le.fromPath(i);e.mutations.push(new dD(s,e.precondition(s)))}),yield(r=(0,G.Z)(function*(s,o){const a=ce(s),u=Cp(a.serializer)+"/documents",l={writes:o.map(h=>Dp(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ie();n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?ln.exists(!1):ln.updateTime(n):ln.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new J(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(n)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FQ{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new HD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,G.Z)(function*(){const n=new VQ(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!op(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!cF(n)}return!1}}class LQ{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=sV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,G.Z)(function*(a){re("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ld(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function hv(t,e){return $A.apply(this,arguments)}function $A(){return $A=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,G.Z)(function*(s){r.isEqual(s)||(yield uL(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),$A.apply(this,arguments)}function jA(t,e){return HA.apply(this,arguments)}function HA(){return HA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield zA(t);re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>DL(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>DL(e.remoteStore,s)),t._onlineComponents=e}),HA.apply(this,arguments)}function UL(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function zA(t){return WA.apply(this,arguments)}function WA(){return WA=(0,G.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!UL(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),yield hv(t,new Vp)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield hv(t,new Vp);return t._offlineComponents}),WA.apply(this,arguments)}function fv(t){return qA.apply(this,arguments)}function qA(){return qA=(0,G.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield jA(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield jA(t,new pd))),t._onlineComponents}),qA.apply(this,arguments)}function BL(t){return zA(t).then(e=>e.persistence)}function gd(t){return zA(t).then(e=>e.localStore)}function $L(t){return fv(t).then(e=>e.remoteStore)}function GA(t){return fv(t).then(e=>e.syncEngine)}function md(t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,G.Z)(function*(t){const e=yield fv(t),n=e.eventManager;return n.onListen=mQ.bind(null,e.syncEngine),n.onUnlisten=_Q.bind(null,e.syncEngine),n}),ZA.apply(this,arguments)}function HL(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new dv({next:m=>{o.enqueueAndForget(()=>dA(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new pA(ql(a.path),h,{includeMetadataChanges:!0,J_:!0});return cA(s,g)}(yield md(t),t.asyncQueue,e,n,r)})),r.promise}function zL(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new dv({next:m=>{o.enqueueAndForget(()=>dA(s,g)),m.fromCache&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new pA(a,h,{includeMetadataChanges:!0,J_:!0});return cA(s,g)}(yield md(t),t.asyncQueue,e,n,r)})),r.promise}function WL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const qL=new Map;function KA(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GL(t,e,n,r){if(!0===e&&!0===r)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZL(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KL(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Ie()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pv(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function QL(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class YL{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=WL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new q7;switch(r.type){case"firstParty":return new Q7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qL.get(n);r&&(re("ComponentProvider","Removing Datastore"),qL.delete(n),r.terminate())}(this),Promise.resolve()}}function JL(t,e,n,r={}){var i;const s=(t=ut(t,Fp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ur.MOCK_USER;else{a=(0,Vt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ur(l)}t._authCredentials=new G7(new rV(a,u))}}class Er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class zs extends Er{constructor(e,n,r){super(e,n,ql(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new le(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function XL(t,e,...n){if(t=(0,Vt.m9)(t),KA("collection","path",e),t instanceof Fp){const r=mt.fromString(e,...n);return KL(r),new zs(t,null,r)}{if(!(t instanceof sn||t instanceof zs))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return KL(r),new zs(t.firestore,null,r)}}function gv(t,e,...n){if(t=(0,Vt.m9)(t),1===arguments.length&&(e=sV.newId()),KA("doc","path",e),t instanceof Fp){const r=mt.fromString(e,...n);return ZL(r),new sn(t,null,new le(r))}{if(!(t instanceof sn||t instanceof zs))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return ZL(r),new sn(t.firestore,t instanceof zs?t.converter:null,new le(r))}}function e2(t,e){return t=(0,Vt.m9)(t),e=(0,Vt.m9)(e),(t instanceof sn||t instanceof zs)&&(e instanceof sn||e instanceof zs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function QA(t,e){return t=(0,Vt.m9)(t),e=(0,Vt.m9)(e),t instanceof Er&&e instanceof Er&&t.firestore===e.firestore&&pp(t._query,e._query)&&t.converter===e.converter}class QQ{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new HD(this,"async_queue_retry"),this.iu=()=>{const n=uv();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=uv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=uv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,G.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!_a(n))throw n;re("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,Nn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=uA.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Ie()}verifyOperationInProgress(){}uu(){var e=this;return(0,G.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function YA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class YQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qt extends Fp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new QQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||t2(this),this._firestoreClient.terminate()}}function XQ(t,e){const n="object"==typeof t?t:(0,Jr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Jr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,Vt.P0)("firestore");s&&JL(i,...s)}return i}function Tn(t){return t._firestoreClient||t2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function t2(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new AZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WL(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new LQ(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function n2(t,e,n){const r=new Zn;return t.asyncQueue.enqueue((0,G.Z)(function*(){try{yield hv(t,n),yield jA(t,e),r.resolve()}catch(i){const s=i;if(!UL(s))throw s;li("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function r2(t){if(t._initialized||t._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ws(Kn.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ws(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Po{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bu{constructor(e){this._methodName=e}}class mv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}const cY=/^__.*__$/;class lY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class i2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function s2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class _v{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Iv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(s2(this.Iu)&&cY.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class dY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xp(e)}pu(e,n,r,i=!1){return new _v({Iu:e,methodName:n,gu:r,path:nn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(t){const e=t._freezeSettings(),n=xp(t._databaseId);return new dY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yv(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);t0("Data must be an object, but it was:",o,r);const a=u2(r,o);let u,l;if(s.merge)u=new di(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Bp(e,g,n);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);l2(h,m)||h.push(m)}u=new di(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new lY(new Ir(a),u,l)}class Up extends Bu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Up}}function o2(t,e,n){return new _v({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class JA extends Bu{_toFieldTransform(e){return new yp(e.path,new Kl)}isEqual(e){return e instanceof JA}}class hY extends Bu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=o2(this,e,!0),r=this.yu.map(s=>ju(s,n)),i=new Mu(r);return new yp(e.path,i)}isEqual(e){return this===e}}class fY extends Bu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=o2(this,e,!0),r=this.yu.map(s=>ju(s,n)),i=new Nu(r);return new yp(e.path,i)}isEqual(e){return this===e}}class pY extends Bu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Ql(e.serializer,JV(e.serializer,this.wu));return new yp(e.path,n)}isEqual(e){return this===e}}function XA(t,e,n,r){const i=t.pu(1,e,n);t0("Data must be an object, but it was:",i,r);const s=[],o=Ir.empty();ya(r,(u,l)=>{const h=vv(e,u,n);l=(0,Vt.m9)(l);const g=i.Ru(h);if(l instanceof Up)s.push(h);else{const m=ju(l,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new di(s);return new i2(o,a,i.fieldTransforms)}function e0(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Bp(e,r,n)],u=[i];if(s.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Bp(e,s[m])),u.push(s[m+1]);const l=[],h=Ir.empty();for(let m=a.length-1;m>=0;--m)if(!l2(l,a[m])){const y=a[m];let C=u[m];C=(0,Vt.m9)(C);const b=o.Ru(y);if(C instanceof Up)l.push(y);else{const M=ju(C,b);null!=M&&(l.push(y),h.set(y,M))}}const g=new di(l);return new i2(h,g,o.fieldTransforms)}function a2(t,e,n,r=!1){return ju(n,t.pu(r?4:3,e))}function ju(t,e){if(c2(t=(0,Vt.m9)(t)))return t0("Unsupported field value:",e,t),u2(t,e);if(t instanceof Bu)return function(r,i){if(!s2(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ju(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Vt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return JV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=cn.fromDate(r);return{timestampValue:Xl(i.serializer,s)}}if(r instanceof cn){const s=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,s)}}if(r instanceof mv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ws)return{bytesValue:vF(i.serializer,r._byteString)};if(r instanceof sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_D(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${pv(r)}`)}(t,e)}function u2(t,e){const n={};return IV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(r,i)=>{const s=ju(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function c2(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof cn||t instanceof mv||t instanceof Ws||t instanceof sn||t instanceof Bu)}function t0(t,e,n){if(!c2(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=pv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Bp(t,e,n){if((e=(0,Vt.m9)(e))instanceof Po)return e._internalPath;if("string"==typeof e)return vv(t,e);throw Iv("Field path arguments must be of type string or ",t,!1,void 0,n)}const gY=new RegExp("[~\\*/\\[\\]]");function vv(t,e,n){if(e.search(gY)>=0)throw Iv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Po(...e.split("."))._internalPath}catch{throw Iv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Iv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function l2(t,e){return t.some(n=>n.isEqual(e))}class $p{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ev("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class mY extends $p{data(){return super.data()}}function Ev(t,e){return"string"==typeof e?vv(t,e):e instanceof Po?e._internalPath:e._delegate._internalPath}function d2(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}class jp extends n0{}function Ma(t,e,...n){let r=[];e instanceof n0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof _d).length,a=s.filter(u=>u instanceof Hp).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hp extends jp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hp(e,n,r)}_apply(e){const n=this._parse(e);return g2(e._query,n),new Er(e.firestore,e.converter,cD(e._query,n))}_parse(e){const n=$u(e.firestore);return function(s,o,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){p2(g,h);const y=[];for(const C of g)y.push(f2(u,s,C));m={arrayValue:{values:y}}}else m=f2(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||p2(g,h),m=a2(a,"where",g,"in"===h||"not-in"===h);return ht.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class _d extends n0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _d(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Nt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)g2(o,u),o=cD(o,u)}(e._query,n),new Er(e.firestore,e.converter,cD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class r0 extends jp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new r0(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hp(s,o)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Do(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class wv extends jp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new wv(e,n,r)}_apply(e){return new Er(e.firestore,e.converter,jy(e._query,this._limit,this._limitType))}}class Tv extends jp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Tv(e,n,r)}_apply(e){const n=h2(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,(s=n,new Do((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Cv extends jp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cv(e,n,r)}_apply(e){const n=h2(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,(s=n,new Do((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function h2(t,e,n,r){if(n[0]=(0,Vt.m9)(n[0]),n[0]instanceof $p)return function(s,o,a,u,l){if(!u)throw new J(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Gl(s))if(g.field.isKeyField())h.push(Ru(o,u.key));else{const m=u.data.field(g.field);if(ky(m))throw new J(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new J(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ca(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=$u(t.firestore);return function(o,a,u,l,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new J(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let C=0;C<h.length;C++){const b=h[C];if(m[C].field.isKeyField()){if("string"!=typeof b)throw new J(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!uD(o)&&-1!==b.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const M=o.path.child(mt.fromString(b));if(!le.isDocumentKey(M))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const U=new le(M);y.push(Ru(a,U))}else{const M=a2(u,l,b);y.push(M)}}return new Ca(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function f2(t,e,n){if("string"==typeof(n=(0,Vt.m9)(n))){if(""===n)throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uD(e)&&-1!==n.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ru(t,new le(r))}if(n instanceof sn)return Ru(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pv(n)}.`)}function p2(t,e){if(!Array.isArray(t)||0===t.length)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g2(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class s0{convertValue(e,n="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ya(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new mv(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(up(e));default:return null}}convertTimestamp(e){const n=va(e);return new cn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ae(RF(r));const i=new Ia(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Nn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Dv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class DY extends s0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}class Hu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends $p{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ev("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zp extends Mo{data(e={}){return super.data(e)}}class Na{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zp(this._firestore,this._userDataWriter,r.key,r,new Hu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:bY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}function _2(t,e){return t instanceof Mo&&e instanceof Mo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Na&&e instanceof Na&&t._firestore===e._firestore&&QA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class xa extends s0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function y2(t,e,n){t=ut(t,sn);const r=ut(t.firestore,qt),i=Dv(t.converter,e,n);return yd(r,[yv($u(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ln.none())])}function v2(t,e,n,...r){t=ut(t,sn);const i=ut(t.firestore,qt),s=$u(i);let o;return o="string"==typeof(e=(0,Vt.m9)(e))||e instanceof Po?e0(s,"updateDoc",t._key,e,n,r):XA(s,"updateDoc",t._key,e),yd(i,[o.toMutation(t._key,ln.exists(!0))])}function I2(t,...e){var n,r,i;t=(0,Vt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||YA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(YA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof sn)l=ut(t.firestore,qt),h=ql(t._key.path),u={next:g=>{e[o]&&e[o](o0(l,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ut(t,Er);l=ut(g.firestore,qt),h=g._query;const m=new xa(l);u={next:y=>{e[o]&&e[o](new Na(l,m,g,y))},error:e[o+1],complete:e[o+2]},d2(t._query)}return function(m,y,C,b){const M=new dv(b),U=new pA(y,M,C);return m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return cA(yield md(m),U)})),()=>{M.Na(),m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return dA(yield md(m),U)}))}}(Tn(l),h,a,u)}function yd(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function yQ(t,e,n){return vA.apply(this,arguments)}(yield GA(r),i,s)})),s.promise}(Tn(t),e)}function o0(t,e,n){const r=n.docs.get(e._key),i=new xa(t);return new Mo(t,i,e._key,r,new Hu(n.hasPendingWrites,n.fromCache),e.converter)}const WY={maxAttempts:5};class E2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,n,r){this._verifyNotCommitted();const i=Oa(e,this._firestore),s=Dv(i.converter,n,r),o=yv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ln.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Oa(e,this._firestore);let o;return o="string"==typeof(n=(0,Vt.m9)(n))||n instanceof Po?e0(this._dataReader,"WriteBatch.update",s._key,n,r,i):XA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oa(e,this._firestore);return this._mutations=this._mutations.concat(new Jl(n._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oa(t,e){if((t=(0,Vt.m9)(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class qY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=$u(n)}get(n){const r=Oa(n,this._firestore),i=new DY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ie();const o=s[0];if(o.isFoundDocument())return new $p(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new $p(this._firestore,i,r._key,null,r.converter);throw Ie()})}set(n,r,i){const s=Oa(n,this._firestore),o=Dv(s.converter,r,i),a=yv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Oa(n,this._firestore);let a;return a="string"==typeof(r=(0,Vt.m9)(r))||r instanceof Po?e0(this._dataReader,"Transaction.update",o._key,r,i,s):XA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Oa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oa(e,this._firestore),r=new xa(this._firestore);return super.get(e).then(i=>new Mo(this._firestore,r,n._key,i._document,new Hu(!1,!1),n.converter))}}function u0(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function D2(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function A2(){if(!function CZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Ll=Jr.SDK_VERSION,(0,Jr._registerComponent)(new L1.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qt(new Z7(r.getProvider("auth-internal")),new Y7(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(nV,"4.4.0",e),(0,Jr.registerVersion)(nV,"4.4.0","esm2017")}();class Wp{constructor(e){this._delegate=e}static fromBase64String(e){return A2(),new Wp(Ws.fromBase64String(e))}static fromUint8Array(e){return D2(),new Wp(Ws.fromUint8Array(e))}toBase64(){return A2(),this._delegate.toBase64()}toUint8Array(){return D2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function c0(t){return function nJ(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class rJ{enableIndexedDbPersistence(e,n){return function eY(t,e){r2(t=ut(t,qt));const n=Tn(t);if(n._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");li("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new pd;return n2(n,i,new BA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function tY(t){r2(t=ut(t,qt));const e=Tn(t);if(e._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");li("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new pd;return n2(e,r,new FL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function nY(t){if(t._initialized&&!t._terminated)throw new J(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(n=(0,G.Z)(function*(i){if(!gs.D())return Promise.resolve();const s=i+"main";yield gs.delete(s)}),function r(i){return n.apply(this,arguments)})(ND(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class b2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ia||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){JL(this._delegate,e,n,r)}enableNetwork(){return function iY(t){return function UQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield BL(t),n=yield $L(t);return e.setNetworkEnabled(!0),function(i){const s=ce(i);return s.C_.delete(0),Op(s)}(n)}))}(Tn(t=ut(t,qt)))}(this._delegate)}disableNetwork(){return function sY(t){return function BQ(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield BL(t),n=yield $L(t);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(s){const o=ce(s);o.C_.add(0),yield ad(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Tn(t=ut(t,qt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,GL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function rY(t){return function(n){const r=new Zn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function wQ(t,e){return CA.apply(this,arguments)}(yield GA(n),r)})),r.promise}(Tn(t=ut(t,qt)))}(this._delegate)}onSnapshotsInSync(e){return function VY(t,e){return function HQ(t,e){const n=new dv(e);return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield md(t),s=n,ce(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield md(t),s=n,void ce(i).q_.delete(s);var i,s}))}}(Tn(t=ut(t,qt)),YA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vd(this,XL(this._delegate,e))}catch(n){throw ti(n,"collection()","Firestore.collection()")}}doc(e){try{return new Xi(this,gv(this._delegate,e))}catch(n){throw ti(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ni(this,function KQ(t,e){if(t=ut(t,Fp),KA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Er(t,null,(r=e,new Do(mt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ti(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function GY(t,e,n){t=ut(t,qt);const r=Object.assign(Object.assign({},WY),n);return function(s){if(s.maxAttempts<1)throw new J(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Zn;return s.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const l=yield function jL(t){return fv(t).then(e=>e.datastore)}(s);new FQ(s.asyncQueue,l,a,o,u).run()})),u.promise}(Tn(t),i=>e(new qY(t,i)),r)}(this._delegate,n=>e(new S2(this,n)))}batch(){return Tn(this._delegate),new R2(new E2(this._delegate,e=>yd(this._delegate,e)))}loadBundle(e){return function oY(t,e){const n=Tn(t=ut(t,qt)),r=new YQ;return function zQ(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?dF().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return LL(h,g);if(h instanceof ArrayBuffer)return LL(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new kQ(h,a);var h}(n,xp(e));t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function xQ(t,e,n){const r=ce(t);var i;(i=(0,G.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(C,b){const M=ce(C),U=xn(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.Kr.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(U)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=l).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(SL(l));const h=new hQ(l,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield Ro(o,m.ra,void 0),yield function(C,b){const M=ce(C);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Kr.saveBundleMetadata(U,b))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return li("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var C}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield GA(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aY(t,e){return function WQ(t,e){return t.asyncQueue.enqueue((0,G.Z)(function*(){return function(r,i){const s=ce(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield gd(t),e)}))}(Tn(t=ut(t,qt)),e).then(n=>n?new Er(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ni(this,n):null)}}class bv extends s0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wp(new Ws(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Xi.forKey(n,this.firestore,null)}}class S2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}get(e){const n=Wu(e);return this._delegate.get(n).then(r=>new qp(this._firestore,new Mo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Wu(e);return r?(u0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Wu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Wu(e);return this._delegate.delete(n),this}}class R2{constructor(e){this._delegate=e}set(e,n,r){const i=Wu(e);return r?(u0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Wu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Wu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class zu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=zu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new zu(e,new bv(e),n),i.set(n,s)),s}}zu.INSTANCES=new WeakMap;class Xi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xi(n,new sn(n._delegate,r,new le(e)))}static forKey(e,n,r){return new Xi(n,new sn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vd(this.firestore,XL(this._delegate,e))}catch(n){throw ti(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof sn&&e2(this._delegate,e)}set(e,n){n=u0("DocumentReference.set",n);try{return n?y2(this._delegate,e,n):y2(this._delegate,e)}catch(r){throw ti(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?v2(this._delegate,e):v2(this._delegate,e,n,...r)}catch(i){throw ti(i,"updateDoc()","DocumentReference.update()")}}delete(){return function OY(t){return yd(ut(t.firestore,qt),[new Jl(t._key,ln.none())])}(this._delegate)}onSnapshot(...e){const n=P2(e),r=M2(e,i=>new qp(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return I2(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function RY(t){t=ut(t,sn);const e=ut(t.firestore,qt),n=Tn(e),r=new xa(e);return function $Q(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield function(h,g){const m=ce(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=ld(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield gd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Mo(e,r,t._key,i,new Hu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function PY(t){t=ut(t,sn);const e=ut(t.firestore,qt);return HL(Tn(e),t._key,{source:"server"}).then(n=>o0(e,t,n))}(this._delegate):function SY(t){t=ut(t,sn);const e=ut(t.firestore,qt);return HL(Tn(e),t._key).then(n=>o0(e,t,n))}(this._delegate),n.then(r=>new qp(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?zu.getInstance(this.firestore,e):null))}}function ti(t,e,n){return t.message=t.message.replace(e,n),t}function P2(t){for(const e of t)if("object"==typeof e&&!c0(e))return e;return{}}function M2(t,e){var n,r;let i;return i=c0(t[0])?t[0]:c0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Xi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return _2(this._delegate,e._delegate)}}class Gp extends qp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function W7(t,e){t||Ie()}(void 0!==n),n}}class ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bv(e)}where(e,n,r){try{return new ni(this.firestore,Ma(this._delegate,function _Y(t,e,n){const r=e,i=Ev("where",t);return Hp._create(i,r,n)}(e,n,r)))}catch(i){throw ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ni(this.firestore,Ma(this._delegate,function yY(t,e="asc"){const n=e,r=Ev("orderBy",t);return r0._create(r,n)}(e,n)))}catch(r){throw ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ni(this.firestore,Ma(this._delegate,function vY(t){return QL("limit",t),wv._create("limit",t,"F")}(e)))}catch(n){throw ti(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ni(this.firestore,Ma(this._delegate,function IY(t){return QL("limitToLast",t),wv._create("limitToLast",t,"L")}(e)))}catch(n){throw ti(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ni(this.firestore,Ma(this._delegate,function EY(...t){return Tv._create("startAt",t,!0)}(...e)))}catch(n){throw ti(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ni(this.firestore,Ma(this._delegate,function wY(...t){return Tv._create("startAfter",t,!1)}(...e)))}catch(n){throw ti(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ni(this.firestore,Ma(this._delegate,function TY(...t){return Cv._create("endBefore",t,!1)}(...e)))}catch(n){throw ti(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ni(this.firestore,Ma(this._delegate,function CY(...t){return Cv._create("endAt",t,!0)}(...e)))}catch(n){throw ti(n,"endAt()","Query.endAt()")}}isEqual(e){return QA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function NY(t){t=ut(t,Er);const e=ut(t.firestore,qt),n=Tn(e),r=new xa(e);return function jQ(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield iv(s,o,!0),l=new ML(o,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=ld(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield gd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Na(e,r,t,i))}(this._delegate):"server"===e?.source?function xY(t){t=ut(t,Er);const e=ut(t.firestore,qt),n=Tn(e),r=new xa(e);return zL(n,t._query,{source:"server"}).then(i=>new Na(e,r,t,i))}(this._delegate):function MY(t){t=ut(t,Er);const e=ut(t.firestore,qt),n=Tn(e),r=new xa(e);return d2(t._query),zL(n,t._query).then(i=>new Na(e,r,t,i))}(this._delegate),n.then(r=>new l0(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=P2(e),r=M2(e,i=>new l0(this.firestore,new Na(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return I2(this._delegate,n,r)}withConverter(e){return new ni(this.firestore,this._delegate.withConverter(e?zu.getInstance(this.firestore,e):null))}}class sJ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Gp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class l0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new sJ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Gp(this._firestore,r))})}isEqual(e){return _2(this._delegate,e._delegate)}}class vd extends ni{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xi(this.firestore,e):null}doc(e){try{return new Xi(this.firestore,void 0===e?gv(this._delegate):gv(this._delegate,e))}catch(n){throw ti(n,"doc()","CollectionReference.doc()")}}add(e){return function kY(t,e){const n=ut(t.firestore,qt),r=gv(t),i=Dv(t.converter,e);return yd(n,[yv($u(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Xi(this.firestore,n))}isEqual(e){return e2(this._delegate,e._delegate)}withConverter(e){return new vd(this.firestore,this._delegate.withConverter(e?zu.getInstance(this.firestore,e):null))}}function Wu(t){return ut(t,sn)}class d0{constructor(...e){this._delegate=new Po(...e)}static documentId(){return new d0(nn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Po&&this._delegate._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KY(){return new JA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qu(e)}static delete(){const e=function ZY(){return new Up("deleteField")}();return e._methodName="FieldValue.delete",new qu(e)}static arrayUnion(...e){const n=function QY(...t){return new hY("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new qu(n)}static arrayRemove(...e){const n=function YY(...t){return new fY("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new qu(n)}static increment(e){const n=function JY(t){return new pY("increment",t)}(e);return n._methodName="FieldValue.increment",new qu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oJ={Firestore:b2,GeoPoint:mv,Timestamp:cn,Blob:Wp,Transaction:S2,WriteBatch:R2,DocumentReference:Xi,DocumentSnapshot:qp,Query:ni,QueryDocumentSnapshot:Gp,QuerySnapshot:l0,CollectionReference:vd,FieldPath:d0,FieldValue:qu,setLogLevel:function iJ(t){!function z7(t){ga.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function N2(t,e){return function cJ(t,e=ny){return new Le(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function h0(t,e){return N2(t,e).pipe(de(n=>({payload:n,type:"query"})))}!function uJ(t){(function aJ(t,e){t.INTERNAL.registerComponent(new L1.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oJ)))})(t,(e,n)=>new b2(e,n,new rJ)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(iy.Z);class x2{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=F2(r,n);return new V2(i,s,this.afs)}snapshotChanges(){return function lJ(t,e){return N2(t,e).pipe(k_(void 0),aC(),de(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return this.snapshotChanges().pipe(de(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Ai)}}function Sv(t,e){return h0(t,e).pipe(k_(void 0),aC(),de(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function O2(t,e,n){return Sv(t,n).pipe(F_((r,i)=>function dJ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function hJ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return f0(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return f0(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return f0(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Oe(),de(r=>r.map(i=>({type:i.type,payload:i}))))}function f0(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function k2(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class V2{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Sv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(de(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(k_(void 0),aC(),mr(([r,i])=>i.length>0||!r),de(([,r])=>r),Ai)}auditTrail(e){return this.stateChanges(e).pipe(F_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=k2(e);return O2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return h0(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ai)}get(e){return I(this.query.get(e)).pipe(Ai)}add(e){return this.ref.add(e)}doc(e){return new x2(this.ref.doc(e),this.afs)}}class fJ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Sv(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.filter(r=>e.indexOf(r.type)>-1)),mr(n=>n.length>0),Ai):Sv(this.query,this.afs.schedulers.outsideAngular).pipe(Ai)}auditTrail(e){return this.stateChanges(e).pipe(F_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=k2(e);return O2(this.query,n,this.afs.schedulers.outsideAngular).pipe(Ai)}valueChanges(e={}){return h0(this.query,this.afs.schedulers.outsideAngular).pipe(de(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ai)}get(e){return I(this.query.get(e)).pipe(Ai)}}const pJ=new ue("angularfire2.enableFirestorePersistence"),gJ=new ue("angularfire2.firestore.persistenceSettings"),mJ=new ue("angularfire2.firestore.settings"),_J=new ue("angularfire2.firestore.use-emulator");function F2(t,e=(n=>n)){return{query:e(t),ref:t}}let yJ=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,h,g,m,y,C,b,M,U,N){this.schedulers=u;const z=oC(n,a,r),se=h;g&&V1(z,a,m,C,b,M,y,U),[this.firestore,this.persistenceEnabled$]=A1(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const he=a.runOutsideAngular(()=>z.firestore());if(s&&he.settings(s),se&&he.useEmulator(...se),i&&!__(o)){const je=()=>{try{return I(he.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Ct){return typeof console<"u"&&console.warn(Ct),A(!1)}};return[he,a.runOutsideAngular(je)]}return[he,A(!1)]},[s,se,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=F2(i,r),a=this.schedulers.ngZone.run(()=>s);return new V2(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new fJ(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new x2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(sy),oe(sC,8),oe(pJ,8),oe(mJ,8),oe(os),oe(It),oe(ry),oe(gJ,8),oe(_J,8),oe(F1,8),oe(P1,8),oe(M1,8),oe(N1,8),oe(x1,8),oe(O1,8),oe(k1,8),oe(iC,8))};static \u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),p0=(()=>{class t{constructor(n){this.db=n,this.path="notas",this.notasRef=n.collection(this.path),this.notasRef.valueChanges().subscribe(r=>{console.log(r)})}getAll(){return this.notasRef.valueChanges()}eliminarCampo(n){this.db.doc(this.path+"/"+n).delete().then(()=>{console.log("Campo eliminado correctamente")}).catch(r=>{console.error("Error al eliminar campo:",r)})}save(n){return n.uid?this.notasRef.doc(n.uid).update(Object.assign({},n)):(n.uid=n.etiqueta,console.log("persona",n),this.notasRef.doc(n.uid).set(Object.assign({},n)))}getNota(n){return console.log("uid",n),this.db.doc(this.path+"/"+n).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(yJ))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vJ=(()=>{class t{constructor(n,r,i,s){this.router=n,this.fb=r,this.notasService=i,this.notasFirebaseService=s,this.nota=new g8,this.formulario=this.fb.group({nota:["",aT.required],fecha:[null,aT.required],etiqueta:["",aT.required]});let o=this.router.getCurrentNavigation()?.extras.queryParams;o&&(console.log(o),this.nota=o.nota)}onSubmit(){this.formulario.valid&&(this.notasService.agregarReceta(this.nota),this.notasFirebaseService.save(this.nota),this.formulario.reset())}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Yr),ee(z9),ee(eC),ee(p0))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-crear"]],decls:15,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","nota"],["type","text","id","nota","formControlName","nota","required","",3,"ngModel","ngModelChange"],["for","fecha"],["type","date","id","fecha","formControlName","fecha","required","",3,"ngModel","ngModelChange"],["for","etiqueta"],["id","etiqueta","formControlName","etiqueta","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"]],template:function(r,i){1&r&&(kt(0,"form",0),Fn("ngSubmit",function(){return i.onSubmit()}),kt(1,"div",1)(2,"label",2),Pn(3,"Nota:"),bt(),kt(4,"input",3),Fn("ngModelChange",function(o){return i.nota.nota=o}),bt()(),kt(5,"div",1)(6,"label",4),Pn(7,"Fecha:"),bt(),kt(8,"input",5),Fn("ngModelChange",function(o){return i.nota.fecha=o}),bt()(),kt(9,"div",1)(10,"label",6),Pn(11,"Etiqueta:"),bt(),kt(12,"textarea",7),Fn("ngModelChange",function(o){return i.nota.etiqueta=o}),bt()(),kt(13,"button",8),Pn(14,"Agregar Nota"),bt()()),2&r&&(Zi("formGroup",i.formulario),gr(4),Zi("ngModel",i.nota.nota),gr(4),Zi("ngModel",i.nota.fecha),gr(4),Zi("ngModel",i.nota.etiqueta),gr(1),Zi("disabled",i.formulario.invalid))},dependencies:[Zx,lf,dT,kx,N_,M_,DT],styles:["form[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 5px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px;color:#333}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:3px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:10px 15px;border:none;border-radius:3px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#218838}button[disabled][_ngcontent-%COMP%]{background-color:#6c757d;cursor:not-allowed}"]})}return t})();function IJ(t,e){if(1&t){const n=UE();kt(0,"li")(1,"p"),Pn(2),bt(),kt(3,"p"),Pn(4),bt(),kt(5,"h3",5),Fn("click",function(){const s=lh(n).$implicit;return Ya(BE().goEditar(s))}),Pn(6),bt()()}if(2&t){const n=e.$implicit;gr(2),cu("Ingredientes: ",n.nota,""),gr(2),cu("Pasos: ",n.fecha,""),gr(2),Gh(n.etiqueta)}}let EJ=(()=>{class t{constructor(n,r,i){this.router=n,this.notasService=r,this.notasFirebaseService=i,this.notas=[],this.terminoBusqueda="",this.etiquetaBorrar="",this.notas=r.obtenerNotas(),this.listaNotas=this.notasFirebaseService.getAll()}ngOnInit(){this.notas=this.notasService.obtenerNotas()}borrarTodasLasNotas(){this.notasFirebaseService.eliminarCampo(this.etiquetaBorrar)}goEditar(n){console.log("editando",n),this.router.navigate(["paginas/crear"],{queryParams:{nota:n}})}static#e=this.\u0275fac=function(r){return new(r||t)(ee(Yr),ee(eC),ee(p0))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-visualizar"]],decls:18,vars:4,consts:[["lang","es"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["for","campoABorrar"],["type","text","id","campoABorrar",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(kt(0,"html",0)(1,"head")(2,"title"),Pn(3,"P\xe1gina Web de Recetas Culinarias"),bt(),zh(4,"meta",1)(5,"meta",2),bt(),kt(6,"body")(7,"div")(8,"label",3),Pn(9,"Etiqueta a Borrar:"),bt(),kt(10,"input",4),Fn("ngModelChange",function(o){return i.etiquetaBorrar=o}),bt(),kt(11,"button",5),Fn("click",function(){return i.borrarTodasLasNotas()}),Pn(12,"Borrar Nota"),bt()(),kt(13,"h2"),Pn(14,"Notas"),bt(),kt(15,"ul"),Bm(16,IJ,7,3,"li",6),nw(17,"async"),bt()()()),2&r&&(gr(10),Zi("ngModel",i.etiquetaBorrar),gr(6),Zi("ngForOf",rw(17,2,i.listaNotas)))},dependencies:[m_,lf,dT,ET,Gw],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f8f9fa;color:#333;margin:0;padding:20px}div[_ngcontent-%COMP%]{max-width:400px;margin:20px auto;padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 5px #0000001a}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:10px}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:1px solid #ddd;border-radius:3px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#004080;color:#fff;padding:10px 15px;border:none;border-radius:3px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#00274d}h2[_ngcontent-%COMP%]{color:#004080}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;margin-bottom:10px;padding:15px;background-color:#fff}li[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #0000001a}h3[_ngcontent-%COMP%]{color:#004080;margin-bottom:5px}p[_ngcontent-%COMP%]{margin-bottom:5px}"]})}return t})();function wJ(t,e){if(1&t){const n=UE();kt(0,"div",3)(1,"div",4)(2,"h3"),Pn(3),bt(),kt(4,"p")(5,"strong"),Pn(6,"Fecha:"),bt(),Pn(7),bt(),kt(8,"p")(9,"strong"),Pn(10,"Nota:"),bt(),Pn(11),bt(),kt(12,"button",5),Fn("click",function(){const s=lh(n).$implicit;return Ya(BE().goEditar(s))}),Pn(13,"Editar"),bt()()()}if(2&t){const n=e.$implicit;gr(3),Gh(n.etiqueta),gr(4),cu(" ",n.fecha,""),gr(4),cu(" ",n.nota,"")}}const TJ=[{path:"paginas/crear/:etiqueta",component:(()=>{class t{constructor(n,r,i){this.notaService=n,this.notasFirebaseService=r,this.router=i,this.nota=[],this.tareaSeleccionada=null,this.nota=n.obtenerNotas(),this.listaTareas=this.notasFirebaseService.getAll()}goEditar(n){console.log("editando",n),this.router.navigate(["paginas/crear"],{queryParams:{nota:n}})}static#e=this.\u0275fac=function(r){return new(r||t)(ee(eC),ee(p0),ee(Yr))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-editar"]],decls:7,vars:3,consts:[[1,"lista-tareas"],[1,"tareas-container"],["class","tarea",4,"ngFor","ngForOf"],[1,"tarea"],[1,"informacion-tarea"],[3,"click"]],template:function(r,i){1&r&&(kt(0,"div",0)(1,"h2"),Pn(2,"Tareas"),bt(),kt(3,"div",1),Bm(4,wJ,14,3,"div",2),nw(5,"async"),Pn(6," \xa0\xa0"),bt()()),2&r&&(gr(4),Zi("ngForOf",rw(5,1,i.listaTareas)))},dependencies:[m_,Gw]})}return t})()},{path:"paginas/crear",component:vJ},{path:"paginas/visualizar",component:EJ}];let CJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({imports:[y1.forRoot(TJ),y1]})}return t})();function DJ(t,e){if(1&t&&(kt(0,"li",4)(1,"a",5),Pn(2),bt()()),2&t){const n=e.$implicit;gr(1),Zi("routerLink",n.path),gr(1),Gh(n.titulo)}}let AJ=(()=>{class t{constructor(){this.paginas=[{titulo:"Crear",path:"paginas/crear"},{titulo:"Visualizar",path:"paginas/visualizar"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-menu"]],decls:5,vars:1,consts:[[1,"header"],[1,"container"],[1,"menu"],["class","menu-item",4,"ngFor","ngForOf"],[1,"menu-item"],["href","#",3,"routerLink"]],template:function(r,i){1&r&&(kt(0,"header",0)(1,"div",1)(2,"div",2)(3,"ul",2),Bm(4,DJ,3,2,"li",3),bt()()()()),2&r&&(gr(4),Zi("ngForOf",i.paginas))},dependencies:[m_,ey],styles:[".header[_ngcontent-%COMP%]{background-color:#333;padding:15px 0}.menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu-item[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-size:16px;transition:color .3s ease}.menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}"]})}return t})(),bJ=(()=>{class t{constructor(){this.title="practicaPWA"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&zh(0,"app-menu")(1,"router-outlet")},dependencies:[WT,AJ]})}return t})();class Zp{constructor(e){return e}}class L2{constructor(){return(0,Jr.getApps)()}}const g0=new ue("angularfire2._apps"),RJ={provide:Zp,useFactory:function SJ(t){return t&&1===t.length?t[0]:new Zp((0,Jr.getApp)())},deps:[[new wi,g0]]},PJ={provide:L2,deps:[[new wi,g0]]};function MJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Zp(r)}}let NJ=(()=>{class t{constructor(n){(0,Jr.registerVersion)("angularfire",nC.full,"core"),(0,Jr.registerVersion)("angularfire",nC.full,"app"),(0,Jr.registerVersion)("angular",aS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(os))};static \u0275mod=Vn({type:t});static \u0275inj=er({providers:[RJ,PJ]})}return t})();function xJ(t,...e){return{ngModule:NJ,providers:[{provide:g0,useFactory:MJ(t),multi:!0,deps:[It,Dr,ry,...e]}]}}const OJ=C1(Jr.initializeApp,!0);Me(932);class B2{constructor(){return rC("auth")}}class y0{constructor(e){return e}}const $2="firestore",v0=new ue("angularfire2.firestore-instances");function BJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new y0(r)}}const $J={provide:class LJ{constructor(){return rC($2)}},deps:[[new wi,v0]]},jJ={provide:y0,useFactory:function UJ(t,e){const n=function w1(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}($2,t,e);return n&&new y0(n)},deps:[[new wi,v0],Zp]};let HJ=(()=>{class t{constructor(){(0,Jr.registerVersion)("angularfire",nC.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Vn({type:t});static \u0275inj=er({providers:[jJ,$J]})}return t})();function zJ(t,...e){return{ngModule:HJ,providers:[{provide:v0,useFactory:BJ(t),multi:!0,deps:[It,Dr,ry,L2,[new wi,B2],[new wi,iC],...e]}]}}const WJ=C1(XQ,!0),j2={firebaseConfig:{apiKey:"AIzaSyDI8mwwf6VvQlj_It2j8F0ZzYoooC53FvE",authDomain:"practicapwa-63f87.firebaseapp.com",projectId:"practicapwa-63f87",storageBucket:"practicapwa-63f87.appspot.com",messagingSenderId:"1004037856530",appId:"1:1004037856530:web:9b4dc2167d2912fef467cb",measurementId:"G-HWT214MLYM"}},qJ=["addListener","removeListener"],GJ=["addEventListener","removeEventListener"],ZJ=["on","off"];function Rv(t,e,n,r){if(T(n)&&(r=n,n=void 0),r)return Rv(t,e,n).pipe(oT(r));const[i,s]=function YJ(t){return T(t.addEventListener)&&T(t.removeEventListener)}(t)?GJ.map(o=>a=>t[o](e,a,n)):function KJ(t){return T(t.addListener)&&T(t.removeListener)}(t)?qJ.map(H2(t,e)):function QJ(t){return T(t.on)&&T(t.off)}(t)?ZJ.map(H2(t,e)):[];if(!i&&at(t))return yt(o=>Rv(o,e,n))(et(t));if(!i)throw new TypeError("Invalid event target");return new Le(o=>{const a=(...u)=>o.next(1<u.length?u:u[0]);return i(a),()=>s(a)})}function H2(t,e){return n=>r=>t[n](e,r)}const ka=new Le(Te),XJ={connector:()=>new j};function z2(t,e=XJ){const{connector:n}=e;return K((r,i)=>{const s=n();et(t(function JJ(t){return new Le(e=>t.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function W2(t,e){return e?n=>yf(e.pipe(ci(1),function nX(){return K((t,e)=>{t.subscribe(ae(e,Te))})}()),n.pipe(W2(t))):yt((n,r)=>et(t(n,r)).pipe(ci(1),_O(n)))}const Kp="Service workers are disabled or not supported by this browser";class Pv{constructor(e){if(this.serviceWorker=e,e){const r=Rv(e,"controllerchange").pipe(de(()=>e.controller)),s=yf(O_(()=>A(e.controller)),r);this.worker=s.pipe(mr(h=>!!h)),this.registration=this.worker.pipe(me(()=>e.getRegistration()));const l=Rv(e,"message").pipe(de(h=>h.data)).pipe(mr(h=>h&&h.type)).pipe(function tX(t){return t?e=>z2(t)(e):e=>function eX(t,e){const n=T(t)?t:()=>t;return T(e)?z2(e,{connector:n}):r=>new PT(r,n)}(new j)(e)}());l.connect(),this.events=l}else this.worker=this.events=this.registration=function oX(t){return O_(()=>vl(new Error(t)))}(Kp)}postMessage(e,n){return this.worker.pipe(ci(1),sr(r=>{r.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(mr(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(ci(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(mr(n=>n.nonce===e),ci(1),de(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let q2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new j,!n.isEnabled)return this.messages=ka,this.notificationClicks=ka,void(this.subscription=ka);this.messages=this.sw.eventsOfType("PUSH").pipe(de(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(de(i=>i.data)),this.pushManager=this.sw.registration.pipe(de(i=>i.pushManager));const r=this.pushManager.pipe(me(i=>i.getSubscription()));this.subscription=w(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Kp));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(me(o=>o.subscribe(r)),ci(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ci(1),me(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Kp))}decodeBase64(n){return atob(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Pv))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})(),G2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=ka,this.available=ka,this.activated=ka,void(this.unrecoverable=ka);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(mr(r=>"VERSION_READY"===r.type),de(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Kp));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Kp));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Pv))};static#t=this.\u0275prov=be({token:t,factory:t.\u0275fac})}return t})();const Z2=new ue("NGSW_REGISTER_SCRIPT");function aX(t,e,n,r){return()=>{if(!BN(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=A(null);break;case"registerWithDelay":i=K2(+a[0]||0);break;case"registerWhenStable":i=a[0]?w(Q2(t),K2(+a[0])):Q2(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(It).runOutsideAngular(()=>i.pipe(ci(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function K2(t){return A(null).pipe(function sX(t,e=ny){const n=function iX(t=0,e,n=w8){let r=-1;return null!=e&&(an(e)?n=e:r=e),new Le(i=>{let s=function rX(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,e);return W2(()=>n)}(t))}function Q2(t){return t.get(hu).isStable.pipe(mr(n=>n))}function uX(t,e){return new Pv(BN(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class I0{}function cX(t,e={}){return function ZI(t){return{\u0275providers:t}}([q2,G2,{provide:Z2,useValue:t},{provide:I0,useValue:e},{provide:Pv,useFactory:uX,deps:[I0,os]},{provide:Ym,useFactory:aX,deps:[Dr,Z2,I0,os],multi:!0}])}let lX=(()=>{class t{static register(n,r={}){return{ngModule:t,providers:[cX(n,r)]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t});static#n=this.\u0275inj=er({providers:[q2,G2]})}return t})(),dX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Vn({type:t,bootstrap:[bJ]});static#n=this.\u0275inj=er({providers:[{provide:sy,useValue:j2.firebaseConfig}],imports:[xJ(()=>OJ(j2.firebaseConfig)),zJ(()=>WJ()),F3,CJ,W9,q9,lX.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]})}return t})();k3().bootstrapModule(dX).catch(t=>console.error(t))},106:(Pi,Cn,Me)=>{Me.d(Cn,{Z:()=>Dn});var T=Me(58),q=Me(537),x=Me(534),Ce=Me(879);class ft{constructor(Ve,Fe){this._delegate=Ve,this.firebase=Fe,(0,x._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Ve,Fe=x._DEFAULT_ENTRY_NAME){var On;this._delegate.checkDestroyed();const Zt=this._delegate.container.getProvider(Ve);return!Zt.isInitialized()&&"EXPLICIT"===(null===(On=Zt.getComponent())||void 0===On?void 0:On.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:Fe})}_removeServiceInstance(Ve,Fe=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Fe)}_addComponent(Ve){(0,x._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,x._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ct(){const rt=function xt(rt){const Ve={},Fe={__esModule:!0,initializeApp:function Xe(qe,ne={}){const ot=x.initializeApp(qe,ne);if((0,T.r3)(Ve,ot.name))return Ve[ot.name];const Lt=new rt(ot,Fe);return Ve[ot.name]=Lt,Lt},app:Zt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function xr(qe){const ne=qe.name,ot=ne.replace("-compat","");if(x._registerComponent(qe)&&"PUBLIC"===qe.type){const Lt=(on=Zt())=>{if("function"!=typeof on[ot])throw dn.create("invalid-app-argument",{appName:ne});return on[ot]()};void 0!==qe.serviceProps&&(0,T.ZB)(Lt,qe.serviceProps),Fe[ot]=Lt,rt.prototype[ot]=function(...on){return this._getService.bind(this,ne).apply(this,qe.multipleInstances?on:[])}}return"PUBLIC"===qe.type?Fe[ot]:null},removeApp:function On(qe){delete Ve[qe]},useAsService:function mn(qe,ne){return"serverAuth"===ne?null:ne},modularAPIs:x}};function Zt(qe){if(!(0,T.r3)(Ve,qe=qe||x._DEFAULT_ENTRY_NAME))throw dn.create("no-app",{appName:qe});return Ve[qe]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Et(){return Object.keys(Ve).map(qe=>Ve[qe])}}),Zt.App=rt,Fe}(ft);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:ct,extendNamespace:function Ve(Fe){(0,T.ZB)(rt,Fe)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),rt}(),ie=new Ce.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Dn=Z;!function pt(rt){(0,x.registerVersion)("@firebase/app-compat","0.2.24",rt)}()},534:(Pi,Cn,Me)=>{Me.r(Cn),Me.d(Cn,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>mi,_addComponent:()=>Vr,_addOrOverwriteComponent:()=>Fr,_apps:()=>Yn,_clearComponents:()=>fn,_components:()=>kr,_getProvider:()=>yt,_registerComponent:()=>$n,_removeServiceInstance:()=>Lr,deleteApp:()=>_n,getApp:()=>yi,getApps:()=>Sn,initializeApp:()=>Vi,onLog:()=>No,registerVersion:()=>Ur,setLogLevel:()=>ms});var T=Me(861),q=Me(537),x=Me(879),Ce=Me(58);const ft=(k,R)=>R.some(te=>k instanceof te);let Gt,dn;const Z=new WeakMap,ie=new WeakMap,Te=new WeakMap,He=new WeakMap,pt=new WeakMap;let Ve={get(k,R,te){if(k instanceof IDBTransaction){if("done"===R)return ie.get(k);if("objectStoreNames"===R)return k.objectStoreNames||Te.get(k);if("store"===R)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return Xe(k[R])},set:(k,R,te)=>(k[R]=te,!0),has:(k,R)=>k instanceof IDBTransaction&&("done"===R||"store"===R)||R in k};function Zt(k){return"function"==typeof k?function On(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ct(){return dn||(dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...R){return k.apply(Et(this),R),Xe(Z.get(this))}:function(...R){return Xe(k.apply(Et(this),R))}:function(R,...te){const _e=k.call(Et(this),R,...te);return Te.set(_e,R.sort?R.sort():[R]),Xe(_e)}}(k):(k instanceof IDBTransaction&&function rt(k){if(ie.has(k))return;const R=new Promise((te,_e)=>{const Ke=()=>{k.removeEventListener("complete",tt),k.removeEventListener("error",H),k.removeEventListener("abort",H)},tt=()=>{te(),Ke()},H=()=>{_e(k.error||new DOMException("AbortError","AbortError")),Ke()};k.addEventListener("complete",tt),k.addEventListener("error",H),k.addEventListener("abort",H)});ie.set(k,R)}(k),ft(k,function xt(){return Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ve):k)}function Xe(k){if(k instanceof IDBRequest)return function Dn(k){const R=new Promise((te,_e)=>{const Ke=()=>{k.removeEventListener("success",tt),k.removeEventListener("error",H)},tt=()=>{te(Xe(k.result)),Ke()},H=()=>{_e(k.error),Ke()};k.addEventListener("success",tt),k.addEventListener("error",H)});return R.then(te=>{te instanceof IDBCursor&&Z.set(te,k)}).catch(()=>{}),pt.set(R,k),R}(k);if(He.has(k))return He.get(k);const R=Zt(k);return R!==k&&(He.set(k,R),pt.set(R,k)),R}const Et=k=>pt.get(k),qe=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],ot=new Map;function Lt(k,R){if(!(k instanceof IDBDatabase)||R in k||"string"!=typeof R)return;if(ot.get(R))return ot.get(R);const te=R.replace(/FromIndex$/,""),_e=R!==te,Ke=ne.includes(te);if(!(te in(_e?IDBIndex:IDBObjectStore).prototype)||!Ke&&!qe.includes(te))return;const tt=function(){var H=(0,T.Z)(function*(Yt,...Ee){const Qe=this.transaction(Yt,Ke?"readwrite":"readonly");let Fa=Qe.store;return _e&&(Fa=Fa.index(Ee.shift())),(yield Promise.all([Fa[te](...Ee),Ke&&Qe.done]))[0]});return function(Ee){return H.apply(this,arguments)}}();return ot.set(R,tt),tt}!function Fe(k){Ve=k(Ve)}(k=>({...k,get:(R,te,_e)=>Lt(R,te)||k.get(R,te,_e),has:(R,te)=>!!Lt(R,te)||k.has(R,te)}));class on{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(te=>{if(function hn(k){const R=k.getComponent();return"VERSION"===R?.type}(te)){const _e=te.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(te=>te).join(" ")}}const fi="@firebase/app",Le=new x.Yd("@firebase/app"),mi="[DEFAULT]",_i={[fi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,kr=new Map;function Vr(k,R){try{k.container.addComponent(R)}catch(te){Le.debug(`Component ${R.name} failed to register with FirebaseApp ${k.name}`,te)}}function Fr(k,R){k.container.addOrOverwriteComponent(R)}function $n(k){const R=k.name;if(kr.has(R))return Le.debug(`There were multiple attempts to register component ${R}.`),!1;kr.set(R,k);for(const te of Yn.values())Vr(te,k);return!0}function yt(k,R){const te=k.container.getProvider("heartbeat").getImmediate({optional:!0});return te&&te.triggerHeartbeat(),k.container.getProvider(R)}function Lr(k,R,te=mi){yt(k,R).clearInstance(te)}function fn(){kr.clear()}const Qt=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class an{constructor(R,te,_e){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},te),this._name=te.name,this._automaticDataCollectionEnabled=te.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const ki="10.7.0";function Vi(k,R={}){let te=k;"object"!=typeof R&&(R={name:R});const _e=Object.assign({name:mi,automaticDataCollectionEnabled:!1},R),Ke=_e.name;if("string"!=typeof Ke||!Ke)throw Qt.create("bad-app-name",{appName:String(Ke)});if(te||(te=(0,Ce.aH)()),!te)throw Qt.create("no-options");const tt=Yn.get(Ke);if(tt){if((0,Ce.vZ)(te,tt.options)&&(0,Ce.vZ)(_e,tt.config))return tt;throw Qt.create("duplicate-app",{appName:Ke})}const H=new q.H0(Ke);for(const Ee of kr.values())H.addComponent(Ee);const Yt=new an(te,_e,H);return Yn.set(Ke,Yt),Yt}function yi(k=mi){const R=Yn.get(k);if(!R&&k===mi&&(0,Ce.aH)())return Vi();if(!R)throw Qt.create("no-app",{appName:k});return R}function Sn(){return Array.from(Yn.values())}function _n(k){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,T.Z)(function*(k){const R=k.name;Yn.has(R)&&(Yn.delete(R),yield Promise.all(k.container.getProviders().map(te=>te.delete())),k.isDeleted=!0)})).apply(this,arguments)}function Ur(k,R,te){var _e;let Ke=null!==(_e=_i[k])&&void 0!==_e?_e:k;te&&(Ke+=`-${te}`);const tt=Ke.match(/\s|\//),H=R.match(/\s|\//);if(tt||H){const Yt=[`Unable to register library "${Ke}" with version "${R}":`];return tt&&Yt.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),tt&&H&&Yt.push("and"),H&&Yt.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void Le.warn(Yt.join(" "))}$n(new q.wA(`${Ke}-version`,()=>({library:Ke,version:R}),"VERSION"))}function No(k,R){if(null!==k&&"function"!=typeof k)throw Qt.create("invalid-log-argument");(0,x.Am)(k,R)}function ms(k){(0,x.Ub)(k)}const qs="firebase-heartbeat-database",Fi=1,S="firebase-heartbeat-store";let D=null;function I(){return D||(D=function xr(k,R,{blocked:te,upgrade:_e,blocking:Ke,terminated:tt}={}){const H=indexedDB.open(k,R),Yt=Xe(H);return _e&&H.addEventListener("upgradeneeded",Ee=>{_e(Xe(H.result),Ee.oldVersion,Ee.newVersion,Xe(H.transaction),Ee)}),te&&H.addEventListener("blocked",Ee=>te(Ee.oldVersion,Ee.newVersion,Ee)),Yt.then(Ee=>{tt&&Ee.addEventListener("close",()=>tt()),Ke&&Ee.addEventListener("versionchange",Qe=>Ke(Qe.oldVersion,Qe.newVersion,Qe))}).catch(()=>{}),Yt}(qs,Fi,{upgrade:(k,R)=>{0===R&&k.createObjectStore(S)}}).catch(k=>{throw Qt.create("idb-open",{originalErrorMessage:k.message})})),D}function v(){return(v=(0,T.Z)(function*(k){try{return yield(yield I()).transaction(S).objectStore(S).get(ve(k))}catch(R){if(R instanceof Ce.ZR)Le.warn(R.message);else{const te=Qt.create("idb-get",{originalErrorMessage:R?.message});Le.warn(te.message)}}})).apply(this,arguments)}function A(k,R){return W.apply(this,arguments)}function W(){return(W=(0,T.Z)(function*(k,R){try{const _e=(yield I()).transaction(S,"readwrite");yield _e.objectStore(S).put(R,ve(k)),yield _e.done}catch(te){if(te instanceof Ce.ZR)Le.warn(te.message);else{const _e=Qt.create("idb-set",{originalErrorMessage:te?.message});Le.warn(_e.message)}}})).apply(this,arguments)}function ve(k){return`${k.name}!${k.options.appId}`}class lt{constructor(R){this.container=R,this._heartbeatsCache=null;const te=this.container.getProvider("app").getImmediate();this._storage=new De(te),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var R=this;return(0,T.Z)(function*(){var te,_e;const tt=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=fe();if((null!=(null===(te=R._heartbeatsCache)||void 0===te?void 0:te.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(_e=R._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==H&&!R._heartbeatsCache.heartbeats.some(Yt=>Yt.date===H))return R._heartbeatsCache.heartbeats.push({date:H,agent:tt}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(Yt=>{const Ee=new Date(Yt.date).valueOf();return Date.now()-Ee<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,T.Z)(function*(){var te;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(te=R._heartbeatsCache)||void 0===te?void 0:te.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const _e=fe(),{heartbeatsToSend:Ke,unsentEntries:tt}=function Dt(k,R=1024){const te=[];let _e=k.slice();for(const Ke of k){const tt=te.find(H=>H.agent===Ke.agent);if(tt){if(tt.dates.push(Ke.date),kn(te)>R){tt.dates.pop();break}}else if(te.push({agent:Ke.agent,dates:[Ke.date]}),kn(te)>R){te.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:te,unsentEntries:_e}}(R._heartbeatsCache.heartbeats),H=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ke}));return R._heartbeatsCache.lastSentHeartbeatDate=_e,tt.length>0?(R._heartbeatsCache.heartbeats=tt,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),H})()}}function fe(){return(new Date).toISOString().substring(0,10)}class De{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,T.Z)(function*(){if(yield R._canUseIndexedDBPromise){const _e=yield function w(k){return v.apply(this,arguments)}(R.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var te=this;return(0,T.Z)(function*(){var _e;if(yield te._canUseIndexedDBPromise){const tt=yield te.read();return A(te.app,{lastSentHeartbeatDate:null!==(_e=R.lastSentHeartbeatDate)&&void 0!==_e?_e:tt.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var te=this;return(0,T.Z)(function*(){var _e;if(yield te._canUseIndexedDBPromise){const tt=yield te.read();return A(te.app,{lastSentHeartbeatDate:null!==(_e=R.lastSentHeartbeatDate)&&void 0!==_e?_e:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...R.heartbeats]})}})()}}function kn(k){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:k})).length}!function Gs(k){$n(new q.wA("platform-logger",R=>new on(R),"PRIVATE")),$n(new q.wA("heartbeat",R=>new lt(R),"PRIVATE")),Ur(fi,"0.9.24",k),Ur(fi,"0.9.24","esm2017"),Ur("fire-js","")}("")},537:(Pi,Cn,Me)=>{Me.d(Cn,{H0:()=>xt,wA:()=>x});var T=Me(861),q=Me(58);class x{constructor(Z,ie,Te){this.name=Z,this.instanceFactory=ie,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const Ce="[DEFAULT]";class ft{constructor(Z,ie){this.name=Z,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ie=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ie)){const Te=new q.BH;if(this.instancesDeferred.set(ie,Te),this.isInitialized(ie)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:ie});He&&Te.resolve(He)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Z){var ie;const Te=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(ie=Z?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(pt){if(He)return null;throw pt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function dn(ct){return"EAGER"===ct.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[ie,Te]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(ie);try{const pt=this.getOrInitializeService({instanceIdentifier:He});Te.resolve(pt)}catch{}}}}clearInstance(Z=Ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,T.Z)(function*(){const ie=Array.from(Z.instances.values());yield Promise.all([...ie.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ie.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=Ce){return this.instances.has(Z)}getOptions(Z=Ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ie={}}=Z,Te=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Te,options:ie});for(const[pt,Dn]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(pt)&&Dn.resolve(He);return He}onInit(Z,ie){var Te;const He=this.normalizeInstanceIdentifier(ie),pt=null!==(Te=this.onInitCallbacks.get(He))&&void 0!==Te?Te:new Set;pt.add(Z),this.onInitCallbacks.set(He,pt);const Dn=this.instances.get(He);return Dn&&Z(Dn,He),()=>{pt.delete(Z)}}invokeOnInitCallbacks(Z,ie){const Te=this.onInitCallbacks.get(ie);if(Te)for(const He of Te)try{He(Z,ie)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ie={}}){let Te=this.instances.get(Z);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(ct=Z,ct===Ce?void 0:ct),options:ie}),this.instances.set(Z,Te),this.instancesOptions.set(Z,ie),this.invokeOnInitCallbacks(Te,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Te)}catch{}var ct;return Te||null}normalizeInstanceIdentifier(Z=Ce){return this.component?this.component.multipleInstances?Z:Ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xt{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ie=this.getProvider(Z.name);if(ie.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ie.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ie=new ft(Z,this);return this.providers.set(Z,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(Pi,Cn,Me)=>{Me.d(Cn,{Am:()=>ct,Ub:()=>xt,Yd:()=>dn,in:()=>q});const T=[];var q=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(q||{});const x={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Ce=q.INFO,ft={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Gt=(Z,ie,...Te)=>{if(ie<Z.logLevel)return;const He=(new Date).toISOString(),pt=ft[ie];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[pt](`[${He}]  ${Z.name}:`,...Te)};class dn{constructor(ie){this.name=ie,this._logLevel=Ce,this._logHandler=Gt,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in q))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?x[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...ie),this._logHandler(this,q.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...ie),this._logHandler(this,q.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,q.INFO,...ie),this._logHandler(this,q.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,q.WARN,...ie),this._logHandler(this,q.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...ie),this._logHandler(this,q.ERROR,...ie)}}function xt(Z){T.forEach(ie=>{ie.setLogLevel(Z)})}function ct(Z,ie){for(const Te of T){let He=null;ie&&ie.level&&(He=x[ie.level]),Te.userLogHandler=null===Z?null:(pt,Dn,...rt)=>{const Ve=rt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Dn>=(He??pt.logLevel)&&Z({level:q[Dn].toLowerCase(),message:Ve,args:rt,type:pt.name})}}}},365:(Pi,Cn,Me)=>{Me.r(Cn);var T=Me(861),q=Me(106),x=Me(932),Ce=Me(58),dn=(Me(534),Me(879),Me(537));function xt(){return window}function ie(){return ie=(0,T.Z)(function*(I,w,v){var A;const{BuildInfo:W}=xt();(0,x.au)(w.sessionId,"AuthEvent did not contain a session ID");const ve=yield function Fe(I){return On.apply(this,arguments)}(w.sessionId),me={};return(0,x.av)()?me.ibi=W.packageName:(0,x.aw)()?me.apn=W.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(me.appDisplayName=W.displayName),me.sessionId=ve,(0,x.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,me)}),ie.apply(this,arguments)}function He(){return(He=(0,T.Z)(function*(I){const{BuildInfo:w}=xt(),v={};(0,x.av)()?v.iosBundleId=w.packageName:(0,x.aw)()?v.androidPackageName=w.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),yield(0,x.az)(I,v)})).apply(this,arguments)}function rt(){return(rt=(0,T.Z)(function*(I,w,v){const{cordova:A}=xt();let W=()=>{};try{yield new Promise((ve,me)=>{let Oe=null;function lt(){var De;ve();const kn=null===(De=A.plugins.browsertab)||void 0===De?void 0:De.close;"function"==typeof kn&&kn(),"function"==typeof v?.close&&v.close()}function fe(){Oe||(Oe=window.setTimeout(()=>{me((0,x.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&fe()}w.addPassiveListener(lt),document.addEventListener("resume",fe,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",Dt,!1),W=()=>{w.removePassiveListener(lt),document.removeEventListener("resume",fe,!1),document.removeEventListener("visibilitychange",Dt,!1),Oe&&window.clearTimeout(Oe)}})}finally{W()}})).apply(this,arguments)}function On(){return(On=(0,T.Z)(function*(I){const w=function Zt(I){if((0,x.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Et extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,T.Z)(function*(){yield w.initPromise})()}}function qe(I){return ne.apply(this,arguments)}function ne(){return(ne=(0,T.Z)(function*(I){const w=yield on()._get(hn(I));return w&&(yield on()._remove(hn(I))),w})).apply(this,arguments)}function Lt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function on(){return(0,x.aE)(x.b)}function hn(I){return(0,x.aF)("authEvent",I.config.apiKey,I.name)}function Le(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,Ce.zd)(v.join("?"))}const L=class Mi{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new Et(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,x.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var ve=this;return(0,T.Z)(function*(){!function Ve(I){var w,v,A,W,ve,me,Oe,lt,fe,Dt;const De=xt();(0,x.aC)("function"==typeof(null===(w=De?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(v=De?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(ve=null===(W=null===(A=De?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===ve?void 0:ve.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(lt=null===(Oe=null===(me=De?.cordova)||void 0===me?void 0:me.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===lt?void 0:lt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Dt=null===(fe=De?.cordova)||void 0===fe?void 0:fe.InAppBrowser)||void 0===Dt?void 0:Dt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const me=yield ve._initialize(w);yield me.initialized(),me.resetRedirect(),(0,x.aI)(),yield ve._originValidation(w);const Oe=function xr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Lt(),postBody:null,tenantId:I.tenantId,error:(0,x.aB)(I,"no-auth-event")}}(w,A,W);yield function mn(I,w){return on()._set(hn(I),w)}(w,Oe);const lt=yield function Z(I,w,v){return ie.apply(this,arguments)}(w,Oe,v),fe=yield function pt(I){const{cordova:w}=xt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,x.aA)()?"_blank":"_system","location=yes"),v(W)})})}(lt);return function Dn(I,w,v){return rt.apply(this,arguments)}(w,me,fe)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Te(I){return He.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:ve}=xt(),me=setTimeout((0,T.Z)(function*(){yield qe(w),v.onEvent($())}),500),Oe=function(){var Dt=(0,T.Z)(function*(De){clearTimeout(me);const kn=yield qe(w);let Gs=null;kn&&De?.url&&(Gs=function ot(I,w){var v,A;const W=function pi(I){const w=Le(I),v=w.link?decodeURIComponent(w.link):void 0,A=Le(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return Le(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const ve=Le(W),me=ve.firebaseError?function fi(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(ve.firebaseError)):null,Oe=null===(A=null===(v=me?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],lt=Oe?(0,x.aB)(Oe):null;return lt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(kn,De.url)),v.onEvent(Gs||$())});return function(kn){return Dt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Oe);const lt=W,fe=`${ve.packageName.toLowerCase()}://`;xt().handleOpenURL=function(){var Dt=(0,T.Z)(function*(De){if(De.toLowerCase().startsWith(fe)&&Oe({url:De}),"function"==typeof lt)try{lt(De)}catch(kn){console.error(kn)}});return function(De){return Dt.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ae(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function de(I=(0,Ce.z$)()){return!("file:"!==ae()&&"ionic:"!==ae()&&"capacitor:"!==ae()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kt(){try{const I=self.localStorage,w=x.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function St(I=(0,Ce.z$)()){return function at(){return(0,Ce.w1)()&&11===document?.documentMode}()||function Bt(I=(0,Ce.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,Ce.hl)()}catch{return An()&&(0,Ce.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bn(){return(function Je(){return"http:"===ae()||"https:"===ae()}()||(0,Ce.ru)()||de())&&!function Re(){return(0,Ce.b$)()||(0,Ce.UG)()}()&&Kt()&&!An()}function Bn(){return de()&&typeof document<"u"}function gi(){return(gi=(0,T.Z)(function*(){return!!Bn()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const et={LOCAL:"local",NONE:"none",SESSION:"session"},xi=x.aC,Oi="persistence";function _i(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,T.Z)(function*(I){yield I._initializationPromise;const w=Vr(),v=x.aF(Oi,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Vr(){var I;try{return(null===(I=function Ni(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Fr=x.aC;class $n{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(L),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var ve=this;return(0,T.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var ve=this;return(0,T.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Bn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,T.Z)(function*(){if(w.underlyingResolver)return;const v=yield function wr(){return gi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function yt(I){return I.unwrap()}function fn(I){return Qt(I)}function Qt(I){const{_tokenResponse:w}=I instanceof Ce.ZR?I.customData:I;if(!w)return null;if(!(I instanceof Ce.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return x.P.credentialFromResult(I);const v=w.providerId;if(!v||v===x.p.PASSWORD)return null;let A;switch(v){case x.p.GOOGLE:A=x.X;break;case x.p.FACEBOOK:A=x.W;break;case x.p.GITHUB:A=x.Y;break;case x.p.TWITTER:A=x.$;break;default:const{oauthIdToken:W,oauthAccessToken:ve,oauthTokenSecret:me,pendingToken:Oe,nonce:lt}=w;return ve||me||W||Oe?Oe?v.startsWith("saml.")?x.aQ._create(v,Oe):x.N._fromParams({providerId:v,signInMethod:v,pendingToken:Oe,idToken:W,accessToken:ve}):new x.Z(v).credential({idToken:W,accessToken:ve,rawNonce:lt}):null}return I instanceof Ce.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function an(I,w){return w.catch(v=>{throw v instanceof Ce.ZR&&function Va(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new yi(I,x.as(I,w));else if(A){const W=Qt(w),ve=w;W&&(ve.credential=W,ve.tenantId=A.tenantId||void 0,ve.email=A.email||void 0,ve.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:fn(v),additionalUserInfo:x.aq(v),user:Sn.getOrCreate(W)}})}function ki(I,w){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,T.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>an(I,v.confirm(A))}})).apply(this,arguments)}class yi{constructor(w,v){this.resolver=v,this.auth=function Lr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return an(yt(this.auth),this.resolver.resolveSignIn(w))}}class Sn{constructor(w){this._delegate=w,this.multiFactor=x.at(w)}static getOrCreate(w){return Sn.USER_MAP.has(w)||Sn.USER_MAP.set(w,new Sn(w)),Sn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,T.Z)(function*(){return ki(A.auth,x.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.d(v._delegate,w,$n))})()}linkWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield _i(x.aJ(v.auth)),x.g(v._delegate,w,$n)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return ki(this.auth,x.r(this._delegate,w,v))}reauthenticateWithPopup(w){return an(this.auth,x.e(this._delegate,w,$n))}reauthenticateWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield _i(x.aJ(v.auth)),x.h(v._delegate,w,$n)})()}sendEmailVerification(w){return x.ag(this._delegate,w)}unlink(w){var v=this;return(0,T.Z)(function*(){return yield x.ap(v._delegate,w),v})()}updateEmail(w){return x.al(this._delegate,w)}updatePassword(w){return x.am(this._delegate,w)}updatePhoneNumber(w){return x.u(this._delegate,w)}updateProfile(w){return x.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return x.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sn.USER_MAP=new WeakMap;const _n=x.aC;let Jn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;_n(W,"invalid-api-key",{appName:v.name}),_n(W,"invalid-api-key",{appName:v.name});const ve=typeof window<"u"?$n:void 0;this._delegate=A.initialize({options:{persistence:No(W,v.name),popupRedirectResolver:ve}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){x.K(this._delegate,v,A)}applyActionCode(v){return x.a7(this._delegate,v)}checkActionCode(v){return x.a8(this._delegate,v)}confirmPasswordReset(v,A){return x.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,T.Z)(function*(){return an(W._delegate,x.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return x.af(this._delegate,v)}isSignInWithEmailLink(v){return x.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,T.Z)(function*(){_n(bn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield x.j(v._delegate,$n);return A?an(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function j(I,w){(0,x.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:ve,error:me,complete:Oe}=Ur(v,A,W);return this._delegate.onAuthStateChanged(ve,me,Oe)}onIdTokenChanged(v,A,W){const{next:ve,error:me,complete:Oe}=Ur(v,A,W);return this._delegate.onIdTokenChanged(ve,me,Oe)}sendSignInLinkToEmail(v,A){return x.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return x.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,T.Z)(function*(){let W;switch(function mi(I,w){xi(Object.values(et).includes(w),I,"invalid-persistence-type"),(0,Ce.b$)()?xi(w!==et.SESSION,I,"unsupported-persistence-type"):(0,Ce.UG)()?xi(w===et.NONE,I,"unsupported-persistence-type"):An()?xi(w===et.NONE||w===et.LOCAL&&(0,Ce.hl)(),I,"unsupported-persistence-type"):xi(w===et.NONE||Kt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case et.SESSION:W=x.a;break;case et.LOCAL:W=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case et.NONE:W=x.U;break;default:return x.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return an(this._delegate,x.a0(this._delegate))}signInWithCredential(v){return an(this._delegate,x.a1(this._delegate,v))}signInWithCustomToken(v){return an(this._delegate,x.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return an(this._delegate,x.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return an(this._delegate,x.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return ki(this._delegate,x.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,T.Z)(function*(){return _n(bn(),A._delegate,"operation-not-supported-in-this-environment"),an(A._delegate,x.c(A._delegate,v,$n))})()}signInWithRedirect(v){var A=this;return(0,T.Z)(function*(){return _n(bn(),A._delegate,"operation-not-supported-in-this-environment"),yield _i(A._delegate),x.f(A._delegate,v,$n)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return x.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=et,I})();function Ur(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:me=>W(me&&Sn.getOrCreate(me)),error:w,complete:v}}function No(I,w){const v=function kr(I,w){const v=Vr();if(!v)return[];const A=x.aF(Oi,I,w);switch(v.getItem(A)){case et.NONE:return[x.U];case et.LOCAL:return[x.i,x.a];case et.SESSION:return[x.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(x.i)&&v.push(x.i),typeof window<"u")for(const A of[x.b,x.a])v.includes(A)||v.push(A);return v.includes(x.U)||v.push(x.U),v}class ms{constructor(){this.providerId="phone",this._delegate=new x.P(yt(q.Z.auth()))}static credential(w,v){return x.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}ms.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,ms.PROVIDER_ID=x.P.PROVIDER_ID;const qs=x.aC;class Fi{constructor(w,v,A=q.Z.app()){var W;qs(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new x.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(I){I.INTERNAL.registerComponent(new dn.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Jn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:ms,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:Fi,TwitterAuthProvider:x.$,Auth:Jn,AuthCredential:x.L,Error:Ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.5.0")}(q.Z)},861:(Pi,Cn,Me)=>{function T(x,Ce,ft,Gt,dn,xt,ct){try{var Z=x[xt](ct),ie=Z.value}catch(Te){return void ft(Te)}Z.done?Ce(ie):Promise.resolve(ie).then(Gt,dn)}function q(x){return function(){var Ce=this,ft=arguments;return new Promise(function(Gt,dn){var xt=x.apply(Ce,ft);function ct(ie){T(xt,Gt,dn,ct,Z,"next",ie)}function Z(ie){T(xt,Gt,dn,ct,Z,"throw",ie)}ct(void 0)})}}Me.d(Cn,{Z:()=>q})},582:(Pi,Cn,Me)=>{function Ce(L,$){var j={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&$.indexOf(V)<0&&(j[V]=L[V]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(V=Object.getOwnPropertySymbols(L);Q<V.length;Q++)$.indexOf(V[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,V[Q])&&(j[V[Q]]=L[V[Q]])}return j}function Te(L,$,j,V){return new(j||(j=Promise))(function(K,ae){function Je(at){try{Re(V.next(at))}catch(Bt){ae(Bt)}}function de(at){try{Re(V.throw(at))}catch(Bt){ae(Bt)}}function Re(at){at.done?K(at.value):function Q(K){return K instanceof j?K:new j(function(ae){ae(K)})}(at.value).then(Je,de)}Re((V=V.apply(L,$||[])).next())})}function Xe(L){return this instanceof Xe?(this.v=L,this):new Xe(L)}function Et(L,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,V=j.apply(L,$||[]),K=[];return Q={},ae("next"),ae("throw"),ae("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ae(St){V[St]&&(Q[St]=function(Kt){return new Promise(function(An,bn){K.push([St,Kt,An,bn])>1||Je(St,Kt)})})}function Je(St,Kt){try{!function de(St){St.value instanceof Xe?Promise.resolve(St.value.v).then(Re,at):Bt(K[0][2],St)}(V[St](Kt))}catch(An){Bt(K[0][3],An)}}function Re(St){Je("next",St)}function at(St){Je("throw",St)}function Bt(St,Kt){St(Kt),K.shift(),K.length&&Je(K[0][0],K[0][1])}}function mn(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=L[Symbol.asyncIterator];return $?$.call(L):(L=function rt(L){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&L[$],V=0;if(j)return j.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),j={},V("next"),V("throw"),V("return"),j[Symbol.asyncIterator]=function(){return this},j);function V(K){j[K]=L[K]&&function(ae){return new Promise(function(Je,de){!function Q(K,ae,Je,de){Promise.resolve(de).then(function(Re){K({value:Re,done:Je})},ae)}(Je,de,(ae=L[K](ae)).done,ae.value)})}}}Me.d(Cn,{FC:()=>Et,KL:()=>mn,_T:()=>Ce,mG:()=>Te,qq:()=>Xe}),"function"==typeof SuppressedError&&SuppressedError}},Pi=>{Pi(Pi.s=459)}]);